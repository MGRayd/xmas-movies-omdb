function h_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function f_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p_={exports:{}},Nc={},m_={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),VI=Symbol.for("react.portal"),UI=Symbol.for("react.fragment"),FI=Symbol.for("react.strict_mode"),BI=Symbol.for("react.profiler"),zI=Symbol.for("react.provider"),$I=Symbol.for("react.context"),HI=Symbol.for("react.forward_ref"),WI=Symbol.for("react.suspense"),qI=Symbol.for("react.memo"),QI=Symbol.for("react.lazy"),yg=Symbol.iterator;function KI(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var g_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y_=Object.assign,v_={};function Po(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||g_}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=Po.prototype;function Lf(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||g_}var jf=Lf.prototype=new __;jf.constructor=Lf;y_(jf,Po.prototype);jf.isPureReactComponent=!0;var vg=Array.isArray,w_=Object.prototype.hasOwnProperty,Mf={current:null},E_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)w_.call(e,r)&&!E_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:dl,type:t,key:s,ref:o,props:i,_owner:Mf.current}}function GI(t,e){return{$$typeof:dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===dl}function YI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _g=/\/+/g;function Td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YI(""+t.key):e.toString(36)}function vu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dl:case VI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Td(o,0):r,vg(i)?(n="",t!=null&&(n=t.replace(_g,"$&/")+"/"),vu(i,e,n,"",function(c){return c})):i!=null&&(Vf(i)&&(i=GI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_g,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Td(s,l);o+=vu(s,e,n,u,i)}else if(u=KI(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Td(s,l++),o+=vu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var r=[],i=0;return vu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function XI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},_u={transition:null},JI={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:_u,ReactCurrentOwner:Mf};function I_(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!Vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Po;Ee.Fragment=UI;Ee.Profiler=BI;Ee.PureComponent=Lf;Ee.StrictMode=FI;Ee.Suspense=WI;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI;Ee.act=I_;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Mf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w_.call(e,u)&&!E_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:dl,type:t.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(t){return t={$$typeof:$I,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zI,_context:t},t.Consumer=t};Ee.createElement=T_;Ee.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:HI,render:t}};Ee.isValidElement=Vf;Ee.lazy=function(t){return{$$typeof:QI,_payload:{_status:-1,_result:t},_init:XI}};Ee.memo=function(t,e){return{$$typeof:qI,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};Ee.unstable_act=I_;Ee.useCallback=function(t,e){return rn.current.useCallback(t,e)};Ee.useContext=function(t){return rn.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return rn.current.useEffect(t,e)};Ee.useId=function(){return rn.current.useId()};Ee.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return rn.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};Ee.useRef=function(t){return rn.current.useRef(t)};Ee.useState=function(t){return rn.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return rn.current.useTransition()};Ee.version="18.3.1";m_.exports=Ee;var D=m_.exports;const x_=f_(D),ZI=h_({__proto__:null,default:x_},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=D,tx=Symbol.for("react.element"),nx=Symbol.for("react.fragment"),rx=Object.prototype.hasOwnProperty,ix=ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sx={key:!0,ref:!0,__self:!0,__source:!0};function S_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rx.call(e,r)&&!sx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tx,type:t,key:s,ref:o,props:i,_owner:ix.current}}Nc.Fragment=nx;Nc.jsx=S_;Nc.jsxs=S_;p_.exports=Nc;var f=p_.exports,dh={},R_={exports:{}},bn={},A_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,re){var se=z.length;z.push(re);e:for(;0<se;){var we=se-1>>>1,oe=z[we];if(0<i(oe,re))z[we]=re,z[se]=oe,se=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var re=z[0],se=z.pop();if(se!==re){z[0]=se;e:for(var we=0,oe=z.length,Ce=oe>>>1;we<Ce;){var ut=2*(we+1)-1,Fe=z[ut],ct=ut+1,Xe=z[ct];if(0>i(Fe,se))ct<oe&&0>i(Xe,Fe)?(z[we]=Xe,z[ct]=se,we=ct):(z[we]=Fe,z[ut]=se,we=ut);else if(ct<oe&&0>i(Xe,se))z[we]=Xe,z[ct]=se,we=ct;else break e}}return re}function i(z,re){var se=z.sortIndex-re.sortIndex;return se!==0?se:z.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,m=null,g=3,E=!1,R=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(z){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=z)r(c),re.sortIndex=re.expirationTime,e(u,re);else break;re=n(c)}}function O(z){if(C=!1,A(z),!R)if(n(u)!==null)R=!0,nt(U);else{var re=n(c);re!==null&&Le(O,re.startTime-z)}}function U(z,re){R=!1,C&&(C=!1,S(v),v=-1),E=!0;var se=g;try{for(A(re),m=n(u);m!==null&&(!(m.expirationTime>re)||z&&!P());){var we=m.callback;if(typeof we=="function"){m.callback=null,g=m.priorityLevel;var oe=we(m.expirationTime<=re);re=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(u)&&r(u),A(re)}else r(u);m=n(u)}if(m!==null)var Ce=!0;else{var ut=n(c);ut!==null&&Le(O,ut.startTime-re),Ce=!1}return Ce}finally{m=null,g=se,E=!1}}var B=!1,y=null,v=-1,x=5,T=-1;function P(){return!(t.unstable_now()-T<x)}function k(){if(y!==null){var z=t.unstable_now();T=z;var re=!0;try{re=y(!0,z)}finally{re?I():(B=!1,y=null)}}else B=!1}var I;if(typeof w=="function")I=function(){w(k)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Oe=le.port2;le.port1.onmessage=k,I=function(){Oe.postMessage(null)}}else I=function(){b(k,0)};function nt(z){y=z,B||(B=!0,I())}function Le(z,re){v=b(function(){z(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){R||E||(R=!0,nt(U))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var se=g;g=re;try{return z()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,re){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=g;g=z;try{return re()}finally{g=se}},t.unstable_scheduleCallback=function(z,re,se){var we=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?we+se:we):se=we,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=se+oe,z={id:h++,callback:re,priorityLevel:z,startTime:se,expirationTime:oe,sortIndex:-1},se>we?(z.sortIndex=se,e(c,z),n(u)===null&&z===n(c)&&(C?(S(v),v=-1):C=!0,Le(O,se-we))):(z.sortIndex=oe,e(u,z),R||E||(R=!0,nt(U))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var re=g;return function(){var se=g;g=re;try{return z.apply(this,arguments)}finally{g=se}}}})(C_);A_.exports=C_;var ox=A_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax=D,kn=ox;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P_=new Set,ja={};function Ss(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(ja[t]=e,t=0;t<e.length;t++)P_.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hh=Object.prototype.hasOwnProperty,lx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wg={},Eg={};function ux(t){return hh.call(Eg,t)?!0:hh.call(wg,t)?!1:lx.test(t)?Eg[t]=!0:(wg[t]=!0,!1)}function cx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dx(t,e,n,r){if(e===null||typeof e>"u"||cx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uf=/[\-:]([a-z])/g;function Ff(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uf,Ff);Ut[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uf,Ff);Ut[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uf,Ff);Ut[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bf(t,e,n,r){var i=Ut.hasOwnProperty(e)?Ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dx(e,n,i,r)&&(n=null),r||i===null?ux(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=ax.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),$s=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),zf=Symbol.for("react.strict_mode"),fh=Symbol.for("react.profiler"),N_=Symbol.for("react.provider"),k_=Symbol.for("react.context"),$f=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),mh=Symbol.for("react.suspense_list"),Hf=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),b_=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function Jo(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,Id;function ha(t){if(Id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Id=e&&e[1]||""}return`
`+Id+t}var xd=!1;function Sd(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ha(t):""}function hx(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=Sd(t.type,!1),t;case 11:return t=Sd(t.type.render,!1),t;case 1:return t=Sd(t.type,!0),t;default:return""}}function gh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case $s:return"Portal";case fh:return"Profiler";case zf:return"StrictMode";case ph:return"Suspense";case mh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case k_:return(t.displayName||"Context")+".Consumer";case N_:return(t._context.displayName||"Context")+".Provider";case $f:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hf:return e=t.displayName||null,e!==null?e:gh(t.type)||"Memo";case ai:e=t._payload,t=t._init;try{return gh(t(e))}catch{}}return null}function fx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gh(e);case 8:return e===zf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function px(t){var e=D_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=px(t))}function O_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=D_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yh(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ig(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L_(t,e){e=e.checked,e!=null&&Bf(t,"checked",e,!1)}function vh(t,e){L_(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_h(t,e.type,n):e.hasOwnProperty("defaultValue")&&_h(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _h(t,e,n){(e!=="number"||Fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(fa(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function j_(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function M_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?M_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,V_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mx=["Webkit","ms","Moz","O"];Object.keys(Ea).forEach(function(t){mx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ea[e]=Ea[t]})});function U_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ea.hasOwnProperty(t)&&Ea[t]?(""+e).trim():e+"px"}function F_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=U_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var gx=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(t,e){if(e){if(gx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=null;function Wf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sh=null,no=null,ro=null;function Ag(t){if(t=pl(t)){if(typeof Sh!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Lc(e),Sh(t.stateNode,t.type,e))}}function B_(t){no?ro?ro.push(t):ro=[t]:no=t}function z_(){if(no){var t=no,e=ro;if(ro=no=null,Ag(t),e)for(t=0;t<e.length;t++)Ag(e[t])}}function $_(t,e){return t(e)}function H_(){}var Rd=!1;function W_(t,e,n){if(Rd)return t(e,n);Rd=!0;try{return $_(t,e,n)}finally{Rd=!1,(no!==null||ro!==null)&&(H_(),z_())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Rh=!1;if(Vr)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){Rh=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{Rh=!1}function yx(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ta=!1,Bu=null,zu=!1,Ah=null,vx={onError:function(t){Ta=!0,Bu=t}};function _x(t,e,n,r,i,s,o,l,u){Ta=!1,Bu=null,yx.apply(vx,arguments)}function wx(t,e,n,r,i,s,o,l,u){if(_x.apply(this,arguments),Ta){if(Ta){var c=Bu;Ta=!1,Bu=null}else throw Error(W(198));zu||(zu=!0,Ah=c)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(Rs(t)!==t)throw Error(W(188))}function Ex(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cg(i),t;if(s===r)return Cg(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Q_(t){return t=Ex(t),t!==null?K_(t):null}function K_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=K_(t);if(e!==null)return e;t=t.sibling}return null}var G_=kn.unstable_scheduleCallback,Pg=kn.unstable_cancelCallback,Tx=kn.unstable_shouldYield,Ix=kn.unstable_requestPaint,vt=kn.unstable_now,xx=kn.unstable_getCurrentPriorityLevel,qf=kn.unstable_ImmediatePriority,Y_=kn.unstable_UserBlockingPriority,$u=kn.unstable_NormalPriority,Sx=kn.unstable_LowPriority,X_=kn.unstable_IdlePriority,kc=null,hr=null;function Rx(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Px,Ax=Math.log,Cx=Math.LN2;function Px(t){return t>>>=0,t===0?32:31-(Ax(t)/Cx|0)|0}var Yl=64,Xl=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=pa(l):(s&=o,s!==0&&(r=pa(s)))}else o=n&~i,o!==0?r=pa(o):s!==0&&(r=pa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),i=1<<n,r|=t[n],e&=~i;return r}function Nx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Nx(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J_(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function bx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function Z_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ew,Kf,tw,nw,rw,Ph=!1,Jl=[],_i=null,wi=null,Ei=null,Ua=new Map,Fa=new Map,ui=[],Dx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ng(t,e){switch(t){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(e.pointerId)}}function ea(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&Kf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ox(t,e,n,r,i){switch(e){case"focusin":return _i=ea(_i,t,e,n,r,i),!0;case"dragenter":return wi=ea(wi,t,e,n,r,i),!0;case"mouseover":return Ei=ea(Ei,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ua.set(s,ea(Ua.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fa.set(s,ea(Fa.get(s)||null,t,e,n,r,i)),!0}return!1}function iw(t){var e=ns(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=q_(n),e!==null){t.blockedOn=e,rw(t.priority,function(){tw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xh=r,n.target.dispatchEvent(r),xh=null}else return e=pl(n),e!==null&&Kf(e),t.blockedOn=n,!1;e.shift()}return!0}function kg(t,e,n){wu(t)&&n.delete(e)}function Lx(){Ph=!1,_i!==null&&wu(_i)&&(_i=null),wi!==null&&wu(wi)&&(wi=null),Ei!==null&&wu(Ei)&&(Ei=null),Ua.forEach(kg),Fa.forEach(kg)}function ta(t,e){t.blockedOn===e&&(t.blockedOn=null,Ph||(Ph=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,Lx)))}function Ba(t){function e(i){return ta(i,t)}if(0<Jl.length){ta(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_i!==null&&ta(_i,t),wi!==null&&ta(wi,t),Ei!==null&&ta(Ei,t),Ua.forEach(e),Fa.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)iw(n),n.blockedOn===null&&ui.shift()}var io=Gr.ReactCurrentBatchConfig,Wu=!0;function jx(t,e,n,r){var i=Ve,s=io.transition;io.transition=null;try{Ve=1,Gf(t,e,n,r)}finally{Ve=i,io.transition=s}}function Mx(t,e,n,r){var i=Ve,s=io.transition;io.transition=null;try{Ve=4,Gf(t,e,n,r)}finally{Ve=i,io.transition=s}}function Gf(t,e,n,r){if(Wu){var i=Nh(t,e,n,r);if(i===null)Md(t,e,r,qu,n),Ng(t,r);else if(Ox(i,t,e,n,r))r.stopPropagation();else if(Ng(t,r),e&4&&-1<Dx.indexOf(t)){for(;i!==null;){var s=pl(i);if(s!==null&&ew(s),s=Nh(t,e,n,r),s===null&&Md(t,e,r,qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Md(t,e,r,null,n)}}var qu=null;function Nh(t,e,n,r){if(qu=null,t=Wf(r),t=ns(t),t!==null)if(e=Rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function sw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xx()){case qf:return 1;case Y_:return 4;case $u:case Sx:return 16;case X_:return 536870912;default:return 16}default:return 16}}var mi=null,Yf=null,Eu=null;function ow(){if(Eu)return Eu;var t,e=Yf,n=e.length,r,i="value"in mi?mi.value:mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Eu=i.slice(t,1<r?1-r:void 0)}function Tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function bg(){return!1}function Dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zl:bg,this.isPropagationStopped=bg,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xf=Dn(No),fl=ot({},No,{view:0,detail:0}),Vx=Dn(fl),Cd,Pd,na,bc=ot({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(Cd=t.screenX-na.screenX,Pd=t.screenY-na.screenY):Pd=Cd=0,na=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:Pd}}),Dg=Dn(bc),Ux=ot({},bc,{dataTransfer:0}),Fx=Dn(Ux),Bx=ot({},fl,{relatedTarget:0}),Nd=Dn(Bx),zx=ot({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),$x=Dn(zx),Hx=ot({},No,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wx=Dn(Hx),qx=ot({},No,{data:0}),Og=Dn(qx),Qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gx[t])?!!e[t]:!1}function Jf(){return Yx}var Xx=ot({},fl,{key:function(t){if(t.key){var e=Qx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jf,charCode:function(t){return t.type==="keypress"?Tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jx=Dn(Xx),Zx=ot({},bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=Dn(Zx),eS=ot({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jf}),tS=Dn(eS),nS=ot({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=Dn(nS),iS=ot({},bc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sS=Dn(iS),oS=[9,13,27,32],Zf=Vr&&"CompositionEvent"in window,Ia=null;Vr&&"documentMode"in document&&(Ia=document.documentMode);var aS=Vr&&"TextEvent"in window&&!Ia,aw=Vr&&(!Zf||Ia&&8<Ia&&11>=Ia),jg=" ",Mg=!1;function lw(t,e){switch(t){case"keyup":return oS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function lS(t,e){switch(t){case"compositionend":return uw(e);case"keypress":return e.which!==32?null:(Mg=!0,jg);case"textInput":return t=e.data,t===jg&&Mg?null:t;default:return null}}function uS(t,e){if(Ws)return t==="compositionend"||!Zf&&lw(t,e)?(t=ow(),Eu=Yf=mi=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aw&&e.locale!=="ko"?null:e.data;default:return null}}var cS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cS[t.type]:e==="textarea"}function cw(t,e,n,r){B_(r),e=Qu(e,"onChange"),0<e.length&&(n=new Xf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xa=null,za=null;function dS(t){Ew(t,0)}function Dc(t){var e=Ks(t);if(O_(e))return t}function hS(t,e){if(t==="change")return e}var dw=!1;if(Vr){var kd;if(Vr){var bd="oninput"in document;if(!bd){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),bd=typeof Ug.oninput=="function"}kd=bd}else kd=!1;dw=kd&&(!document.documentMode||9<document.documentMode)}function Fg(){xa&&(xa.detachEvent("onpropertychange",hw),za=xa=null)}function hw(t){if(t.propertyName==="value"&&Dc(za)){var e=[];cw(e,za,t,Wf(t)),W_(dS,e)}}function fS(t,e,n){t==="focusin"?(Fg(),xa=e,za=n,xa.attachEvent("onpropertychange",hw)):t==="focusout"&&Fg()}function pS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dc(za)}function mS(t,e){if(t==="click")return Dc(e)}function gS(t,e){if(t==="input"||t==="change")return Dc(e)}function yS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:yS;function $a(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hh.call(e,i)||!rr(t[i],e[i]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,e){var n=Bg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bg(n)}}function fw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pw(){for(var t=window,e=Fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=pw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fw(n.ownerDocument.documentElement,n)){if(r!==null&&ep(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zg(n,s);var o=zg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _S=Vr&&"documentMode"in document&&11>=document.documentMode,qs=null,kh=null,Sa=null,bh=!1;function $g(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||qs==null||qs!==Fu(r)||(r=qs,"selectionStart"in r&&ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sa&&$a(Sa,r)||(Sa=r,r=Qu(kh,"onSelect"),0<r.length&&(e=new Xf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Dd={},mw={};Vr&&(mw=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Oc(t){if(Dd[t])return Dd[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mw)return Dd[t]=e[n];return t}var gw=Oc("animationend"),yw=Oc("animationiteration"),vw=Oc("animationstart"),_w=Oc("transitionend"),ww=new Map,Hg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){ww.set(t,e),Ss(e,[t])}for(var Od=0;Od<Hg.length;Od++){var Ld=Hg[Od],wS=Ld.toLowerCase(),ES=Ld[0].toUpperCase()+Ld.slice(1);Mi(wS,"on"+ES)}Mi(gw,"onAnimationEnd");Mi(yw,"onAnimationIteration");Mi(vw,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(_w,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wx(r,e,void 0,t),t.currentTarget=null}function Ew(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Wg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Wg(i,l,c),s=u}}}if(zu)throw t=Ah,zu=!1,Ah=null,t}function Ke(t,e){var n=e[Mh];n===void 0&&(n=e[Mh]=new Set);var r=t+"__bubble";n.has(r)||(Tw(e,t,2,!1),n.add(r))}function jd(t,e,n){var r=0;e&&(r|=4),Tw(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[tu]){t[tu]=!0,P_.forEach(function(n){n!=="selectionchange"&&(TS.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,jd("selectionchange",!1,e))}}function Tw(t,e,n,r){switch(sw(e)){case 1:var i=jx;break;case 4:i=Mx;break;default:i=Gf}n=i.bind(null,e,n,t),i=void 0,!Rh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Md(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ns(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}W_(function(){var c=s,h=Wf(n),m=[];e:{var g=ww.get(t);if(g!==void 0){var E=Xf,R=t;switch(t){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":E=Jx;break;case"focusin":R="focus",E=Nd;break;case"focusout":R="blur",E=Nd;break;case"beforeblur":case"afterblur":E=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=tS;break;case gw:case yw:case vw:E=$x;break;case _w:E=rS;break;case"scroll":E=Vx;break;case"wheel":E=sS;break;case"copy":case"cut":case"paste":E=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Lg}var C=(e&4)!==0,b=!C&&t==="scroll",S=C?g!==null?g+"Capture":null:g;C=[];for(var w=c,A;w!==null;){A=w;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,S!==null&&(O=Va(w,S),O!=null&&C.push(Wa(w,O,A)))),b)break;w=w.return}0<C.length&&(g=new E(g,R,null,n,h),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==xh&&(R=n.relatedTarget||n.fromElement)&&(ns(R)||R[Ur]))break e;if((E||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,E?(R=n.relatedTarget||n.toElement,E=c,R=R?ns(R):null,R!==null&&(b=Rs(R),R!==b||R.tag!==5&&R.tag!==6)&&(R=null)):(E=null,R=c),E!==R)){if(C=Dg,O="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=Lg,O="onPointerLeave",S="onPointerEnter",w="pointer"),b=E==null?g:Ks(E),A=R==null?g:Ks(R),g=new C(O,w+"leave",E,n,h),g.target=b,g.relatedTarget=A,O=null,ns(h)===c&&(C=new C(S,w+"enter",R,n,h),C.target=A,C.relatedTarget=b,O=C),b=O,E&&R)t:{for(C=E,S=R,w=0,A=C;A;A=Vs(A))w++;for(A=0,O=S;O;O=Vs(O))A++;for(;0<w-A;)C=Vs(C),w--;for(;0<A-w;)S=Vs(S),A--;for(;w--;){if(C===S||S!==null&&C===S.alternate)break t;C=Vs(C),S=Vs(S)}C=null}else C=null;E!==null&&qg(m,g,E,C,!1),R!==null&&b!==null&&qg(m,b,R,C,!0)}}e:{if(g=c?Ks(c):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var U=hS;else if(Vg(g))if(dw)U=gS;else{U=pS;var B=fS}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=mS);if(U&&(U=U(t,c))){cw(m,U,n,h);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&_h(g,"number",g.value)}switch(B=c?Ks(c):window,t){case"focusin":(Vg(B)||B.contentEditable==="true")&&(qs=B,kh=c,Sa=null);break;case"focusout":Sa=kh=qs=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,$g(m,n,h);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":$g(m,n,h)}var y;if(Zf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ws?lw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(aw&&n.locale!=="ko"&&(Ws||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ws&&(y=ow()):(mi=h,Yf="value"in mi?mi.value:mi.textContent,Ws=!0)),B=Qu(c,v),0<B.length&&(v=new Og(v,t,null,n,h),m.push({event:v,listeners:B}),y?v.data=y:(y=uw(n),y!==null&&(v.data=y)))),(y=aS?lS(t,n):uS(t,n))&&(c=Qu(c,"onBeforeInput"),0<c.length&&(h=new Og("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=y))}Ew(m,e)})}function Wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Va(t,n),s!=null&&r.unshift(Wa(t,s,i)),s=Va(t,e),s!=null&&r.push(Wa(t,s,i))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Va(n,s),u!=null&&o.unshift(Wa(n,u,l))):i||(u=Va(n,s),u!=null&&o.push(Wa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IS=/\r\n?/g,xS=/\u0000|\uFFFD/g;function Qg(t){return(typeof t=="string"?t:""+t).replace(IS,`
`).replace(xS,"")}function nu(t,e,n){if(e=Qg(e),Qg(t)!==e&&n)throw Error(W(425))}function Ku(){}var Dh=null,Oh=null;function Lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,Kg=typeof Promise=="function"?Promise:void 0,RS=typeof queueMicrotask=="function"?queueMicrotask:typeof Kg<"u"?function(t){return Kg.resolve(null).then(t).catch(AS)}:jh;function AS(t){setTimeout(function(){throw t})}function Vd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ba(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ba(e)}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ko=Math.random().toString(36).slice(2),cr="__reactFiber$"+ko,qa="__reactProps$"+ko,Ur="__reactContainer$"+ko,Mh="__reactEvents$"+ko,CS="__reactListeners$"+ko,PS="__reactHandles$"+ko;function ns(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gg(t);t!==null;){if(n=t[cr])return n;t=Gg(t)}return e}t=n,n=t.parentNode}return null}function pl(t){return t=t[cr]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Lc(t){return t[qa]||null}var Vh=[],Gs=-1;function Vi(t){return{current:t}}function Ye(t){0>Gs||(t.current=Vh[Gs],Vh[Gs]=null,Gs--)}function We(t,e){Gs++,Vh[Gs]=t.current,t.current=e}var bi={},Yt=Vi(bi),pn=Vi(!1),ps=bi;function fo(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mn(t){return t=t.childContextTypes,t!=null}function Gu(){Ye(pn),Ye(Yt)}function Yg(t,e,n){if(Yt.current!==bi)throw Error(W(168));We(Yt,e),We(pn,n)}function Iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,fx(t)||"Unknown",i));return ot({},n,r)}function Yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,ps=Yt.current,We(Yt,t),We(pn,pn.current),!0}function Xg(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=Iw(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,Ye(pn),Ye(Yt),We(Yt,t)):Ye(pn),We(pn,n)}var Ar=null,jc=!1,Ud=!1;function xw(t){Ar===null?Ar=[t]:Ar.push(t)}function NS(t){jc=!0,xw(t)}function Ui(){if(!Ud&&Ar!==null){Ud=!0;var t=0,e=Ve;try{var n=Ar;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,jc=!1}catch(i){throw Ar!==null&&(Ar=Ar.slice(t+1)),G_(qf,Ui),i}finally{Ve=e,Ud=!1}}return null}var Ys=[],Xs=0,Xu=null,Ju=0,jn=[],Mn=0,ms=null,Pr=1,Nr="";function Xi(t,e){Ys[Xs++]=Ju,Ys[Xs++]=Xu,Xu=t,Ju=e}function Sw(t,e,n){jn[Mn++]=Pr,jn[Mn++]=Nr,jn[Mn++]=ms,ms=t;var r=Pr;t=Nr;var i=32-Xn(r)-1;r&=~(1<<i),n+=1;var s=32-Xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pr=1<<32-Xn(e)+i|n<<i|r,Nr=s+t}else Pr=1<<s|n<<i|r,Nr=t}function tp(t){t.return!==null&&(Xi(t,1),Sw(t,1,0))}function np(t){for(;t===Xu;)Xu=Ys[--Xs],Ys[Xs]=null,Ju=Ys[--Xs],Ys[Xs]=null;for(;t===ms;)ms=jn[--Mn],jn[Mn]=null,Nr=jn[--Mn],jn[Mn]=null,Pr=jn[--Mn],jn[Mn]=null}var Nn=null,An=null,tt=!1,Yn=null;function Rw(t,e){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,An=Ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Pr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,An=null,!0):!1;default:return!1}}function Uh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fh(t){if(tt){var e=An;if(e){var n=e;if(!Jg(t,e)){if(Uh(t))throw Error(W(418));e=Ti(n.nextSibling);var r=Nn;e&&Jg(t,e)?Rw(r,n):(t.flags=t.flags&-4097|2,tt=!1,Nn=t)}}else{if(Uh(t))throw Error(W(418));t.flags=t.flags&-4097|2,tt=!1,Nn=t}}}function Zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function ru(t){if(t!==Nn)return!1;if(!tt)return Zg(t),tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lh(t.type,t.memoizedProps)),e&&(e=An)){if(Uh(t))throw Aw(),Error(W(418));for(;e;)Rw(t,e),e=Ti(e.nextSibling)}if(Zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=Ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=Nn?Ti(t.stateNode.nextSibling):null;return!0}function Aw(){for(var t=An;t;)t=Ti(t.nextSibling)}function po(){An=Nn=null,tt=!1}function rp(t){Yn===null?Yn=[t]:Yn.push(t)}var kS=Gr.ReactCurrentBatchConfig;function ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ey(t){var e=t._init;return e(t._payload)}function Cw(t){function e(S,w){if(t){var A=S.deletions;A===null?(S.deletions=[w],S.flags|=16):A.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=Ri(S,w),S.index=0,S.sibling=null,S}function s(S,w,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<w?(S.flags|=2,w):A):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,w,A,O){return w===null||w.tag!==6?(w=qd(A,S.mode,O),w.return=S,w):(w=i(w,A),w.return=S,w)}function u(S,w,A,O){var U=A.type;return U===Hs?h(S,w,A.props.children,O,A.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===ai&&ey(U)===w.type)?(O=i(w,A.props),O.ref=ra(S,w,A),O.return=S,O):(O=Pu(A.type,A.key,A.props,null,S.mode,O),O.ref=ra(S,w,A),O.return=S,O)}function c(S,w,A,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Qd(A,S.mode,O),w.return=S,w):(w=i(w,A.children||[]),w.return=S,w)}function h(S,w,A,O,U){return w===null||w.tag!==7?(w=us(A,S.mode,O,U),w.return=S,w):(w=i(w,A),w.return=S,w)}function m(S,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=qd(""+w,S.mode,A),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:return A=Pu(w.type,w.key,w.props,null,S.mode,A),A.ref=ra(S,null,w),A.return=S,A;case $s:return w=Qd(w,S.mode,A),w.return=S,w;case ai:var O=w._init;return m(S,O(w._payload),A)}if(fa(w)||Jo(w))return w=us(w,S.mode,A,null),w.return=S,w;iu(S,w)}return null}function g(S,w,A,O){var U=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return U!==null?null:l(S,w,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ql:return A.key===U?u(S,w,A,O):null;case $s:return A.key===U?c(S,w,A,O):null;case ai:return U=A._init,g(S,w,U(A._payload),O)}if(fa(A)||Jo(A))return U!==null?null:h(S,w,A,O,null);iu(S,A)}return null}function E(S,w,A,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(A)||null,l(w,S,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ql:return S=S.get(O.key===null?A:O.key)||null,u(w,S,O,U);case $s:return S=S.get(O.key===null?A:O.key)||null,c(w,S,O,U);case ai:var B=O._init;return E(S,w,A,B(O._payload),U)}if(fa(O)||Jo(O))return S=S.get(A)||null,h(w,S,O,U,null);iu(w,O)}return null}function R(S,w,A,O){for(var U=null,B=null,y=w,v=w=0,x=null;y!==null&&v<A.length;v++){y.index>v?(x=y,y=null):x=y.sibling;var T=g(S,y,A[v],O);if(T===null){y===null&&(y=x);break}t&&y&&T.alternate===null&&e(S,y),w=s(T,w,v),B===null?U=T:B.sibling=T,B=T,y=x}if(v===A.length)return n(S,y),tt&&Xi(S,v),U;if(y===null){for(;v<A.length;v++)y=m(S,A[v],O),y!==null&&(w=s(y,w,v),B===null?U=y:B.sibling=y,B=y);return tt&&Xi(S,v),U}for(y=r(S,y);v<A.length;v++)x=E(y,S,v,A[v],O),x!==null&&(t&&x.alternate!==null&&y.delete(x.key===null?v:x.key),w=s(x,w,v),B===null?U=x:B.sibling=x,B=x);return t&&y.forEach(function(P){return e(S,P)}),tt&&Xi(S,v),U}function C(S,w,A,O){var U=Jo(A);if(typeof U!="function")throw Error(W(150));if(A=U.call(A),A==null)throw Error(W(151));for(var B=U=null,y=w,v=w=0,x=null,T=A.next();y!==null&&!T.done;v++,T=A.next()){y.index>v?(x=y,y=null):x=y.sibling;var P=g(S,y,T.value,O);if(P===null){y===null&&(y=x);break}t&&y&&P.alternate===null&&e(S,y),w=s(P,w,v),B===null?U=P:B.sibling=P,B=P,y=x}if(T.done)return n(S,y),tt&&Xi(S,v),U;if(y===null){for(;!T.done;v++,T=A.next())T=m(S,T.value,O),T!==null&&(w=s(T,w,v),B===null?U=T:B.sibling=T,B=T);return tt&&Xi(S,v),U}for(y=r(S,y);!T.done;v++,T=A.next())T=E(y,S,v,T.value,O),T!==null&&(t&&T.alternate!==null&&y.delete(T.key===null?v:T.key),w=s(T,w,v),B===null?U=T:B.sibling=T,B=T);return t&&y.forEach(function(k){return e(S,k)}),tt&&Xi(S,v),U}function b(S,w,A,O){if(typeof A=="object"&&A!==null&&A.type===Hs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ql:e:{for(var U=A.key,B=w;B!==null;){if(B.key===U){if(U=A.type,U===Hs){if(B.tag===7){n(S,B.sibling),w=i(B,A.props.children),w.return=S,S=w;break e}}else if(B.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===ai&&ey(U)===B.type){n(S,B.sibling),w=i(B,A.props),w.ref=ra(S,B,A),w.return=S,S=w;break e}n(S,B);break}else e(S,B);B=B.sibling}A.type===Hs?(w=us(A.props.children,S.mode,O,A.key),w.return=S,S=w):(O=Pu(A.type,A.key,A.props,null,S.mode,O),O.ref=ra(S,w,A),O.return=S,S=O)}return o(S);case $s:e:{for(B=A.key;w!==null;){if(w.key===B)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(S,w.sibling),w=i(w,A.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Qd(A,S.mode,O),w.return=S,S=w}return o(S);case ai:return B=A._init,b(S,w,B(A._payload),O)}if(fa(A))return R(S,w,A,O);if(Jo(A))return C(S,w,A,O);iu(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,A),w.return=S,S=w):(n(S,w),w=qd(A,S.mode,O),w.return=S,S=w),o(S)):n(S,w)}return b}var mo=Cw(!0),Pw=Cw(!1),Zu=Vi(null),ec=null,Js=null,ip=null;function sp(){ip=Js=ec=null}function op(t){var e=Zu.current;Ye(Zu),t._currentValue=e}function Bh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){ec=t,ip=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(ip!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if(ec===null)throw Error(W(308));Js=t,ec.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var rs=null;function ap(t){rs===null?rs=[t]:rs.push(t)}function Nw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ap(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var li=!1;function lp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,ap(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qf(t,n)}}function ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tc(t,e,n,r){var i=t.updateQueue;li=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=c=u=null,l=s;do{var g=l.lane,E=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,C=l;switch(g=e,E=n,C.tag){case 1:if(R=C.payload,typeof R=="function"){m=R.call(E,m,g);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=C.payload,g=typeof R=="function"?R.call(E,m,g):R,g==null)break e;m=ot({},m,g);break e;case 2:li=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=E,u=m):h=h.next=E,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=m}}function ny(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var ml={},fr=Vi(ml),Qa=Vi(ml),Ka=Vi(ml);function is(t){if(t===ml)throw Error(W(174));return t}function up(t,e){switch(We(Ka,e),We(Qa,t),We(fr,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eh(e,t)}Ye(fr),We(fr,e)}function go(){Ye(fr),Ye(Qa),Ye(Ka)}function bw(t){is(Ka.current);var e=is(fr.current),n=Eh(e,t.type);e!==n&&(We(Qa,t),We(fr,n))}function cp(t){Qa.current===t&&(Ye(fr),Ye(Qa))}var it=Vi(0);function nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fd=[];function dp(){for(var t=0;t<Fd.length;t++)Fd[t]._workInProgressVersionPrimary=null;Fd.length=0}var xu=Gr.ReactCurrentDispatcher,Bd=Gr.ReactCurrentBatchConfig,gs=0,st=null,St=null,Nt=null,rc=!1,Ra=!1,Ga=0,bS=0;function Ht(){throw Error(W(321))}function hp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function fp(t,e,n,r,i,s){if(gs=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?jS:MS,t=n(r,i),Ra){s=0;do{if(Ra=!1,Ga=0,25<=s)throw Error(W(301));s+=1,Nt=St=null,e.updateQueue=null,xu.current=VS,t=n(r,i)}while(Ra)}if(xu.current=ic,e=St!==null&&St.next!==null,gs=0,Nt=St=st=null,rc=!1,e)throw Error(W(300));return t}function pp(){var t=Ga!==0;return Ga=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?st.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function zn(){if(St===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Nt===null?st.memoizedState:Nt.next;if(e!==null)Nt=e,St=t;else{if(t===null)throw Error(W(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Nt===null?st.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Ya(t,e){return typeof e=="function"?e(t):e}function zd(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=St,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((gs&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,st.lanes|=h,ys|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,rr(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,ys|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $d(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);rr(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Dw(){}function Ow(t,e){var n=st,r=zn(),i=e(),s=!rr(r.memoizedState,i);if(s&&(r.memoizedState=i,dn=!0),r=r.queue,mp(Mw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,Xa(9,jw.bind(null,n,r,i,e),void 0,null),kt===null)throw Error(W(349));gs&30||Lw(n,e,i)}return i}function Lw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jw(t,e,n,r){e.value=n,e.getSnapshot=r,Vw(e)&&Uw(t)}function Mw(t,e,n){return n(function(){Vw(e)&&Uw(t)})}function Vw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function Uw(t){var e=Fr(t,1);e!==null&&Jn(e,t,1,-1)}function ry(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:t},e.queue=t,t=t.dispatch=LS.bind(null,st,t),[e.memoizedState,t]}function Xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fw(){return zn().memoizedState}function Su(t,e,n,r){var i=ur();st.flags|=t,i.memoizedState=Xa(1|e,n,void 0,r===void 0?null:r)}function Mc(t,e,n,r){var i=zn();r=r===void 0?null:r;var s=void 0;if(St!==null){var o=St.memoizedState;if(s=o.destroy,r!==null&&hp(r,o.deps)){i.memoizedState=Xa(e,n,s,r);return}}st.flags|=t,i.memoizedState=Xa(1|e,n,s,r)}function iy(t,e){return Su(8390656,8,t,e)}function mp(t,e){return Mc(2048,8,t,e)}function Bw(t,e){return Mc(4,2,t,e)}function zw(t,e){return Mc(4,4,t,e)}function $w(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hw(t,e,n){return n=n!=null?n.concat([t]):null,Mc(4,4,$w.bind(null,e,t),n)}function gp(){}function Ww(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qw(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qw(t,e,n){return gs&21?(rr(n,e)||(n=J_(),st.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function DS(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Bd.transition;Bd.transition={};try{t(!1),e()}finally{Ve=n,Bd.transition=r}}function Kw(){return zn().memoizedState}function OS(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gw(t))Yw(e,n);else if(n=Nw(t,e,n,r),n!==null){var i=nn();Jn(n,t,r,i),Xw(n,e,r)}}function LS(t,e,n){var r=Si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gw(t))Yw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,rr(l,o)){var u=e.interleaved;u===null?(i.next=i,ap(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Nw(t,e,i,r),n!==null&&(i=nn(),Jn(n,t,r,i),Xw(n,e,r))}}function Gw(t){var e=t.alternate;return t===st||e!==null&&e===st}function Yw(t,e){Ra=rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qf(t,n)}}var ic={readContext:Bn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},jS={readContext:Bn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:iy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,$w.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OS.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:ry,useDebugValue:gp,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=ry(!1),e=t[0];return t=DS.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=ur();if(tt){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),kt===null)throw Error(W(349));gs&30||Lw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iy(Mw.bind(null,r,s,t),[t]),r.flags|=2048,Xa(9,jw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ur(),e=kt.identifierPrefix;if(tt){var n=Nr,r=Pr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MS={readContext:Bn,useCallback:Ww,useContext:Bn,useEffect:mp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:qw,useReducer:zd,useRef:Fw,useState:function(){return zd(Ya)},useDebugValue:gp,useDeferredValue:function(t){var e=zn();return Qw(e,St.memoizedState,t)},useTransition:function(){var t=zd(Ya)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Dw,useSyncExternalStore:Ow,useId:Kw,unstable_isNewReconciler:!1},VS={readContext:Bn,useCallback:Ww,useContext:Bn,useEffect:mp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:qw,useReducer:$d,useRef:Fw,useState:function(){return $d(Ya)},useDebugValue:gp,useDeferredValue:function(t){var e=zn();return St===null?e.memoizedState=t:Qw(e,St.memoizedState,t)},useTransition:function(){var t=$d(Ya)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Dw,useSyncExternalStore:Ow,useId:Kw,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vc={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),i=Si(t),s=Lr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&(Jn(e,t,i,r),Iu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),i=Si(t),s=Lr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&(Jn(e,t,i,r),Iu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=Si(t),i=Lr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ii(t,i,r),e!==null&&(Jn(e,t,r,n),Iu(e,t,r))}};function sy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$a(n,r)||!$a(i,s):!0}function Jw(t,e,n){var r=!1,i=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=Bn(s):(i=mn(e)?ps:Yt.current,r=e.contextTypes,s=(r=r!=null)?fo(t,i):bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function oy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vc.enqueueReplaceState(e,e.state,null)}function $h(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},lp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bn(s):(s=mn(e)?ps:Yt.current,i.context=fo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vc.enqueueReplaceState(i,i.state,null),tc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,e){try{var n="",r=e;do n+=hx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var US=typeof WeakMap=="function"?WeakMap:Map;function Zw(t,e,n){n=Lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oc||(oc=!0,ef=r),Hh(t,e)},n}function eE(t,e,n){n=Lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hh(t,e),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ay(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new US;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ZS.bind(null,t,e,n),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lr(-1,1),e.tag=2,Ii(n,e,1))),n.lanes|=1),t)}var FS=Gr.ReactCurrentOwner,dn=!1;function tn(t,e,n,r){e.child=t===null?Pw(e,null,n,r):mo(e,t.child,n,r)}function cy(t,e,n,r,i){n=n.render;var s=e.ref;return so(e,i),r=fp(t,e,n,r,s,i),n=pp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(tt&&n&&tp(e),e.flags|=1,tn(t,e,r,i),e.child)}function dy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tE(t,e,s,r,i)):(t=Pu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(o,r)&&t.ref===e.ref)return Br(t,e,i)}return e.flags|=1,t=Ri(s,r),t.ref=e.ref,t.return=e,e.child=t}function tE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($a(s,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Br(t,e,i)}return Wh(t,e,n,r,i)}function nE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(eo,Sn),Sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(eo,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(eo,Sn),Sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We(eo,Sn),Sn|=r;return tn(t,e,i,n),e.child}function rE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wh(t,e,n,r,i){var s=mn(n)?ps:Yt.current;return s=fo(e,s),so(e,i),n=fp(t,e,n,r,s,i),r=pp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(tt&&r&&tp(e),e.flags|=1,tn(t,e,n,i),e.child)}function hy(t,e,n,r,i){if(mn(n)){var s=!0;Yu(e)}else s=!1;if(so(e,i),e.stateNode===null)Ru(t,e),Jw(e,n,r),$h(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bn(c):(c=mn(n)?ps:Yt.current,c=fo(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&oy(e,o,r,c),li=!1;var g=e.memoizedState;o.state=g,tc(e,r,o,i),u=e.memoizedState,l!==r||g!==u||pn.current||li?(typeof h=="function"&&(zh(e,n,h,r),u=e.memoizedState),(l=li||sy(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Qn(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bn(u):(u=mn(n)?ps:Yt.current,u=fo(e,u));var E=n.getDerivedStateFromProps;(h=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&oy(e,o,r,u),li=!1,g=e.memoizedState,o.state=g,tc(e,r,o,i);var R=e.memoizedState;l!==m||g!==R||pn.current||li?(typeof E=="function"&&(zh(e,n,E,r),R=e.memoizedState),(c=li||sy(e,n,c,r,g,R,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return qh(t,e,n,r,s,i)}function qh(t,e,n,r,i,s){rE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xg(e,n,!1),Br(t,e,s);r=e.stateNode,FS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mo(e,t.child,null,s),e.child=mo(e,null,l,s)):tn(t,e,l,s),e.memoizedState=r.state,i&&Xg(e,n,!0),e.child}function iE(t){var e=t.stateNode;e.pendingContext?Yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yg(t,e.context,!1),up(t,e.containerInfo)}function fy(t,e,n,r,i){return po(),rp(i),e.flags|=256,tn(t,e,n,r),e.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Kh(t){return{baseLanes:t,cachePool:null,transitions:null}}function sE(t,e,n){var r=e.pendingProps,i=it.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(it,i&1),t===null)return Fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Bc(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kh(n),e.memoizedState=Qh,t):yp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return BS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ri(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ri(l,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Kh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qh,r}return s=t.child,t=s.sibling,r=Ri(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yp(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,r){return r!==null&&rp(r),mo(e,t.child,null,n),t=yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Hd(Error(W(422))),su(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Bc({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mo(e,t.child,null,o),e.child.memoizedState=Kh(o),e.memoizedState=Qh,s);if(!(e.mode&1))return su(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(W(419)),r=Hd(s,r,void 0),su(t,e,o,r)}if(l=(o&t.childLanes)!==0,dn||l){if(r=kt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fr(t,i),Jn(r,t,i,-1))}return Ip(),r=Hd(Error(W(421))),su(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=eR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,An=Ti(i.nextSibling),Nn=e,tt=!0,Yn=null,t!==null&&(jn[Mn++]=Pr,jn[Mn++]=Nr,jn[Mn++]=ms,Pr=t.id,Nr=t.overflow,ms=e),e=yp(e,r.children),e.flags|=4096,e)}function py(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bh(t.return,e,n)}function Wd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function oE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,n,e);else if(t.tag===19)py(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(it,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Wd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Wd(e,!0,n,null,s);break;case"together":Wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zS(t,e,n){switch(e.tag){case 3:iE(e),po();break;case 5:bw(e);break;case 1:mn(e.type)&&Yu(e);break;case 4:up(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;We(Zu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?sE(t,e,n):(We(it,it.current&1),t=Br(t,e,n),t!==null?t.sibling:null);We(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return oE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,nE(t,e,n)}return Br(t,e,n)}var aE,Gh,lE,uE;aE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gh=function(){};lE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,is(fr.current);var s=null;switch(n){case"input":i=yh(t,i),r=yh(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=wh(t,i),r=wh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ku)}Th(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ja.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ja.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ke("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};uE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ia(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $S(t,e,n){var r=e.pendingProps;switch(np(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return mn(e.type)&&Gu(),Wt(e),null;case 3:return r=e.stateNode,go(),Ye(pn),Ye(Yt),dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(rf(Yn),Yn=null))),Gh(t,e),Wt(e),null;case 5:cp(e);var i=is(Ka.current);if(n=e.type,t!==null&&e.stateNode!=null)lE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Wt(e),null}if(t=is(fr.current),ru(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cr]=e,r[qa]=s,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(i=0;i<ma.length;i++)Ke(ma[i],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":Ig(r,s),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",r);break;case"textarea":Sg(r,s),Ke("invalid",r)}Th(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),i=["children",""+l]):ja.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ke("scroll",r)}switch(n){case"input":Kl(r),xg(r,s,!0);break;case"textarea":Kl(r),Rg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ku)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cr]=e,t[qa]=r,aE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ih(n,r),n){case"dialog":Ke("cancel",t),Ke("close",t),i=r;break;case"iframe":case"object":case"embed":Ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<ma.length;i++)Ke(ma[i],t);i=r;break;case"source":Ke("error",t),i=r;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=r;break;case"details":Ke("toggle",t),i=r;break;case"input":Ig(t,r),i=yh(t,r),Ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Ke("invalid",t);break;case"textarea":Sg(t,r),i=wh(t,r),Ke("invalid",t);break;default:i=r}Th(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?F_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&V_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ma(t,u):typeof u=="number"&&Ma(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ja.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ke("scroll",t):u!=null&&Bf(t,s,u,o))}switch(n){case"input":Kl(t),xg(t,r,!1);break;case"textarea":Kl(t),Rg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ku)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)uE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=is(Ka.current),is(fr.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(s=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return Wt(e),null;case 13:if(Ye(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&An!==null&&e.mode&1&&!(e.flags&128))Aw(),po(),e.flags|=98560,s=!1;else if(s=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[cr]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else Yn!==null&&(rf(Yn),Yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Rt===0&&(Rt=3):Ip())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return go(),Gh(t,e),t===null&&Ha(e.stateNode.containerInfo),Wt(e),null;case 10:return op(e.type._context),Wt(e),null;case 17:return mn(e.type)&&Gu(),Wt(e),null;case 19:if(Ye(it),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ia(s,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nc(t),o!==null){for(e.flags|=128,ia(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&vt()>vo&&(e.flags|=128,r=!0,ia(s,!1),e.lanes=4194304)}else{if(!r)if(t=nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!tt)return Wt(e),null}else 2*vt()-s.renderingStartTime>vo&&n!==1073741824&&(e.flags|=128,r=!0,ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,n=it.current,We(it,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return Tp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function HS(t,e){switch(np(e),e.tag){case 1:return mn(e.type)&&Gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return go(),Ye(pn),Ye(Yt),dp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cp(e),null;case 13:if(Ye(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(it),null;case 4:return go(),null;case 10:return op(e.type._context),null;case 22:case 23:return Tp(),null;case 24:return null;default:return null}}var ou=!1,Kt=!1,WS=typeof WeakSet=="function"?WeakSet:Set,X=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function Yh(t,e,n){try{n()}catch(r){ht(t,e,r)}}var my=!1;function qS(t,e){if(Dh=Wu,t=pw(),ep(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var E;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)g=m,m=E;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++h===r&&(u=o),(E=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oh={focusedElem:t,selectionRange:n},Wu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var C=R.memoizedProps,b=R.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?C:Qn(e.type,C),b);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(O){ht(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return R=my,my=!1,R}function Aa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Yh(e,n,s)}i=i.next}while(i!==r)}}function Uc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cE(t){var e=t.alternate;e!==null&&(t.alternate=null,cE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[qa],delete e[Mh],delete e[CS],delete e[PS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dE(t){return t.tag===5||t.tag===3||t.tag===4}function gy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ku));else if(r!==4&&(t=t.child,t!==null))for(Jh(t,e,n),t=t.sibling;t!==null;)Jh(t,e,n),t=t.sibling}function Zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zh(t,e,n),t=t.sibling;t!==null;)Zh(t,e,n),t=t.sibling}var Ot=null,Kn=!1;function ni(t,e,n){for(n=n.child;n!==null;)hE(t,e,n),n=n.sibling}function hE(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(kc,n)}catch{}switch(n.tag){case 5:Kt||Zs(n,e);case 6:var r=Ot,i=Kn;Ot=null,ni(t,e,n),Ot=r,Kn=i,Ot!==null&&(Kn?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Kn?(t=Ot,n=n.stateNode,t.nodeType===8?Vd(t.parentNode,n):t.nodeType===1&&Vd(t,n),Ba(t)):Vd(Ot,n.stateNode));break;case 4:r=Ot,i=Kn,Ot=n.stateNode.containerInfo,Kn=!0,ni(t,e,n),Ot=r,Kn=i;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yh(n,e,o),i=i.next}while(i!==r)}ni(t,e,n);break;case 1:if(!Kt&&(Zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ht(n,e,l)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,ni(t,e,n),Kt=r):ni(t,e,n);break;default:ni(t,e,n)}}function yy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WS),e.forEach(function(r){var i=tR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,Kn=!1;break e;case 3:Ot=l.stateNode.containerInfo,Kn=!0;break e;case 4:Ot=l.stateNode.containerInfo,Kn=!0;break e}l=l.return}if(Ot===null)throw Error(W(160));hE(s,o,i),Ot=null,Kn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ht(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fE(e,t),e=e.sibling}function fE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),lr(t),r&4){try{Aa(3,t,t.return),Uc(3,t)}catch(C){ht(t,t.return,C)}try{Aa(5,t,t.return)}catch(C){ht(t,t.return,C)}}break;case 1:qn(e,t),lr(t),r&512&&n!==null&&Zs(n,n.return);break;case 5:if(qn(e,t),lr(t),r&512&&n!==null&&Zs(n,n.return),t.flags&32){var i=t.stateNode;try{Ma(i,"")}catch(C){ht(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&L_(i,s),Ih(l,o);var c=Ih(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?F_(i,m):h==="dangerouslySetInnerHTML"?V_(i,m):h==="children"?Ma(i,m):Bf(i,h,m,c)}switch(l){case"input":vh(i,s);break;case"textarea":j_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?to(i,!!s.multiple,E,!1):g!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[qa]=s}catch(C){ht(t,t.return,C)}}break;case 6:if(qn(e,t),lr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){ht(t,t.return,C)}}break;case 3:if(qn(e,t),lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ba(e.containerInfo)}catch(C){ht(t,t.return,C)}break;case 4:qn(e,t),lr(t);break;case 13:qn(e,t),lr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wp=vt())),r&4&&yy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(c=Kt)||h,qn(e,t),Kt=c):qn(e,t),lr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(m=X=h;X!==null;){switch(g=X,E=g.child,g.tag){case 0:case 11:case 14:case 15:Aa(4,g,g.return);break;case 1:Zs(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(C){ht(r,n,C)}}break;case 5:Zs(g,g.return);break;case 22:if(g.memoizedState!==null){_y(m);continue}}E!==null?(E.return=g,X=E):_y(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=U_("display",o))}catch(C){ht(t,t.return,C)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(C){ht(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:qn(e,t),lr(t),r&4&&yy(t);break;case 21:break;default:qn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dE(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ma(i,""),r.flags&=-33);var s=gy(t);Zh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=gy(t);Jh(t,l,o);break;default:throw Error(W(161))}}catch(u){ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QS(t,e,n){X=t,pE(t)}function pE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ou;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Kt;l=ou;var c=Kt;if(ou=o,(Kt=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?wy(i):u!==null?(u.return=o,X=u):wy(i);for(;s!==null;)X=s,pE(s),s=s.sibling;X=i,ou=l,Kt=c}vy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):vy(t)}}function vy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||Uc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ny(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ny(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Ba(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Kt||e.flags&512&&Xh(e)}catch(g){ht(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function _y(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function wy(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uc(4,e)}catch(u){ht(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ht(e,i,u)}}var s=e.return;try{Xh(e)}catch(u){ht(e,s,u)}break;case 5:var o=e.return;try{Xh(e)}catch(u){ht(e,o,u)}}}catch(u){ht(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var KS=Math.ceil,sc=Gr.ReactCurrentDispatcher,vp=Gr.ReactCurrentOwner,Un=Gr.ReactCurrentBatchConfig,ke=0,kt=null,Tt=null,Mt=0,Sn=0,eo=Vi(0),Rt=0,Ja=null,ys=0,Fc=0,_p=0,Ca=null,un=null,wp=0,vo=1/0,Rr=null,oc=!1,ef=null,xi=null,au=!1,gi=null,ac=0,Pa=0,tf=null,Au=-1,Cu=0;function nn(){return ke&6?vt():Au!==-1?Au:Au=vt()}function Si(t){return t.mode&1?ke&2&&Mt!==0?Mt&-Mt:kS.transition!==null?(Cu===0&&(Cu=J_()),Cu):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:sw(t.type)),t):1}function Jn(t,e,n,r){if(50<Pa)throw Pa=0,tf=null,Error(W(185));hl(t,n,r),(!(ke&2)||t!==kt)&&(t===kt&&(!(ke&2)&&(Fc|=n),Rt===4&&ci(t,Mt)),gn(t,r),n===1&&ke===0&&!(e.mode&1)&&(vo=vt()+500,jc&&Ui()))}function gn(t,e){var n=t.callbackNode;kx(t,e);var r=Hu(t,t===kt?Mt:0);if(r===0)n!==null&&Pg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pg(n),e===1)t.tag===0?NS(Ey.bind(null,t)):xw(Ey.bind(null,t)),RS(function(){!(ke&6)&&Ui()}),n=null;else{switch(Z_(r)){case 1:n=qf;break;case 4:n=Y_;break;case 16:n=$u;break;case 536870912:n=X_;break;default:n=$u}n=TE(n,mE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mE(t,e){if(Au=-1,Cu=0,ke&6)throw Error(W(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Hu(t,t===kt?Mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lc(t,r);else{e=r;var i=ke;ke|=2;var s=yE();(kt!==t||Mt!==e)&&(Rr=null,vo=vt()+500,ls(t,e));do try{XS();break}catch(l){gE(t,l)}while(!0);sp(),sc.current=s,ke=i,Tt!==null?e=0:(kt=null,Mt=0,e=Rt)}if(e!==0){if(e===2&&(i=Ch(t),i!==0&&(r=i,e=nf(t,i))),e===1)throw n=Ja,ls(t,0),ci(t,r),gn(t,vt()),n;if(e===6)ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!GS(i)&&(e=lc(t,r),e===2&&(s=Ch(t),s!==0&&(r=s,e=nf(t,s))),e===1))throw n=Ja,ls(t,0),ci(t,r),gn(t,vt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Ji(t,un,Rr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=wp+500-vt(),10<e)){if(Hu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=jh(Ji.bind(null,t,un,Rr),e);break}Ji(t,un,Rr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KS(r/1960))-r,10<r){t.timeoutHandle=jh(Ji.bind(null,t,un,Rr),r);break}Ji(t,un,Rr);break;case 5:Ji(t,un,Rr);break;default:throw Error(W(329))}}}return gn(t,vt()),t.callbackNode===n?mE.bind(null,t):null}function nf(t,e){var n=Ca;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=lc(t,e),t!==2&&(e=un,un=n,e!==null&&rf(e)),t}function rf(t){un===null?un=t:un.push.apply(un,t)}function GS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!rr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~_p,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function Ey(t){if(ke&6)throw Error(W(327));oo();var e=Hu(t,0);if(!(e&1))return gn(t,vt()),null;var n=lc(t,e);if(t.tag!==0&&n===2){var r=Ch(t);r!==0&&(e=r,n=nf(t,r))}if(n===1)throw n=Ja,ls(t,0),ci(t,e),gn(t,vt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ji(t,un,Rr),gn(t,vt()),null}function Ep(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(vo=vt()+500,jc&&Ui())}}function vs(t){gi!==null&&gi.tag===0&&!(ke&6)&&oo();var e=ke;ke|=1;var n=Un.transition,r=Ve;try{if(Un.transition=null,Ve=1,t)return t()}finally{Ve=r,Un.transition=n,ke=e,!(ke&6)&&Ui()}}function Tp(){Sn=eo.current,Ye(eo)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SS(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(np(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gu();break;case 3:go(),Ye(pn),Ye(Yt),dp();break;case 5:cp(r);break;case 4:go();break;case 13:Ye(it);break;case 19:Ye(it);break;case 10:op(r.type._context);break;case 22:case 23:Tp()}n=n.return}if(kt=t,Tt=t=Ri(t.current,null),Mt=Sn=e,Rt=0,Ja=null,_p=Fc=ys=0,un=Ca=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rs=null}return t}function gE(t,e){do{var n=Tt;try{if(sp(),xu.current=ic,rc){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rc=!1}if(gs=0,Nt=St=st=null,Ra=!1,Ga=0,vp.current=null,n===null||n.return===null){Rt=1,Ja=e,Tt=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Mt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=ly(o);if(E!==null){E.flags&=-257,uy(E,o,l,s,e),E.mode&1&&ay(s,c,e),e=E,u=c;var R=e.updateQueue;if(R===null){var C=new Set;C.add(u),e.updateQueue=C}else R.add(u);break e}else{if(!(e&1)){ay(s,c,e),Ip();break e}u=Error(W(426))}}else if(tt&&l.mode&1){var b=ly(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),uy(b,o,l,s,e),rp(yo(u,l));break e}}s=u=yo(u,l),Rt!==4&&(Rt=2),Ca===null?Ca=[s]:Ca.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Zw(s,u,e);ty(s,S);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(xi===null||!xi.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=eE(s,l,e);ty(s,O);break e}}s=s.return}while(s!==null)}_E(n)}catch(U){e=U,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function yE(){var t=sc.current;return sc.current=ic,t===null?ic:t}function Ip(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),kt===null||!(ys&268435455)&&!(Fc&268435455)||ci(kt,Mt)}function lc(t,e){var n=ke;ke|=2;var r=yE();(kt!==t||Mt!==e)&&(Rr=null,ls(t,e));do try{YS();break}catch(i){gE(t,i)}while(!0);if(sp(),ke=n,sc.current=r,Tt!==null)throw Error(W(261));return kt=null,Mt=0,Rt}function YS(){for(;Tt!==null;)vE(Tt)}function XS(){for(;Tt!==null&&!Tx();)vE(Tt)}function vE(t){var e=EE(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?_E(t):Tt=e,vp.current=null}function _E(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HS(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,Tt=null;return}}else if(n=$S(n,e,Sn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);Rt===0&&(Rt=5)}function Ji(t,e,n){var r=Ve,i=Un.transition;try{Un.transition=null,Ve=1,JS(t,e,n,r)}finally{Un.transition=i,Ve=r}return null}function JS(t,e,n,r){do oo();while(gi!==null);if(ke&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bx(t,s),t===kt&&(Tt=kt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,TE($u,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Un.transition,Un.transition=null;var o=Ve;Ve=1;var l=ke;ke|=4,vp.current=null,qS(t,n),fE(n,t),vS(Oh),Wu=!!Dh,Oh=Dh=null,t.current=n,QS(n),Ix(),ke=l,Ve=o,Un.transition=s}else t.current=n;if(au&&(au=!1,gi=t,ac=i),s=t.pendingLanes,s===0&&(xi=null),Rx(n.stateNode),gn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oc)throw oc=!1,t=ef,ef=null,t;return ac&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===tf?Pa++:(Pa=0,tf=t):Pa=0,Ui(),null}function oo(){if(gi!==null){var t=Z_(ac),e=Un.transition,n=Ve;try{if(Un.transition=null,Ve=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,ac=0,ke&6)throw Error(W(331));var i=ke;for(ke|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Aa(8,h,s)}var m=h.child;if(m!==null)m.return=h,X=m;else for(;X!==null;){h=X;var g=h.sibling,E=h.return;if(cE(h),h===c){X=null;break}if(g!==null){g.return=E,X=g;break}X=E}}}var R=s.alternate;if(R!==null){var C=R.child;if(C!==null){R.child=null;do{var b=C.sibling;C.sibling=null,C=b}while(C!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Aa(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,X=S;break e}X=s.return}}var w=t.current;for(X=w;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=w;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Uc(9,l)}}catch(U){ht(l,l.return,U)}if(l===o){X=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,X=O;break e}X=l.return}}if(ke=i,Ui(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(kc,t)}catch{}r=!0}return r}finally{Ve=n,Un.transition=e}}return!1}function Ty(t,e,n){e=yo(n,e),e=Zw(t,e,1),t=Ii(t,e,1),e=nn(),t!==null&&(hl(t,1,e),gn(t,e))}function ht(t,e,n){if(t.tag===3)Ty(t,t,n);else for(;e!==null;){if(e.tag===3){Ty(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=yo(n,t),t=eE(e,t,1),e=Ii(e,t,1),t=nn(),e!==null&&(hl(e,1,t),gn(e,t));break}}e=e.return}}function ZS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Mt&n)===n&&(Rt===4||Rt===3&&(Mt&130023424)===Mt&&500>vt()-wp?ls(t,0):_p|=n),gn(t,e)}function wE(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=nn();t=Fr(t,e),t!==null&&(hl(t,e,n),gn(t,n))}function eR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wE(t,n)}function tR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),wE(t,n)}var EE;EE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,zS(t,e,n);dn=!!(t.flags&131072)}else dn=!1,tt&&e.flags&1048576&&Sw(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var i=fo(e,Yt.current);so(e,n),i=fp(null,e,r,t,i,n);var s=pp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(s=!0,Yu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lp(e),i.updater=Vc,e.stateNode=i,i._reactInternals=e,$h(e,r,t,n),e=qh(null,e,r,!0,s,n)):(e.tag=0,tt&&s&&tp(e),tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=rR(r),t=Qn(r,t),i){case 0:e=Wh(null,e,r,t,n);break e;case 1:e=hy(null,e,r,t,n);break e;case 11:e=cy(null,e,r,t,n);break e;case 14:e=dy(null,e,r,Qn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Wh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),hy(t,e,r,i,n);case 3:e:{if(iE(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kw(t,e),tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=yo(Error(W(423)),e),e=fy(t,e,r,n,i);break e}else if(r!==i){i=yo(Error(W(424)),e),e=fy(t,e,r,n,i);break e}else for(An=Ti(e.stateNode.containerInfo.firstChild),Nn=e,tt=!0,Yn=null,n=Pw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(po(),r===i){e=Br(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return bw(e),t===null&&Fh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lh(r,i)?o=null:s!==null&&Lh(r,s)&&(e.flags|=32),rE(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&Fh(e),null;case 13:return sE(t,e,n);case 4:return up(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mo(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),cy(t,e,r,i,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,We(Zu,r._currentValue),r._currentValue=o,s!==null)if(rr(s.value,o)){if(s.children===i.children&&!pn.current){e=Br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Lr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Bh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Bh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,so(e,n),i=Bn(i),r=r(i),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,i=Qn(r,e.pendingProps),i=Qn(r.type,i),dy(t,e,r,i,n);case 15:return tE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Ru(t,e),e.tag=1,mn(r)?(t=!0,Yu(e)):t=!1,so(e,n),Jw(e,r,i),$h(e,r,i,n),qh(null,e,r,!0,t,n);case 19:return oE(t,e,n);case 22:return nE(t,e,n)}throw Error(W(156,e.tag))};function TE(t,e){return G_(t,e)}function nR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,n,r){return new nR(t,e,n,r)}function xp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rR(t){if(typeof t=="function")return xp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$f)return 11;if(t===Hf)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=Vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hs:return us(n.children,i,s,e);case zf:o=8,i|=8;break;case fh:return t=Vn(12,n,e,i|2),t.elementType=fh,t.lanes=s,t;case ph:return t=Vn(13,n,e,i),t.elementType=ph,t.lanes=s,t;case mh:return t=Vn(19,n,e,i),t.elementType=mh,t.lanes=s,t;case b_:return Bc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N_:o=10;break e;case k_:o=9;break e;case $f:o=11;break e;case Hf:o=14;break e;case ai:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Vn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=Vn(7,t,r,e),t.lanes=n,t}function Bc(t,e,n,r){return t=Vn(22,t,r,e),t.elementType=b_,t.lanes=n,t.stateNode={isHidden:!1},t}function qd(t,e,n){return t=Vn(6,t,null,e),t.lanes=n,t}function Qd(t,e,n){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sp(t,e,n,r,i,s,o,l,u){return t=new iR(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(s),t}function sR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function IE(t){if(!t)return bi;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(mn(n))return Iw(t,n,e)}return e}function xE(t,e,n,r,i,s,o,l,u){return t=Sp(n,r,!0,t,i,s,o,l,u),t.context=IE(null),n=t.current,r=nn(),i=Si(n),s=Lr(r,i),s.callback=e??null,Ii(n,s,i),t.current.lanes=i,hl(t,i,r),gn(t,r),t}function zc(t,e,n,r){var i=e.current,s=nn(),o=Si(i);return n=IE(n),e.context===null?e.context=n:e.pendingContext=n,e=Lr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ii(i,e,o),t!==null&&(Jn(t,i,o,s),Iu(t,i,o)),o}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rp(t,e){Iy(t,e),(t=t.alternate)&&Iy(t,e)}function oR(){return null}var SE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ap(t){this._internalRoot=t}$c.prototype.render=Ap.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));zc(t,e,null,null)};$c.prototype.unmount=Ap.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){zc(null,t,null,null)}),e[Ur]=null}};function $c(t){this._internalRoot=t}$c.prototype.unstable_scheduleHydration=function(t){if(t){var e=nw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&iw(t)}};function Cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xy(){}function aR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=uc(o);s.call(c)}}var o=xE(e,r,t,0,null,!1,!1,"",xy);return t._reactRootContainer=o,t[Ur]=o.current,Ha(t.nodeType===8?t.parentNode:t),vs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=uc(u);l.call(c)}}var u=Sp(t,0,!1,null,null,!1,!1,"",xy);return t._reactRootContainer=u,t[Ur]=u.current,Ha(t.nodeType===8?t.parentNode:t),vs(function(){zc(e,u,n,r)}),u}function Wc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=uc(o);l.call(u)}}zc(e,o,t,i)}else o=aR(n,e,t,i,r);return uc(o)}ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(Qf(e,n|1),gn(e,vt()),!(ke&6)&&(vo=vt()+500,Ui()))}break;case 13:vs(function(){var r=Fr(t,1);if(r!==null){var i=nn();Jn(r,t,1,i)}}),Rp(t,1)}};Kf=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=nn();Jn(e,t,134217728,n)}Rp(t,134217728)}};tw=function(t){if(t.tag===13){var e=Si(t),n=Fr(t,e);if(n!==null){var r=nn();Jn(n,t,e,r)}Rp(t,e)}};nw=function(){return Ve};rw=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Sh=function(t,e,n){switch(e){case"input":if(vh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lc(r);if(!i)throw Error(W(90));O_(r),vh(r,i)}}}break;case"textarea":j_(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};$_=Ep;H_=vs;var lR={usingClientEntryPoint:!1,Events:[pl,Ks,Lc,B_,z_,Ep]},sa={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uR={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q_(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||oR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{kc=lu.inject(uR),hr=lu}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lR;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(e))throw Error(W(200));return sR(t,e,null,n)};bn.createRoot=function(t,e){if(!Cp(t))throw Error(W(299));var n=!1,r="",i=SE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Sp(t,1,!1,null,null,n,!1,r,i),t[Ur]=e.current,Ha(t.nodeType===8?t.parentNode:t),new Ap(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Q_(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return vs(t)};bn.hydrate=function(t,e,n){if(!Hc(e))throw Error(W(200));return Wc(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Cp(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xE(e,null,t,1,n??null,i,!1,s,o),t[Ur]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $c(e)};bn.render=function(t,e,n){if(!Hc(e))throw Error(W(200));return Wc(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!Hc(t))throw Error(W(40));return t._reactRootContainer?(vs(function(){Wc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};bn.unstable_batchedUpdates=Ep;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Wc(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function RE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RE)}catch(t){console.error(t)}}RE(),R_.exports=bn;var Pp=R_.exports;const cR=f_(Pp),dR=h_({__proto__:null,default:cR},[Pp]);var Sy=Pp;dh.createRoot=Sy.createRoot,dh.hydrateRoot=Sy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},et.apply(this,arguments)}var Et;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Et||(Et={}));const Ry="popstate";function hR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Za("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_s(i)}return pR(e,n,null,t)}function _e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _o(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fR(){return Math.random().toString(36).substr(2,8)}function Ay(t,e){return{usr:t.state,key:t.key,idx:e}}function Za(t,e,n,r){return n===void 0&&(n=null),et({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:n,key:e&&e.key||r||fR()})}function _s(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Et.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(et({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=Et.Pop;let b=h(),S=b==null?null:b-c;c=b,u&&u({action:l,location:C.location,delta:S})}function g(b,S){l=Et.Push;let w=Za(C.location,b,S);c=h()+1;let A=Ay(w,c),O=C.createHref(w);try{o.pushState(A,"",O)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(O)}s&&u&&u({action:l,location:C.location,delta:1})}function E(b,S){l=Et.Replace;let w=Za(C.location,b,S);c=h();let A=Ay(w,c),O=C.createHref(w);o.replaceState(A,"",O),s&&u&&u({action:l,location:C.location,delta:0})}function R(b){let S=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:_s(b);return w=w.replace(/ $/,"%20"),_e(S,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,S)}let C={get action(){return l},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ry,m),u=b,()=>{i.removeEventListener(Ry,m),u=null}},createHref(b){return e(i,b)},createURL:R,encodeLocation(b){let S=R(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:E,go(b){return o.go(b)}};return C}var Me;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Me||(Me={}));const mR=new Set(["lazy","caseSensitive","path","id","index","children"]);function gR(t){return t.index===!0}function cc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(_e(i.index!==!0||!i.children,"Cannot specify children on an index route"),_e(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),gR(i)){let u=et({},i,e(i),{id:l});return r[l]=u,u}else{let u=et({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=cc(i.children,e,o,r)),u}})}function es(t,e,n){return n===void 0&&(n="/"),Nu(t,e,n,!1)}function Nu(t,e,n,r){let i=typeof e=="string"?Fi(e):e,s=zr(i.pathname||"/",n);if(s==null)return null;let o=AE(t);vR(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=PR(s);l=AR(o[u],c,r)}return l}function yR(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function AE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(_e(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=jr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(_e(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AE(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:SR(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of CE(s.path))i(s,o,u)}),e}function CE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=CE(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function vR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _R=/^:[\w-]+$/,wR=3,ER=2,TR=1,IR=10,xR=-2,Cy=t=>t==="*";function SR(t,e){let n=t.split("/"),r=n.length;return n.some(Cy)&&(r+=xR),e&&(r+=ER),n.filter(i=>!Cy(i)).reduce((i,s)=>i+(_R.test(s)?wR:s===""?TR:IR),r)}function RR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function AR(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=dc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=dc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:jr([s,m.pathname]),pathnameBase:bR(jr([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=jr([s,m.pathnameBase]))}return o}function dc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,m)=>{let{paramName:g,isOptional:E}=h;if(g==="*"){let C=l[m]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const R=l[m];return E&&!R?c[g]=void 0:c[g]=(R||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function CR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_o(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function PR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _o(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fi(t):t;return{pathname:n?n.startsWith("/")?n:kR(n,e):e,search:DR(r),hash:OR(i)}}function kR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Kd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Np(t,e){let n=PE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fi(t):(i=et({},t),_e(!i.pathname||!i.pathname.includes("?"),Kd("?","pathname","search",i)),_e(!i.pathname||!i.pathname.includes("#"),Kd("#","pathname","hash",i)),_e(!i.search||!i.search.includes("#"),Kd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=NR(i,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),bR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class hc{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function el(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const NE=["post","put","patch","delete"],LR=new Set(NE),jR=["get",...NE],MR=new Set(jR),VR=new Set([301,302,303,307,308]),UR=new Set([307,308]),Gd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},FR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BR=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),kE="remix-router-transitions";function zR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;_e(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=L=>({hasErrorBoundary:N(L)})}else i=BR;let s={},o=cc(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||qR,h=t.patchRoutesOnNavigation,m=et({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,E=new Set,R=null,C=null,b=null,S=t.hydrationData!=null,w=es(o,t.history.location,u),A=!1,O=null;if(w==null&&!h){let N=ln(404,{pathname:t.history.location.pathname}),{matches:L,route:M}=Uy(o);w=L,O={[M.id]:N}}w&&!t.hydrationData&&Ki(w,o,t.history.location.pathname).active&&(w=null);let U;if(w)if(w.some(N=>N.route.lazy))U=!1;else if(!w.some(N=>N.route.loader))U=!0;else if(m.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null;if(L){let M=w.findIndex($=>L[$.route.id]!==void 0);U=w.slice(0,M+1).every($=>!of($.route,N,L))}else U=w.every(M=>!of(M.route,N,L))}else U=t.hydrationData!=null;else if(U=!1,w=[],m.v7_partialHydration){let N=Ki(null,o,t.history.location.pathname);N.active&&N.matches&&(A=!0,w=N.matches)}let B,y={historyAction:t.history.action,location:t.history.location,matches:w,initialized:U,navigation:Gd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},v=Et.Pop,x=!1,T,P=!1,k=new Map,I=null,le=!1,Oe=!1,nt=[],Le=new Set,z=new Map,re=0,se=-1,we=new Map,oe=new Set,Ce=new Map,ut=new Map,Fe=new Set,ct=new Map,Xe=new Map,vn;function on(){if(g=t.history.listen(N=>{let{action:L,location:M,delta:$}=N;if(vn){vn(),vn=void 0;return}_o(Xe.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=zo({currentLocation:y.location,nextLocation:M,historyAction:L});if(Q&&$!=null){let te=new Promise(ue=>{vn=ue});t.history.go($*-1),Wi(Q,{state:"blocked",location:M,proceed(){Wi(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),te.then(()=>t.history.go($))},reset(){let ue=new Map(y.blockers);ue.set(Q,oa),xe({blockers:ue})}});return}return ae(L,M)}),n){oA(e,k);let N=()=>aA(e,k);e.addEventListener("pagehide",N),I=()=>e.removeEventListener("pagehide",N)}return y.initialized||ae(Et.Pop,y.location,{initialHydration:!0}),B}function ye(){g&&g(),I&&I(),E.clear(),T&&T.abort(),y.fetchers.forEach((N,L)=>ks(L)),y.blockers.forEach((N,L)=>Ds(L))}function Je(N){return E.add(N),()=>E.delete(N)}function xe(N,L){L===void 0&&(L={}),y=et({},y,N);let M=[],$=[];m.v7_fetcherPersist&&y.fetchers.forEach((Q,te)=>{Q.state==="idle"&&(Fe.has(te)?$.push(te):M.push(te))}),Fe.forEach(Q=>{!y.fetchers.has(Q)&&!z.has(Q)&&$.push(Q)}),[...E].forEach(Q=>Q(y,{deletedFetchers:$,viewTransitionOpts:L.viewTransitionOpts,flushSync:L.flushSync===!0})),m.v7_fetcherPersist?(M.forEach(Q=>y.fetchers.delete(Q)),$.forEach(Q=>ks(Q))):$.forEach(Q=>Fe.delete(Q))}function ve(N,L,M){var $,Q;let{flushSync:te}=M===void 0?{}:M,ue=y.actionData!=null&&y.navigation.formMethod!=null&&Gn(y.navigation.formMethod)&&y.navigation.state==="loading"&&(($=N.state)==null?void 0:$._isRedirect)!==!0,Z;L.actionData?Object.keys(L.actionData).length>0?Z=L.actionData:Z=null:ue?Z=y.actionData:Z=null;let J=L.loaderData?My(y.loaderData,L.loaderData,L.matches||[],L.errors):y.loaderData,Y=y.blockers;Y.size>0&&(Y=new Map(Y),Y.forEach((me,_t)=>Y.set(_t,oa)));let ne=x===!0||y.navigation.formMethod!=null&&Gn(y.navigation.formMethod)&&((Q=N.state)==null?void 0:Q._isRedirect)!==!0;l&&(o=l,l=void 0),le||v===Et.Pop||(v===Et.Push?t.history.push(N,N.state):v===Et.Replace&&t.history.replace(N,N.state));let ce;if(v===Et.Pop){let me=k.get(y.location.pathname);me&&me.has(N.pathname)?ce={currentLocation:y.location,nextLocation:N}:k.has(N.pathname)&&(ce={currentLocation:N,nextLocation:y.location})}else if(P){let me=k.get(y.location.pathname);me?me.add(N.pathname):(me=new Set([N.pathname]),k.set(y.location.pathname,me)),ce={currentLocation:y.location,nextLocation:N}}xe(et({},L,{actionData:Z,loaderData:J,historyAction:v,location:N,initialized:!0,navigation:Gd,revalidation:"idle",restoreScrollPosition:Qi(N,L.matches||y.matches),preventScrollReset:ne,blockers:Y}),{viewTransitionOpts:ce,flushSync:te===!0}),v=Et.Pop,x=!1,P=!1,le=!1,Oe=!1,nt=[]}async function _n(N,L){if(typeof N=="number"){t.history.go(N);return}let M=sf(y.location,y.matches,u,m.v7_prependBasename,N,m.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:$,submission:Q,error:te}=Py(m.v7_normalizeFormMethod,!1,M,L),ue=y.location,Z=Za(y.location,$,L&&L.state);Z=et({},Z,t.history.encodeLocation(Z));let J=L&&L.replace!=null?L.replace:void 0,Y=Et.Push;J===!0?Y=Et.Replace:J===!1||Q!=null&&Gn(Q.formMethod)&&Q.formAction===y.location.pathname+y.location.search&&(Y=Et.Replace);let ne=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,ce=(L&&L.flushSync)===!0,me=zo({currentLocation:ue,nextLocation:Z,historyAction:Y});if(me){Wi(me,{state:"blocked",location:Z,proceed(){Wi(me,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),_n(N,L)},reset(){let _t=new Map(y.blockers);_t.set(me,oa),xe({blockers:_t})}});return}return await ae(Y,Z,{submission:Q,pendingError:te,preventScrollReset:ne,replace:L&&L.replace,enableViewTransition:L&&L.viewTransition,flushSync:ce})}function G(){if(xt(),xe({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){ae(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}ae(v||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:P===!0})}}async function ae(N,L,M){T&&T.abort(),T=null,v=N,le=(M&&M.startUninterruptedRevalidation)===!0,bl(y.location,y.matches),x=(M&&M.preventScrollReset)===!0,P=(M&&M.enableViewTransition)===!0;let $=l||o,Q=M&&M.overrideNavigation,te=M!=null&&M.initialHydration&&y.matches&&y.matches.length>0&&!A?y.matches:es($,L,u),ue=(M&&M.flushSync)===!0;if(te&&y.initialized&&!Oe&&JR(y.location,L)&&!(M&&M.submission&&Gn(M.submission.formMethod))){ve(L,{matches:te},{flushSync:ue});return}let Z=Ki(te,$,L.pathname);if(Z.active&&Z.matches&&(te=Z.matches),!te){let{error:je,notFoundMatches:Re,route:He}=wr(L.pathname);ve(L,{matches:Re,loaderData:{},errors:{[He.id]:je}},{flushSync:ue});return}T=new AbortController;let J=Us(t.history,L,T.signal,M&&M.submission),Y;if(M&&M.pendingError)Y=[ts(te).route.id,{type:Me.error,error:M.pendingError}];else if(M&&M.submission&&Gn(M.submission.formMethod)){let je=await ge(J,L,M.submission,te,Z.active,{replace:M.replace,flushSync:ue});if(je.shortCircuited)return;if(je.pendingActionResult){let[Re,He]=je.pendingActionResult;if(Rn(He)&&el(He.error)&&He.error.status===404){T=null,ve(L,{matches:je.matches,loaderData:{},errors:{[Re]:He.error}});return}}te=je.matches||te,Y=je.pendingActionResult,Q=Yd(L,M.submission),ue=!1,Z.active=!1,J=Us(t.history,J.url,J.signal)}let{shortCircuited:ne,matches:ce,loaderData:me,errors:_t}=await ze(J,L,te,Z.active,Q,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,ue,Y);ne||(T=null,ve(L,et({matches:ce||te},Vy(Y),{loaderData:me,errors:_t})))}async function ge(N,L,M,$,Q,te){te===void 0&&(te={}),xt();let ue=iA(L,M);if(xe({navigation:ue},{flushSync:te.flushSync===!0}),Q){let Y=await or($,L.pathname,N.signal);if(Y.type==="aborted")return{shortCircuited:!0};if(Y.type==="error"){let ne=ts(Y.partialMatches).route.id;return{matches:Y.partialMatches,pendingActionResult:[ne,{type:Me.error,error:Y.error}]}}else if(Y.matches)$=Y.matches;else{let{notFoundMatches:ne,error:ce,route:me}=wr(L.pathname);return{matches:ne,pendingActionResult:[me.id,{type:Me.error,error:ce}]}}}let Z,J=ga($,L);if(!J.route.action&&!J.route.lazy)Z={type:Me.error,error:ln(405,{method:N.method,pathname:L.pathname,routeId:J.route.id})};else if(Z=(await Ct("action",y,N,[J],$,null))[J.route.id],N.signal.aborted)return{shortCircuited:!0};if(ss(Z)){let Y;return te&&te.replace!=null?Y=te.replace:Y=Oy(Z.response.headers.get("Location"),new URL(N.url),u)===y.location.pathname+y.location.search,await Te(N,Z,!0,{submission:M,replace:Y}),{shortCircuited:!0}}if(yi(Z))throw ln(400,{type:"defer-action"});if(Rn(Z)){let Y=ts($,J.route.id);return(te&&te.replace)!==!0&&(v=Et.Push),{matches:$,pendingActionResult:[Y.route.id,Z]}}return{matches:$,pendingActionResult:[J.route.id,Z]}}async function ze(N,L,M,$,Q,te,ue,Z,J,Y,ne){let ce=Q||Yd(L,te),me=te||ue||By(ce),_t=!le&&(!m.v7_partialHydration||!J);if($){if(_t){let qe=$e(ne);xe(et({navigation:ce},qe!==void 0?{actionData:qe}:{}),{flushSync:Y})}let Pe=await or(M,L.pathname,N.signal);if(Pe.type==="aborted")return{shortCircuited:!0};if(Pe.type==="error"){let qe=ts(Pe.partialMatches).route.id;return{matches:Pe.partialMatches,loaderData:{},errors:{[qe]:Pe.error}}}else if(Pe.matches)M=Pe.matches;else{let{error:qe,notFoundMatches:Ir,route:Zr}=wr(L.pathname);return{matches:Ir,loaderData:{},errors:{[Zr.id]:qe}}}}let je=l||o,[Re,He]=ky(t.history,y,M,me,L,m.v7_partialHydration&&J===!0,m.v7_skipActionErrorRevalidation,Oe,nt,Le,Fe,Ce,oe,je,u,ne);if(qi(Pe=>!(M&&M.some(qe=>qe.route.id===Pe))||Re&&Re.some(qe=>qe.route.id===Pe)),se=++re,Re.length===0&&He.length===0){let Pe=bs();return ve(L,et({matches:M,loaderData:{},errors:ne&&Rn(ne[1])?{[ne[0]]:ne[1].error}:null},Vy(ne),Pe?{fetchers:new Map(y.fetchers)}:{}),{flushSync:Y}),{shortCircuited:!0}}if(_t){let Pe={};if(!$){Pe.navigation=ce;let qe=$e(ne);qe!==void 0&&(Pe.actionData=qe)}He.length>0&&(Pe.fetchers=Bt(He)),xe(Pe,{flushSync:Y})}He.forEach(Pe=>{$n(Pe.key),Pe.controller&&z.set(Pe.key,Pe.controller)});let Er=()=>He.forEach(Pe=>$n(Pe.key));T&&T.signal.addEventListener("abort",Er);let{loaderResults:Xr,fetcherResults:Hn}=await Se(y,M,Re,He,N);if(N.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",Er),He.forEach(Pe=>z.delete(Pe.key));let Zt=uu(Xr);if(Zt)return await Te(N,Zt.result,!0,{replace:Z}),{shortCircuited:!0};if(Zt=uu(Hn),Zt)return oe.add(Zt.key),await Te(N,Zt.result,!0,{replace:Z}),{shortCircuited:!0};let{loaderData:Os,errors:Tr}=jy(y,M,Xr,ne,He,Hn,ct);ct.forEach((Pe,qe)=>{Pe.subscribe(Ir=>{(Ir||Pe.done)&&ct.delete(qe)})}),m.v7_partialHydration&&J&&y.errors&&(Tr=et({},y.errors,Tr));let En=bs(),Ln=kl(se),Jr=En||Ln||He.length>0;return et({matches:M,loaderData:Os,errors:Tr},Jr?{fetchers:new Map(y.fetchers)}:{})}function $e(N){if(N&&!Rn(N[1]))return{[N[0]]:N[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function Bt(N){return N.forEach(L=>{let M=y.fetchers.get(L.key),$=aa(void 0,M?M.data:void 0);y.fetchers.set(L.key,$)}),new Map(y.fetchers)}function Jt(N,L,M,$){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");$n(N);let Q=($&&$.flushSync)===!0,te=l||o,ue=sf(y.location,y.matches,u,m.v7_prependBasename,M,m.v7_relativeSplatPath,L,$==null?void 0:$.relative),Z=es(te,ue,u),J=Ki(Z,te,ue);if(J.active&&J.matches&&(Z=J.matches),!Z){On(N,L,ln(404,{pathname:ue}),{flushSync:Q});return}let{path:Y,submission:ne,error:ce}=Py(m.v7_normalizeFormMethod,!0,ue,$);if(ce){On(N,L,ce,{flushSync:Q});return}let me=ga(Z,Y),_t=($&&$.preventScrollReset)===!0;if(ne&&Gn(ne.formMethod)){an(N,L,Y,me,Z,J.active,Q,_t,ne);return}Ce.set(N,{routeId:L,path:Y}),rt(N,L,Y,me,Z,J.active,Q,_t,ne)}async function an(N,L,M,$,Q,te,ue,Z,J){xt(),Ce.delete(N);function Y(Ze){if(!Ze.route.action&&!Ze.route.lazy){let ar=ln(405,{method:J.formMethod,pathname:M,routeId:L});return On(N,L,ar,{flushSync:ue}),!0}return!1}if(!te&&Y($))return;let ne=y.fetchers.get(N);wn(N,sA(J,ne),{flushSync:ue});let ce=new AbortController,me=Us(t.history,M,ce.signal,J);if(te){let Ze=await or(Q,new URL(me.url).pathname,me.signal,N);if(Ze.type==="aborted")return;if(Ze.type==="error"){On(N,L,Ze.error,{flushSync:ue});return}else if(Ze.matches){if(Q=Ze.matches,$=ga(Q,M),Y($))return}else{On(N,L,ln(404,{pathname:M}),{flushSync:ue});return}}z.set(N,ce);let _t=re,Re=(await Ct("action",y,me,[$],Q,N))[$.route.id];if(me.signal.aborted){z.get(N)===ce&&z.delete(N);return}if(m.v7_fetcherPersist&&Fe.has(N)){if(ss(Re)||Rn(Re)){wn(N,oi(void 0));return}}else{if(ss(Re))if(z.delete(N),se>_t){wn(N,oi(void 0));return}else return oe.add(N),wn(N,aa(J)),Te(me,Re,!1,{fetcherSubmission:J,preventScrollReset:Z});if(Rn(Re)){On(N,L,Re.error);return}}if(yi(Re))throw ln(400,{type:"defer-action"});let He=y.navigation.location||y.location,Er=Us(t.history,He,ce.signal),Xr=l||o,Hn=y.navigation.state!=="idle"?es(Xr,y.navigation.location,u):y.matches;_e(Hn,"Didn't find any matches after fetcher action");let Zt=++re;we.set(N,Zt);let Os=aa(J,Re.data);y.fetchers.set(N,Os);let[Tr,En]=ky(t.history,y,Hn,J,He,!1,m.v7_skipActionErrorRevalidation,Oe,nt,Le,Fe,Ce,oe,Xr,u,[$.route.id,Re]);En.filter(Ze=>Ze.key!==N).forEach(Ze=>{let ar=Ze.key,Ho=y.fetchers.get(ar),Ol=aa(void 0,Ho?Ho.data:void 0);y.fetchers.set(ar,Ol),$n(ar),Ze.controller&&z.set(ar,Ze.controller)}),xe({fetchers:new Map(y.fetchers)});let Ln=()=>En.forEach(Ze=>$n(Ze.key));ce.signal.addEventListener("abort",Ln);let{loaderResults:Jr,fetcherResults:Pe}=await Se(y,Hn,Tr,En,Er);if(ce.signal.aborted)return;ce.signal.removeEventListener("abort",Ln),we.delete(N),z.delete(N),En.forEach(Ze=>z.delete(Ze.key));let qe=uu(Jr);if(qe)return Te(Er,qe.result,!1,{preventScrollReset:Z});if(qe=uu(Pe),qe)return oe.add(qe.key),Te(Er,qe.result,!1,{preventScrollReset:Z});let{loaderData:Ir,errors:Zr}=jy(y,Hn,Jr,void 0,En,Pe,ct);if(y.fetchers.has(N)){let Ze=oi(Re.data);y.fetchers.set(N,Ze)}kl(Zt),y.navigation.state==="loading"&&Zt>se?(_e(v,"Expected pending action"),T&&T.abort(),ve(y.navigation.location,{matches:Hn,loaderData:Ir,errors:Zr,fetchers:new Map(y.fetchers)})):(xe({errors:Zr,loaderData:My(y.loaderData,Ir,Hn,Zr),fetchers:new Map(y.fetchers)}),Oe=!1)}async function rt(N,L,M,$,Q,te,ue,Z,J){let Y=y.fetchers.get(N);wn(N,aa(J,Y?Y.data:void 0),{flushSync:ue});let ne=new AbortController,ce=Us(t.history,M,ne.signal);if(te){let Re=await or(Q,new URL(ce.url).pathname,ce.signal,N);if(Re.type==="aborted")return;if(Re.type==="error"){On(N,L,Re.error,{flushSync:ue});return}else if(Re.matches)Q=Re.matches,$=ga(Q,M);else{On(N,L,ln(404,{pathname:M}),{flushSync:ue});return}}z.set(N,ne);let me=re,je=(await Ct("loader",y,ce,[$],Q,N))[$.route.id];if(yi(je)&&(je=await Dp(je,ce.signal,!0)||je),z.get(N)===ne&&z.delete(N),!ce.signal.aborted){if(Fe.has(N)){wn(N,oi(void 0));return}if(ss(je))if(se>me){wn(N,oi(void 0));return}else{oe.add(N),await Te(ce,je,!1,{preventScrollReset:Z});return}if(Rn(je)){On(N,L,je.error);return}_e(!yi(je),"Unhandled fetcher deferred data"),wn(N,oi(je.data))}}async function Te(N,L,M,$){let{submission:Q,fetcherSubmission:te,preventScrollReset:ue,replace:Z}=$===void 0?{}:$;L.response.headers.has("X-Remix-Revalidate")&&(Oe=!0);let J=L.response.headers.get("Location");_e(J,"Expected a Location header on the redirect Response"),J=Oy(J,new URL(N.url),u);let Y=Za(y.location,J,{_isRedirect:!0});if(n){let Re=!1;if(L.response.headers.has("X-Remix-Reload-Document"))Re=!0;else if(bp.test(J)){const He=t.history.createURL(J);Re=He.origin!==e.location.origin||zr(He.pathname,u)==null}if(Re){Z?e.location.replace(J):e.location.assign(J);return}}T=null;let ne=Z===!0||L.response.headers.has("X-Remix-Replace")?Et.Replace:Et.Push,{formMethod:ce,formAction:me,formEncType:_t}=y.navigation;!Q&&!te&&ce&&me&&_t&&(Q=By(y.navigation));let je=Q||te;if(UR.has(L.response.status)&&je&&Gn(je.formMethod))await ae(ne,Y,{submission:et({},je,{formAction:J}),preventScrollReset:ue||x,enableViewTransition:M?P:void 0});else{let Re=Yd(Y,Q);await ae(ne,Y,{overrideNavigation:Re,fetcherSubmission:te,preventScrollReset:ue||x,enableViewTransition:M?P:void 0})}}async function Ct(N,L,M,$,Q,te){let ue,Z={};try{ue=await QR(c,N,L,M,$,Q,te,s,i)}catch(J){return $.forEach(Y=>{Z[Y.route.id]={type:Me.error,error:J}}),Z}for(let[J,Y]of Object.entries(ue))if(ZR(Y)){let ne=Y.result;Z[J]={type:Me.redirect,response:YR(ne,M,J,Q,u,m.v7_relativeSplatPath)}}else Z[J]=await GR(Y);return Z}async function Se(N,L,M,$,Q){let te=N.matches,ue=Ct("loader",N,Q,M,L,null),Z=Promise.all($.map(async ne=>{if(ne.matches&&ne.match&&ne.controller){let me=(await Ct("loader",N,Us(t.history,ne.path,ne.controller.signal),[ne.match],ne.matches,ne.key))[ne.match.route.id];return{[ne.key]:me}}else return Promise.resolve({[ne.key]:{type:Me.error,error:ln(404,{pathname:ne.path})}})})),J=await ue,Y=(await Z).reduce((ne,ce)=>Object.assign(ne,ce),{});return await Promise.all([nA(L,J,Q.signal,te,N.loaderData),rA(L,Y,$)]),{loaderResults:J,fetcherResults:Y}}function xt(){Oe=!0,nt.push(...qi()),Ce.forEach((N,L)=>{z.has(L)&&Le.add(L),$n(L)})}function wn(N,L,M){M===void 0&&(M={}),y.fetchers.set(N,L),xe({fetchers:new Map(y.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function On(N,L,M,$){$===void 0&&($={});let Q=ts(y.matches,L);ks(N),xe({errors:{[Q.route.id]:M},fetchers:new Map(y.fetchers)},{flushSync:($&&$.flushSync)===!0})}function Fo(N){return ut.set(N,(ut.get(N)||0)+1),Fe.has(N)&&Fe.delete(N),y.fetchers.get(N)||FR}function ks(N){let L=y.fetchers.get(N);z.has(N)&&!(L&&L.state==="loading"&&we.has(N))&&$n(N),Ce.delete(N),we.delete(N),oe.delete(N),m.v7_fetcherPersist&&Fe.delete(N),Le.delete(N),y.fetchers.delete(N)}function Hi(N){let L=(ut.get(N)||0)-1;L<=0?(ut.delete(N),Fe.add(N),m.v7_fetcherPersist||ks(N)):ut.set(N,L),xe({fetchers:new Map(y.fetchers)})}function $n(N){let L=z.get(N);L&&(L.abort(),z.delete(N))}function Bo(N){for(let L of N){let M=Fo(L),$=oi(M.data);y.fetchers.set(L,$)}}function bs(){let N=[],L=!1;for(let M of oe){let $=y.fetchers.get(M);_e($,"Expected fetcher: "+M),$.state==="loading"&&(oe.delete(M),N.push(M),L=!0)}return Bo(N),L}function kl(N){let L=[];for(let[M,$]of we)if($<N){let Q=y.fetchers.get(M);_e(Q,"Expected fetcher: "+M),Q.state==="loading"&&($n(M),we.delete(M),L.push(M))}return Bo(L),L.length>0}function gd(N,L){let M=y.blockers.get(N)||oa;return Xe.get(N)!==L&&Xe.set(N,L),M}function Ds(N){y.blockers.delete(N),Xe.delete(N)}function Wi(N,L){let M=y.blockers.get(N)||oa;_e(M.state==="unblocked"&&L.state==="blocked"||M.state==="blocked"&&L.state==="blocked"||M.state==="blocked"&&L.state==="proceeding"||M.state==="blocked"&&L.state==="unblocked"||M.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+L.state);let $=new Map(y.blockers);$.set(N,L),xe({blockers:$})}function zo(N){let{currentLocation:L,nextLocation:M,historyAction:$}=N;if(Xe.size===0)return;Xe.size>1&&_o(!1,"A router only supports one blocker at a time");let Q=Array.from(Xe.entries()),[te,ue]=Q[Q.length-1],Z=y.blockers.get(te);if(!(Z&&Z.state==="proceeding")&&ue({currentLocation:L,nextLocation:M,historyAction:$}))return te}function wr(N){let L=ln(404,{pathname:N}),M=l||o,{matches:$,route:Q}=Uy(M);return qi(),{notFoundMatches:$,route:Q,error:L}}function qi(N){let L=[];return ct.forEach((M,$)=>{(!N||N($))&&(M.cancel(),L.push($),ct.delete($))}),L}function $o(N,L,M){if(R=N,b=L,C=M||null,!S&&y.navigation===Gd){S=!0;let $=Qi(y.location,y.matches);$!=null&&xe({restoreScrollPosition:$})}return()=>{R=null,b=null,C=null}}function sr(N,L){return C&&C(N,L.map($=>yR($,y.loaderData)))||N.key}function bl(N,L){if(R&&b){let M=sr(N,L);R[M]=b()}}function Qi(N,L){if(R){let M=sr(N,L),$=R[M];if(typeof $=="number")return $}return null}function Ki(N,L,M){if(h)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:Nu(L,M,u,!0)}}else return{active:!0,matches:Nu(L,M,u,!0)||[]};return{active:!1,matches:null}}async function or(N,L,M,$){if(!h)return{type:"success",matches:N};let Q=N;for(;;){let te=l==null,ue=l||o,Z=s;try{await h({signal:M,path:L,matches:Q,fetcherKey:$,patch:(ne,ce)=>{M.aborted||Dy(ne,ce,ue,Z,i)}})}catch(ne){return{type:"error",error:ne,partialMatches:Q}}finally{te&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let J=es(ue,L,u);if(J)return{type:"success",matches:J};let Y=Nu(ue,L,u,!0);if(!Y||Q.length===Y.length&&Q.every((ne,ce)=>ne.route.id===Y[ce].route.id))return{type:"success",matches:null};Q=Y}}function Dl(N){s={},l=cc(N,i,void 0,s)}function bt(N,L){let M=l==null;Dy(N,L,l||o,s,i),M&&(o=[...o],xe({}))}return B={get basename(){return u},get future(){return m},get state(){return y},get routes(){return o},get window(){return e},initialize:on,subscribe:Je,enableScrollRestoration:$o,navigate:_n,fetch:Jt,revalidate:G,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:Fo,deleteFetcher:Hi,dispose:ye,getBlocker:gd,deleteBlocker:Ds,patchRoutes:bt,_internalFetchControllers:z,_internalActiveDeferreds:ct,_internalSetRoutes:Dl},B}function $R(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function sf(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let m of e)if(u.push(m),m.route.id===o){c=m;break}}else u=e,c=e[e.length-1];let h=kp(i||".",Np(u,s),zr(t.pathname,n)||t.pathname,l==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c){let m=Op(h.search);if(c.route.index&&!m)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&m){let g=new URLSearchParams(h.search),E=g.getAll("index");g.delete("index"),E.filter(C=>C).forEach(C=>g.append("index",C));let R=g.toString();h.search=R?"?"+R:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:jr([n,h.pathname])),_s(h)}function Py(t,e,n,r){if(!r||!$R(r))return{path:n};if(r.formMethod&&!tA(r.formMethod))return{path:n,error:ln(405,{method:r.formMethod})};let i=()=>({path:n,error:ln(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=OE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Gn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((E,R)=>{let[C,b]=R;return""+E+C+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Gn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}_e(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=af(r.formData),c=r.formData;else if(r.body instanceof FormData)u=af(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=Ly(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=Ly(u)}catch{return i()}let h={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Gn(h.formMethod))return{path:n,submission:h};let m=Fi(n);return e&&m.search&&Op(m.search)&&u.append("index",""),m.search="?"+u,{path:_s(m),submission:h}}function Ny(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function ky(t,e,n,r,i,s,o,l,u,c,h,m,g,E,R,C){let b=C?Rn(C[1])?C[1].error:C[1].data:void 0,S=t.createURL(e.location),w=t.createURL(i),A=n;s&&e.errors?A=Ny(n,Object.keys(e.errors)[0],!0):C&&Rn(C[1])&&(A=Ny(n,C[0]));let O=C?C[1].statusCode:void 0,U=o&&O&&O>=400,B=A.filter((v,x)=>{let{route:T}=v;if(T.lazy)return!0;if(T.loader==null)return!1;if(s)return of(T,e.loaderData,e.errors);if(HR(e.loaderData,e.matches[x],v)||u.some(I=>I===v.route.id))return!0;let P=e.matches[x],k=v;return by(v,et({currentUrl:S,currentParams:P.params,nextUrl:w,nextParams:k.params},r,{actionResult:b,actionStatus:O,defaultShouldRevalidate:U?!1:l||S.pathname+S.search===w.pathname+w.search||S.search!==w.search||bE(P,k)}))}),y=[];return m.forEach((v,x)=>{if(s||!n.some(le=>le.route.id===v.routeId)||h.has(x))return;let T=es(E,v.path,R);if(!T){y.push({key:x,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(x),k=ga(T,v.path),I=!1;g.has(x)?I=!1:c.has(x)?(c.delete(x),I=!0):P&&P.state!=="idle"&&P.data===void 0?I=l:I=by(k,et({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:b,actionStatus:O,defaultShouldRevalidate:U?!1:l})),I&&y.push({key:x,routeId:v.routeId,path:v.path,matches:T,match:k,controller:new AbortController})}),[B,y]}function of(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function HR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function bE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function by(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Dy(t,e,n,r,i){var s;let o;if(t){let c=r[t];_e(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(h=>DE(c,h))),u=cc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function DE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>DE(n,s))}):!1}async function WR(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];_e(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";_o(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!mR.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,et({},e(i),{lazy:void 0}))}async function qR(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function QR(t,e,n,r,i,s,o,l,u,c){let h=s.map(E=>E.route.lazy?WR(E.route,u,l):void 0),m=s.map((E,R)=>{let C=h[R],b=i.some(w=>w.route.id===E.route.id);return et({},E,{shouldLoad:b,resolve:async w=>(w&&r.method==="GET"&&(E.route.lazy||E.route.loader)&&(b=!0),b?KR(e,r,E,C,w,c):Promise.resolve({type:Me.data,result:void 0}))})}),g=await t({matches:m,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return g}async function KR(t,e,n,r,i,s){let o,l,u=c=>{let h,m=new Promise((R,C)=>h=C);l=()=>h(),e.signal.addEventListener("abort",l);let g=R=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...R!==void 0?[R]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(C=>g(C)):g())}}catch(R){return{type:"error",result:R}}})();return Promise.race([E,m])};try{let c=n.route[t];if(r)if(c){let h,[m]=await Promise.all([u(c).catch(g=>{h=g}),r]);if(h!==void 0)throw h;o=m}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let h=new URL(e.url),m=h.pathname+h.search;throw ln(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:Me.data,result:void 0};else if(c)o=await u(c);else{let h=new URL(e.url),m=h.pathname+h.search;throw ln(404,{pathname:m})}_e(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Me.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function GR(t){let{result:e,type:n}=t;if(LE(e)){let m;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(g){return{type:Me.error,error:g}}return n===Me.error?{type:Me.error,error:new hc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:Me.data,data:m,statusCode:e.status,headers:e.headers}}if(n===Me.error){if(Fy(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Me.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Me.error,error:new hc(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:el(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Me.error,error:e,statusCode:el(e)?e.status:void 0}}if(eA(e)){var l,u;return{type:Me.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(Fy(e)){var c,h;return{type:Me.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:Me.data,data:e}}function YR(t,e,n,r,i,s){let o=t.headers.get("Location");if(_e(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!bp.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=sf(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function Oy(t,e,n){if(bp.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=zr(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Us(t,e,n,r){let i=t.createURL(OE(e)).toString(),s={signal:n};if(r&&Gn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=af(r.formData):s.body=r.formData}return new Request(i,s)}function af(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Ly(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function XR(t,e,n,r,i){let s={},o=null,l,u=!1,c={},h=n&&Rn(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let g=m.route.id,E=e[g];if(_e(!ss(E),"Cannot handle redirect results in processLoaderData"),Rn(E)){let R=E.error;h!==void 0&&(R=h,h=void 0),o=o||{};{let C=ts(t,g);o[C.route.id]==null&&(o[C.route.id]=R)}s[g]=void 0,u||(u=!0,l=el(E.error)?E.error.status:500),E.headers&&(c[g]=E.headers)}else yi(E)?(r.set(g,E.deferredData),s[g]=E.deferredData.data,E.statusCode!=null&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers)):(s[g]=E.data,E.statusCode&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function jy(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=XR(e,n,r,o);return i.forEach(c=>{let{key:h,match:m,controller:g}=c,E=s[h];if(_e(E,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Rn(E)){let R=ts(t.matches,m==null?void 0:m.route.id);u&&u[R.route.id]||(u=et({},u,{[R.route.id]:E.error})),t.fetchers.delete(h)}else if(ss(E))_e(!1,"Unhandled fetcher revalidation redirect");else if(yi(E))_e(!1,"Unhandled fetcher deferred data");else{let R=oi(E.data);t.fetchers.set(h,R)}}),{loaderData:l,errors:u}}function My(t,e,n,r){let i=et({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Vy(t){return t?Rn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ts(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Uy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ln(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new hc(t||500,l,new Error(u),!0)}function uu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ss(i))return{key:r,result:i}}}function OE(t){let e=typeof t=="string"?Fi(t):t;return _s(et({},e,{hash:""}))}function JR(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function ZR(t){return LE(t.result)&&VR.has(t.result.status)}function yi(t){return t.type===Me.deferred}function Rn(t){return t.type===Me.error}function ss(t){return(t&&t.type)===Me.redirect}function Fy(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function eA(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function LE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function tA(t){return MR.has(t.toLowerCase())}function Gn(t){return LR.has(t.toLowerCase())}async function nA(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let h=r.find(g=>g.route.id===c.route.id),m=h!=null&&!bE(h,c)&&(i&&i[c.route.id])!==void 0;yi(u)&&m&&await Dp(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function rA(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&yi(l)&&(_e(o,"Expected an AbortController for revalidating fetcher deferred result"),await Dp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function Dp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Me.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Me.error,error:i}}return{type:Me.data,data:t.deferredData.data}}}function Op(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ga(t,e){let n=typeof e=="string"?Fi(e).search:e.search;if(t[t.length-1].route.index&&Op(n||""))return t[t.length-1];let r=PE(t);return r[r.length-1]}function By(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Yd(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function iA(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function aa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function sA(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function oi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function oA(t,e){try{let n=t.sessionStorage.getItem(kE);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function aA(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(kE,JSON.stringify(n))}catch(r){_o(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(this,arguments)}const gl=D.createContext(null),Lp=D.createContext(null),Bi=D.createContext(null),jp=D.createContext(null),Yr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),jE=D.createContext(null);function lA(t,e){let{relative:n}=e===void 0?{}:e;yl()||_e(!1);let{basename:r,navigator:i}=D.useContext(Bi),{hash:s,pathname:o,search:l}=qc(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:jr([r,o])),i.createHref({pathname:u,search:l,hash:s})}function yl(){return D.useContext(jp)!=null}function bo(){return yl()||_e(!1),D.useContext(jp).location}function ME(t){D.useContext(Bi).static||D.useLayoutEffect(t)}function As(){let{isDataRoute:t}=D.useContext(Yr);return t?IA():uA()}function uA(){yl()||_e(!1);let t=D.useContext(gl),{basename:e,future:n,navigator:r}=D.useContext(Bi),{matches:i}=D.useContext(Yr),{pathname:s}=bo(),o=JSON.stringify(Np(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return ME(()=>{l.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=kp(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:jr([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,s,t])}const cA=D.createContext(null);function dA(t){let e=D.useContext(Yr).outlet;return e&&D.createElement(cA.Provider,{value:t},e)}function hA(){let{matches:t}=D.useContext(Yr),e=t[t.length-1];return e?e.params:{}}function qc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Bi),{matches:i}=D.useContext(Yr),{pathname:s}=bo(),o=JSON.stringify(Np(i,r.v7_relativeSplatPath));return D.useMemo(()=>kp(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function fA(t,e,n,r){yl()||_e(!1);let{navigator:i}=D.useContext(Bi),{matches:s}=D.useContext(Yr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=bo(),h;h=c;let m=h.pathname||"/",g=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=es(t,{pathname:g});return vA(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:jr([u,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:jr([u,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r)}function pA(){let t=TA(),e=el(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const mA=D.createElement(pA,null);class gA extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Yr.Provider,{value:this.props.routeContext},D.createElement(jE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yA(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(gl);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Yr.Provider,{value:e},r)}function vA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||_e(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:g,errors:E}=n,R=m.route.loader&&g[m.route.id]===void 0&&(!E||E[m.route.id]===void 0);if(m.route.lazy||R){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let E,R=!1,C=null,b=null;n&&(E=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||mA,u&&(c<0&&g===0?(xA("route-fallback"),R=!0,b=null):c===g&&(R=!0,b=m.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,g+1)),w=()=>{let A;return E?A=C:R?A=b:m.route.Component?A=D.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=h,D.createElement(yA,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?D.createElement(gA,{location:n.location,revalidation:n.revalidation,component:C,error:E,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}var VE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(VE||{}),UE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(UE||{});function _A(t){let e=D.useContext(gl);return e||_e(!1),e}function wA(t){let e=D.useContext(Lp);return e||_e(!1),e}function EA(t){let e=D.useContext(Yr);return e||_e(!1),e}function FE(t){let e=EA(),n=e.matches[e.matches.length-1];return n.route.id||_e(!1),n.route.id}function TA(){var t;let e=D.useContext(jE),n=wA(UE.UseRouteError),r=FE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function IA(){let{router:t}=_A(VE.UseNavigateStable),e=FE(),n=D.useRef(!1);return ME(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fc({fromRouteId:e},s)))},[t,e])}const zy={};function xA(t,e,n){zy[t]||(zy[t]=!0)}function SA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function RA(t){return dA(t.context)}function AA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Et.Pop,navigator:s,static:o=!1,future:l}=t;yl()&&_e(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:fc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Fi(r));let{pathname:h="/",search:m="",hash:g="",state:E=null,key:R="default"}=r,C=D.useMemo(()=>{let b=zr(h,u);return b==null?null:{location:{pathname:b,search:m,hash:g,state:E,key:R},navigationType:i}},[u,h,m,g,E,R,i]);return C==null?null:D.createElement(Bi.Provider,{value:c},D.createElement(jp.Provider,{children:n,value:C}))}new Promise(()=>{});function CA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wo.apply(this,arguments)}function BE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function PA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NA(t,e){return t.button===0&&(!e||e==="_self")&&!PA(t)}const kA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],DA="6";try{window.__reactRouterVersion=DA}catch{}function OA(t,e){return zR({basename:void 0,future:wo({},void 0,{v7_prependBasename:!0}),history:hR({window:void 0}),hydrationData:LA(),routes:t,mapRouteProperties:CA,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function LA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=wo({},e,{errors:jA(e.errors)})),e}function jA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new hc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const zE=D.createContext({isTransitioning:!1}),MA=D.createContext(new Map),VA="startTransition",$y=ZI[VA],UA="flushSync",Hy=dR[UA];function FA(t){$y?$y(t):t()}function la(t){Hy?Hy(t):t()}let BA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function zA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,l]=D.useState(),[u,c]=D.useState({isTransitioning:!1}),[h,m]=D.useState(),[g,E]=D.useState(),[R,C]=D.useState(),b=D.useRef(new Map),{v7_startTransition:S}=r||{},w=D.useCallback(v=>{S?FA(v):v()},[S]),A=D.useCallback((v,x)=>{let{deletedFetchers:T,flushSync:P,viewTransitionOpts:k}=x;v.fetchers.forEach((le,Oe)=>{le.data!==void 0&&b.current.set(Oe,le.data)}),T.forEach(le=>b.current.delete(le));let I=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||I){P?la(()=>s(v)):w(()=>s(v));return}if(P){la(()=>{g&&(h&&h.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let le=n.window.document.startViewTransition(()=>{la(()=>s(v))});le.finished.finally(()=>{la(()=>{m(void 0),E(void 0),l(void 0),c({isTransitioning:!1})})}),la(()=>E(le));return}g?(h&&h.resolve(),g.skipTransition(),C({state:v,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,g,h,b,w]);D.useLayoutEffect(()=>n.subscribe(A),[n,A]),D.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new BA)},[u]),D.useEffect(()=>{if(h&&o&&n.window){let v=o,x=h.promise,T=n.window.document.startViewTransition(async()=>{w(()=>s(v)),await x});T.finished.finally(()=>{m(void 0),E(void 0),l(void 0),c({isTransitioning:!1})}),E(T)}},[w,o,h,n.window]),D.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,g,i.location,o]),D.useEffect(()=>{!u.isTransitioning&&R&&(l(R.state),c({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),C(void 0))},[u.isTransitioning,R]),D.useEffect(()=>{},[]);let O=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,x,T)=>n.navigate(v,{state:x,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(v,x,T)=>n.navigate(v,{replace:!0,state:x,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),U=n.basename||"/",B=D.useMemo(()=>({router:n,navigator:O,static:!1,basename:U}),[n,O,U]),y=D.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return D.useEffect(()=>SA(r,n.future),[r,n.future]),D.createElement(D.Fragment,null,D.createElement(gl.Provider,{value:B},D.createElement(Lp.Provider,{value:i},D.createElement(MA.Provider,{value:b.current},D.createElement(zE.Provider,{value:u},D.createElement(AA,{basename:U,location:i.location,navigationType:i.historyAction,navigator:O,future:y},i.initialized||n.future.v7_partialHydration?D.createElement($A,{routes:n.routes,future:n.future,state:i}):e))))),null)}const $A=D.memo(HA);function HA(t){let{routes:e,future:n,state:r}=t;return fA(e,void 0,r,n)}const WA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hn=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:m}=e,g=BE(e,kA),{basename:E}=D.useContext(Bi),R,C=!1;if(typeof c=="string"&&qA.test(c)&&(R=c,WA))try{let A=new URL(window.location.href),O=c.startsWith("//")?new URL(A.protocol+c):new URL(c),U=zr(O.pathname,E);O.origin===A.origin&&U!=null?c=U+O.search+O.hash:C=!0}catch{}let b=lA(c,{relative:i}),S=KA(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m});function w(A){r&&r(A),A.defaultPrevented||S(A)}return D.createElement("a",wo({},g,{href:R||b,onClick:C||s?r:w,ref:n,target:u}))}),cu=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:h}=e,m=BE(e,bA),g=qc(u,{relative:m.relative}),E=bo(),R=D.useContext(Lp),{navigator:C,basename:b}=D.useContext(Bi),S=R!=null&&GA(g)&&c===!0,w=C.encodeLocation?C.encodeLocation(g).pathname:g.pathname,A=E.pathname,O=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;i||(A=A.toLowerCase(),O=O?O.toLowerCase():null,w=w.toLowerCase()),O&&b&&(O=zr(O,b)||O);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let B=A===w||!o&&A.startsWith(w)&&A.charAt(U)==="/",y=O!=null&&(O===w||!o&&O.startsWith(w)&&O.charAt(w.length)==="/"),v={isActive:B,isPending:y,isTransitioning:S},x=B?r:void 0,T;typeof s=="function"?T=s(v):T=[s,B?"active":null,y?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(v):l;return D.createElement(hn,wo({},m,{"aria-current":x,className:T,ref:n,style:P,to:u,viewTransition:c}),typeof h=="function"?h(v):h)});var lf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lf||(lf={}));var Wy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wy||(Wy={}));function QA(t){let e=D.useContext(gl);return e||_e(!1),e}function KA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=As(),c=bo(),h=qc(t,{relative:o});return D.useCallback(m=>{if(NA(m,n)){m.preventDefault();let g=r!==void 0?r:_s(c)===_s(h);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,r,i,n,t,s,o,l])}function GA(t,e){e===void 0&&(e={});let n=D.useContext(zE);n==null&&_e(!1);let{basename:r}=QA(lf.useViewTransitionState),i=qc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=zr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=zr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dc(i.pathname,o)!=null||dc(i.pathname,s)!=null}var qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},HE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,E=c&63;u||(E=64,o||(g=64)),r.push(n[h],n[m],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($E(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new XA;const g=s<<2|l>>4;if(r.push(g),c!==64){const E=l<<4&240|c>>2;if(r.push(E),m!==64){const R=c<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JA=function(t){const e=$E(t);return HE.encodeByteArray(e,!0)},pc=function(t){return JA(t).replace(/\./g,"")},WE=function(t){try{return HE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=()=>ZA().__FIREBASE_DEFAULTS__,tC=()=>{if(typeof process>"u"||typeof qy>"u")return;const t=qy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WE(t[1]);return e&&JSON.parse(e)},Qc=()=>{try{return eC()||tC()||nC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qE=t=>{var e,n;return(n=(e=Qc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Mp=t=>{const e=qE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QE=()=>{var t;return(t=Qc())===null||t===void 0?void 0:t.config},KE=t=>{var e;return(e=Qc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pc(JSON.stringify(n)),pc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function sC(){var t;const e=(t=Qc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uC(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cC(){return!sC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dC(){try{return typeof indexedDB=="object"}catch{return!1}}function hC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="FirebaseError";class _r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fC,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?pC(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new _r(i,l,r)}}function pC(t,e){return t.replace(mC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mC=/\{\$([^}]+)}/g;function gC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qy(s)&&Qy(o)){if(!mc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yC(t,e){const n=new vC(t,e);return n.subscribe.bind(n)}class vC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_C(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xd),i.error===void 0&&(i.error=Xd),i.complete===void 0&&(i.complete=Xd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _C(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TC(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EC(t){return t===Zi?void 0:t}function TC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const xC={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},SC=Ae.INFO,RC={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},AC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=SC,this._logHandler=AC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const CC=(t,e)=>e.some(n=>t instanceof n);let Ky,Gy;function PC(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NC(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YE=new WeakMap,uf=new WeakMap,XE=new WeakMap,Jd=new WeakMap,Up=new WeakMap;function kC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&YE.set(n,t)}).catch(()=>{}),Up.set(e,t),e}function bC(t){if(uf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});uf.set(t,e)}let cf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DC(t){cf=t(cf)}function OC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zd(this),e,...n);return XE.set(r,e.sort?e.sort():[e]),Ai(r)}:NC().includes(t)?function(...e){return t.apply(Zd(this),e),Ai(YE.get(this))}:function(...e){return Ai(t.apply(Zd(this),e))}}function LC(t){return typeof t=="function"?OC(t):(t instanceof IDBTransaction&&bC(t),CC(t,PC())?new Proxy(t,cf):t)}function Ai(t){if(t instanceof IDBRequest)return kC(t);if(Jd.has(t))return Jd.get(t);const e=LC(t);return e!==t&&(Jd.set(t,e),Up.set(e,t)),e}const Zd=t=>Up.get(t);function jC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ai(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ai(o.result),u.oldVersion,u.newVersion,Ai(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const MC=["get","getKey","getAll","getAllKeys","count"],VC=["put","add","delete","clear"],eh=new Map;function Yy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eh.get(e))return eh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=VC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MC.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return eh.set(e,s),s}DC(t=>({...t,get:(e,n,r)=>Yy(e,n)||t.get(e,n,r),has:(e,n)=>!!Yy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const df="@firebase/app",Xy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Vp("@firebase/app"),BC="@firebase/app-compat",zC="@firebase/analytics-compat",$C="@firebase/analytics",HC="@firebase/app-check-compat",WC="@firebase/app-check",qC="@firebase/auth",QC="@firebase/auth-compat",KC="@firebase/database",GC="@firebase/data-connect",YC="@firebase/database-compat",XC="@firebase/functions",JC="@firebase/functions-compat",ZC="@firebase/installations",eP="@firebase/installations-compat",tP="@firebase/messaging",nP="@firebase/messaging-compat",rP="@firebase/performance",iP="@firebase/performance-compat",sP="@firebase/remote-config",oP="@firebase/remote-config-compat",aP="@firebase/storage",lP="@firebase/storage-compat",uP="@firebase/firestore",cP="@firebase/vertexai-preview",dP="@firebase/firestore-compat",hP="firebase",fP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="[DEFAULT]",pP={[df]:"fire-core",[BC]:"fire-core-compat",[$C]:"fire-analytics",[zC]:"fire-analytics-compat",[WC]:"fire-app-check",[HC]:"fire-app-check-compat",[qC]:"fire-auth",[QC]:"fire-auth-compat",[KC]:"fire-rtdb",[GC]:"fire-data-connect",[YC]:"fire-rtdb-compat",[XC]:"fire-fn",[JC]:"fire-fn-compat",[ZC]:"fire-iid",[eP]:"fire-iid-compat",[tP]:"fire-fcm",[nP]:"fire-fcm-compat",[rP]:"fire-perf",[iP]:"fire-perf-compat",[sP]:"fire-rc",[oP]:"fire-rc-compat",[aP]:"fire-gcs",[lP]:"fire-gcs-compat",[uP]:"fire-fst",[dP]:"fire-fst-compat",[cP]:"fire-vertex","fire-js":"fire-js",[hP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Map,mP=new Map,ff=new Map;function Jy(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(ff.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;ff.set(e,t);for(const n of gc.values())Jy(n,t);for(const n of mP.values())Jy(n,t);return!0}function wl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new vl("app","Firebase",gP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=fP;function JE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ci.create("bad-app-name",{appName:String(i)});if(n||(n=QE()),!n)throw Ci.create("no-options");const s=gc.get(i);if(s){if(mc(n,s.options)&&mc(r,s.config))return s;throw Ci.create("duplicate-app",{appName:i})}const o=new IC(i);for(const u of ff.values())o.addComponent(u);const l=new yP(n,r,o);return gc.set(i,l),l}function Kc(t=hf){const e=gc.get(t);if(!e&&t===hf&&QE())return JE();if(!e)throw Ci.create("no-app",{appName:t});return e}function Fn(t,e,n){var r;let i=(r=pP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(l.join(" "));return}Di(new $r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="firebase-heartbeat-database",_P=1,tl="firebase-heartbeat-store";let th=null;function ZE(){return th||(th=jC(vP,_P,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ci.create("idb-open",{originalErrorMessage:t.message})})),th}async function wP(t){try{const n=(await ZE()).transaction(tl),r=await n.objectStore(tl).get(e0(t));return await n.done,r}catch(e){if(e instanceof _r)Hr.warn(e.message);else{const n=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function Zy(t,e){try{const r=(await ZE()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,e0(t)),await r.done}catch(n){if(n instanceof _r)Hr.warn(n.message);else{const r=Ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function e0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=1024,TP=30*24*60*60*1e3;class IP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ev();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=TP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ev(),{heartbeatsToSend:r,unsentEntries:i}=xP(this._heartbeatsCache.heartbeats),s=pc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hr.warn(n),""}}}function ev(){return new Date().toISOString().substring(0,10)}function xP(t,e=EP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dC()?hC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tv(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){Di(new $r("platform-logger",e=>new UC(e),"PRIVATE")),Di(new $r("heartbeat",e=>new IP(e),"PRIVATE")),Fn(df,Xy,t),Fn(df,Xy,"esm2017"),Fn("fire-js","")}RP("");function Fp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function t0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AP=t0,n0=new vl("auth","Firebase",t0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Vp("@firebase/auth");function CP(t,...e){yc.logLevel<=Ae.WARN&&yc.warn(`Auth (${Cs}): ${t}`,...e)}function ku(t,...e){yc.logLevel<=Ae.ERROR&&yc.error(`Auth (${Cs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,...e){throw zp(t,...e)}function Zn(t,...e){return zp(t,...e)}function Bp(t,e,n){const r=Object.assign(Object.assign({},AP()),{[e]:n});return new vl("auth","Firebase",r).create(e,{appName:t.name})}function cs(t){return Bp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&yr(t,"argument-error"),Bp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return n0.create(t,...e)}function de(t,e,...n){if(!t)throw zp(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ku(e),new Error(e)}function Wr(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NP(){return nv()==="http:"||nv()==="https:"}function nv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NP()||aC()||"connection"in navigator)?navigator.onLine:!0}function bP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=iC()||lC()}get(){return kP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new El(3e4,6e4);function Hp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Do(t,e,n,r,i={}){return i0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=_l(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return oC()||(c.referrerPolicy="no-referrer"),r0.fetch()(s0(t,t.config.apiHost,n,l),c)})}async function i0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DP),e);try{const i=new jP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw du(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Bp(t,h,c);yr(t,h)}}catch(i){if(i instanceof _r)throw i;yr(t,"network-request-failed",{message:String(i)})}}async function LP(t,e,n,r,i={}){const s=await Do(t,e,n,r,i);return"mfaPendingCredential"in s&&yr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function s0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?$p(t.config,i):`${t.config.apiScheme}://${i}`}class jP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),OP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(t,e){return Do(t,"POST","/v1/accounts:delete",e)}async function o0(t,e){return Do(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a0(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=Wp(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Na(nh(i.auth_time)),issuedAtTime:Na(nh(i.iat)),expirationTime:Na(nh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nh(t){return Number(t)*1e3}function Wp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=WE(n);return i?JSON.parse(i):(ku("Failed to decode base64 JWT payload"),null)}catch(i){return ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rv(t){const e=Wp(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _r&&VP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Na(this.lastLoginAt),this.creationTime=Na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await nl(t,o0(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?l0(s.providerUserInfo):[],l=BP(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new mf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function FP(t){const e=at(t);await vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function l0(t){return t.map(e=>{var{providerId:n}=e,r=Fp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){const n=await i0(t,{},async()=>{const r=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=s0(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",r0.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $P(t,e){return Do(t,"POST","/v2/accounts:revokeToken",Hp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ao;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Fp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nl(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return a0(this,e)}reload(){return FP(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await nl(this,MP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:A,emailVerified:O,isAnonymous:U,providerData:B,stsTokenManager:y}=n;de(A&&y,e,"internal-error");const v=ao.fromJSON(this.name,y);de(typeof A=="string",e,"internal-error"),ri(m,e.name),ri(g,e.name),de(typeof O=="boolean",e,"internal-error"),de(typeof U=="boolean",e,"internal-error"),ri(E,e.name),ri(R,e.name),ri(C,e.name),ri(b,e.name),ri(S,e.name),ri(w,e.name);const x=new Dr({uid:A,auth:e,email:g,emailVerified:O,displayName:m,isAnonymous:U,photoURL:R,phoneNumber:E,tenantId:C,stsTokenManager:v,createdAt:S,lastLoginAt:w});return B&&Array.isArray(B)&&(x.providerData=B.map(T=>Object.assign({},T))),b&&(x._redirectEventId=b),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new ao;i.updateFromServerResponse(n);const s=new Dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];de(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?l0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ao;l.updateFromIdToken(r);const u=new Dr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;function Or(t){Wr(t instanceof Function,"Expected a class definition");let e=iv.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u0.type="NONE";const sv=u0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bu(this.userKey,i.apiKey,s),this.fullPersistenceKey=bu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(Or(sv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Or(sv);const o=bu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){const m=Dr._fromJSON(e,h);c!==s&&(l=m),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new lo(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new lo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m0(e))return"Blackberry";if(g0(e))return"Webos";if(d0(e))return"Safari";if((e.includes("chrome/")||h0(e))&&!e.includes("edge/"))return"Chrome";if(p0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c0(t=Xt()){return/firefox\//i.test(t)}function d0(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h0(t=Xt()){return/crios\//i.test(t)}function f0(t=Xt()){return/iemobile/i.test(t)}function p0(t=Xt()){return/android/i.test(t)}function m0(t=Xt()){return/blackberry/i.test(t)}function g0(t=Xt()){return/webos/i.test(t)}function qp(t=Xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HP(t=Xt()){var e;return qp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WP(){return uC()&&document.documentMode===10}function y0(t=Xt()){return qp(t)||p0(t)||g0(t)||m0(t)||/windows phone/i.test(t)||f0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t,e=[]){let n;switch(t){case"Browser":n=ov(Xt());break;case"Worker":n=`${ov(Xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e={}){return Do(t,"GET","/v2/passwordPolicy",Hp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=6;class GP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new av(this),this.idTokenSubscription=new av(this),this.beforeStateQueue=new qP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Or(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await o0(this,{idToken:e}),r=await Dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(cs(this));const n=e?at(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QP(this),n=new GP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $P(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Or(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[Or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&CP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Gc(t){return at(t)}class av{constructor(e){this.auth=e,this.observer=null,this.addObserver=yC(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XP(t){Qp=t}function JP(t){return Qp.loadJS(t)}function ZP(){return Qp.gapiScript}function eN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e){const n=wl(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(mc(s,e??{}))return i;yr(i,"already-initialized")}return n.initialize({options:e})}function nN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rN(t,e,n){const r=Gc(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=_0(e),{host:o,port:l}=iN(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),sN()}function _0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iN(t){const e=_0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:lv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:lv(o)}}}function lv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return LP(t,"POST","/v1/accounts:signInWithIdp",Hp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="http://localhost";class ws extends w0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Fp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ws(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:oN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Tl{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Tl{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Tl{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Dr._fromIdTokenResponse(e,r,i),o=uv(r);return new Eo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=uv(r);return new Eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function uv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends _r{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_c.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _c(e,n,r,i)}}function E0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_c._fromErrorAndOperation(t,s,e,r):s})}async function aN(t,e,n=!1){const r=await nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e,n=!1){const{auth:r}=t;if(kr(r.app))return Promise.reject(cs(r));const i="reauthenticate";try{const s=await nl(t,E0(r,i,e,t),n);de(s.idToken,r,"internal-error");const o=Wp(s.idToken);de(o,r,"internal-error");const{sub:l}=o;return de(t.uid===l,r,"user-mismatch"),Eo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e,n=!1){if(kr(t.app))return Promise.reject(cs(t));const r="signIn",i=await E0(t,r,e),s=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function cN(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function dN(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function hN(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}const wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wc,"1"),this.storage.removeItem(wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=1e3,pN=10;class I0 extends T0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);WP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I0.type="LOCAL";const mN=I0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends T0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}x0.type="SESSION";const S0=x0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Yc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await gN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Gp("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function vN(t){pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function _N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function EN(){return R0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebaseLocalStorageDb",TN=1,Ec="firebaseLocalStorage",C0="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xc(t,e){return t.transaction([Ec],e?"readwrite":"readonly").objectStore(Ec)}function IN(){const t=indexedDB.deleteDatabase(A0);return new Il(t).toPromise()}function gf(){const t=indexedDB.open(A0,TN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ec,{keyPath:C0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ec)?e(r):(r.close(),await IN(),e(await gf()))})})}async function cv(t,e,n){const r=Xc(t,!0).put({[C0]:e,value:n});return new Il(r).toPromise()}async function xN(t,e){const n=Xc(t,!1).get(e),r=await new Il(n).toPromise();return r===void 0?null:r.value}function dv(t,e){const n=Xc(t,!0).delete(e);return new Il(n).toPromise()}const SN=800,RN=3;class P0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yc._getInstance(EN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _N(),!this.activeServiceWorker)return;this.sender=new yN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gf();return await cv(e,wc,"1"),await dv(e,wc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Xc(i,!1).getAll();return new Il(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P0.type="LOCAL";const AN=P0;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){return e?Or(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends w0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CN(t){return uN(t.auth,new Yp(t),t.bypassAuthState)}function PN(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),lN(n,new Yp(t),t.bypassAuthState)}async function NN(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),aN(n,new Yp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CN;case"linkViaPopup":case"linkViaRedirect":return NN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:yr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new El(2e3,1e4);async function bN(t,e,n){if(kr(t.app))return Promise.reject(Zn(t,"operation-not-supported-in-this-environment"));const r=Gc(t);PP(t,e,Kp);const i=N0(r,n);return new os(r,"signInViaPopup",e,i).executeNotNull()}class os extends k0{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kN.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="pendingRedirect",Du=new Map;class ON extends k0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Du.get(this.auth._key());if(!e){try{const r=await LN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Du.set(this.auth._key(),e)}return this.bypassAuthState||Du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LN(t,e){const n=VN(e),r=MN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function jN(t,e){Du.set(t._key(),e)}function MN(t){return Or(t._redirectPersistence)}function VN(t){return bu(DN,t.config.apiKey,t.name)}async function UN(t,e,n=!1){if(kr(t.app))return Promise.reject(cs(t));const r=Gc(t),i=N0(r,e),o=await new ON(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=10*60*1e3;class BN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!b0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FN&&this.cachedEventUids.clear(),this.cachedEventUids.has(hv(e))}saveEventToCache(e){this.cachedEventUids.add(hv(e)),this.lastProcessedEventTime=Date.now()}}function hv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e={}){return Do(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WN=/^https?/;async function qN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $N(t);for(const n of e)try{if(QN(n))return}catch{}yr(t,"unauthorized-domain")}function QN(t){const e=pf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!WN.test(n))return!1;if(HN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new El(3e4,6e4);function fv(){const t=pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GN(t){return new Promise((e,n)=>{var r,i,s;function o(){fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fv(),n(Zn(t,"network-request-failed"))},timeout:KN.get()})}if(!((i=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pr().gapi)===null||s===void 0)&&s.load)o();else{const l=eN("iframefcb");return pr()[l]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},JP(`${ZP()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ou=null,e})}let Ou=null;function YN(t){return Ou=Ou||GN(t),Ou}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new El(5e3,15e3),JN="__/auth/iframe",ZN="emulator/auth/iframe",ek={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nk(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$p(e,ZN):`https://${t.config.authDomain}/${JN}`,r={apiKey:e.apiKey,appName:t.name,v:Cs},i=tk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_l(r).slice(1)}`}async function rk(t){const e=await YN(t),n=pr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:nk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ek,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),l=pr().setTimeout(()=>{s(o)},XN.get());function u(){pr().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sk=500,ok=600,ak="_blank",lk="http://localhost";class pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uk(t,e,n,r=sk,i=ok){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},ik),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Xt().toLowerCase();n&&(l=h0(c)?ak:n),c0(c)&&(e=e||lk,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[E,R])=>`${g}${E}=${R},`,"");if(HP(c)&&l!=="_self")return ck(e||"",l),new pv(null);const m=window.open(e||"",l,h);de(m,t,"popup-blocked");try{m.focus()}catch{}return new pv(m)}function ck(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="__/auth/handler",hk="emulator/auth/handler",fk=encodeURIComponent("fac");async function mv(t,e,n,r,i,s){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cs,eventId:i};if(e instanceof Kp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Tl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${fk}=${encodeURIComponent(u)}`:"";return`${pk(t)}?${_l(l).slice(1)}${c}`}function pk({config:t}){return t.emulator?$p(t,hk):`https://${t.authDomain}/${dk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="webStorageSupport";class mk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S0,this._completeRedirectFn=UN,this._overrideRedirectResult=jN}async _openPopup(e,n,r,i){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await mv(e,n,r,pf(),i);return uk(e,o,Gp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await mv(e,n,r,pf(),i);return vN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rk(e),r=new BN(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rh,{type:rh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[rh];o!==void 0&&n(!!o),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y0()||d0()||qp()}}const gk=mk;var gv="@firebase/auth",yv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _k(t){Di(new $r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v0(t)},c=new YP(r,i,s,u);return nN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new $r("auth-internal",e=>{const n=Gc(e.getProvider("auth").getImmediate());return(r=>new yk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(gv,yv,vk(t)),Fn(gv,yv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=5*60,Ek=KE("authIdTokenMaxAge")||wk;let vv=null;const Tk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ek)return;const i=n==null?void 0:n.token;vv!==i&&(vv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ik(t=Kc()){const e=wl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=tN(t,{popupRedirectResolver:gk,persistence:[AN,mN,S0]}),r=KE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Tk(s.toString());dN(n,o,()=>o(n.currentUser)),cN(n,l=>o(l))}}const i=qE("auth");return i&&rN(n,`http://${i}`),n}function xk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_k("Browser");var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,D0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function x(){}x.prototype=v.prototype,y.D=v.prototype,y.prototype=new x,y.prototype.constructor=y,y.C=function(T,P,k){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return v.prototype[P].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,v,x){x||(x=0);var T=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)T[P]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(P=0;16>P;++P)T[P]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=y.g[0],x=y.g[1],P=y.g[2];var k=y.g[3],I=v+(k^x&(P^k))+T[0]+3614090360&4294967295;v=x+(I<<7&4294967295|I>>>25),I=k+(P^v&(x^P))+T[1]+3905402710&4294967295,k=v+(I<<12&4294967295|I>>>20),I=P+(x^k&(v^x))+T[2]+606105819&4294967295,P=k+(I<<17&4294967295|I>>>15),I=x+(v^P&(k^v))+T[3]+3250441966&4294967295,x=P+(I<<22&4294967295|I>>>10),I=v+(k^x&(P^k))+T[4]+4118548399&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(P^v&(x^P))+T[5]+1200080426&4294967295,k=v+(I<<12&4294967295|I>>>20),I=P+(x^k&(v^x))+T[6]+2821735955&4294967295,P=k+(I<<17&4294967295|I>>>15),I=x+(v^P&(k^v))+T[7]+4249261313&4294967295,x=P+(I<<22&4294967295|I>>>10),I=v+(k^x&(P^k))+T[8]+1770035416&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(P^v&(x^P))+T[9]+2336552879&4294967295,k=v+(I<<12&4294967295|I>>>20),I=P+(x^k&(v^x))+T[10]+4294925233&4294967295,P=k+(I<<17&4294967295|I>>>15),I=x+(v^P&(k^v))+T[11]+2304563134&4294967295,x=P+(I<<22&4294967295|I>>>10),I=v+(k^x&(P^k))+T[12]+1804603682&4294967295,v=x+(I<<7&4294967295|I>>>25),I=k+(P^v&(x^P))+T[13]+4254626195&4294967295,k=v+(I<<12&4294967295|I>>>20),I=P+(x^k&(v^x))+T[14]+2792965006&4294967295,P=k+(I<<17&4294967295|I>>>15),I=x+(v^P&(k^v))+T[15]+1236535329&4294967295,x=P+(I<<22&4294967295|I>>>10),I=v+(P^k&(x^P))+T[1]+4129170786&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^P&(v^x))+T[6]+3225465664&4294967295,k=v+(I<<9&4294967295|I>>>23),I=P+(v^x&(k^v))+T[11]+643717713&4294967295,P=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(P^k))+T[0]+3921069994&4294967295,x=P+(I<<20&4294967295|I>>>12),I=v+(P^k&(x^P))+T[5]+3593408605&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^P&(v^x))+T[10]+38016083&4294967295,k=v+(I<<9&4294967295|I>>>23),I=P+(v^x&(k^v))+T[15]+3634488961&4294967295,P=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(P^k))+T[4]+3889429448&4294967295,x=P+(I<<20&4294967295|I>>>12),I=v+(P^k&(x^P))+T[9]+568446438&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^P&(v^x))+T[14]+3275163606&4294967295,k=v+(I<<9&4294967295|I>>>23),I=P+(v^x&(k^v))+T[3]+4107603335&4294967295,P=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(P^k))+T[8]+1163531501&4294967295,x=P+(I<<20&4294967295|I>>>12),I=v+(P^k&(x^P))+T[13]+2850285829&4294967295,v=x+(I<<5&4294967295|I>>>27),I=k+(x^P&(v^x))+T[2]+4243563512&4294967295,k=v+(I<<9&4294967295|I>>>23),I=P+(v^x&(k^v))+T[7]+1735328473&4294967295,P=k+(I<<14&4294967295|I>>>18),I=x+(k^v&(P^k))+T[12]+2368359562&4294967295,x=P+(I<<20&4294967295|I>>>12),I=v+(x^P^k)+T[5]+4294588738&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^P)+T[8]+2272392833&4294967295,k=v+(I<<11&4294967295|I>>>21),I=P+(k^v^x)+T[11]+1839030562&4294967295,P=k+(I<<16&4294967295|I>>>16),I=x+(P^k^v)+T[14]+4259657740&4294967295,x=P+(I<<23&4294967295|I>>>9),I=v+(x^P^k)+T[1]+2763975236&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^P)+T[4]+1272893353&4294967295,k=v+(I<<11&4294967295|I>>>21),I=P+(k^v^x)+T[7]+4139469664&4294967295,P=k+(I<<16&4294967295|I>>>16),I=x+(P^k^v)+T[10]+3200236656&4294967295,x=P+(I<<23&4294967295|I>>>9),I=v+(x^P^k)+T[13]+681279174&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^P)+T[0]+3936430074&4294967295,k=v+(I<<11&4294967295|I>>>21),I=P+(k^v^x)+T[3]+3572445317&4294967295,P=k+(I<<16&4294967295|I>>>16),I=x+(P^k^v)+T[6]+76029189&4294967295,x=P+(I<<23&4294967295|I>>>9),I=v+(x^P^k)+T[9]+3654602809&4294967295,v=x+(I<<4&4294967295|I>>>28),I=k+(v^x^P)+T[12]+3873151461&4294967295,k=v+(I<<11&4294967295|I>>>21),I=P+(k^v^x)+T[15]+530742520&4294967295,P=k+(I<<16&4294967295|I>>>16),I=x+(P^k^v)+T[2]+3299628645&4294967295,x=P+(I<<23&4294967295|I>>>9),I=v+(P^(x|~k))+T[0]+4096336452&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~P))+T[7]+1126891415&4294967295,k=v+(I<<10&4294967295|I>>>22),I=P+(v^(k|~x))+T[14]+2878612391&4294967295,P=k+(I<<15&4294967295|I>>>17),I=x+(k^(P|~v))+T[5]+4237533241&4294967295,x=P+(I<<21&4294967295|I>>>11),I=v+(P^(x|~k))+T[12]+1700485571&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~P))+T[3]+2399980690&4294967295,k=v+(I<<10&4294967295|I>>>22),I=P+(v^(k|~x))+T[10]+4293915773&4294967295,P=k+(I<<15&4294967295|I>>>17),I=x+(k^(P|~v))+T[1]+2240044497&4294967295,x=P+(I<<21&4294967295|I>>>11),I=v+(P^(x|~k))+T[8]+1873313359&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~P))+T[15]+4264355552&4294967295,k=v+(I<<10&4294967295|I>>>22),I=P+(v^(k|~x))+T[6]+2734768916&4294967295,P=k+(I<<15&4294967295|I>>>17),I=x+(k^(P|~v))+T[13]+1309151649&4294967295,x=P+(I<<21&4294967295|I>>>11),I=v+(P^(x|~k))+T[4]+4149444226&4294967295,v=x+(I<<6&4294967295|I>>>26),I=k+(x^(v|~P))+T[11]+3174756917&4294967295,k=v+(I<<10&4294967295|I>>>22),I=P+(v^(k|~x))+T[2]+718787259&4294967295,P=k+(I<<15&4294967295|I>>>17),I=x+(k^(P|~v))+T[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,y.g[2]=y.g[2]+P&4294967295,y.g[3]=y.g[3]+k&4294967295}r.prototype.u=function(y,v){v===void 0&&(v=y.length);for(var x=v-this.blockSize,T=this.B,P=this.h,k=0;k<v;){if(P==0)for(;k<=x;)i(this,y,k),k+=this.blockSize;if(typeof y=="string"){for(;k<v;)if(T[P++]=y.charCodeAt(k++),P==this.blockSize){i(this,T),P=0;break}}else for(;k<v;)if(T[P++]=y[k++],P==this.blockSize){i(this,T),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;var x=8*this.o;for(v=y.length-8;v<y.length;++v)y[v]=x&255,x/=256;for(this.u(y),y=Array(16),v=x=0;4>v;++v)for(var T=0;32>T;T+=8)y[x++]=this.g[v]>>>T&255;return y};function s(y,v){var x=l;return Object.prototype.hasOwnProperty.call(x,y)?x[y]:x[y]=v(y)}function o(y,v){this.h=v;for(var x=[],T=!0,P=y.length-1;0<=P;P--){var k=y[P]|0;T&&k==v||(x[P]=k,T=!1)}this.g=x}var l={};function u(y){return-128<=y&&128>y?s(y,function(v){return new o([v|0],0>v?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return m;if(0>y)return b(c(-y));for(var v=[],x=1,T=0;y>=x;T++)v[T]=y/x|0,x*=4294967296;return new o(v,0)}function h(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return b(h(y.substring(1),v));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(v,8)),T=m,P=0;P<y.length;P+=8){var k=Math.min(8,y.length-P),I=parseInt(y.substring(P,P+k),v);8>k?(k=c(Math.pow(v,k)),T=T.j(k).add(c(I))):(T=T.j(x),T=T.add(c(I)))}return T}var m=u(0),g=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-b(this).m();for(var y=0,v=1,x=0;x<this.g.length;x++){var T=this.i(x);y+=(0<=T?T:4294967296+T)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(R(this))return"0";if(C(this))return"-"+b(this).toString(y);for(var v=c(Math.pow(y,6)),x=this,T="";;){var P=O(x,v).g;x=S(x,P.j(v));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(y);if(x=P,R(x))return k+T;for(;6>k.length;)k="0"+k;T=k+T}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function R(y){if(y.h!=0)return!1;for(var v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function C(y){return y.h==-1}t.l=function(y){return y=S(this,y),C(y)?-1:R(y)?0:1};function b(y){for(var v=y.g.length,x=[],T=0;T<v;T++)x[T]=~y.g[T];return new o(x,~y.h).add(g)}t.abs=function(){return C(this)?b(this):this},t.add=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],T=0,P=0;P<=v;P++){var k=T+(this.i(P)&65535)+(y.i(P)&65535),I=(k>>>16)+(this.i(P)>>>16)+(y.i(P)>>>16);T=I>>>16,k&=65535,I&=65535,x[P]=I<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function S(y,v){return y.add(b(v))}t.j=function(y){if(R(this)||R(y))return m;if(C(this))return C(y)?b(this).j(b(y)):b(b(this).j(y));if(C(y))return b(this.j(b(y)));if(0>this.l(E)&&0>y.l(E))return c(this.m()*y.m());for(var v=this.g.length+y.g.length,x=[],T=0;T<2*v;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var P=0;P<y.g.length;P++){var k=this.i(T)>>>16,I=this.i(T)&65535,le=y.i(P)>>>16,Oe=y.i(P)&65535;x[2*T+2*P]+=I*Oe,w(x,2*T+2*P),x[2*T+2*P+1]+=k*Oe,w(x,2*T+2*P+1),x[2*T+2*P+1]+=I*le,w(x,2*T+2*P+1),x[2*T+2*P+2]+=k*le,w(x,2*T+2*P+2)}for(T=0;T<v;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=v;T<2*v;T++)x[T]=0;return new o(x,0)};function w(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function A(y,v){this.g=y,this.h=v}function O(y,v){if(R(v))throw Error("division by zero");if(R(y))return new A(m,m);if(C(y))return v=O(b(y),v),new A(b(v.g),b(v.h));if(C(v))return v=O(y,b(v)),new A(b(v.g),v.h);if(30<y.g.length){if(C(y)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,T=v;0>=T.l(y);)x=U(x),T=U(T);var P=B(x,1),k=B(T,1);for(T=B(T,2),x=B(x,2);!R(T);){var I=k.add(T);0>=I.l(y)&&(P=P.add(x),k=I),T=B(T,1),x=B(x,1)}return v=S(y,P.j(v)),new A(P,v)}for(P=m;0<=y.l(v);){for(x=Math.max(1,Math.floor(y.m()/v.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),k=c(x),I=k.j(v);C(I)||0<I.l(y);)x-=T,k=c(x),I=k.j(v);R(k)&&(k=g),P=P.add(k),y=S(y,I)}return new A(P,y)}t.A=function(y){return O(this,y).h},t.and=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],T=0;T<v;T++)x[T]=this.i(T)&y.i(T);return new o(x,this.h&y.h)},t.or=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],T=0;T<v;T++)x[T]=this.i(T)|y.i(T);return new o(x,this.h|y.h)},t.xor=function(y){for(var v=Math.max(this.g.length,y.g.length),x=[],T=0;T<v;T++)x[T]=this.i(T)^y.i(T);return new o(x,this.h^y.h)};function U(y){for(var v=y.g.length+1,x=[],T=0;T<v;T++)x[T]=y.i(T)<<1|y.i(T-1)>>>31;return new o(x,y.h)}function B(y,v){var x=v>>5;v%=32;for(var T=y.g.length-x,P=[],k=0;k<T;k++)P[k]=0<v?y.i(k+x)>>>v|y.i(k+x+1)<<32-v:y.i(k+x);return new o(P,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ds=o}).apply(typeof _v<"u"?_v:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O0,ya,L0,Lu,yf,j0,M0,V0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var j=a[_];if(!(j in p))break e;p=p[j]}a=a[a.length-1],_=p[a],d=d(_),d!=_&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,_=!1,j={next:function(){if(!_&&p<a.length){var V=p++;return{value:d(V,a[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,p){return a.call.apply(a.bind,arguments)}function m(a,d,p){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,_),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function g(a,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function E(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function R(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(_,j,V){for(var q=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)q[Be-2]=arguments[Be];return d.prototype[j].apply(_,q)}}function C(a){const d=a.length;if(0<d){const p=Array(d);for(let _=0;_<d;_++)p[_]=a[_];return p}return[]}function b(a,d){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const j=a.length||0,V=_.length||0;a.length=j+V;for(let q=0;q<V;q++)a[j+q]=_[q]}else a.push(_)}}class S{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var U=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function B(a,d,p){for(const _ in a)d.call(p,a[_],_,a)}function y(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function v(a){const d={};for(const p in a)d[p]=a[p];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let p,_;for(let j=1;j<arguments.length;j++){_=arguments[j];for(p in _)a[p]=_[p];for(let V=0;V<x.length;V++)p=x[V],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function P(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function k(a){l.setTimeout(()=>{throw a},0)}function I(){var a=re;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class le{constructor(){this.h=this.g=null}add(d,p){const _=Oe.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Oe=new S(()=>new nt,a=>a.reset());class nt{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,z=!1,re=new le,se=()=>{const a=l.Promise.resolve(void 0);Le=()=>{a.then(we)}};var we=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(p){k(p)}var d=Oe;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}z=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var ut=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function Fe(a,d){if(Ce.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(U){e:{try{O(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Fe.aa.h.call(this)}}R(Fe,Ce);var ct={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),vn=0;function on(a,d,p,_,j){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=j,this.key=++vn,this.da=this.fa=!1}function ye(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Je(a){this.src=a,this.g={},this.h=0}Je.prototype.add=function(a,d,p,_,j){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=ve(a,d,_,j);return-1<q?(d=a[q],p||(d.fa=!1)):(d=new on(d,this.src,V,!!_,j),d.fa=p,a.push(d)),d};function xe(a,d){var p=d.type;if(p in a.g){var _=a.g[p],j=Array.prototype.indexOf.call(_,d,void 0),V;(V=0<=j)&&Array.prototype.splice.call(_,j,1),V&&(ye(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function ve(a,d,p,_){for(var j=0;j<a.length;++j){var V=a[j];if(!V.da&&V.listener==d&&V.capture==!!p&&V.ha==_)return j}return-1}var _n="closure_lm_"+(1e6*Math.random()|0),G={};function ae(a,d,p,_,j){if(Array.isArray(d)){for(var V=0;V<d.length;V++)ae(a,d[V],p,_,j);return null}return p=Ct(p),a&&a[Xe]?a.K(d,p,c(_)?!!_.capture:!1,j):ge(a,d,p,!1,_,j)}function ge(a,d,p,_,j,V){if(!d)throw Error("Invalid event type");var q=c(j)?!!j.capture:!!j,Be=rt(a);if(Be||(a[_n]=Be=new Je(a)),p=Be.add(d,p,_,q,V),p.proxy)return p;if(_=ze(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)ut||(j=q),j===void 0&&(j=!1),a.addEventListener(d.toString(),_,j);else if(a.attachEvent)a.attachEvent(Jt(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ze(){function a(p){return d.call(a.src,a.listener,p)}const d=an;return a}function $e(a,d,p,_,j){if(Array.isArray(d))for(var V=0;V<d.length;V++)$e(a,d[V],p,_,j);else _=c(_)?!!_.capture:!!_,p=Ct(p),a&&a[Xe]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],p=ve(V,p,_,j),-1<p&&(ye(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=rt(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ve(d,p,_,j)),(p=-1<a?d[a]:null)&&Bt(p))}function Bt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Xe])xe(d.i,a);else{var p=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(p,_,a.capture):d.detachEvent?d.detachEvent(Jt(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=rt(d))?(xe(p,a),p.h==0&&(p.src=null,d[_n]=null)):ye(a)}}}function Jt(a){return a in G?G[a]:G[a]="on"+a}function an(a,d){if(a.da)a=!0;else{d=new Fe(d,this);var p=a.listener,_=a.ha||a.src;a.fa&&Bt(a),a=p.call(_,d)}return a}function rt(a){return a=a[_n],a instanceof Je?a:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(a){return typeof a=="function"?a:(a[Te]||(a[Te]=function(d){return a.handleEvent(d)}),a[Te])}function Se(){oe.call(this),this.i=new Je(this),this.M=this,this.F=null}R(Se,oe),Se.prototype[Xe]=!0,Se.prototype.removeEventListener=function(a,d,p,_){$e(this,a,d,p,_)};function xt(a,d){var p,_=a.F;if(_)for(p=[];_;_=_.F)p.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new Ce(d,a);else if(d instanceof Ce)d.target=d.target||a;else{var j=d;d=new Ce(_,a),T(d,j)}if(j=!0,p)for(var V=p.length-1;0<=V;V--){var q=d.g=p[V];j=wn(q,_,!0,d)&&j}if(q=d.g=a,j=wn(q,_,!0,d)&&j,j=wn(q,_,!1,d)&&j,p)for(V=0;V<p.length;V++)q=d.g=p[V],j=wn(q,_,!1,d)&&j}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],_=0;_<p.length;_++)ye(p[_]);delete a.g[d],a.h--}}this.F=null},Se.prototype.K=function(a,d,p,_){return this.i.add(String(a),d,!1,p,_)},Se.prototype.L=function(a,d,p,_){return this.i.add(String(a),d,!0,p,_)};function wn(a,d,p,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,V=0;V<d.length;++V){var q=d[V];if(q&&!q.da&&q.capture==p){var Be=q.listener,Dt=q.ha||q.src;q.fa&&xe(a.i,q),j=Be.call(Dt,_)!==!1&&j}}return j&&!_.defaultPrevented}function On(a,d,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Fo(a){a.g=On(()=>{a.g=null,a.i&&(a.i=!1,Fo(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ks extends oe{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Fo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){oe.call(this),this.h=a,this.g={}}R(Hi,oe);var $n=[];function Bo(a){B(a.g,function(d,p){this.g.hasOwnProperty(p)&&Bt(d)},a),a.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Bo(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=l.JSON.stringify,kl=l.JSON.parse,gd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ds(){}Ds.prototype.h=null;function Wi(a){return a.h||(a.h=a.i())}function zo(){}var wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){Ce.call(this,"d")}R(qi,Ce);function $o(){Ce.call(this,"c")}R($o,Ce);var sr={},bl=null;function Qi(){return bl=bl||new Se}sr.La="serverreachability";function Ki(a){Ce.call(this,sr.La,a)}R(Ki,Ce);function or(a){const d=Qi();xt(d,new Ki(d))}sr.STAT_EVENT="statevent";function Dl(a,d){Ce.call(this,sr.STAT_EVENT,a),this.stat=d}R(Dl,Ce);function bt(a){const d=Qi();xt(d,new Dl(d,a))}sr.Ma="timingevent";function N(a,d){Ce.call(this,sr.Ma,a),this.size=d}R(N,Ce);function L(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function M(){this.g=!0}M.prototype.xa=function(){this.g=!1};function $(a,d,p,_,j,V){a.info(function(){if(a.g)if(V)for(var q="",Be=V.split("&"),Dt=0;Dt<Be.length;Dt++){var be=Be[Dt].split("=");if(1<be.length){var zt=be[0];be=be[1];var $t=zt.split("_");q=2<=$t.length&&$t[1]=="type"?q+(zt+"="+be+"&"):q+(zt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+_+") [attempt "+j+"]: "+d+`
`+p+`
`+q})}function Q(a,d,p,_,j,V,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+j+"]: "+d+`
`+p+`
`+V+" "+q})}function te(a,d,p,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Z(a,p)+(_?" "+_:"")})}function ue(a,d){a.info(function(){return"TIMEOUT: "+d})}M.prototype.info=function(){};function Z(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var _=p[a];if(!(2>_.length)){var j=_[1];if(Array.isArray(j)&&!(1>j.length)){var V=j[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<j.length;q++)j[q]=""}}}}return bs(p)}catch{return d}}var J={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function ce(){}R(ce,Ds),ce.prototype.g=function(){return new XMLHttpRequest},ce.prototype.i=function(){return{}},ne=new ce;function me(a,d,p,_){this.j=a,this.i=d,this.l=p,this.R=_||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var je={},Re={};function He(a,d,p){a.L=1,a.v=Ml(xr(d)),a.m=p,a.P=!0,Er(a,null)}function Er(a,d){a.F=Date.now(),Zt(a),a.A=xr(a.v);var p=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Gm(p.i,"t",_),a.C=0,p=a.j.J,a.h=new _t,a.g=fg(a.j,p?d:null,!a.m),0<a.O&&(a.M=new ks(g(a.Y,a,a.g),a.O)),d=a.U,p=a.g,_=a.ca;var j="readystatechange";Array.isArray(j)||(j&&($n[0]=j.toString()),j=$n);for(var V=0;V<j.length;V++){var q=ae(p,j[V],_||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),or(),$(a.i,a.u,a.A,a.l,a.R,a.m)}me.prototype.ca=function(a){a=a.target;const d=this.M;d&&Sr(a)==3?d.j():this.Y(a)},me.prototype.Y=function(a){try{if(a==this.g)e:{const $t=Sr(this.g);var d=this.g.Ba();const Ms=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||ng(this.g)))){this.J||$t!=4||d==7||(d==8||0>=Ms?or(3):or(2)),Tr(this);var p=this.g.Z();this.X=p;t:if(Xr(this)){var _=ng(this.g);a="";var j=_.length,V=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ln(this),En(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(V&&d==j-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,Q(this.i,this.u,this.A,this.l,this.R,$t,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Dt=this.g;if((Be=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Be)){var be=Be;break t}}be=null}if(p=be)te(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jr(this,p);else{this.o=!1,this.s=3,bt(12),Ln(this),En(this);break e}}if(this.P){p=!0;let Wn;for(;!this.J&&this.C<q.length;)if(Wn=Hn(this,q),Wn==Re){$t==4&&(this.s=4,bt(14),p=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==je){this.s=4,bt(15),te(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else te(this.i,this.l,Wn,null),Jr(this,Wn);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||q.length!=0||this.h.h||(this.s=1,bt(16),p=!1),this.o=this.o&&p,!p)te(this.i,this.l,q,"[Invalid Chunked Response]"),Ln(this),En(this);else if(0<q.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),wd(zt),zt.M=!0,bt(11))}}else te(this.i,this.l,q,null),Jr(this,q);$t==4&&Ln(this),this.o&&!this.J&&($t==4?ug(this.j,this):(this.o=!1,Zt(this)))}else jI(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Ln(this),En(this)}}}catch{}finally{}};function Xr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Hn(a,d){var p=a.C,_=d.indexOf(`
`,p);return _==-1?Re:(p=Number(d.substring(p,_)),isNaN(p)?je:(_+=1,_+p>d.length?Re:(d=d.slice(_,_+p),a.C=_+p,d)))}me.prototype.cancel=function(){this.J=!0,Ln(this)};function Zt(a){a.S=Date.now()+a.I,Os(a,a.I)}function Os(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=L(g(a.ba,a),d)}function Tr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}me.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ue(this.i,this.A),this.L!=2&&(or(),bt(17)),Ln(this),this.s=2,En(this)):Os(this,this.S-a)};function En(a){a.j.G==0||a.J||ug(a.j,a)}function Ln(a){Tr(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Bo(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Jr(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||Ze(p.h,a))){if(!a.K&&Ze(p.h,a)&&p.G==3){try{var _=p.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var j=_;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)$l(p),Bl(p);else break e;_d(p),bt(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=L(g(p.Za,p),6e3));if(1>=Zr(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Yi(p,11)}else if((a.K||p.g==a)&&$l(p),!w(d))for(j=p.Da.g.parse(d),d=0;d<j.length;d++){let be=j[d];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];const zt=be[3];zt!=null&&(p.la=zt,p.j.info("VER="+p.la));const $t=be[4];$t!=null&&(p.Aa=$t,p.j.info("SVER="+p.Aa));const Ms=be[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(_=1.5*Ms,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Wn=a.g;if(Wn){const Wl=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var V=_.h;V.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ar(V,V.h),V.h=null))}if(_.D){const Ed=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ed&&(_.ya=Ed,Qe(_.I,_.D,Ed))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var q=a;if(_.qa=hg(_,_.J?_.ia:null,_.W),q.K){Ho(_.h,q);var Be=q,Dt=_.L;Dt&&(Be.I=Dt),Be.B&&(Tr(Be),Zt(Be)),_.g=q}else ag(_);0<p.i.length&&zl(p)}else be[0]!="stop"&&be[0]!="close"||Yi(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Yi(p,7):vd(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}or(4)}catch{}}var Pe=class{constructor(a,d){this.g=a,this.map=d}};function qe(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ir(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Zr(a){return a.h?1:a.g?a.g.size:0}function Ze(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ar(a,d){a.g?a.g.add(d):a.h=d}function Ho(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}qe.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ol(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return C(a.i)}function EI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,_=0;_<p;_++)d.push(a[_]);return d}d=[],p=0;for(_ in a)d[p++]=a[_];return d}function TI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const _ in a)d[p++]=_;return d}}}function $m(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=TI(a),_=EI(a),j=_.length,V=0;V<j;V++)d.call(void 0,_[V],p&&p[V],a)}var Hm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function II(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var _=a[p].indexOf("="),j=null;if(0<=_){var V=a[p].substring(0,_);j=a[p].substring(_+1)}else V=a[p];d(V,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Gi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gi){this.h=a.h,Ll(this,a.j),this.o=a.o,this.g=a.g,jl(this,a.s),this.l=a.l;var d=a.i,p=new Qo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Wm(this,p),this.m=a.m}else a&&(d=String(a).match(Hm))?(this.h=!1,Ll(this,d[1]||"",!0),this.o=Wo(d[2]||""),this.g=Wo(d[3]||"",!0),jl(this,d[4]),this.l=Wo(d[5]||"",!0),Wm(this,d[6]||"",!0),this.m=Wo(d[7]||"")):(this.h=!1,this.i=new Qo(null,this.h))}Gi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(qo(d,qm,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(qo(d,qm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(qo(p,p.charAt(0)=="/"?RI:SI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",qo(p,CI)),a.join("")};function xr(a){return new Gi(a)}function Ll(a,d,p){a.j=p?Wo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function jl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Wm(a,d,p){d instanceof Qo?(a.i=d,PI(a.i,a.h)):(p||(d=qo(d,AI)),a.i=new Qo(d,a.h))}function Qe(a,d,p){a.i.set(d,p)}function Ml(a){return Qe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Wo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qo(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,xI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function xI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var qm=/[#\/\?@]/g,SI=/[#\?:]/g,RI=/[#\?]/g,AI=/[#\?@]/g,CI=/#/g;function Qo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ei(a){a.g||(a.g=new Map,a.h=0,a.i&&II(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Qo.prototype,t.add=function(a,d){ei(this),this.i=null,a=Ls(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function Qm(a,d){ei(a),d=Ls(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Km(a,d){return ei(a),d=Ls(a,d),a.g.has(d)}t.forEach=function(a,d){ei(this),this.g.forEach(function(p,_){p.forEach(function(j){a.call(d,j,_,this)},this)},this)},t.na=function(){ei(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let _=0;_<d.length;_++){const j=a[_];for(let V=0;V<j.length;V++)p.push(d[_])}return p},t.V=function(a){ei(this);let d=[];if(typeof a=="string")Km(this,a)&&(d=d.concat(this.g.get(Ls(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return ei(this),this.i=null,a=Ls(this,a),Km(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Gm(a,d,p){Qm(a,d),0<p.length&&(a.i=null,a.g.set(Ls(a,d),C(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var _=d[p];const V=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var j=V;q[_]!==""&&(j+="="+encodeURIComponent(String(q[_]))),a.push(j)}}return this.i=a.join("&")};function Ls(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function PI(a,d){d&&!a.j&&(ei(a),a.i=null,a.g.forEach(function(p,_){var j=_.toLowerCase();_!=j&&(Qm(this,_),Gm(this,j,p))},a)),a.j=d}function NI(a,d){const p=new M;if(l.Image){const _=new Image;_.onload=E(ti,p,"TestLoadImage: loaded",!0,d,_),_.onerror=E(ti,p,"TestLoadImage: error",!1,d,_),_.onabort=E(ti,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=E(ti,p,"TestLoadImage: timeout",!1,d,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function kI(a,d){const p=new M,_=new AbortController,j=setTimeout(()=>{_.abort(),ti(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(V=>{clearTimeout(j),V.ok?ti(p,"TestPingServer: ok",!0,d):ti(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),ti(p,"TestPingServer: error",!1,d)})}function ti(a,d,p,_,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),_(p)}catch{}}function bI(){this.g=new gd}function DI(a,d,p){const _=p||"";try{$m(a,function(j,V){let q=j;c(j)&&(q=bs(j)),d.push(_+V+"="+encodeURIComponent(q))})}catch(j){throw d.push(_+"type="+encodeURIComponent("_badmap")),j}}function Vl(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Vl,Ds),Vl.prototype.g=function(){return new Ul(this.l,this.j)},Vl.prototype.i=function(a){return function(){return a}}({});function Ul(a,d){Se.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ul,Se),t=Ul.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Go(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ym(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ym(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ko(this):Go(this),this.readyState==3&&Ym(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ko(this))},t.Qa=function(a){this.g&&(this.response=a,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Go(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function Go(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Xm(a){let d="";return B(a,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function yd(a,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Xm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Qe(a,d,p))}function dt(a){Se.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(dt,Se);var OI=/^https?$/i,LI=["POST","PUT"];t=dt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?Wi(this.o):Wi(ne),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){Jm(this,V);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var j in _)p.set(j,_[j]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())p.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(LI,d,void 0))||_||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of p)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tg(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Jm(this,V)}};function Jm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Zm(a),Fl(a)}function Zm(a){a.A||(a.A=!0,xt(a,"complete"),xt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,xt(this,"complete"),xt(this,"abort"),Fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eg(this):this.bb())},t.bb=function(){eg(this)};function eg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Sr(a)!=4||a.Z()!=2)){if(a.u&&Sr(a)==4)On(a.Ea,0,a);else if(xt(a,"readystatechange"),Sr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=q===0){var j=String(a.D).match(Hm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),_=!OI.test(j?j.toLowerCase():"")}p=_}if(p)xt(a,"complete"),xt(a,"success");else{a.m=6;try{var V=2<Sr(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Zm(a)}}finally{Fl(a)}}}}function Fl(a,d){if(a.g){tg(a);const p=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||xt(a,"ready");try{p.onreadystatechange=_}catch{}}}function tg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Sr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),kl(d)}};function ng(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jI(a){const d={};a=(a.g&&2<=Sr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(w(a[_]))continue;var p=P(a[_]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=d[j]||[];d[j]=V,V.push(p)}y(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function rg(a){this.Aa=0,this.i=[],this.j=new M,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yo("baseRetryDelayMs",5e3,a),this.cb=Yo("retryDelaySeedMs",1e4,a),this.Wa=Yo("forwardChannelMaxRetries",2,a),this.wa=Yo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qe(a&&a.concurrentRequestLimit),this.Da=new bI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rg.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,_){bt(0),this.W=a,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=hg(this,null,this.W),zl(this)};function vd(a){if(ig(a),a.G==3){var d=a.U++,p=xr(a.I);if(Qe(p,"SID",a.K),Qe(p,"RID",d),Qe(p,"TYPE","terminate"),Xo(a,p),d=new me(a,a.j,d),d.L=2,d.v=Ml(xr(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=fg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zt(d)}dg(a)}function Bl(a){a.g&&(wd(a),a.g.cancel(),a.g=null)}function ig(a){Bl(a),a.u&&(l.clearTimeout(a.u),a.u=null),$l(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function zl(a){if(!Ir(a.h)&&!a.s){a.s=!0;var d=a.Ga;Le||se(),z||(Le(),z=!0),re.add(d,a),a.B=0}}function MI(a,d){return Zr(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=L(g(a.Ga,a,d),cg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new me(this,this.j,a);let V=this.o;if(this.S&&(V?(V=v(V),T(V,this.S)):V=this.S),this.m!==null||this.O||(j.H=V,V=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=og(this,j,d),p=xr(this.I),Qe(p,"RID",a),Qe(p,"CVER",22),this.D&&Qe(p,"X-HTTP-Session-Id",this.D),Xo(this,p),V&&(this.O?d="headers="+encodeURIComponent(String(Xm(V)))+"&"+d:this.m&&yd(p,this.m,V)),ar(this.h,j),this.Ua&&Qe(p,"TYPE","init"),this.P?(Qe(p,"$req",d),Qe(p,"SID","null"),j.T=!0,He(j,p,null)):He(j,p,d),this.G=2}}else this.G==3&&(a?sg(this,a):this.i.length==0||Ir(this.h)||sg(this))};function sg(a,d){var p;d?p=d.l:p=a.U++;const _=xr(a.I);Qe(_,"SID",a.K),Qe(_,"RID",p),Qe(_,"AID",a.T),Xo(a,_),a.m&&a.o&&yd(_,a.m,a.o),p=new me(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=og(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ar(a.h,p),He(p,_,d)}function Xo(a,d){a.H&&B(a.H,function(p,_){Qe(d,_,p)}),a.l&&$m({},function(p,_){Qe(d,_,p)})}function og(a,d,p){p=Math.min(a.i.length,p);var _=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let V=-1;for(;;){const q=["count="+p];V==-1?0<p?(V=j[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Be=!0;for(let Dt=0;Dt<p;Dt++){let be=j[Dt].g;const zt=j[Dt].map;if(be-=V,0>be)V=Math.max(0,j[Dt].g-100),Be=!1;else try{DI(zt,q,"req"+be+"_")}catch{_&&_(zt)}}if(Be){_=q.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,_}function ag(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Le||se(),z||(Le(),z=!0),re.add(d,a),a.v=0}}function _d(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=L(g(a.Fa,a),cg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,lg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=L(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Bl(this),lg(this))};function wd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function lg(a){a.g=new me(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=xr(a.qa);Qe(d,"RID","rpc"),Qe(d,"SID",a.K),Qe(d,"AID",a.T),Qe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Qe(d,"TO",a.ja),Qe(d,"TYPE","xmlhttp"),Xo(a,d),a.m&&a.o&&yd(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ml(xr(d)),p.m=null,p.P=!0,Er(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Bl(this),_d(this),bt(19))};function $l(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function ug(a,d){var p=null;if(a.g==d){$l(a),wd(a),a.g=null;var _=2}else if(Ze(a.h,d))p=d.D,Ho(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;_=Qi(),xt(_,new N(_,p)),zl(a)}else ag(a);else if(j=d.s,j==3||j==0&&0<d.X||!(_==1&&MI(a,d)||_==2&&_d(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),j){case 1:Yi(a,5);break;case 4:Yi(a,10);break;case 3:Yi(a,6);break;default:Yi(a,2)}}}function cg(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function Yi(a,d){if(a.j.info("Error code "+d),d==2){var p=g(a.fb,a),_=a.Xa;const j=!_;_=new Gi(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ll(_,"https"),Ml(_),j?NI(_.toString(),p):kI(_.toString(),p)}else bt(2);a.G=0,a.l&&a.l.sa(d),dg(a),ig(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function dg(a){if(a.G=0,a.ka=[],a.l){const d=Ol(a.h);(d.length!=0||a.i.length!=0)&&(b(a.ka,d),b(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function hg(a,d,p){var _=p instanceof Gi?xr(p):new Gi(p);if(_.g!="")d&&(_.g=d+"."+_.g),jl(_,_.s);else{var j=l.location;_=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var V=new Gi(null);_&&Ll(V,_),d&&(V.g=d),j&&jl(V,j),p&&(V.l=p),_=V}return p=a.D,d=a.ya,p&&d&&Qe(_,p,d),Qe(_,"VER",a.la),Xo(a,_),_}function fg(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new dt(new Vl({eb:p})):new dt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pg(){}t=pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(a,d){return new Tn(a,d)};function Tn(a,d){Se.call(this),this.g=new rg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new js(this)}R(Tn,Se),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){vd(this.g)},Tn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=bs(a),a=p);d.i.push(new Pe(d.Ya++,a)),d.G==3&&zl(d)},Tn.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,Tn.aa.N.call(this)};function mg(a){qi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(mg,qi);function gg(){$o.call(this),this.status=1}R(gg,$o);function js(a){this.g=a}R(js,pg),js.prototype.ua=function(){xt(this.g,"a")},js.prototype.ta=function(a){xt(this.g,new mg(a))},js.prototype.sa=function(a){xt(this.g,new gg)},js.prototype.ra=function(){xt(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,V0=function(){return new Hl},M0=function(){return Qi()},j0=sr,yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},J.NO_ERROR=0,J.TIMEOUT=8,J.HTTP_ERROR=6,Lu=J,Y.COMPLETE="complete",L0=Y,zo.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",Se.prototype.listen=Se.prototype.K,ya=zo,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,O0=dt}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const wv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Vp("@firebase/firestore");function ua(){return Es.logLevel}function ee(t,...e){if(Es.logLevel<=Ae.DEBUG){const n=e.map(Xp);Es.debug(`Firestore (${Oo}): ${t}`,...n)}}function qr(t,...e){if(Es.logLevel<=Ae.ERROR){const n=e.map(Xp);Es.error(`Firestore (${Oo}): ${t}`,...n)}}function To(t,...e){if(Es.logLevel<=Ae.WARN){const n=e.map(Xp);Es.warn(`Firestore (${Oo}): ${t}`,...n)}}function Xp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+t;throw qr(e),new Error(e)}function Ue(t,e){t||he()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class Rk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ak{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string"),new U0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Qt(e)}}class Ck{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Pk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ck(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new Nk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function Io(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new At(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new At(0,0))}static max(){return new fe(new At(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends rl{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const Dk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends rl{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return Dk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ge.fromString(e))}static fromName(e){return new ie(Ge.fromString(e).popFirst(5))}static empty(){return new ie(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ge(e.slice()))}}function Ok(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new At(n+1,0):new At(n,r));return new Oi(i,ie.empty(),e)}function Lk(t){return new Oi(t.readTime,t.key,-1)}class Oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Oi(fe.min(),ie.empty(),-1)}static max(){return new Oi(fe.max(),ie.empty(),-1)}}function jk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Mk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Uk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jp.oe=-1;function Jc(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function Fk(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Lt.RED,this.left=i??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Lt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Vt(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z0("Invalid base64 string: "+s):s}}(e);return new Ft(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const Bk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(t){if(Ue(!!t),typeof t=="string"){let e=0;const n=Bk.exec(t);if(Ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function em(t){const e=t.mapValue.fields.__previous_value__;return Zp(e)?em(e):e}function il(t){const e=Li(t.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class sl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{}};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zp(t)?4:Hk(t)?9007199254740991:$k(t)?10:11:he()}function vr(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Li(i.timestampValue),l=Li(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ts(i.bytesValue).isEqual(Ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return gt(i.geoPointValue.latitude)===gt(s.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gt(i.integerValue)===gt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gt(i.doubleValue),l=gt(s.doubleValue);return o===l?Tc(o)===Tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Io(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Ev(o)!==Ev(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!vr(o[u],l[u])))return!1;return!0}(t,e);default:return he()}}function ol(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function xo(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=gt(s.integerValue||s.doubleValue),u=gt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Iv(t.timestampValue,e.timestampValue);case 4:return Iv(il(t),il(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Ts(s),u=Ts(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=De(l[c],u[c]);if(h!==0)return h}return De(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=De(gt(s.latitude),gt(o.latitude));return l!==0?l:De(gt(s.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,h;const m=s.fields||{},g=o.fields||{},E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,R=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=De(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((h=R==null?void 0:R.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:xv(E,R)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=De(u[m],h[m]);if(g!==0)return g;const E=xo(l[u[m]],c[h[m]]);if(E!==0)return E}return De(u.length,h.length)}(t.mapValue,e.mapValue);default:throw he()}}function Iv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=Li(t),r=Li(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function xv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=xo(n[i],r[i]);if(s)return s}return De(n.length,r.length)}function So(t){return vf(t)}function vf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vf(n.fields[o])}`;return i+"}"}(t.mapValue):he()}function Sv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _f(t){return!!t&&"integerValue"in t}function tm(t){return!!t&&"arrayValue"in t}function Rv(t){return!!t&&"nullValue"in t}function Av(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ju(t){return!!t&&"mapValue"in t}function $k(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ka(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Hk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ju(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ka(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ju(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ju(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ps(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(ka(this.value))}}function $0(t){const e=[];return Ps(t.fields,(n,r)=>{const i=new jt([n]);if(ju(r)){const s=$0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Gt(e,0,fe.min(),fe.min(),fe.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new Gt(e,1,n,fe.min(),r,i,0)}static newNoDocument(e,n){return new Gt(e,2,n,fe.min(),fe.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,fe.min(),fe.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.position=e,this.inclusive=n}}function Cv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=xo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function Wk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{}class It extends H0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Qk(e,n,r):n==="array-contains"?new Yk(e,r):n==="in"?new Xk(e,r):n==="not-in"?new Jk(e,r):n==="array-contains-any"?new Zk(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Kk(e,r):new Gk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xo(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends H0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return W0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function W0(t){return t.op==="and"}function q0(t){return qk(t)&&W0(t)}function qk(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function wf(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+So(t.value);if(q0(t))return t.filters.map(e=>wf(e)).join(",");{const e=t.filters.map(n=>wf(n)).join(",");return`${t.op}(${e})`}}function Q0(t,e){return t instanceof It?function(r,i){return i instanceof It&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(t,e):t instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Q0(o,i.filters[l]),!0):!1}(t,e):void he()}function K0(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(K0).join(" ,")+"}"}(t):"Filter"}class Qk extends It{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Kk extends It{constructor(e,n){super(e,"in",n),this.keys=G0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Gk extends It{constructor(e,n){super(e,"not-in",n),this.keys=G0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function G0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class Yk extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tm(n)&&ol(n.arrayValue,this.value)}}class Xk extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class Jk extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ol(this.value.arrayValue,n)}}class Zk extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ol(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Nv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new e1(t,e,n,r,i,s,o)}function nm(t){const e=pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>So(r)).join(",")),e.ue=n}return e.ue}function rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Wk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Q0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pv(t.startAt,e.startAt)&&Pv(t.endAt,e.endAt)}function Ef(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function t1(t,e,n,r,i,s,o,l){return new Lo(t,e,n,r,i,s,o,l)}function im(t){return new Lo(t)}function kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y0(t){return t.collectionGroup!==null}function ba(t){const e=pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Vt(jt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new al(s,r))}),n.has(jt.keyField().canonicalString())||e.ce.push(new al(jt.keyField(),r))}return e.ce}function mr(t){const e=pe(t);return e.le||(e.le=n1(e,ba(t))),e.le}function n1(t,e){if(t.limitType==="F")return Nv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new al(i.field,s)});const n=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;return Nv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tf(t,e){const n=t.filters.concat([e]);return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xc(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zc(t,e){return rm(mr(t),mr(e))&&t.limitType===e.limitType}function X0(t){return`${nm(mr(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>K0(i)).join(", ")}]`),Jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>So(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>So(i)).join(",")),`Target(${r})`}(mr(t))}; limitType=${t.limitType})`}function ed(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ba(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Cv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,ba(r),i)||r.endAt&&!function(o,l,u){const c=Cv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,ba(r),i))}(t,e)}function r1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function J0(t){return(e,n)=>{let r=!1;for(const i of ba(t)){const s=i1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function i1(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?xo(u,c):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return B0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new lt(ie.comparator);function Qr(){return s1}const Z0=new lt(ie.comparator);function va(...t){let e=Z0;for(const n of t)e=e.insert(n.key,n);return e}function eT(t){let e=Z0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return Da()}function tT(){return Da()}function Da(){return new jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const o1=new lt(ie.comparator),a1=new Vt(ie.comparator);function Ie(...t){let e=a1;for(const n of t)e=e.add(n);return e}const l1=new Vt(De);function u1(){return l1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function nT(t){return{integerValue:""+t}}function c1(t,e){return Fk(e)?nT(e):sm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function d1(t,e,n){return t instanceof ll?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zp(s)&&(s=em(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ul?iT(t,e):t instanceof cl?sT(t,e):function(i,s){const o=rT(i,s),l=bv(o)+bv(i.Pe);return _f(o)&&_f(i.Pe)?nT(l):sm(i.serializer,l)}(t,e)}function h1(t,e,n){return t instanceof ul?iT(t,e):t instanceof cl?sT(t,e):n}function rT(t,e){return t instanceof Sc?function(r){return _f(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ll extends td{}class ul extends td{constructor(e){super(),this.elements=e}}function iT(t,e){const n=oT(e);for(const r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class cl extends td{constructor(e){super(),this.elements=e}}function sT(t,e){let n=oT(e);for(const r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}class Sc extends td{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function bv(t){return gt(t.integerValue||t.doubleValue)}function oT(t){return tm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n){this.field=e,this.transform=n}}function p1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ul&&i instanceof ul||r instanceof cl&&i instanceof cl?Io(r.elements,i.elements,vr):r instanceof Sc&&i instanceof Sc?vr(r.Pe,i.Pe):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class m1{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nd{}function aT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new om(t.key,er.none()):new Rl(t.key,t.data,er.none());{const n=t.data,r=cn.empty();let i=new Vt(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zi(t.key,r,new Cn(i.toArray()),er.none())}}function g1(t,e,n){t instanceof Rl?function(i,s,o){const l=i.value.clone(),u=Ov(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(i,s,o){if(!Mu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ov(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(lT(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Oa(t,e,n,r){return t instanceof Rl?function(s,o,l,u){if(!Mu(s.precondition,o))return l;const c=s.value.clone(),h=Lv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(s,o,l,u){if(!Mu(s.precondition,o))return l;const c=Lv(s.fieldTransforms,u,o),h=o.data;return h.setAll(lT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Mu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function y1(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=rT(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function Dv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Io(r,i,(s,o)=>p1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rl extends nd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends nd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ov(t,e,n){const r=new Map;Ue(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,h1(o,l,n[i]))}return r}function Lv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,d1(s,o,e))}return r}class om extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v1 extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&g1(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=aT(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(n,r)=>Dv(n,r))&&Io(this.baseMutations,e.baseMutations,(n,r)=>Dv(n,r))}}class am{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length);let i=function(){return o1}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new am(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Ne;function T1(t){switch(t){default:return he();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function uT(t){if(t===void 0)return qr("GRPC error has no .code"),F.UNKNOWN;switch(t){case wt.OK:return F.OK;case wt.CANCELLED:return F.CANCELLED;case wt.UNKNOWN:return F.UNKNOWN;case wt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case wt.INTERNAL:return F.INTERNAL;case wt.UNAVAILABLE:return F.UNAVAILABLE;case wt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case wt.NOT_FOUND:return F.NOT_FOUND;case wt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case wt.ABORTED:return F.ABORTED;case wt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case wt.DATA_LOSS:return F.DATA_LOSS;default:return he()}}(Ne=wt||(wt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new ds([4294967295,4294967295],0);function jv(t){const e=I1().encode(t),n=new D0;return n.update(e),new Uint8Array(n.digest())}function Mv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,r],0),new ds([i,s],0)]}class lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _a(`Invalid padding: ${n}`);if(r<0)throw new _a(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _a(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ds.fromNumber(r)));return i.compare(x1)===1&&(i=new ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=jv(e),[r,i]=Mv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=jv(e),[r,i]=Mv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rd(fe.min(),i,new lt(De),Qr(),Ie())}}class Al{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Al(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class cT{constructor(e,n){this.targetId=e,this.me=n}}class dT{constructor(e,n,r=Ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Vv{constructor(){this.fe=0,this.ge=Fv(),this.pe=Ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new Al(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Fv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class S1{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=Uv(),this.Qe=new lt(De)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ef(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,Gt.newNoDocument(o,fe.min()))}else Ue(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Ts(r).toUint8Array()}catch(u){if(u instanceof z0)return To("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lm(o,i,s)}catch(u){return To(u instanceof _a?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Ef(l.target)){const u=new ie(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Gt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ie();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new rd(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=Uv(),this.Qe=new lt(De),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Vt(De),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Uv(){return new lt(ie.comparator)}function Fv(){return new lt(ie.comparator)}const R1={asc:"ASCENDING",desc:"DESCENDING"},A1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C1={and:"AND",or:"OR"};class P1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function If(t,e){return t.useProto3Json||Jc(e)?e:{value:e}}function Rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N1(t,e){return Rc(t,e.toTimestamp())}function gr(t){return Ue(!!t),fe.fromTimestamp(function(n){const r=Li(n);return new At(r.seconds,r.nanos)}(t))}function um(t,e){return xf(t,e).canonicalString()}function xf(t,e){const n=function(i){return new Ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fT(t){const e=Ge.fromString(t);return Ue(vT(e)),e}function Sf(t,e){return um(t.databaseId,e.path)}function ih(t,e){const n=fT(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(mT(n))}function pT(t,e){return um(t.databaseId,e)}function k1(t){const e=fT(t);return e.length===4?Ge.emptyPath():mT(e)}function Rf(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mT(t){return Ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Bv(t,e,n){return{name:Sf(t,e),fields:n.value.mapValue.fields}}function b1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ue(h===void 0||typeof h=="string"),Ft.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?F.UNKNOWN:uT(c.code);return new K(h,c.message||"")}(o);n=new dT(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ih(t,r.document.name),s=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):fe.min(),l=new cn({mapValue:{fields:r.document.fields}}),u=Gt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Vu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ih(t,r.document),s=r.readTime?gr(r.readTime):fe.min(),o=Gt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Vu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ih(t,r.document),s=r.removedTargetIds||[];n=new Vu([],s,i,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new E1(i,s),l=r.targetId;n=new cT(l,o)}}return n}function D1(t,e){let n;if(e instanceof Rl)n={update:Bv(t,e.key,e.value)};else if(e instanceof om)n={delete:Sf(t,e.key)};else if(e instanceof zi)n={update:Bv(t,e.key,e.data),updateMask:z1(e.fieldMask)};else{if(!(e instanceof v1))return he();n={verify:Sf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:N1(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he()}(t,e.precondition)),n}function O1(t,e){return t&&t.length>0?(Ue(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gr(i.updateTime):gr(s);return o.isEqual(fe.min())&&(o=gr(s)),new m1(o,i.transformResults||[])}(n,e))):[]}function L1(t,e){return{documents:[pT(t,e.path)]}}function j1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pT(t,i);const s=function(c){if(c.length!==0)return yT(ir.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Bs(g.field),direction:U1(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=If(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function M1(t){let e=k1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ue(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const g=gT(m);return g instanceof ir&&q0(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(R){return new al(zs(R.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Jc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,E=m.values||[];return new Ic(E,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,E=m.values||[];return new Ic(E,g)}(n.endAt)),t1(e,i,o,s,l,"F",u,c)}function V1(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(n.unaryFilter.field);return It.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return It.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return It.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>gT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function U1(t){return R1[t]}function F1(t){return A1[t]}function B1(t){return C1[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function zs(t){return jt.fromServerFormat(t.fieldPath)}function yT(t){return t instanceof It?function(n){if(n.op==="=="){if(Av(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(Rv(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Av(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(Rv(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:F1(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(i=>yT(i));return r.length===1?r[0]:{compositeFilter:{op:B1(n.op),filters:r}}}(t):he()}function z1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,i,s=fe.min(),o=fe.min(),l=Ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.ct=e}}function H1(t){const e=M1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.un=new q1}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Oi.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class q1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vt(Ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ro(0)}static kn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.changes=new jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Oa(r.mutation,i,Cn.empty(),At.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=as();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=va();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Qr();const o=Da(),l=function(){return Da()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof zi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Oa(h.mutation,c,h.mutation.getFieldMask(),At.now())):o.set(c.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var m;return l.set(c,new K1(h,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Da();let i=new lt((o,l)=>o-l),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Cn.empty();h=l.applyToLocalView(c,h),r.set(u,h);const m=(i.get(l.batchId)||Ie()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,m=tT();h.forEach(g=>{if(!s.has(g)){const E=aT(n.get(g),r.get(g));E!==null&&m.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(as());let l=-1,u=s;return o.next(c=>H.forEach(c,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Ie())).next(h=>({batchId:l,changes:eT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=va();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=va();return this.indexManager.getCollectionParents(e,s).next(l=>H.forEach(l,u=>{const c=function(m,g){return new Lo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Gt.newInvalidDocument(h)))});let l=va();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Oa(h.mutation,c,Cn.empty(),At.now()),ed(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gr(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:H1(i.bundledQuery),readTime:gr(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.overlays=new lt(ie.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=as(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new lt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=as(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=as(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return H.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new w1(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.Tr=new Vt(Pt.Er),this.dr=new Vt(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Pt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Ge([])),r=new Pt(n,e),i=new Pt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Ge([])),r=new Pt(n,e),i=new Pt(n,e+1);let s=Ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Pt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||De(e.wr,n.wr)}static Ar(e,n){return De(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Vt(Pt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _1(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Pt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),i=new Pt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(De);return n.forEach(i=>{const s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new Pt(new ie(s),0);let l=new Vt(De);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,i=>{const s=new Pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Pt(n,0),i=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.Mr=e,this.docs=function(){return new lt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Gt.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qr();const o=n.path,l=new ie(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||jk(Lk(h),r)<=0||(i.has(h.key)||ed(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tb(this)}getSize(e){return H.resolve(this.size)}}class tb extends Q1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.persistence=e,this.Nr=new jo(n=>nm(n),rm),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cm,this.targetCount=0,this.kr=Ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jp(0),this.Kr=!1,this.Kr=!0,this.$r=new J1,this.referenceDelegate=e(this),this.Ur=new nb(this),this.indexManager=new W1,this.remoteDocumentCache=function(i){return new eb(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $1(n),this.Gr=new Y1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Z1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new ib(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ib extends Vk{constructor(e){super(),this.currentSequenceNumber=e}}class dm{constructor(e){this.persistence=e,this.Jr=new cm,this.Yr=null}static Zr(e){return new dm(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ie(),i=Ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cC()?8:Uk(Xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new sb;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ua()<=Ae.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(ua()<=Ae.DEBUG&&ee("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ua()<=Ae.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):H.resolve())}Yi(e,n){if(kv(n))return H.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xc(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,xc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return kv(n)||i.isEqual(fe.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?H.resolve(null):(ua()<=Ae.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fs(n)),this.rs(e,o,n,Ok(i,-1)).next(l=>l))})}ts(e,n){let r=new Vt(J0(e));return n.forEach((i,s)=>{ed(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ua()<=Ae.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Oi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new lt(De),this._s=new jo(s=>nm(s),rm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lb(t,e,n,r){return new ab(t,e,n,r)}async function _T(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Ie();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function ub(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const m=c.batch,g=m.keys();let E=H.resolve();return g.forEach(R=>{E=E.next(()=>h.getEntry(u,R)).next(C=>{const b=c.docVersions.get(R);Ue(b!==null),C.version.compareTo(b)<0&&(m.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),h.addEntry(C)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ie();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wT(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function cb(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,m)=>{const g=i.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,m)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(Ft.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(m,E),function(C,b,S){return C.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,E,h)&&l.push(n.Ur.updateTargetData(s,E))});let u=Qr(),c=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(db(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(fe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return H.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function db(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ee("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function hb(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fb(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Af(t,e,n){const r=pe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function zv(t,e,n){const r=pe(t);let i=fe.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const m=pe(u),g=m._s.get(h);return g!==void 0?H.resolve(m.os.get(g)):m.Ur.getTargetData(c,h)}(r,o,mr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:fe.min(),n?s:Ie())).next(l=>(pb(r,r1(e),l),{documents:l,Ts:s})))}function pb(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class $v{constructor(){this.activeTargetIds=u1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mb{constructor(){this.so=new $v,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function sh(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class _b extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=sh(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(ee("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw To("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=yb[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=sh();return new Promise((o,l)=>{const u=new O0;u.setWithCredentials(!0),u.listenOnce(L0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Lu.NO_ERROR:const h=u.getResponseJson();ee(qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Lu.TIMEOUT:ee(qt,`RPC '${e}' ${s} timed out`),l(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Lu.HTTP_ERROR:const m=u.getStatus();if(ee(qt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const R=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(S)>=0?S:F.UNKNOWN}(E.status);l(new K(R,E.message))}else l(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(F.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ee(qt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(qt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=sh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=V0(),l=M0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ee(qt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let g=!1,E=!1;const R=new vb({Io:b=>{E?ee(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(ee(qt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),ee(qt,`RPC '${e}' stream ${i} sending:`,b),m.send(b))},To:()=>m.close()}),C=(b,S,w)=>{b.listen(S,A=>{try{w(A)}catch(O){setTimeout(()=>{throw O},0)}})};return C(m,ya.EventType.OPEN,()=>{E||(ee(qt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),C(m,ya.EventType.CLOSE,()=>{E||(E=!0,ee(qt,`RPC '${e}' stream ${i} transport closed`),R.So())}),C(m,ya.EventType.ERROR,b=>{E||(E=!0,To(qt,`RPC '${e}' stream ${i} transport errored:`,b),R.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),C(m,ya.EventType.MESSAGE,b=>{var S;if(!E){const w=b.data[0];Ue(!!w);const A=w,O=A.error||((S=A[0])===null||S===void 0?void 0:S.error);if(O){ee(qt,`RPC '${e}' stream ${i} received error:`,O);const U=O.status;let B=function(x){const T=wt[x];if(T!==void 0)return uT(T)}(U),y=O.message;B===void 0&&(B=F.INTERNAL,y="Unknown error status: "+U+" with message "+O.message),E=!0,R.So(new K(B,y)),m.close()}else ee(qt,`RPC '${e}' stream ${i} received:`,w),R.bo(w)}}),C(l,j0.STAT_EVENT,b=>{b.stat===yf.PROXY?ee(qt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===yf.NOPROXY&&ee(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new P1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ET(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wb extends TT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=b1(this.serializer,e),r=function(s){if(!("targetChange"in s))return fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?gr(o.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Ef(u)?{documents:L1(s,u)}:{query:j1(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hT(s,o.resumeToken);const c=If(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){l.readTime=Rc(s,o.snapshotVersion.toTimestamp());const c=If(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=V1(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rf(this.serializer),n.removeTarget=e,this.a_(n)}}class Eb extends TT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=O1(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>D1(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,xf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ib{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ns(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=pe(u);c.L_.add(4),await Cl(c),c.q_.set("Unknown"),c.L_.delete(4),await sd(c)}(this))})}),this.q_=new Ib(r,i)}}async function sd(t){if(Ns(t))for(const e of t.B_)await e(!0)}async function Cl(t){for(const e of t.B_)await e(!1)}function IT(t,e){const n=pe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gm(n)?mm(n):Mo(n).r_()&&pm(n,e))}function fm(t,e){const n=pe(t),r=Mo(n);n.N_.delete(e),r.r_()&&xT(n,e),n.N_.size===0&&(r.r_()?r.o_():Ns(n)&&n.q_.set("Unknown"))}function pm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).A_(e)}function xT(t,e){t.Q_.xe(e),Mo(t).R_(e)}function mm(t){t.Q_=new S1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.q_.v_()}function gm(t){return Ns(t)&&!Mo(t).n_()&&t.N_.size>0}function Ns(t){return pe(t).L_.size===0}function ST(t){t.Q_=void 0}async function Sb(t){t.q_.set("Online")}async function Rb(t){t.N_.forEach((e,n)=>{pm(t,e)})}async function Ab(t,e){ST(t),gm(t)?(t.q_.M_(e),mm(t)):t.q_.set("Unknown")}async function Cb(t,e,n){if(t.q_.set("Online"),e instanceof dT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ac(t,r)}else if(e instanceof Vu?t.Q_.Ke(e):e instanceof cT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const r=await wT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Ft.EMPTY_BYTE_STRING,h.snapshotVersion)),xT(s,u);const m=new vi(h.target,u,c,h.sequenceNumber);pm(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Ac(t,r)}}async function Ac(t,e,n){if(!Sl(e))throw e;t.L_.add(1),await Cl(t),t.q_.set("Offline"),n||(n=()=>wT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await sd(t)})}function RT(t,e){return e().catch(n=>Ac(t,n,e))}async function od(t){const e=pe(t),n=ji(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Pb(e);)try{const i=await hb(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Nb(e,i)}catch(i){await Ac(e,i)}AT(e)&&CT(e)}function Pb(t){return Ns(t)&&t.O_.length<10}function Nb(t,e){t.O_.push(e);const n=ji(t);n.r_()&&n.V_&&n.m_(e.mutations)}function AT(t){return Ns(t)&&!ji(t).n_()&&t.O_.length>0}function CT(t){ji(t).start()}async function kb(t){ji(t).p_()}async function bb(t){const e=ji(t);for(const n of t.O_)e.m_(n.mutations)}async function Db(t,e,n){const r=t.O_.shift(),i=am.from(r,e,n);await RT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await od(t)}async function Ob(t,e){e&&ji(t).V_&&await async function(r,i){if(function(o){return T1(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();ji(r).s_(),await RT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await od(r)}}(t,e),AT(t)&&CT(t)}async function Wv(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Ns(n);n.L_.add(3),await Cl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await sd(n)}async function Lb(t,e){const n=pe(t);e?(n.L_.delete(2),await sd(n)):e||(n.L_.add(2),await Cl(n),n.q_.set("Unknown"))}function Mo(t){return t.K_||(t.K_=function(n,r,i){const s=pe(n);return s.w_(),new wb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Sb.bind(null,t),Ro:Rb.bind(null,t),mo:Ab.bind(null,t),d_:Cb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gm(t)?mm(t):t.q_.set("Unknown")):(await t.K_.stop(),ST(t))})),t.K_}function ji(t){return t.U_||(t.U_=function(n,r,i){const s=pe(n);return s.w_(),new Eb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kb.bind(null,t),mo:Ob.bind(null,t),f_:bb.bind(null,t),g_:Db.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await od(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new ym(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vm(t,e){if(qr("AsyncQueue",`${e}: ${t}`),Sl(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=va(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.W_=new lt(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ao(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mb{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=pe(n),s=i.queries;i.queries=Qv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function Qv(){return new jo(t=>X0(t),Zc)}async function PT(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new jb,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=vm(o,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_m(n)}async function NT(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Vb(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&_m(n)}function Ub(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function _m(t){t.Y_.forEach(e=>{e.next()})}var Cf,Kv;(Kv=Cf||(Cf={})).ea="default",Kv.Cache="cache";class kT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.key=e}}class DT{constructor(e){this.key=e}}class Fb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=J0(e),this.Ra=new co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new qv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const g=i.get(h),E=ed(this.query,m)?m:null,R=!!g&&this.mutatedKeys.has(g.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let b=!1;g&&E?g.data.isEqual(E.data)?R!==C&&(r.track({type:3,doc:E}),b=!0):this.ga(g,E)||(r.track({type:2,doc:E}),b=!0,(u&&this.Aa(E,u)>0||c&&this.Aa(E,c)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),b=!0):g&&!E&&(r.track({type:1,doc:g}),b=!0,(u||c)&&(l=!0)),b&&(E?(o=o.add(E),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(E,R){const C=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return C(E)-C(R)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Ao(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new DT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bT(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Bb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zb{constructor(e){this.key=e,this.va=!1}}class $b{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jo(l=>X0(l),Zc),this.Ma=new Map,this.xa=new Set,this.Oa=new lt(ie.comparator),this.Na=new Map,this.La=new cm,this.Ba={},this.ka=new Map,this.qa=Ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Hb(t,e,n=!0){const r=UT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await OT(r,e,n,!0),i}async function Wb(t,e){const n=UT(t);await OT(n,e,!0,!1)}async function OT(t,e,n,r){const i=await fb(t.localStore,mr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await qb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&IT(t.remoteStore,i),l}async function qb(t,e,n,r,i){t.Ka=(m,g,E)=>async function(C,b,S,w){let A=b.view.ma(S);A.ns&&(A=await zv(C.localStore,b.query,!1).then(({documents:y})=>b.view.ma(y,A)));const O=w&&w.targetChanges.get(b.targetId),U=w&&w.targetMismatches.get(b.targetId)!=null,B=b.view.applyChanges(A,C.isPrimaryClient,O,U);return Yv(C,b.targetId,B.wa),B.snapshot}(t,m,g,E);const s=await zv(t.localStore,e,!0),o=new Fb(e,s.Ts),l=o.ma(s.documents),u=Al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Yv(t,n,c.wa);const h=new Bb(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Qb(t,e,n){const r=pe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Zc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Af(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fm(r.remoteStore,i.targetId),Pf(r,i.targetId)}).catch(xl)):(Pf(r,i.targetId),await Af(r.localStore,i.targetId,!0))}async function Kb(t,e){const n=pe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fm(n.remoteStore,r.targetId))}async function Gb(t,e,n){const r=nD(t);try{const i=await function(o,l){const u=pe(o),c=At.now(),h=l.reduce((E,R)=>E.add(R.key),Ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let R=Qr(),C=Ie();return u.cs.getEntries(E,h).next(b=>{R=b,R.forEach((S,w)=>{w.isValidDocument()||(C=C.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,R)).next(b=>{m=b;const S=[];for(const w of l){const A=y1(w,m.get(w.key).overlayedDocument);A!=null&&S.push(new zi(w.key,A,$0(A.value.mapValue),er.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,S,l)}).next(b=>{g=b;const S=b.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(E,b.batchId,S)})}).then(()=>({batchId:g.batchId,changes:eT(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new lt(De)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Pl(r,i.changes),await od(r.remoteStore)}catch(i){const s=vm(i,"Failed to persist write");n.reject(s)}}async function LT(t,e){const n=pe(t);try{const r=await cb(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ue(o.va):i.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),await Pl(n,r,e)}catch(r){await xl(r)}}function Gv(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=pe(o);u.onlineState=l;let c=!1;u.queries.forEach((h,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&_m(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yb(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new lt(ie.comparator);o=o.insert(s,Gt.newNoDocument(s,fe.min()));const l=Ie().add(s),u=new rd(fe.min(),new Map,new lt(De),o,l);await LT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),wm(r)}else await Af(r.localStore,e,!1).then(()=>Pf(r,e,n)).catch(xl)}async function Xb(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await ub(n.localStore,e);MT(n,r,null),jT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pl(n,i)}catch(i){await xl(i)}}async function Jb(t,e,n){const r=pe(t);try{const i=await function(o,l){const u=pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Ue(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);MT(r,e,n),jT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pl(r,i)}catch(i){await xl(i)}}function jT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function MT(t,e,n){const r=pe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Pf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||VT(t,r)})}function VT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),wm(t))}function Yv(t,e,n){for(const r of n)r instanceof bT?(t.La.addReference(r.key,e),Zb(t,r)):r instanceof DT?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||VT(t,r.key)):he()}function Zb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),wm(t))}function wm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new zb(n)),t.Oa=t.Oa.insert(n,r),IT(t.remoteStore,new vi(mr(im(n.path)),r,"TargetPurposeLimboResolution",Jp.oe))}}async function Pl(t,e,n){const r=pe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=hm.Wi(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=pe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(c,g=>H.forEach(g.$i,E=>h.persistence.referenceDelegate.addReference(m,g.targetId,E)).next(()=>H.forEach(g.Ui,E=>h.persistence.referenceDelegate.removeReference(m,g.targetId,E)))))}catch(m){if(!Sl(m))throw m;ee("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const E=h.os.get(g),R=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(R);h.os=h.os.insert(g,C)}}}(r.localStore,s))}async function eD(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await _T(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pl(n,r.hs)}}function tD(t,e){const n=pe(t),r=n.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function UT(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yb.bind(null,e),e.Ca.d_=Vb.bind(null,e.eventManager),e.Ca.$a=Ub.bind(null,e.eventManager),e}function nD(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jb.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lb(this.persistence,new ob,e.initialUser,this.serializer)}Ga(e){return new rb(dm.Zr,this.serializer)}Wa(e){return new mb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class Nf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eD.bind(null,this.syncEngine),await Lb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mb}()}createDatastore(e){const n=id(e.databaseInfo.databaseId),r=function(s){return new _b(s)}(e.databaseInfo);return function(s,o,l,u){return new Tb(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new xb(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Gv(this.syncEngine,n,0),function(){return Hv.D()?new Hv:new gb}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const m=new $b(i,s,o,l,u,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=pe(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Cl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nf.provider={build:()=>new Nf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=F0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ah(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _T(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iD(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Wv(e.remoteStore,i)),t._onlineComponents=e}async function iD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await ah(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await ah(t,new Cc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await ah(t,new Cc);return t._offlineComponents}async function BT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Xv(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Xv(t,new Nf))),t._onlineComponents}function sD(t){return BT(t).then(e=>e.syncEngine)}async function zT(t){const e=await BT(t),n=e.eventManager;return n.onListen=Hb.bind(null,e.syncEngine),n.onUnlisten=Qb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Kb.bind(null,e.syncEngine),n}function oD(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new FT({next:g=>{h.Za(),o.enqueueAndForget(()=>NT(s,m));const E=g.docs.has(l);!E&&g.fromCache?c.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new kT(im(l.path),h,{includeMetadataChanges:!0,_a:!0});return PT(s,m)}(await zT(t),t.asyncQueue,e,n,r)),r.promise}function aD(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new FT({next:g=>{h.Za(),o.enqueueAndForget(()=>NT(s,m)),g.fromCache&&u.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new kT(l,h,{includeMetadataChanges:!0,_a:!0});return PT(s,m)}(await zT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lD(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zv(t){if(!ie.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function e_(t){if(ie.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ad(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function Kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ad(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ld{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sk;switch(r.type){case"firstParty":return new Pk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jv.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Jv.delete(n),r.terminate())}(this),Promise.resolve()}}function uD(t,e,n,r={}){var i;const s=(t=Kr(t,ld))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Qt.MOCK_USER;else{l=GE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qt(c)}t._authCredentials=new Rk(new U0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class Pi extends $i{constructor(e,n,r){super(e,n,im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new ie(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function fn(t,e,...n){if(t=at(t),HT("collection","path",e),t instanceof ld){const r=Ge.fromString(e,...n);return e_(r),new Pi(t,null,r)}{if(!(t instanceof yn||t instanceof Pi))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return e_(r),new Pi(t.firestore,null,r)}}function Ni(t,e,...n){if(t=at(t),arguments.length===1&&(e=F0.newId()),HT("doc","path",e),t instanceof ld){const r=Ge.fromString(e,...n);return Zv(r),new yn(t,null,new ie(r))}{if(!(t instanceof yn||t instanceof Pi))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return Zv(r),new yn(t.firestore,t instanceof Pi?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ET(this,"async_queue_retry"),this.Vu=()=>{const r=oh();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=oh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=oh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw qr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ym.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&he()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Vo extends ld{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new n_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n_(e),this._firestoreClient=void 0,await e}}}function cD(t,e){const n=typeof t=="object"?t:Kc(),r=typeof t=="string"?t:"(default)",i=wl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Mp("firestore");s&&uD(i,...s)}return i}function Em(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dD(t),t._firestoreClient}function dD(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,h){return new zk(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$T(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new rD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(Ft.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Co(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=/^__.*__$/;class fD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rl(e,this.data,n,this.fieldTransforms)}}class WT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class xm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qT(this.Cu)&&hD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class pD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||id(e)}Qu(e,n,r,i=!1){return new xm({Cu:e,methodName:n,qu:r,path:jt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sm(t){const e=t._freezeSettings(),n=id(t._databaseId);return new pD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mD(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Am("Data must be an object, but it was:",o,r);const l=QT(r,o);let u,c;if(s.merge)u=new Cn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=kf(e,m,n);if(!o.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GT(h,g)||h.push(g)}u=new Cn(h),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new fD(new cn(l),u,c)}class dd extends cd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}class Rm extends cd{_toFieldTransform(e){return new f1(e.path,new ll)}isEqual(e){return e instanceof Rm}}function gD(t,e,n,r){const i=t.Qu(1,e,n);Am("Data must be an object, but it was:",i,r);const s=[],o=cn.empty();Ps(r,(u,c)=>{const h=Cm(e,u,n);c=at(c);const m=i.Nu(h);if(c instanceof dd)s.push(h);else{const g=Nl(c,m);g!=null&&(s.push(h),o.set(h,g))}});const l=new Cn(s);return new WT(o,l,i.fieldTransforms)}function yD(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[kf(e,r,n)],u=[i];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(kf(e,s[g])),u.push(s[g+1]);const c=[],h=cn.empty();for(let g=l.length-1;g>=0;--g)if(!GT(c,l[g])){const E=l[g];let R=u[g];R=at(R);const C=o.Nu(E);if(R instanceof dd)c.push(E);else{const b=Nl(R,C);b!=null&&(c.push(E),h.set(E,b))}}const m=new Cn(c);return new WT(h,m,o.fieldTransforms)}function vD(t,e,n,r=!1){return Nl(n,t.Qu(r?4:3,e))}function Nl(t,e){if(KT(t=at(t)))return Am("Unsupported field value:",e,t),QT(t,e);if(t instanceof cd)return function(r,i){if(!qT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Nl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return c1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=At.fromDate(r);return{timestampValue:Rc(i.serializer,s)}}if(r instanceof At){const s=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rc(i.serializer,s)}}if(r instanceof Tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Co)return{bytesValue:hT(i.serializer,r._byteString)};if(r instanceof yn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:um(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Im)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return sm(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ad(r)}`)}(t,e)}function QT(t,e){const n={};return B0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(t,(r,i)=>{const s=Nl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function KT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof Tm||t instanceof Co||t instanceof yn||t instanceof cd||t instanceof Im)}function Am(t,e,n){if(!KT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ad(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function kf(t,e,n){if((e=at(e))instanceof ud)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw Pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const _D=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(_D)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ud(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new K(F.INVALID_ARGUMENT,l+t+u)}function GT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wD extends YT{data(){return super.data()}}function hd(t,e){return typeof e=="string"?Cm(t,e):e instanceof ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class Nm extends Pm{}function tr(t,e,...n){let r=[];e instanceof Pm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof km).length,l=s.filter(u=>u instanceof fd).length;if(o>1||o>0&&l>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fd extends Nm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fd(e,n,r)}_apply(e){const n=this._parse(e);return XT(e._query,n),new $i(e.firestore,e.converter,Tf(e._query,n))}_parse(e){const n=Sm(e.firestore);return function(s,o,l,u,c,h,m){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){i_(m,h);const E=[];for(const R of m)E.push(r_(u,s,R));g={arrayValue:{values:E}}}else g=r_(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||i_(m,h),g=vD(l,o,m,h==="in"||h==="not-in");return It.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lh(t,e,n){const r=e,i=hd("where",t);return fd._create(i,r,n)}class km extends Pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new km(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)XT(o,u),o=Tf(o,u)}(e._query,n),new $i(e.firestore,e.converter,Tf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bm extends Nm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new al(s,o)}(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Lo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function hs(t,e="asc"){const n=e,r=hd("orderBy",t);return bm._create(r,n)}class Dm extends Nm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Dm(e,n,r)}_apply(e){return new $i(e.firestore,e.converter,xc(e._query,this._limit,this._limitType))}}function TD(t){return Dm._create("limit",t,"F")}function r_(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y0(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!ie.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sv(t,new ie(r))}if(n instanceof yn)return Sv(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(n)}.`)}function i_(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ID{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ps(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>gt(o.doubleValue));return new Im(s)}convertGeoPoint(e){return new Tm(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=em(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=Li(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);Ue(vT(r));const i=new sl(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JT extends YT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uu extends JT{data(e={}){return super.data(e)}}class SD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uu(this._firestore,this._userDataWriter,r.key,r,new wa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Uu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Uu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:RD(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){t=Kr(t,yn);const e=Kr(t.firestore,Vo);return oD(Em(e),t._key).then(n=>AD(e,t,n))}class eI extends ID{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function nr(t){t=Kr(t,$i);const e=Kr(t.firestore,Vo),n=Em(e),r=new eI(e);return ED(t._query),aD(n,t._query).then(i=>new SD(e,r,t,i))}function tI(t,e,n,...r){t=Kr(t,yn);const i=Kr(t.firestore,Vo),s=Sm(i);let o;return o=typeof(e=at(e))=="string"||e instanceof ud?yD(s,"updateDoc",t._key,e,n,r):gD(s,"updateDoc",t._key,e),jm(i,[o.toMutation(t._key,er.exists(!0))])}function Om(t){return jm(Kr(t.firestore,Vo),[new om(t._key,er.none())])}function Lm(t,e){const n=Kr(t.firestore,Vo),r=Ni(t),i=xD(t.converter,e);return jm(n,[mD(Sm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}function jm(t,e){return function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget(async()=>Gb(await sD(r),i,s)),s.promise}(Em(t),e)}function AD(t,e,n){const r=n.docs.get(e._key),i=new eI(t);return new JT(t,i,e._key,r,new wa(n.hasPendingWrites,n.fromCache),e.converter)}function CD(){return new Rm("serverTimestamp")}(function(e,n=!0){(function(i){Oo=i})(Cs),Di(new $r("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Vo(new Ak(r.getProvider("auth-internal")),new kk(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Fn(wv,"4.7.3",e),Fn(wv,"4.7.3","esm2017")})();var PD="firebase",ND="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn(PD,ND,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebasestorage.googleapis.com",rI="storageBucket",kD=2*60*1e3,bD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends _r{constructor(e,n,r=0){super(uh(e),`Firebase Storage: ${n} (${uh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function uh(t){return"storage/"+t}function Mm(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(ft.UNKNOWN,t)}function DD(t){return new pt(ft.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function OD(t){return new pt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(ft.UNAUTHENTICATED,t)}function jD(){return new pt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function MD(t){return new pt(ft.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function VD(){return new pt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UD(){return new pt(ft.CANCELED,"User canceled the upload/download.")}function FD(t){return new pt(ft.INVALID_URL,"Invalid URL '"+t+"'.")}function BD(t){return new pt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zD(){return new pt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rI+"' property when initializing the app?")}function $D(){return new pt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function HD(){return new pt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WD(t){return new pt(ft.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bf(t){return new pt(ft.INVALID_ARGUMENT,t)}function iI(){return new pt(ft.APP_DELETED,"The Firebase app was deleted.")}function qD(t){return new pt(ft.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function La(t,e){return new pt(ft.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ca(t){throw new pt(ft.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pn.makeFromUrl(e,n)}catch{return new Pn(e,"")}if(r.path==="")return r;throw BD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",E=new RegExp(`^https?://${m}/${h}/b/${i}/o${g}`,"i"),R={bucket:1,path:3},C=n===nI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",S=new RegExp(`^https?://${C}/${i}/${b}`,"i"),A=[{regex:l,indices:u,postModify:s},{regex:E,indices:R,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<A.length;O++){const U=A[O],B=U.regex.exec(e);if(B){const y=B[U.indices.bucket];let v=B[U.indices.path];v||(v=""),r=new Pn(y,v),U.postModify(r);break}}if(r==null)throw FD(e);return r}}class QD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function h(...b){c||(c=!0,e.apply(null,b))}function m(b){i=setTimeout(()=>{i=null,t(E,u())},b)}function g(){s&&clearTimeout(s)}function E(b,...S){if(c){g();return}if(b){g(),h.call(null,b,...S);return}if(u()||o){g(),h.call(null,b,...S);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,m(A)}let R=!1;function C(b){R||(R=!0,g(),!c&&(i!==null?(b||(l=2),clearTimeout(i),m(0)):b||(l=1)))}return m(0),s=setTimeout(()=>{o=!0,C(!0)},n),C}function GD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){return t!==void 0}function XD(t){return typeof t=="object"&&!Array.isArray(t)}function Vm(t){return typeof t=="string"||t instanceof String}function s_(t){return Um()&&t instanceof Blob}function Um(){return typeof Blob<"u"}function o_(t,e,n,r){if(r<e)throw bf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw bf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var fs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fs||(fs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,i,s,o,l,u,c,h,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,R)=>{this.resolve_=E,this.reject_=R,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===fs.NO_ERROR,u=s.getStatus();if(!l||JD(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===fs.ABORT;r(!1,new gu(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new gu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());YD(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Mm();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?iI():UD();o(u)}else{const u=VD();o(u)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=KD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function e2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function t2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function r2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function i2(t,e,n,r,i,s,o=!0){const l=sI(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return n2(c,e),e2(c,n),t2(c,s),r2(c,r),new ZD(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function o2(...t){const e=s2();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Um())return new Blob(t);throw new pt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function a2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){if(typeof atob>"u")throw WD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ch{constructor(e,n){this.data=e,this.contentType=n||null}}function u2(t,e){switch(t){case dr.RAW:return new ch(oI(e));case dr.BASE64:case dr.BASE64URL:return new ch(aI(t,e));case dr.DATA_URL:return new ch(d2(e),h2(e))}throw Mm()}function oI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function c2(t){let e;try{e=decodeURIComponent(t)}catch{throw La(dr.DATA_URL,"Malformed data URL.")}return oI(e)}function aI(t,e){switch(t){case dr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw La(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw La(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=l2(e)}catch(i){throw i.message.includes("polyfill")?i:La(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class lI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw La(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=f2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function d2(t){const e=new lI(t);return e.base64?aI(dr.BASE64,e.rest):c2(e.rest)}function h2(t){return new lI(t).contentType}function f2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){let r=0,i="";s_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(s_(this.data_)){const r=this.data_,i=a2(r,e,n);return i===null?null:new pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pi(r,!0)}}static getBlob(...e){if(Um()){const n=e.map(r=>r instanceof pi?r.data_:r);return new pi(o2.apply(null,n))}else{const n=e.map(o=>Vm(o)?u2(dr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t){let e;try{e=JSON.parse(t)}catch{return null}return XD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function m2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t,e){return e}class en{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||g2}}let yu=null;function y2(t){return!Vm(t)||t.length<2?t:cI(t)}function dI(){if(yu)return yu;const t=[];t.push(new en("bucket")),t.push(new en("generation")),t.push(new en("metageneration")),t.push(new en("name","fullPath",!0));function e(s,o){return y2(o)}const n=new en("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new en("size");return i.xform=r,t.push(i),t.push(new en("timeCreated")),t.push(new en("updated")),t.push(new en("md5Hash",null,!0)),t.push(new en("cacheControl",null,!0)),t.push(new en("contentDisposition",null,!0)),t.push(new en("contentEncoding",null,!0)),t.push(new en("contentLanguage",null,!0)),t.push(new en("contentType",null,!0)),t.push(new en("metadata","customMetadata",!0)),yu=t,yu}function v2(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Pn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function _2(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return v2(r,t),r}function hI(t,e,n){const r=uI(e);return r===null?null:_2(t,r,n)}function w2(t,e,n,r){const i=uI(e);if(i===null||!Vm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,m=t.fullPath,g="/b/"+o(h)+"/o/"+o(m),E=pd(g,n,r),R=sI({alt:"media",token:c});return E+R})[0]}function E2(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Fm{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){if(!t)throw Mm()}function T2(t,e){function n(r,i){const s=hI(t,i,e);return fI(s!==null),s}return n}function I2(t,e){function n(r,i){const s=hI(t,i,e);return fI(s!==null),w2(s,i,t.host,t._protocol)}return n}function pI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=jD():i=LD():n.getStatus()===402?i=OD(t.bucket):n.getStatus()===403?i=MD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function mI(t){const e=pI(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=DD(t.path)),s.serverResponse=i.serverResponse,s}return n}function x2(t,e,n){const r=e.fullServerUrl(),i=pd(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Fm(i,s,I2(t,n),o);return l.errorHandler=mI(e),l}function S2(t,e){const n=e.fullServerUrl(),r=pd(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,c){}const l=new Fm(r,i,o,s);return l.successCodes=[200,204],l.errorHandler=mI(e),l}function R2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function A2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=R2(null,e)),r}function C2(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let A="";for(let O=0;O<2;O++)A=A+Math.random().toString().slice(2);return A}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=A2(e,r,i),h=E2(c,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",E=pi.getBlob(m,r,g);if(E===null)throw $D();const R={name:c.fullPath},C=pd(s,t.host,t._protocol),b="POST",S=t.maxUploadRetryTime,w=new Fm(C,b,T2(t,n),S);return w.urlParams=R,w.headers=o,w.body=E.uploadData(),w.errorHandler=pI(e),w}class P2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ca("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ca("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ca("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ca("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ca("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class N2 extends P2{initXhr(){this.xhr_.responseType="text"}}function Bm(){return new N2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this._service=e,n instanceof Pn?this._location=n:this._location=Pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xs(e,n)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cI(this._location.path)}get storage(){return this._service}get parent(){const e=p2(this._location.path);if(e===null)return null;const n=new Pn(this._location.bucket,e);return new xs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qD(e)}}function k2(t,e,n){t._throwIfRoot("uploadBytes");const r=C2(t.storage,t._location,dI(),new pi(e,!0),n);return t.storage.makeRequestWithTokens(r,Bm).then(i=>({metadata:i,ref:t}))}function b2(t){t._throwIfRoot("getDownloadURL");const e=x2(t.storage,t._location,dI());return t.storage.makeRequestWithTokens(e,Bm).then(n=>{if(n===null)throw HD();return n})}function D2(t){t._throwIfRoot("deleteObject");const e=S2(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Bm)}function O2(t,e){const n=m2(t._location.path,e),r=new Pn(t._location.bucket,n);return new xs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){return/^[A-Za-z]+:\/\//.test(t)}function j2(t,e){return new xs(t,e)}function gI(t,e){if(t instanceof zm){const n=t;if(n._bucket==null)throw zD();const r=new xs(n,n._bucket);return e!=null?gI(r,e):r}else return e!==void 0?O2(t,e):t}function M2(t,e){if(e&&L2(e)){if(t instanceof zm)return j2(t,e);throw bf("To use ref(service, url), the first argument must be a Storage instance.")}else return gI(t,e)}function a_(t,e){const n=e==null?void 0:e[rI];return n==null?null:Pn.makeFromBucketSpec(n,t)}function V2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:GE(i,t.app.options.projectId))}class zm{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=nI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kD,this._maxUploadRetryTime=bD,this._requests=new Set,i!=null?this._bucket=Pn.makeFromBucketSpec(i,this._host):this._bucket=a_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=a_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){o_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){o_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new QD(iI());{const o=i2(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const l_="@firebase/storage",u_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="storage";function ii(t,e,n){return t=at(t),k2(t,e,n)}function si(t){return t=at(t),b2(t)}function da(t){return t=at(t),D2(t)}function In(t,e){return t=at(t),M2(t,e)}function U2(t=Kc(),e){t=at(t);const r=wl(t,yI).getImmediate({identifier:e}),i=Mp("storage");return i&&F2(r,...i),r}function F2(t,e,n,r={}){V2(t,e,n,r)}function B2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zm(n,r,i,e,Cs)}function z2(){Di(new $r(yI,B2,"PUBLIC").setMultipleInstances(!0)),Fn(l_,u_,""),Fn(l_,u_,"esm2017")}z2();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="us-central1";class H2{constructor(e,n,r,i,s=Df,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new $2(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Df}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function W2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const c_="@firebase/functions",d_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="auth-internal",Q2="app-check-internal",K2="messaging-internal";function G2(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(q2),l=r.getProvider(K2),u=r.getProvider(Q2);return new H2(s,o,l,u,i,t)};Di(new $r(vI,n,"PUBLIC").setMultipleInstances(!0)),Fn(c_,d_,e),Fn(c_,d_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t=Kc(),e=Df){const r=wl(at(t),vI).getImmediate({identifier:e}),i=Mp("functions");return i&&X2(r,...i),r}function X2(t,e,n){W2(at(t),e,n)}G2(fetch.bind(self));const J2={apiKey:"AIzaSyB0Qjs2dvrcJAZeWUd9SyPVnTXufRImsi4",authDomain:"xmas-quiz-8c02e.firebaseapp.com",projectId:"xmas-quiz-8c02e",storageBucket:"xmas-quiz-8c02e.firebasestorage.app",messagingSenderId:"978823764359",appId:"1:978823764359:web:dfbd31fbac09f62a82db22"},md=JE(J2),_I=Ik(md),wI=new Cr;wI.setCustomParameters({prompt:"select_account"});const Z2=wI,yt=cD(md),xn=U2(md);Y2(md);const Uo=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState(!0),[i,s]=D.useState(null),[o,l]=D.useState(null);return D.useEffect(()=>{const u=hN(_I,async c=>{if(r(!0),s(null),!c){e(!1),l(null),r(!1);return}l({uid:c.uid,email:c.email});try{if((await a0(c)).claims.admin===!0){e(!0),r(!1);return}const g=Ni(yt,"admins",c.uid),E=await ZT(g);e(E.exists())}catch(h){console.error("Error checking admin status:",h),s("Failed to verify admin status"),e(!1)}finally{r(!1)}});return()=>u()},[]),{isAdmin:t,loading:n,error:i,currentUser:o}};function eO(){const{isAdmin:t}=Uo(),[e,n]=D.useState(!1),r=bo();D.useEffect(()=>(()=>{const l=document.createElement("div");l.className="snowflakes",l.setAttribute("aria-hidden","true"),l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.pointerEvents="none",l.style.zIndex="100",l.style.overflow="hidden";for(let c=0;c<50;c++){const h=document.createElement("div");h.className="snowflake",h.innerHTML="",h.style.color="white",h.style.position="absolute",h.style.top="-10px",h.style.left=Math.random()*100+"%",h.style.opacity=(Math.random()*.7+.3).toString(),h.style.fontSize=Math.random()*20+10+"px",h.style.animation=`fall ${Math.random()*10+5}s linear infinite`,h.style.animationDelay=Math.random()*5+"s",l.appendChild(h)}document.body.appendChild(l);const u=document.createElement("style");return u.textContent=`
        @keyframes fall {
          0% {
            transform: translateY(-10px) rotate(0deg);
          }
          100% {
            transform: translateY(100vh) rotate(360deg);
          }
        }
      `,document.head.appendChild(u),()=>{document.body.removeChild(l),document.head.removeChild(u)}})(),[]),D.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),D.useEffect(()=>{e&&n(!1)},[r.pathname]);const i=()=>{n(!e)};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-xmas-bg to-xmas-card",children:[f.jsxs("div",{className:"navbar bg-xmas-card bg-opacity-90 border-b border-xmas-gold px-2 sm:px-4 shadow-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("button",{className:"btn btn-ghost btn-sm md:hidden",onClick:i,"aria-label":"Toggle navigation menu",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),f.jsxs(hn,{to:"/",className:"btn btn-ghost normal-case text-lg sm:text-xl hidden sm:inline-flex font-christmas",children:[f.jsx("i",{className:"fas fa-holly-berry text-xmas-line mr-2"}),"Xmas Quiz"]})]}),f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:t&&f.jsxs(hn,{to:"/admin",className:"btn btn-primary btn-sm whitespace-nowrap px-2 sm:px-3",children:[f.jsx("i",{className:"fas fa-lock mr-1"})," Admin"]})})]}),f.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-70 z-20 transition-opacity duration-300 md:hidden ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i}),f.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-xmas-bg border-r border-xmas-gold z-30 transform transition-transform duration-300 ease-in-out md:hidden shadow-xl ${e?"translate-x-0":"-translate-x-full"}`,children:[f.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-xmas-gold bg-xmas-card",children:[f.jsxs("span",{className:"font-christmas text-xl text-xmas-line",children:[f.jsx("i",{className:"fas fa-holly-berry mr-2"}),"Xmas Quiz"]}),f.jsx("button",{className:"btn btn-ghost btn-sm text-xmas-text hover:text-xmas-line",onClick:i,"aria-label":"Close navigation menu",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"overflow-y-auto h-full pb-20",children:f.jsxs("nav",{className:"menu p-4",children:[f.jsx("li",{className:"menu-title pt-2 text-xmas-gold font-christmas",children:"Navigation"}),f.jsx("li",{children:f.jsxs(cu,{to:"/",onClick:i,className:({isActive:s})=>s?"active font-medium text-xmas-gold":"text-xmas-text hover:text-xmas-link",children:[f.jsx("i",{className:"fas fa-home mr-2"})," Home"]})}),f.jsx("li",{children:f.jsxs(cu,{to:"/quiz",onClick:i,className:({isActive:s})=>s?"active font-medium text-xmas-gold":"text-xmas-text hover:text-xmas-link",children:[f.jsx("i",{className:"fas fa-question-circle mr-2"})," Take Quiz"]})}),t&&f.jsxs(f.Fragment,{children:[f.jsx("li",{className:"menu-title pt-4 text-xmas-gold font-christmas",children:"Admin"}),f.jsx("li",{children:f.jsxs(cu,{to:"/admin",onClick:i,className:({isActive:s})=>s?"active font-medium text-xmas-gold":"text-xmas-text hover:text-xmas-link",children:[f.jsx("i",{className:"fas fa-cog mr-2"})," Dashboard"]})}),f.jsx("li",{children:f.jsxs(cu,{to:"/admin/results",onClick:i,className:({isActive:s})=>s?"active font-medium text-xmas-gold":"text-xmas-text hover:text-xmas-link",children:[f.jsx("i",{className:"fas fa-trophy mr-2"})," Results"]})})]})]})})]}),f.jsx("main",{className:"p-4",children:f.jsx(RA,{})}),f.jsx("div",{className:"fixed bottom-0 left-0 w-full pointer-events-none",children:f.jsx("div",{className:"container mx-auto",children:f.jsxs("div",{className:"relative h-32",children:[f.jsx("div",{className:"absolute bottom-0 left-0 opacity-50",children:f.jsx("i",{className:"fas fa-holly-berry text-6xl text-xmas-line"})}),f.jsx("div",{className:"absolute bottom-0 left-16 opacity-40",children:f.jsx("i",{className:"fas fa-gift text-5xl text-xmas-gold"})}),f.jsx("div",{className:"absolute bottom-0 right-0 opacity-50",children:f.jsx("i",{className:"fas fa-candy-cane text-6xl text-xmas-line"})}),f.jsx("div",{className:"absolute bottom-0 right-16 opacity-40",children:f.jsx("i",{className:"fas fa-snowflake text-5xl text-xmas-snow"})})]})})})]})}const tO=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState(null);return D.useEffect(()=>{(async()=>{try{const l=tr(fn(yt,"scores"),hs("score","desc"),TD(10)),u=await nr(l),c=[];u.forEach(h=>{var g;const m=h.data();c.push({id:h.id,playerName:m.playerName,score:m.score,timestamp:((g=m.timestamp)==null?void 0:g.toDate())||new Date})}),e(c)}catch(l){console.error("Error fetching scores:",l),s("Failed to load scoreboard. Please try again later.")}finally{r(!1)}})()},[]),n?f.jsx("div",{className:"flex justify-center items-center p-8",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?f.jsx("div",{className:"text-center text-error p-4",children:f.jsx("p",{children:i})}):t.length===0?f.jsx("div",{className:"text-center p-4",children:f.jsx("p",{className:"text-xl",children:"No scores yet! Be the first to play!"})}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"text-xmas-gold",children:[f.jsx("th",{className:"text-center",children:"#"}),f.jsx("th",{children:"Player"}),f.jsx("th",{className:"text-right",children:"Score"})]})}),f.jsx("tbody",{children:t.map((o,l)=>f.jsxs("tr",{className:`${l<3?"font-bold":""} ${l===0?"bg-opacity-20 bg-xmas-gold":""}`,children:[f.jsxs("td",{className:"text-center",children:[l===0&&f.jsx("i",{className:"fas fa-crown text-xmas-gold mr-1"}),l+1]}),f.jsxs("td",{className:"flex items-center gap-2",children:[o.playerName,l===0&&f.jsx("span",{className:"badge badge-warning",children:"Champion"}),l===1&&f.jsx("span",{className:"badge badge-secondary",children:"Runner-up"})]}),f.jsx("td",{className:"text-right font-bold",children:o.score})]},o.id))})]})})},nO=()=>f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsxs("h1",{className:"font-christmas text-5xl md:text-7xl text-xmas-line mb-4 animate-pulse",children:[f.jsx("i",{className:"fas fa-snowflake text-xmas-snow mr-2"}),"Christmas Quiz",f.jsx("i",{className:"fas fa-snowflake text-xmas-snow ml-2"})]}),f.jsx("p",{className:"text-xl md:text-2xl text-xmas-snow mb-8",children:"Test your Christmas knowledge and compete for the top spot!"}),f.jsx("div",{className:"flex flex-col md:flex-row justify-center gap-6 mb-12",children:f.jsxs(hn,{to:"/quiz",className:"btn btn-primary btn-lg font-christmas text-xl px-8 py-4 rounded-full shadow-lg transform transition-transform hover:scale-105",children:[f.jsx("i",{className:"fas fa-play-circle mr-2"})," Start Quiz"]})})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute -top-8 left-0 text-4xl text-xmas-gold opacity-70",children:f.jsx("i",{className:"fas fa-star"})}),f.jsx("div",{className:"absolute -top-12 right-1/4 text-3xl text-xmas-gold opacity-60",children:f.jsx("i",{className:"fas fa-bell"})}),f.jsx("div",{className:"absolute -top-6 right-1/3 text-2xl text-xmas-gold opacity-80",children:f.jsx("i",{className:"fas fa-gift"})})]}),f.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border-2 border-xmas-gold",children:[f.jsxs("h2",{className:"font-christmas text-3xl md:text-4xl text-xmas-gold mb-6 text-center",children:[f.jsx("i",{className:"fas fa-trophy mr-2"})," Leaderboard"]}),f.jsx(tO,{})]}),f.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12",children:[f.jsx("h2",{className:"font-christmas text-3xl text-xmas-line mb-4",children:"How to Play"}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-opacity-20 bg-xmas-snow p-4 rounded-lg",children:[f.jsx("div",{className:"text-4xl text-xmas-gold mb-2 text-center",children:f.jsx("i",{className:"fas fa-question-circle"})}),f.jsx("h3",{className:"font-christmas text-xl text-center mb-2",children:"Answer Questions"}),f.jsx("p",{className:"text-center",children:"Test your Christmas knowledge with our festive questions!"})]}),f.jsxs("div",{className:"bg-opacity-20 bg-xmas-snow p-4 rounded-lg",children:[f.jsx("div",{className:"text-4xl text-xmas-gold mb-2 text-center",children:f.jsx("i",{className:"fas fa-gift"})}),f.jsx("h3",{className:"font-christmas text-xl text-center mb-2",children:"Multiple Rounds"}),f.jsx("p",{className:"text-center",children:"Enjoy different themed rounds of Christmas fun!"})]}),f.jsxs("div",{className:"bg-opacity-20 bg-xmas-snow p-4 rounded-lg",children:[f.jsx("div",{className:"text-4xl text-xmas-gold mb-2 text-center",children:f.jsx("i",{className:"fas fa-medal"})}),f.jsx("h3",{className:"font-christmas text-xl text-center mb-2",children:"Compete"}),f.jsx("p",{className:"text-center",children:"Get on the leaderboard and show off your Christmas spirit!"})]})]})]}),f.jsxs("div",{className:"relative h-24 mb-8",children:[f.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24",children:f.jsx("i",{className:"fas fa-holly-berry text-4xl text-xmas-line"})}),f.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24",children:f.jsx("i",{className:"fas fa-candy-cane text-4xl text-xmas-line"})})]}),f.jsx("footer",{className:"text-center text-xmas-mute mt-12 pb-8",children:f.jsxs("p",{children:[" ",new Date().getFullYear()," Christmas Quiz | ",f.jsx(hn,{to:"/admin/login",className:"hover:text-xmas-link",children:"Admin"})]})})]});var mt=(t=>(t.GENERAL="general",t.PICTURE="picture",t.MUSIC="music",t.TRIVIA="trivia",t.CHRISTMAS="christmas",t))(mt||{});const Of=({src:t,alt:e,className:n="",thumbnailHeight:r="h-12",zoomFactor:i=2,maxWidth:s="600px",maxHeight:o="600px"})=>{const[l,u]=D.useState(!1),[c,h]=D.useState({top:!0,left:null}),m=D.useRef(null),g=D.useRef(null);return D.useEffect(()=>{if(l&&m.current&&g.current){const E=m.current.getBoundingClientRect(),R=g.current.getBoundingClientRect(),C=window.innerWidth,b=E.left+R.width/2>C,S=E.left-R.width/2<0,w=E.top-R.height<0;h({top:!w,left:b?!0:S?!1:null})}},[l]),f.jsxs("div",{className:"relative inline-block",ref:m,children:[f.jsx("img",{src:t,alt:e,className:`${r} w-auto object-cover rounded cursor-pointer ${n}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),l&&f.jsx("div",{ref:g,className:`absolute z-50 shadow-xl rounded-lg overflow-hidden ${c.top?"bottom-full mb-2":"top-full mt-2"} ${c.left===!0?"right-0":c.left===!1?"left-0":"left-1/2 transform -translate-x-1/2"}`,children:f.jsx("img",{src:t,alt:e,className:"object-contain bg-black bg-opacity-80 p-2",style:{maxHeight:o,maxWidth:s,minHeight:"300px",minWidth:"300px",width:"auto",height:"auto"}})})]})},rO=({question:t,userAnswer:e,roundType:n})=>{var i;const r=t.isTextInput?typeof e=="string"&&e.toLowerCase()===((i=t.textAnswer)==null?void 0:i.toLowerCase()):typeof e=="number"&&e===t.correctAnswer;return f.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-4 mb-4",children:[f.jsx("h3",{className:"text-xl font-christmas mb-2",children:t.text}),n===mt.PICTURE&&f.jsxs("div",{className:"flex flex-col items-center mb-6",children:[t.coverImageUrl&&f.jsxs("div",{className:"flex flex-col items-center mb-4",children:[f.jsx("p",{className:"text-xl font-christmas mb-2",children:"Movie Cover"}),f.jsx(Of,{src:t.coverImageUrl,alt:"Cover Image",thumbnailHeight:"max-h-72",maxWidth:"600px",maxHeight:"600px",className:"object-contain rounded-lg shadow-lg"})]}),t.normalImageUrl&&f.jsxs("div",{className:"flex flex-col items-center mt-4",children:[f.jsx("p",{className:"text-sm mb-1",children:"Scene from the movie"}),f.jsx(Of,{src:t.normalImageUrl,alt:"Answer Image",thumbnailHeight:"max-h-48",maxWidth:"500px",maxHeight:"500px",className:"object-contain rounded-lg"})]})]}),f.jsx("div",{className:"mt-3",children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm",children:"Your answer:"}),f.jsx("p",{className:`font-bold ${r?"text-green-500":"text-red-500"}`,children:t.isTextInput?e||"No answer provided":typeof e=="number"?t.options[e]:"No answer provided"})]}),!r&&f.jsxs("div",{className:"mt-2 sm:mt-0",children:[f.jsx("p",{className:"text-sm",children:"Correct answer:"}),f.jsx("p",{className:"font-bold text-green-500",children:t.isTextInput?t.textAnswer:t.options[t.correctAnswer]})]})]})}),f.jsx("div",{className:"mt-3 flex justify-end",children:f.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${r?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r?"Correct":"Incorrect"})})]})},iO=({round:t,questions:e,userAnswers:n,roundScore:r,onContinue:i})=>f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6 mb-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[f.jsxs("h2",{className:"text-2xl font-christmas text-xmas-gold",children:[t.title," - Round Results"]}),f.jsxs("div",{className:"mt-3 md:mt-0",children:[f.jsx("span",{className:"text-sm",children:"Round Score"}),f.jsxs("div",{className:"text-3xl font-bold text-xmas-gold",children:[r," / ",e.length]})]})]}),f.jsx("div",{className:"space-y-6",children:e.map(s=>f.jsx(rO,{question:s,userAnswer:n[s.id],roundType:t.type},s.id))}),f.jsx("div",{className:"mt-8 flex justify-end",children:f.jsx("button",{className:"btn btn-primary",onClick:i,children:"Continue to Next Round"})})]})}),sO=()=>{const t=As(),[e,n]=D.useState([]),[r,i]=D.useState([]),[s,o]=D.useState(0),[l,u]=D.useState([]),[c,h]=D.useState({}),[m,g]=D.useState({}),[E,R]=D.useState(0),[C,b]=D.useState({}),[S,w]=D.useState(""),[A,O]=D.useState(!1),[U,B]=D.useState(!1),[y,v]=D.useState(!1),[x,T]=D.useState(!1),[P,k]=D.useState(!1),[I,le]=D.useState(!1),[Oe,nt]=D.useState({}),[Le,z]=D.useState(!0),[re,se]=D.useState(!1),[we,oe]=D.useState(null);D.useEffect(()=>{(async()=>{try{const Je=tr(fn(yt,"rounds"),hs("order","asc")),xe=await nr(Je),ve=[];xe.forEach(ze=>{const $e=ze.data();ve.push({id:ze.id,...$e})});const _n=tr(fn(yt,"questions")),G=await nr(_n),ae=[];G.forEach(ze=>{const $e=ze.data();ae.push({id:ze.id,...$e,roundId:$e.roundId||""})});const ge={};if(ve.forEach(ze=>{ge[ze.id]=0}),n(ve),i(ae),b(ge),ve.length>0){const ze=ae.filter($e=>$e.roundId===ve[0].id);u(ze)}z(!1)}catch(Je){console.error("Error fetching quiz data:",Je),oe("Failed to load quiz data. Please try again later."),z(!1)}})()},[]);const Ce=()=>{B(!0)},ut=(ye,Je)=>{h(xe=>({...xe,[ye]:Je}))},Fe=(ye,Je)=>{g(xe=>({...xe,[ye]:Je}))},ct=()=>{let ye=0;const Je={};l.forEach(ve=>{var _n;if(ve.isTextInput){const G=m[ve.id]||"";Je[ve.id]=G,G.trim().toLowerCase()===((_n=ve.textAnswer)==null?void 0:_n.toLowerCase())&&ye++}else{const G=c[ve.id];Je[ve.id]=G,G!==void 0&&G===ve.correctAnswer&&ye++}}),R(ve=>ve+ye);const xe=e[s];b(ve=>({...ve,[xe.id]:ye})),nt(ve=>({...ve,...Je})),T(!0),le(!0)},Xe=()=>{if(le(!1),s<e.length-1){const ye=s+1,Je=e[ye],xe=r.filter(ve=>ve.roundId===Je.id);o(ye),u(xe),h({}),g({}),T(!1),k(!1)}else v(!0),O(!0)},vn=async()=>{if(!S.trim()){alert("Please enter your name");return}se(!0);try{await Lm(fn(yt,"scores"),{playerName:S.trim(),score:E,roundScores:C,timestamp:CD()}),t("/")}catch(ye){console.error("Error submitting score:",ye),oe("Failed to submit your score. Please try again."),se(!1)}};if(Le)return f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-xmas-gold"}),f.jsx("p",{className:"mt-4 text-xl",children:"Loading Christmas Quiz..."})]});if(we)return f.jsx("div",{className:"text-center p-8",children:f.jsxs("div",{className:"bg-error bg-opacity-20 p-6 rounded-lg",children:[f.jsx("h2",{className:"text-2xl font-christmas text-error mb-4",children:"Oh no! Something went wrong"}),f.jsx("p",{className:"mb-4",children:we}),f.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Return Home"})]})});if(r.length===0)return f.jsx("div",{className:"text-center p-8",children:f.jsxs("div",{className:"bg-warning bg-opacity-20 p-6 rounded-lg",children:[f.jsx("h2",{className:"text-2xl font-christmas text-warning mb-4",children:"No Questions Available"}),f.jsx("p",{className:"mb-4",children:"There are no quiz questions available right now. Please check back later!"}),f.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Return Home"})]})});if(!U)return f.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[f.jsx("h1",{className:"font-christmas text-4xl md:text-5xl text-xmas-line mb-6",children:"Christmas Quiz"}),f.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[f.jsx("h2",{className:"text-2xl font-christmas text-xmas-gold mb-4",children:"Ready to Test Your Christmas Knowledge?"}),f.jsx("p",{className:"mb-6",children:"Answer the questions correctly to earn points. Take your time and enjoy the quiz!"}),f.jsxs("button",{className:"btn btn-primary btn-lg font-christmas text-xl",onClick:Ce,children:[f.jsx("i",{className:"fas fa-play-circle mr-2"})," Start Quiz"]})]})]});if(y&&A)return f.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[f.jsx("h1",{className:"font-christmas text-4xl md:text-5xl text-xmas-line mb-6",children:"Quiz Complete!"}),f.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg max-w-md mx-auto",children:[f.jsx("div",{className:"text-6xl text-xmas-gold mb-4",children:f.jsx("i",{className:"fas fa-star"})}),f.jsx("h2",{className:"text-3xl font-christmas text-xmas-gold mb-2",children:"Your Score"}),f.jsxs("p",{className:"text-4xl font-bold mb-6",children:[E," points"]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text text-xmas-snow",children:"Enter your name to save your score:"})}),f.jsx("input",{type:"text",className:"input input-bordered w-full",value:S,onChange:ye=>w(ye.target.value),placeholder:"Your Name",disabled:re})]}),f.jsx("button",{className:"btn btn-primary w-full",onClick:vn,disabled:re,children:re?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Submitting..."]}):"Submit Score"})]})]});const on=e[s];return I?f.jsx(iO,{round:on,questions:l,userAnswers:Oe,roundScore:C[on.id]||0,onContinue:Xe}):f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-sm",children:"Round"}),f.jsx("h2",{className:"text-xl font-bold",children:(on==null?void 0:on.title)||"Quiz"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"text-sm",children:"Score"}),f.jsx("h2",{className:"text-xl font-bold",children:E})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("span",{className:"text-sm",children:"Questions"}),f.jsx("h2",{className:"text-xl font-bold",children:l.length})]})]}),f.jsx("div",{className:"space-y-8 mb-8",children:l.map((ye,Je)=>f.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[f.jsxs("h3",{className:"text-2xl font-christmas mb-4",children:["Question ",Je+1,": ",ye.text]}),(on==null?void 0:on.type)===mt.PICTURE&&ye.blankedImageUrl&&f.jsx("div",{className:"mb-4 flex justify-center",children:f.jsx(Of,{src:ye.blankedImageUrl,alt:"Question Image",thumbnailHeight:"max-h-64",maxWidth:"800px",maxHeight:"800px",className:"object-contain rounded-lg"})}),ye.isTextInput?f.jsxs("div",{className:"form-control",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Your Answer:"})}),f.jsx("div",{className:"flex gap-2",children:f.jsx("input",{type:"text",className:"input input-bordered flex-1",value:m[ye.id]||"",onChange:xe=>Fe(ye.id,xe.target.value),placeholder:"Type your answer here"})})]}):f.jsx("div",{className:"space-y-3",children:ye.options.map((xe,ve)=>f.jsxs("button",{className:`btn btn-outline w-full justify-start text-left px-4 py-3 ${c[ye.id]===ve?"btn-primary":""}`,onClick:()=>ut(ye.id,ve),children:[f.jsxs("span",{className:"mr-3",children:[String.fromCharCode(65+ve),"."]}),xe]},ve))})]},ye.id))}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{className:"btn btn-primary btn-lg",onClick:ct,children:"Submit Answers & Show Results"})})]})},oO=()=>{const t=As(),{isAdmin:e,loading:n,currentUser:r}=Uo(),[i,s]=D.useState(!1),[o,l]=D.useState(null),u=!1;D.useEffect(()=>{e&&!n&&t("/admin")},[e,n,t]);const c=async()=>{l(null),s(!0);try{await bN(_I,Z2)}catch(h){console.error("Login error:",h),h.code==="auth/popup-closed-by-user"?l("Sign-in popup was closed. Please try again."):h.code==="auth/cancelled-popup-request"?l("Another popup is already open. Please try again."):h.code==="auth/unauthorized-domain"?(console.error("Unauthorized domain error:",window.location.hostname),l("This domain is not authorized for OAuth operations. Please add "+window.location.hostname+" to your Firebase authorized domains list in the Firebase console under Authentication > Sign-in method > Authorized domains.")):l("Failed to sign in. Please try again."),s(!1)}};return n?f.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):f.jsx("div",{className:"container mx-auto px-4 py-12",children:f.jsxs("div",{className:"max-w-md mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"font-christmas text-4xl text-xmas-line mb-2",children:"Admin Login"}),f.jsx("p",{className:"text-xmas-mute",children:"Sign in to manage the Christmas Quiz"})]}),f.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[u,r&&f.jsxs("div",{className:"bg-info bg-opacity-10 border-l-4 border-info p-4 mb-6 rounded",children:[f.jsx("p",{className:"text-info font-bold mb-2",children:"User Authenticated"}),f.jsxs("p",{className:"text-info text-sm mb-1",children:["Email: ",r.email]}),f.jsxs("p",{className:"text-info text-sm mb-2",children:["UID: ",r.uid]}),f.jsxs("p",{className:"text-info text-sm",children:["To grant admin access, create a document in the ",f.jsx("code",{className:"bg-base-300 px-1 py-0.5 rounded",children:"admins"})," collection with this UID as the document ID."]}),u]}),o&&f.jsx("div",{className:"bg-error bg-opacity-10 border-l-4 border-error p-4 mb-6 rounded",children:f.jsx("p",{className:"text-error",children:o})}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("p",{className:"mb-4",children:"Sign in with your Google account to access the admin panel."}),f.jsx("p",{className:"text-sm text-xmas-mute mb-6",children:"Only authorized administrators will be granted access."}),f.jsx("button",{onClick:c,className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:i,children:i?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"loading loading-spinner loading-sm"}),"Signing in..."]}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[f.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12
                      s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20
                      s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),f.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039
                      l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),f.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36
                      c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),f.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571
                      c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),"Sign in with Google"]})})]})]}),f.jsx("div",{className:"text-center mt-6",children:f.jsx("button",{onClick:()=>t("/"),className:"btn btn-link text-xmas-mute",children:"Back to Home"})})]})})},aO=()=>{const t=As(),{isAdmin:e,loading:n}=Uo(),[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(null);D.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),D.useEffect(()=>{e&&(async()=>{if(e){o(!0);try{const m=await nr(tr(fn(yt,"rounds"),hs("order","asc"))),g=[];m.forEach(E=>{const R=E.data();g.push({id:E.id,...R})}),i(g)}catch(m){console.error("Error fetching rounds:",m),u("Failed to load rounds")}finally{o(!1)}}})()},[e]);const c=h=>{switch(h){case mt.PICTURE:return f.jsx("i",{className:"fas fa-image text-info"});case mt.MUSIC:return f.jsx("i",{className:"fas fa-music text-success"});case mt.TRIVIA:return f.jsx("i",{className:"fas fa-lightbulb text-warning"});case mt.CHRISTMAS:return f.jsx("i",{className:"fas fa-holly-berry text-error"});default:return f.jsx("i",{className:"fas fa-question-circle text-primary"})}};return n||s?f.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Admin Dashboard"}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(hn,{to:"/admin/results",className:"btn btn-outline",children:[f.jsx("i",{className:"fas fa-trophy mr-2"})," View Results"]})})]}),l&&f.jsxs("div",{className:"alert alert-error mb-6",children:[f.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),f.jsx("span",{children:l})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-christmas mb-4 text-xmas-gold",children:"Quiz Rounds"}),r.length===0?f.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[f.jsx("h3",{className:"text-xl mb-4",children:"No rounds yet"}),f.jsx("p",{className:"mb-4",children:"Start by adding your first quiz round!"}),f.jsxs(hn,{to:"/admin/rounds",className:"btn btn-primary",children:[f.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]}):f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(h=>f.jsx("div",{className:"card bg-xmas-card shadow-xl",children:f.jsxs("div",{className:"card-body",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h2",{className:"card-title font-christmas",children:[c(h.type)," ",h.title]}),f.jsxs("div",{className:"badge badge-outline",children:["#",h.order]})]}),f.jsx("p",{className:"text-sm mb-4",children:h.description}),f.jsx("div",{className:"card-actions justify-end",children:f.jsxs(hn,{to:`/admin/questions/${h.id}`,className:"btn btn-primary btn-sm",children:[f.jsx("i",{className:"fas fa-list mr-1"})," Manage Questions"]})})]})},h.id)),f.jsx("div",{className:"card bg-base-100 border-2 border-dashed border-base-300 shadow-xl flex items-center justify-center",children:f.jsxs("div",{className:"card-body items-center text-center",children:[f.jsx("h2",{className:"card-title font-christmas",children:"Add New Round"}),f.jsx("p",{children:"Create a new quiz round"}),f.jsx("div",{className:"card-actions justify-center mt-4",children:f.jsxs(hn,{to:"/admin/rounds",className:"btn btn-primary",children:[f.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})})]})})]})]})]})},lO=()=>{const t=As(),{isAdmin:e,loading:n}=Uo(),[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(null),[c,h]=D.useState("score"),[m,g]=D.useState("desc");D.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),D.useEffect(()=>{e&&(async()=>{if(e)try{const b=tr(fn(yt,"scores"),hs(c,m)),S=await nr(b),w=[];S.forEach(A=>{var U;const O=A.data();w.push({id:A.id,playerName:O.playerName,score:O.score,timestamp:((U=O.timestamp)==null?void 0:U.toDate())||new Date})}),i(w)}catch(b){console.error("Error fetching scores:",b),u("Failed to load scores")}finally{o(!1)}})()},[e,c,m]);const E=C=>{C===c?g(m==="asc"?"desc":"asc"):(h(C),g("desc"))},R=async C=>{if(confirm("Are you sure you want to delete this score?"))try{await Om(Ni(yt,"scores",C)),i(r.filter(b=>b.id!==C))}catch(b){console.error("Error deleting score:",b),u("Failed to delete score")}};return n||s?f.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Quiz Results"}),f.jsxs(hn,{to:"/admin",className:"btn btn-outline",children:[f.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Dashboard"]})]}),l&&f.jsxs("div",{className:"alert alert-error mb-6",children:[f.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),f.jsx("span",{children:l})]}),r.length===0?f.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[f.jsx("h3",{className:"text-xl mb-4",children:"No quiz results yet"}),f.jsx("p",{children:"Results will appear here once players complete the quiz"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-xmas-card p-4 rounded-lg mb-6",children:f.jsxs("div",{className:"stats shadow",children:[f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Total Players"}),f.jsx("div",{className:"stat-value",children:r.length})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Average Score"}),f.jsx("div",{className:"stat-value",children:Math.round(r.reduce((C,b)=>C+b.score,0)/r.length)})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-title",children:"Highest Score"}),f.jsx("div",{className:"stat-value",children:Math.max(...r.map(C=>C.score))})]})]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Rank"}),f.jsx("th",{children:f.jsxs("button",{className:"flex items-center",onClick:()=>E("playerName"),children:["Player",c==="playerName"&&f.jsx("i",{className:`fas fa-sort-${m==="asc"?"up":"down"} ml-2`})]})}),f.jsx("th",{children:f.jsxs("button",{className:"flex items-center",onClick:()=>E("score"),children:["Score",c==="score"&&f.jsx("i",{className:`fas fa-sort-${m==="asc"?"up":"down"} ml-2`})]})}),f.jsx("th",{children:f.jsxs("button",{className:"flex items-center",onClick:()=>E("timestamp"),children:["Date",c==="timestamp"&&f.jsx("i",{className:`fas fa-sort-${m==="asc"?"up":"down"} ml-2`})]})}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:r.map((C,b)=>f.jsxs("tr",{children:[f.jsx("td",{children:b+1}),f.jsx("td",{children:C.playerName}),f.jsx("td",{className:"font-bold",children:C.score}),f.jsxs("td",{children:[C.timestamp.toLocaleDateString()," ",C.timestamp.toLocaleTimeString()]}),f.jsx("td",{children:f.jsx("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>R(C.id),children:f.jsx("i",{className:"fas fa-trash"})})})]},C.id))})]})})]})]})},uO=()=>{const t=As(),{isAdmin:e,loading:n}=Uo(),[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(null),[c,h]=D.useState(!1),[m,g]=D.useState(null),[E,R]=D.useState(""),[C,b]=D.useState(""),[S,w]=D.useState(mt.GENERAL),[A,O]=D.useState(1),[U,B]=D.useState(!1);D.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),D.useEffect(()=>{e&&(async()=>{if(e)try{const le=tr(fn(yt,"rounds"),hs("order","asc")),Oe=await nr(le),nt=[];Oe.forEach(Le=>{const z=Le.data();nt.push({id:Le.id,...z})}),i(nt)}catch(le){console.error("Error fetching rounds:",le),u("Failed to load rounds")}finally{o(!1)}})()},[e]);const y=()=>{R(""),b(""),w(mt.GENERAL),O(r.length+1),g(null)},v=async I=>{I.preventDefault(),B(!0);try{await Lm(fn(yt,"rounds"),{title:E,description:C,type:S,order:A});const le=tr(fn(yt,"rounds"),hs("order","asc")),Oe=await nr(le),nt=[];Oe.forEach(Le=>{const z=Le.data();nt.push({id:Le.id,...z})}),i(nt),h(!1),y()}catch(le){console.error("Error adding round:",le),u("Failed to add round")}finally{B(!1)}},x=I=>{g(I),R(I.title),b(I.description),w(I.type),O(I.order),h(!0)},T=async I=>{if(I.preventDefault(),!!m){B(!0);try{const le=Ni(yt,"rounds",m.id);await tI(le,{title:E,description:C,type:S,order:A});const Oe=tr(fn(yt,"rounds"),hs("order","asc")),nt=await nr(Oe),Le=[];nt.forEach(z=>{const re=z.data();Le.push({id:z.id,...re})}),i(Le),h(!1),y()}catch(le){console.error("Error updating round:",le),u("Failed to update round")}finally{B(!1)}}},P=async I=>{if(confirm("Are you sure you want to delete this round? This will NOT delete questions in this round."))try{await Om(Ni(yt,"rounds",I)),i(r.filter(le=>le.id!==I))}catch(le){console.error("Error deleting round:",le),u("Failed to delete round")}},k=I=>{switch(I){case mt.PICTURE:return f.jsx("i",{className:"fas fa-image text-info"});case mt.MUSIC:return f.jsx("i",{className:"fas fa-music text-success"});case mt.TRIVIA:return f.jsx("i",{className:"fas fa-lightbulb text-warning"});case mt.CHRISTMAS:return f.jsx("i",{className:"fas fa-holly-berry text-error"});default:return f.jsx("i",{className:"fas fa-question-circle text-primary"})}};return n||s?f.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Quiz Rounds"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(hn,{to:"/admin",className:"btn btn-outline",children:[f.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Dashboard"]}),f.jsxs("button",{className:"btn btn-primary",onClick:()=>{y(),O(r.length+1),h(!0)},children:[f.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]})]}),l&&f.jsxs("div",{className:"alert alert-error mb-6",children:[f.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),f.jsx("span",{children:l})]}),r.length===0?f.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[f.jsx("h3",{className:"text-xl mb-4",children:"No rounds yet"}),f.jsx("p",{className:"mb-4",children:"Start by adding your first quiz round!"}),f.jsxs("button",{className:"btn btn-primary",onClick:()=>h(!0),children:[f.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(I=>f.jsx("div",{className:"card bg-xmas-card shadow-xl",children:f.jsxs("div",{className:"card-body",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h2",{className:"card-title font-christmas",children:[k(I.type)," ",I.title]}),f.jsxs("div",{className:"badge badge-outline",children:["#",I.order]})]}),f.jsx("p",{className:"text-sm mb-4",children:I.description}),f.jsxs("div",{className:"card-actions justify-end",children:[f.jsxs(hn,{to:`/admin/questions/${I.id}`,className:"btn btn-primary btn-sm",children:[f.jsx("i",{className:"fas fa-list mr-1"})," Manage Questions"]}),f.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>x(I),children:f.jsx("i",{className:"fas fa-edit"})}),f.jsx("button",{className:"btn btn-error btn-outline btn-sm",onClick:()=>P(I.id),children:f.jsx("i",{className:"fas fa-trash"})})]})]})},I.id))}),c&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl max-w-md w-full",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-christmas",children:m?"Edit Round":"Add New Round"}),f.jsx("button",{className:"btn btn-sm btn-circle",onClick:()=>{h(!1),y()},children:f.jsx("i",{className:"fas fa-times"})})]}),f.jsxs("form",{onSubmit:m?T:v,children:[f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Round Title"})}),f.jsx("input",{type:"text",className:"input input-bordered",value:E,onChange:I=>R(I.target.value),placeholder:"e.g., Christmas Movies",required:!0})]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Description"})}),f.jsx("textarea",{className:"textarea textarea-bordered h-20",value:C,onChange:I=>b(I.target.value),placeholder:"Brief description of this round"})]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Round Type"})}),f.jsxs("select",{className:"select select-bordered w-full",value:S,onChange:I=>w(I.target.value),required:!0,children:[f.jsx("option",{value:mt.GENERAL,children:"General Questions"}),f.jsx("option",{value:mt.PICTURE,children:"Picture Round"}),f.jsx("option",{value:mt.MUSIC,children:"Music Round"}),f.jsx("option",{value:mt.TRIVIA,children:"Trivia Round"}),f.jsx("option",{value:mt.CHRISTMAS,children:"Christmas Round"})]})]}),f.jsxs("div",{className:"form-control mb-6",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Display Order"})}),f.jsx("input",{type:"number",className:"input input-bordered",value:A,onChange:I=>O(parseInt(I.target.value)||1),min:"1",required:!0})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{h(!1),y()},children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn btn-primary",disabled:U,children:U?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),m?"Updating...":"Adding..."]}):m?"Update Round":"Add Round"})]})]})]})})})]})},cO=()=>{const t=As(),{roundId:e}=hA(),{isAdmin:n,loading:r}=Uo(),[i,s]=D.useState(null),[o,l]=D.useState([]),[u,c]=D.useState(!0),[h,m]=D.useState(null),[g,E]=D.useState(!1),[R,C]=D.useState(null),[b,S]=D.useState(""),[w,A]=D.useState(["","","",""]),[O,U]=D.useState(0),[B,y]=D.useState(null),[v,x]=D.useState(null),[T,P]=D.useState(null),[k,I]=D.useState(null),[le,Oe]=D.useState(null),[nt,Le]=D.useState(null),[z,re]=D.useState(null),[se,we]=D.useState(null),[oe,Ce]=D.useState(!1),[ut,Fe]=D.useState(""),[ct,Xe]=D.useState(!1);D.useEffect(()=>{!r&&!n&&t("/admin/login")},[n,r,t]),D.useEffect(()=>{n&&e&&(async()=>{if(!(!n||!e))try{const ae=await ZT(Ni(yt,"rounds",e));if(!ae.exists()){m("Round not found"),c(!1);return}const ge=ae.data();s({id:ae.id,...ge});const ze=tr(fn(yt,"questions"),lh("roundId","==",e)),$e=await nr(ze),Bt=[];$e.forEach(Jt=>{const an=Jt.data();Bt.push({id:Jt.id,...an})}),l(Bt)}catch(ae){console.error("Error fetching round data:",ae),m("Failed to load round data")}finally{c(!1)}})()},[n,e]);const vn=(G,ae)=>{var ze;const ge=(ze=G.target.files)==null?void 0:ze[0];if(ge)switch(ae){case"main":y(ge);const $e=new FileReader;$e.onloadend=()=>{Oe($e.result)},$e.readAsDataURL(ge);break;case"blanked":x(ge);const Bt=new FileReader;Bt.onloadend=()=>{Le(Bt.result)},Bt.readAsDataURL(ge);break;case"normal":P(ge);const Jt=new FileReader;Jt.onloadend=()=>{re(Jt.result)},Jt.readAsDataURL(ge);break;case"cover":I(ge);const an=new FileReader;an.onloadend=()=>{we(an.result)},an.readAsDataURL(ge);break}},on=(G,ae)=>{const ge=[...w];ge[G]=ae,A(ge)},ye=()=>{S(""),A(["","","",""]),U(0),y(null),x(null),P(null),I(null),Oe(null),Le(null),re(null),we(null),Ce(!1),Fe(""),C(null)},Je=async G=>{if(G.preventDefault(),!!e){Xe(!0);try{let ae="",ge="",ze="",$e="";if(B){const rt=In(xn,`question-images/${Date.now()}-${B.name}`),Te={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"main"}};await ii(rt,B,Te),ae=await si(rt)}if(v){const rt=In(xn,`question-images/blanked-${Date.now()}-${v.name}`),Te={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"blanked"}};await ii(rt,v,Te),ge=await si(rt)}if(T){const rt=In(xn,`question-images/normal-${Date.now()}-${T.name}`),Te={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"normal"}};await ii(rt,T,Te),ze=await si(rt)}if(k){const rt=In(xn,`question-images/cover-${Date.now()}-${k.name}`),Te={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"cover"}};await ii(rt,k,Te),$e=await si(rt)}await Lm(fn(yt,"questions"),{text:b,options:w,correctAnswer:O,roundId:e,...ae&&{imageUrl:ae},...ge&&{blankedImageUrl:ge},...ze&&{normalImageUrl:ze},...$e&&{coverImageUrl:$e},...oe&&{isTextInput:oe},...oe&&ut&&{textAnswer:ut}});const Bt=tr(fn(yt,"questions"),lh("roundId","==",e)),Jt=await nr(Bt),an=[];Jt.forEach(rt=>{const Te=rt.data();an.push({id:rt.id,...Te})}),l(an),E(!1),ye()}catch(ae){console.error("Error adding question:",ae),m("Failed to add question")}finally{Xe(!1)}}},xe=G=>{C(G),S(G.text),A([...G.options]),U(G.correctAnswer),Oe(G.imageUrl||null),Le(G.blankedImageUrl||null),re(G.normalImageUrl||null),we(G.coverImageUrl||null),Ce(G.isTextInput||!1),Fe(G.textAnswer||""),E(!0)},ve=async G=>{if(G.preventDefault(),!(!R||!e)){Xe(!0);try{let ae=R.imageUrl||"",ge=R.blankedImageUrl||"",ze=R.normalImageUrl||"",$e=R.coverImageUrl||"";if(B){if(R.imageUrl)try{const Se=In(xn,R.imageUrl);await da(Se)}catch(Se){console.error("Error deleting old main image:",Se)}const Te=In(xn,`question-images/${Date.now()}-${B.name}`),Ct={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"main"}};await ii(Te,B,Ct),ae=await si(Te)}if(v){if(R.blankedImageUrl)try{const Se=In(xn,R.blankedImageUrl);await da(Se)}catch(Se){console.error("Error deleting old blanked image:",Se)}const Te=In(xn,`question-images/blanked-${Date.now()}-${v.name}`),Ct={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"blanked"}};await ii(Te,v,Ct),ge=await si(Te)}if(T){if(R.normalImageUrl)try{const Se=In(xn,R.normalImageUrl);await da(Se)}catch(Se){console.error("Error deleting old normal image:",Se)}const Te=In(xn,`question-images/normal-${Date.now()}-${T.name}`),Ct={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"normal"}};await ii(Te,T,Ct),ze=await si(Te)}if(k){if(R.coverImageUrl)try{const Se=In(xn,R.coverImageUrl);await da(Se)}catch(Se){console.error("Error deleting old cover image:",Se)}const Te=In(xn,`question-images/cover-${Date.now()}-${k.name}`),Ct={customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"cover"}};await ii(Te,k,Ct),$e=await si(Te)}const Bt=Ni(yt,"questions",R.id);await tI(Bt,{text:b,options:w,correctAnswer:O,roundId:e,...ae&&{imageUrl:ae},...ge&&{blankedImageUrl:ge},...ze&&{normalImageUrl:ze},...$e&&{coverImageUrl:$e},isTextInput:oe,...oe&&{textAnswer:ut}});const Jt=tr(fn(yt,"questions"),lh("roundId","==",e)),an=await nr(Jt),rt=[];an.forEach(Te=>{const Ct=Te.data();rt.push({id:Te.id,...Ct})}),l(rt),E(!1),ye()}catch(ae){console.error("Error updating question:",ae),m("Failed to update question")}finally{Xe(!1)}}},_n=async(G,ae)=>{if(confirm("Are you sure you want to delete this question?"))try{if(ae)try{const ge=In(xn,ae);await da(ge)}catch(ge){console.error("Error deleting image:",ge)}await Om(Ni(yt,"questions",G)),l(o.filter(ge=>ge.id!==G))}catch(ge){console.error("Error deleting question:",ge),m("Failed to delete question")}};return r||u?f.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:i.title}),f.jsx("p",{className:"text-xmas-mute",children:i.description})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(hn,{to:"/admin/rounds",className:"btn btn-outline",children:[f.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Rounds"]}),f.jsxs("button",{className:"btn btn-primary",onClick:()=>{ye(),E(!0)},children:[f.jsx("i",{className:"fas fa-plus mr-2"})," Add Question"]})]})]}),h&&f.jsxs("div",{className:"alert alert-error mb-6",children:[f.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),f.jsx("span",{children:h})]}),o.length===0?f.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[f.jsx("h3",{className:"text-xl mb-4",children:"No questions in this round yet"}),f.jsx("p",{className:"mb-4",children:"Start by adding your first question!"}),f.jsxs("button",{className:"btn btn-primary",onClick:()=>E(!0),children:[f.jsx("i",{className:"fas fa-plus mr-2"})," Add Question"]})]}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Question"}),f.jsx("th",{children:"Options"}),f.jsx("th",{children:"Correct Answer"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:o.map(G=>f.jsxs("tr",{children:[f.jsxs("td",{className:"max-w-xs",children:[f.jsx("div",{className:"font-medium",children:G.text}),G.imageUrl&&f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:G.imageUrl,alt:"Question",className:"h-12 w-auto object-cover rounded"})})]}),f.jsx("td",{children:f.jsx("ol",{className:"list-alpha pl-4",children:G.options.map((ae,ge)=>f.jsx("li",{className:ge===G.correctAnswer?"font-bold text-success":"",children:ae},ge))})}),f.jsx("td",{children:String.fromCharCode(65+G.correctAnswer)}),f.jsx("td",{children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>xe(G),children:f.jsx("i",{className:"fas fa-edit"})}),f.jsx("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>_n(G.id,G.imageUrl),children:f.jsx("i",{className:"fas fa-trash"})})]})})]},G.id))})]})}),g&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-christmas",children:R?"Edit Question":"Add New Question"}),f.jsx("button",{className:"btn btn-sm btn-circle",onClick:()=>{E(!1),ye()},children:f.jsx("i",{className:"fas fa-times"})})]}),f.jsxs("form",{onSubmit:R?ve:Je,children:[f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Question Text"})}),f.jsx("textarea",{className:"textarea textarea-bordered h-24",value:b,onChange:G=>S(G.target.value),placeholder:"Enter your question here",required:!0})]}),(i==null?void 0:i.type)===mt.PICTURE&&f.jsx("div",{className:"form-control mb-4",children:f.jsxs("label",{className:"label cursor-pointer",children:[f.jsx("span",{className:"label-text",children:"Use text input instead of multiple choice"}),f.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:oe,onChange:G=>Ce(G.target.checked)})]})}),oe&&(i==null?void 0:i.type)===mt.PICTURE?f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Correct Text Answer"})}),f.jsx("input",{type:"text",className:"input input-bordered w-full",value:ut,onChange:G=>Fe(G.target.value),placeholder:"Enter the correct answer",required:oe})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Options"})}),w.map((G,ae)=>f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-xmas-card border border-base-300 rounded-full mr-2",children:String.fromCharCode(65+ae)}),f.jsx("input",{type:"text",className:"input input-bordered flex-1",value:G,onChange:ge=>on(ae,ge.target.value),placeholder:`Option ${String.fromCharCode(65+ae)}`,required:!oe})]},ae))]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Correct Answer"})}),f.jsx("select",{className:"select select-bordered w-full",value:O,onChange:G=>U(Number(G.target.value)),required:!oe,children:w.map((G,ae)=>f.jsx("option",{value:ae,children:String.fromCharCode(65+ae)},ae))})]})]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Main Image (Optional)"})}),f.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:G=>vn(G,"main")}),le&&f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:le,alt:"Main Preview",className:"h-32 object-contain rounded"})})]}),(i==null?void 0:i.type)===mt.PICTURE&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Blanked Image (Shown during question)"})}),f.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:G=>vn(G,"blanked")}),nt&&f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:nt,alt:"Blanked Preview",className:"h-32 object-contain rounded"})})]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Normal Image (Shown with answers)"})}),f.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:G=>vn(G,"normal")}),z&&f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:z,alt:"Normal Preview",className:"h-32 object-contain rounded"})})]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Cover Image (Shown before next round)"})}),f.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:G=>vn(G,"cover")}),se&&f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:se,alt:"Cover Preview",className:"h-32 object-contain rounded"})})]})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{E(!1),ye()},children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ct,children:ct?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),R?"Updating...":"Adding..."]}):R?"Update Question":"Add Question"})]})]})]})})})]}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:"bg-error bg-opacity-10 p-6 rounded-lg",children:[f.jsx("h2",{className:"text-2xl font-christmas text-error mb-4",children:"Round Not Found"}),f.jsx("p",{className:"mb-4",children:"The round you're looking for doesn't exist or has been deleted."}),f.jsx(hn,{to:"/admin/rounds",className:"btn btn-primary",children:"Back to Rounds"})]})})},dO=OA([{element:f.jsx(eO,{}),children:[{path:"/",element:f.jsx(nO,{})},{path:"/quiz",element:f.jsx(sO,{})},{path:"/admin/login",element:f.jsx(oO,{})},{path:"/admin",element:f.jsx(aO,{})},{path:"/admin/results",element:f.jsx(lO,{})},{path:"/admin/rounds",element:f.jsx(uO,{})},{path:"/admin/questions/:roundId",element:f.jsx(cO,{})}]}]);dh.createRoot(document.getElementById("root")).render(f.jsx(x_.StrictMode,{children:f.jsx(zA,{router:dO})}));

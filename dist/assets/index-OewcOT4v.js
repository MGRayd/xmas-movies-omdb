function fE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function hE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dE={exports:{}},Ed={},mE={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=Symbol.for("react.element"),pN=Symbol.for("react.portal"),gN=Symbol.for("react.fragment"),xN=Symbol.for("react.strict_mode"),vN=Symbol.for("react.profiler"),yN=Symbol.for("react.provider"),_N=Symbol.for("react.context"),wN=Symbol.for("react.forward_ref"),EN=Symbol.for("react.suspense"),TN=Symbol.for("react.memo"),kN=Symbol.for("react.lazy"),a1=Symbol.iterator;function SN(e){return e===null||typeof e!="object"?null:(e=a1&&e[a1]||e["@@iterator"],typeof e=="function"?e:null)}var pE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,xE={};function El(e,t,r){this.props=e,this.context=t,this.refs=xE,this.updater=r||pE}El.prototype.isReactComponent={};El.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};El.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vE(){}vE.prototype=El.prototype;function tg(e,t,r){this.props=e,this.context=t,this.refs=xE,this.updater=r||pE}var rg=tg.prototype=new vE;rg.constructor=tg;gE(rg,El.prototype);rg.isPureReactComponent=!0;var i1=Array.isArray,yE=Object.prototype.hasOwnProperty,ng={current:null},_E={key:!0,ref:!0,__self:!0,__source:!0};function wE(e,t,r){var n,s={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)yE.call(t,n)&&!_E.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Eu,type:e,key:a,ref:i,props:s,_owner:ng.current}}function AN(e,t){return{$$typeof:Eu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Eu}function IN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var o1=/\/+/g;function w0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IN(""+e.key):t.toString(36)}function Gf(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Eu:case pN:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+w0(i,0):n,i1(s)?(r="",e!=null&&(r=e.replace(o1,"$&/")+"/"),Gf(s,t,r,"",function(c){return c})):s!=null&&(sg(s)&&(s=AN(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(o1,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",i1(e))for(var o=0;o<e.length;o++){a=e[o];var l=n+w0(a,o);i+=Gf(a,t,r,l,s)}else if(l=SN(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=n+w0(a,o++),i+=Gf(a,t,r,l,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function df(e,t,r){if(e==null)return e;var n=[],s=0;return Gf(e,n,"","",function(a){return t.call(r,a,s++)}),n}function NN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},Kf={transition:null},CN={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Kf,ReactCurrentOwner:ng};function EE(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:df,forEach:function(e,t,r){df(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return df(e,function(){t++}),t},toArray:function(e){return df(e,function(t){return t})||[]},only:function(e){if(!sg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=El;Xe.Fragment=gN;Xe.Profiler=vN;Xe.PureComponent=tg;Xe.StrictMode=xN;Xe.Suspense=EN;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CN;Xe.act=EE;Xe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=gE({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=ng.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)yE.call(t,l)&&!_E.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Eu,type:e.type,key:s,ref:a,props:n,_owner:i}};Xe.createContext=function(e){return e={$$typeof:_N,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yN,_context:e},e.Consumer=e};Xe.createElement=wE;Xe.createFactory=function(e){var t=wE.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:wN,render:e}};Xe.isValidElement=sg;Xe.lazy=function(e){return{$$typeof:kN,_payload:{_status:-1,_result:e},_init:NN}};Xe.memo=function(e,t){return{$$typeof:TN,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=Kf.transition;Kf.transition={};try{e()}finally{Kf.transition=t}};Xe.unstable_act=EE;Xe.useCallback=function(e,t){return rn.current.useCallback(e,t)};Xe.useContext=function(e){return rn.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return rn.current.useEffect(e,t)};Xe.useId=function(){return rn.current.useId()};Xe.useImperativeHandle=function(e,t,r){return rn.current.useImperativeHandle(e,t,r)};Xe.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return rn.current.useMemo(e,t)};Xe.useReducer=function(e,t,r){return rn.current.useReducer(e,t,r)};Xe.useRef=function(e){return rn.current.useRef(e)};Xe.useState=function(e){return rn.current.useState(e)};Xe.useSyncExternalStore=function(e,t,r){return rn.current.useSyncExternalStore(e,t,r)};Xe.useTransition=function(){return rn.current.useTransition()};Xe.version="18.3.1";mE.exports=Xe;var U=mE.exports;const Tu=hE(U),bN=fE({__proto__:null,default:Tu},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN=U,PN=Symbol.for("react.element"),DN=Symbol.for("react.fragment"),FN=Object.prototype.hasOwnProperty,ON=RN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MN={key:!0,ref:!0,__self:!0,__source:!0};function TE(e,t,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)FN.call(t,n)&&!MN.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:PN,type:e,key:a,ref:i,props:s,_owner:ON.current}}Ed.Fragment=DN;Ed.jsx=TE;Ed.jsxs=TE;dE.exports=Ed;var u=dE.exports,ym={},kE={exports:{}},Pn={},SE={exports:{}},AE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,G){var Z=q.length;q.push(G);e:for(;0<Z;){var ce=Z-1>>>1,j=q[ce];if(0<s(j,G))q[ce]=G,q[Z]=j,Z=ce;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var G=q[0],Z=q.pop();if(Z!==G){q[0]=Z;e:for(var ce=0,j=q.length,Y=j>>>1;ce<Y;){var K=2*(ce+1)-1,B=q[K],Q=K+1,de=q[Q];if(0>s(B,Z))Q<j&&0>s(de,B)?(q[ce]=de,q[Q]=Z,ce=Q):(q[ce]=B,q[K]=Z,ce=K);else if(Q<j&&0>s(de,Z))q[ce]=de,q[Q]=Z,ce=Q;else break e}}return G}function s(q,G){var Z=q.sortIndex-G.sortIndex;return Z!==0?Z:q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],f=1,d=null,m=3,p=!1,x=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(q){for(var G=r(c);G!==null;){if(G.callback===null)n(c);else if(G.startTime<=q)n(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=r(c)}}function I(q){if(g=!1,y(q),!x)if(r(l)!==null)x=!0,fe(O);else{var G=r(c);G!==null&&ue(I,G.startTime-q)}}function O(q,G){x=!1,g&&(g=!1,k(T),T=-1),p=!0;var Z=m;try{for(y(G),d=r(l);d!==null&&(!(d.expirationTime>G)||q&&!P());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,m=d.priorityLevel;var j=ce(d.expirationTime<=G);G=e.unstable_now(),typeof j=="function"?d.callback=j:d===r(l)&&n(l),y(G)}else n(l);d=r(l)}if(d!==null)var Y=!0;else{var K=r(c);K!==null&&ue(I,K.startTime-G),Y=!1}return Y}finally{d=null,m=Z,p=!1}}var F=!1,v=null,T=-1,S=5,C=-1;function P(){return!(e.unstable_now()-C<S)}function b(){if(v!==null){var q=e.unstable_now();C=q;var G=!0;try{G=v(!0,q)}finally{G?R():(F=!1,v=null)}}else F=!1}var R;if(typeof E=="function")R=function(){E(b)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ee=ae.port2;ae.port1.onmessage=b,R=function(){ee.postMessage(null)}}else R=function(){w(b,0)};function fe(q){v=q,F||(F=!0,R())}function ue(q,G){T=w(function(){q(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,fe(O))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Z=m;m=G;try{return q()}finally{m=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=m;m=q;try{return G()}finally{m=Z}},e.unstable_scheduleCallback=function(q,G,Z){var ce=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,q){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Z+j,q={id:f++,callback:G,priorityLevel:q,startTime:Z,expirationTime:j,sortIndex:-1},Z>ce?(q.sortIndex=Z,t(c,q),r(l)===null&&q===r(c)&&(g?(k(T),T=-1):g=!0,ue(I,Z-ce))):(q.sortIndex=j,t(l,q),x||p||(x=!0,fe(O))),q},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(q){var G=m;return function(){var Z=m;m=G;try{return q.apply(this,arguments)}finally{m=Z}}}})(AE);SE.exports=AE;var LN=SE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN=U,bn=LN;function we(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IE=new Set,Lc={};function no(e,t){nl(e,t),nl(e+"Capture",t)}function nl(e,t){for(Lc[e]=t,e=0;e<t.length;e++)IE.add(t[e])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_m=Object.prototype.hasOwnProperty,UN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l1={},c1={};function VN(e){return _m.call(c1,e)?!0:_m.call(l1,e)?!1:UN.test(e)?c1[e]=!0:(l1[e]=!0,!1)}function BN(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function WN(e,t,r,n){if(t===null||typeof t>"u"||BN(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nn(e,t,r,n,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nr[e]=new nn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Nr[t]=new nn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nr[e]=new nn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nr[e]=new nn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nr[e]=new nn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nr[e]=new nn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nr[e]=new nn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nr[e]=new nn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nr[e]=new nn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ag=/[\-:]([a-z])/g;function ig(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ag,ig);Nr[t]=new nn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ag,ig);Nr[t]=new nn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ag,ig);Nr[t]=new nn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nr[e]=new nn(e,1,!1,e.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nr[e]=new nn(e,1,!1,e.toLowerCase(),null,!0,!0)});function og(e,t,r,n){var s=Nr.hasOwnProperty(t)?Nr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(WN(t,r,s,n)&&(r=null),n||s===null?VN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ka=jN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mf=Symbol.for("react.element"),Co=Symbol.for("react.portal"),bo=Symbol.for("react.fragment"),lg=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),NE=Symbol.for("react.provider"),CE=Symbol.for("react.context"),cg=Symbol.for("react.forward_ref"),Em=Symbol.for("react.suspense"),Tm=Symbol.for("react.suspense_list"),ug=Symbol.for("react.memo"),Oa=Symbol.for("react.lazy"),bE=Symbol.for("react.offscreen"),u1=Symbol.iterator;function Wl(e){return e===null||typeof e!="object"?null:(e=u1&&e[u1]||e["@@iterator"],typeof e=="function"?e:null)}var jt=Object.assign,E0;function ec(e){if(E0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);E0=t&&t[1]||""}return`
`+E0+e}var T0=!1;function k0(e,t){if(!e||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==a[o]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=o);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ec(e):""}function $N(e){switch(e.tag){case 5:return ec(e.type);case 16:return ec("Lazy");case 13:return ec("Suspense");case 19:return ec("SuspenseList");case 0:case 2:case 15:return e=k0(e.type,!1),e;case 11:return e=k0(e.type.render,!1),e;case 1:return e=k0(e.type,!0),e;default:return""}}function km(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bo:return"Fragment";case Co:return"Portal";case wm:return"Profiler";case lg:return"StrictMode";case Em:return"Suspense";case Tm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CE:return(e.displayName||"Context")+".Consumer";case NE:return(e._context.displayName||"Context")+".Provider";case cg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ug:return t=e.displayName||null,t!==null?t:km(e.type)||"Memo";case Oa:t=e._payload,e=e._init;try{return km(e(t))}catch{}}return null}function zN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return km(t);case 8:return t===lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function li(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HN(e){var t=RE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pf(e){e._valueTracker||(e._valueTracker=HN(e))}function PE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=RE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ph(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sm(e,t){var r=t.checked;return jt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function f1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=li(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function DE(e,t){t=t.checked,t!=null&&og(e,"checked",t,!1)}function Am(e,t){DE(e,t);var r=li(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Im(e,t.type,r):t.hasOwnProperty("defaultValue")&&Im(e,t.type,li(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function h1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Im(e,t,r){(t!=="number"||ph(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var tc=Array.isArray;function Wo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+li(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Nm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(we(91));return jt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function d1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(we(92));if(tc(r)){if(1<r.length)throw Error(we(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:li(r)}}function FE(e,t){var r=li(t.value),n=li(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function m1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function OE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?OE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gf,ME=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gf=gf||document.createElement("div"),gf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GN=["Webkit","ms","Moz","O"];Object.keys(dc).forEach(function(e){GN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dc[t]=dc[e]})});function LE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dc.hasOwnProperty(e)&&dc[e]?(""+t).trim():t+"px"}function jE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=LE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var KN=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(e,t){if(t){if(KN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(we(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(we(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(we(61))}if(t.style!=null&&typeof t.style!="object")throw Error(we(62))}}function Rm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pm=null;function fg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dm=null,$o=null,zo=null;function p1(e){if(e=Au(e)){if(typeof Dm!="function")throw Error(we(280));var t=e.stateNode;t&&(t=Id(t),Dm(e.stateNode,e.type,t))}}function UE(e){$o?zo?zo.push(e):zo=[e]:$o=e}function VE(){if($o){var e=$o,t=zo;if(zo=$o=null,p1(e),t)for(e=0;e<t.length;e++)p1(t[e])}}function BE(e,t){return e(t)}function WE(){}var S0=!1;function $E(e,t,r){if(S0)return e(t,r);S0=!0;try{return BE(e,t,r)}finally{S0=!1,($o!==null||zo!==null)&&(WE(),VE())}}function Uc(e,t){var r=e.stateNode;if(r===null)return null;var n=Id(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(we(231,t,typeof r));return r}var Fm=!1;if(ha)try{var $l={};Object.defineProperty($l,"passive",{get:function(){Fm=!0}}),window.addEventListener("test",$l,$l),window.removeEventListener("test",$l,$l)}catch{Fm=!1}function qN(e,t,r,n,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(f){this.onError(f)}}var mc=!1,gh=null,xh=!1,Om=null,YN={onError:function(e){mc=!0,gh=e}};function XN(e,t,r,n,s,a,i,o,l){mc=!1,gh=null,qN.apply(YN,arguments)}function QN(e,t,r,n,s,a,i,o,l){if(XN.apply(this,arguments),mc){if(mc){var c=gh;mc=!1,gh=null}else throw Error(we(198));xh||(xh=!0,Om=c)}}function so(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g1(e){if(so(e)!==e)throw Error(we(188))}function JN(e){var t=e.alternate;if(!t){if(t=so(e),t===null)throw Error(we(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return g1(s),e;if(a===n)return g1(s),t;a=a.sibling}throw Error(we(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,o=s.child;o;){if(o===r){i=!0,r=s,n=a;break}if(o===n){i=!0,n=s,r=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===r){i=!0,r=a,n=s;break}if(o===n){i=!0,n=a,r=s;break}o=o.sibling}if(!i)throw Error(we(189))}}if(r.alternate!==n)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?e:t}function HE(e){return e=JN(e),e!==null?GE(e):null}function GE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GE(e);if(t!==null)return t;e=e.sibling}return null}var KE=bn.unstable_scheduleCallback,x1=bn.unstable_cancelCallback,ZN=bn.unstable_shouldYield,eC=bn.unstable_requestPaint,qt=bn.unstable_now,tC=bn.unstable_getCurrentPriorityLevel,hg=bn.unstable_ImmediatePriority,qE=bn.unstable_UserBlockingPriority,vh=bn.unstable_NormalPriority,rC=bn.unstable_LowPriority,YE=bn.unstable_IdlePriority,Td=null,bs=null;function nC(e){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(Td,e,void 0,(e.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:iC,sC=Math.log,aC=Math.LN2;function iC(e){return e>>>=0,e===0?32:31-(sC(e)/aC|0)|0}var xf=64,vf=4194304;function rc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~s;o!==0?n=rc(o):(a&=i,a!==0&&(n=rc(a)))}else i=r&~s,i!==0?n=rc(i):a!==0&&(n=rc(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-hs(t),s=1<<r,n|=e[r],t&=~s;return n}function oC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lC(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-hs(a),o=1<<i,l=s[i];l===-1?(!(o&r)||o&n)&&(s[i]=oC(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function Mm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XE(){var e=xf;return xf<<=1,!(xf&4194240)&&(xf=64),e}function A0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ku(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hs(t),e[t]=r}function cC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-hs(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function dg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-hs(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var gt=0;function QE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var JE,mg,ZE,e2,t2,Lm=!1,yf=[],Ya=null,Xa=null,Qa=null,Vc=new Map,Bc=new Map,La=[],uC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v1(e,t){switch(e){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Vc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(t.pointerId)}}function zl(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Au(t),t!==null&&mg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function fC(e,t,r,n,s){switch(t){case"focusin":return Ya=zl(Ya,e,t,r,n,s),!0;case"dragenter":return Xa=zl(Xa,e,t,r,n,s),!0;case"mouseover":return Qa=zl(Qa,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Vc.set(a,zl(Vc.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Bc.set(a,zl(Bc.get(a)||null,e,t,r,n,s)),!0}return!1}function r2(e){var t=bi(e.target);if(t!==null){var r=so(t);if(r!==null){if(t=r.tag,t===13){if(t=zE(r),t!==null){e.blockedOn=t,t2(e.priority,function(){ZE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Pm=n,r.target.dispatchEvent(n),Pm=null}else return t=Au(r),t!==null&&mg(t),e.blockedOn=r,!1;t.shift()}return!0}function y1(e,t,r){qf(e)&&r.delete(t)}function hC(){Lm=!1,Ya!==null&&qf(Ya)&&(Ya=null),Xa!==null&&qf(Xa)&&(Xa=null),Qa!==null&&qf(Qa)&&(Qa=null),Vc.forEach(y1),Bc.forEach(y1)}function Hl(e,t){e.blockedOn===t&&(e.blockedOn=null,Lm||(Lm=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,hC)))}function Wc(e){function t(s){return Hl(s,e)}if(0<yf.length){Hl(yf[0],e);for(var r=1;r<yf.length;r++){var n=yf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ya!==null&&Hl(Ya,e),Xa!==null&&Hl(Xa,e),Qa!==null&&Hl(Qa,e),Vc.forEach(t),Bc.forEach(t),r=0;r<La.length;r++)n=La[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<La.length&&(r=La[0],r.blockedOn===null);)r2(r),r.blockedOn===null&&La.shift()}var Ho=ka.ReactCurrentBatchConfig,_h=!0;function dC(e,t,r,n){var s=gt,a=Ho.transition;Ho.transition=null;try{gt=1,pg(e,t,r,n)}finally{gt=s,Ho.transition=a}}function mC(e,t,r,n){var s=gt,a=Ho.transition;Ho.transition=null;try{gt=4,pg(e,t,r,n)}finally{gt=s,Ho.transition=a}}function pg(e,t,r,n){if(_h){var s=jm(e,t,r,n);if(s===null)M0(e,t,n,wh,r),v1(e,n);else if(fC(s,e,t,r,n))n.stopPropagation();else if(v1(e,n),t&4&&-1<uC.indexOf(e)){for(;s!==null;){var a=Au(s);if(a!==null&&JE(a),a=jm(e,t,r,n),a===null&&M0(e,t,n,wh,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else M0(e,t,n,null,r)}}var wh=null;function jm(e,t,r,n){if(wh=null,e=fg(n),e=bi(e),e!==null)if(t=so(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wh=e,null}function n2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tC()){case hg:return 1;case qE:return 4;case vh:case rC:return 16;case YE:return 536870912;default:return 16}default:return 16}}var $a=null,gg=null,Yf=null;function s2(){if(Yf)return Yf;var e,t=gg,r=t.length,n,s="value"in $a?$a.value:$a.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[a-n];n++);return Yf=s.slice(e,1<n?1-n:void 0)}function Xf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _f(){return!0}function _1(){return!1}function Dn(e){function t(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?_f:_1,this.isPropagationStopped=_1,this}return jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_f)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_f)},persist:function(){},isPersistent:_f}),t}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xg=Dn(Tl),Su=jt({},Tl,{view:0,detail:0}),pC=Dn(Su),I0,N0,Gl,kd=jt({},Su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gl&&(Gl&&e.type==="mousemove"?(I0=e.screenX-Gl.screenX,N0=e.screenY-Gl.screenY):N0=I0=0,Gl=e),I0)},movementY:function(e){return"movementY"in e?e.movementY:N0}}),w1=Dn(kd),gC=jt({},kd,{dataTransfer:0}),xC=Dn(gC),vC=jt({},Su,{relatedTarget:0}),C0=Dn(vC),yC=jt({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),_C=Dn(yC),wC=jt({},Tl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EC=Dn(wC),TC=jt({},Tl,{data:0}),E1=Dn(TC),kC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AC[e])?!!t[e]:!1}function vg(){return IC}var NC=jt({},Su,{key:function(e){if(e.key){var t=kC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vg,charCode:function(e){return e.type==="keypress"?Xf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CC=Dn(NC),bC=jt({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T1=Dn(bC),RC=jt({},Su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vg}),PC=Dn(RC),DC=jt({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),FC=Dn(DC),OC=jt({},kd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MC=Dn(OC),LC=[9,13,27,32],yg=ha&&"CompositionEvent"in window,pc=null;ha&&"documentMode"in document&&(pc=document.documentMode);var jC=ha&&"TextEvent"in window&&!pc,a2=ha&&(!yg||pc&&8<pc&&11>=pc),k1=" ",S1=!1;function i2(e,t){switch(e){case"keyup":return LC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ro=!1;function UC(e,t){switch(e){case"compositionend":return o2(t);case"keypress":return t.which!==32?null:(S1=!0,k1);case"textInput":return e=t.data,e===k1&&S1?null:e;default:return null}}function VC(e,t){if(Ro)return e==="compositionend"||!yg&&i2(e,t)?(e=s2(),Yf=gg=$a=null,Ro=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return a2&&t.locale!=="ko"?null:t.data;default:return null}}var BC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BC[e.type]:t==="textarea"}function l2(e,t,r,n){UE(n),t=Eh(t,"onChange"),0<t.length&&(r=new xg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var gc=null,$c=null;function WC(e){y2(e,0)}function Sd(e){var t=Fo(e);if(PE(t))return e}function $C(e,t){if(e==="change")return t}var c2=!1;if(ha){var b0;if(ha){var R0="oninput"in document;if(!R0){var I1=document.createElement("div");I1.setAttribute("oninput","return;"),R0=typeof I1.oninput=="function"}b0=R0}else b0=!1;c2=b0&&(!document.documentMode||9<document.documentMode)}function N1(){gc&&(gc.detachEvent("onpropertychange",u2),$c=gc=null)}function u2(e){if(e.propertyName==="value"&&Sd($c)){var t=[];l2(t,$c,e,fg(e)),$E(WC,t)}}function zC(e,t,r){e==="focusin"?(N1(),gc=t,$c=r,gc.attachEvent("onpropertychange",u2)):e==="focusout"&&N1()}function HC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sd($c)}function GC(e,t){if(e==="click")return Sd(t)}function KC(e,t){if(e==="input"||e==="change")return Sd(t)}function qC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gs=typeof Object.is=="function"?Object.is:qC;function zc(e,t){if(gs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!_m.call(t,s)||!gs(e[s],t[s]))return!1}return!0}function C1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b1(e,t){var r=C1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=C1(r)}}function f2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?f2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function h2(){for(var e=window,t=ph();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ph(e.document)}return t}function _g(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function YC(e){var t=h2(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&f2(r.ownerDocument.documentElement,r)){if(n!==null&&_g(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=b1(r,a);var i=b1(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XC=ha&&"documentMode"in document&&11>=document.documentMode,Po=null,Um=null,xc=null,Vm=!1;function R1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vm||Po==null||Po!==ph(n)||(n=Po,"selectionStart"in n&&_g(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xc&&zc(xc,n)||(xc=n,n=Eh(Um,"onSelect"),0<n.length&&(t=new xg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Po)))}function wf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Do={animationend:wf("Animation","AnimationEnd"),animationiteration:wf("Animation","AnimationIteration"),animationstart:wf("Animation","AnimationStart"),transitionend:wf("Transition","TransitionEnd")},P0={},d2={};ha&&(d2=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Ad(e){if(P0[e])return P0[e];if(!Do[e])return e;var t=Do[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in d2)return P0[e]=t[r];return e}var m2=Ad("animationend"),p2=Ad("animationiteration"),g2=Ad("animationstart"),x2=Ad("transitionend"),v2=new Map,P1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,t){v2.set(e,t),no(t,[e])}for(var D0=0;D0<P1.length;D0++){var F0=P1[D0],QC=F0.toLowerCase(),JC=F0[0].toUpperCase()+F0.slice(1);gi(QC,"on"+JC)}gi(m2,"onAnimationEnd");gi(p2,"onAnimationIteration");gi(g2,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(x2,"onTransitionEnd");nl("onMouseEnter",["mouseout","mouseover"]);nl("onMouseLeave",["mouseout","mouseover"]);nl("onPointerEnter",["pointerout","pointerover"]);nl("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZC=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function D1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,QN(n,t,void 0,e),e.currentTarget=null}function y2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;D1(s,o,c),a=l}else for(i=0;i<n.length;i++){if(o=n[i],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;D1(s,o,c),a=l}}}if(xh)throw e=Om,xh=!1,Om=null,e}function Nt(e,t){var r=t[Hm];r===void 0&&(r=t[Hm]=new Set);var n=e+"__bubble";r.has(n)||(_2(t,e,2,!1),r.add(n))}function O0(e,t,r){var n=0;t&&(n|=4),_2(r,e,n,t)}var Ef="_reactListening"+Math.random().toString(36).slice(2);function Hc(e){if(!e[Ef]){e[Ef]=!0,IE.forEach(function(r){r!=="selectionchange"&&(ZC.has(r)||O0(r,!1,e),O0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ef]||(t[Ef]=!0,O0("selectionchange",!1,t))}}function _2(e,t,r,n){switch(n2(t)){case 1:var s=dC;break;case 4:s=mC;break;default:s=pg}r=s.bind(null,t,r,e),s=void 0,!Fm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function M0(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;o!==null;){if(i=bi(o),i===null)return;if(l=i.tag,l===5||l===6){n=a=i;continue e}o=o.parentNode}}n=n.return}$E(function(){var c=a,f=fg(r),d=[];e:{var m=v2.get(e);if(m!==void 0){var p=xg,x=e;switch(e){case"keypress":if(Xf(r)===0)break e;case"keydown":case"keyup":p=CC;break;case"focusin":x="focus",p=C0;break;case"focusout":x="blur",p=C0;break;case"beforeblur":case"afterblur":p=C0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=w1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=xC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PC;break;case m2:case p2:case g2:p=_C;break;case x2:p=FC;break;case"scroll":p=pC;break;case"wheel":p=MC;break;case"copy":case"cut":case"paste":p=EC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=T1}var g=(t&4)!==0,w=!g&&e==="scroll",k=g?m!==null?m+"Capture":null:m;g=[];for(var E=c,y;E!==null;){y=E;var I=y.stateNode;if(y.tag===5&&I!==null&&(y=I,k!==null&&(I=Uc(E,k),I!=null&&g.push(Gc(E,I,y)))),w)break;E=E.return}0<g.length&&(m=new p(m,x,null,r,f),d.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==Pm&&(x=r.relatedTarget||r.fromElement)&&(bi(x)||x[da]))break e;if((p||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=r.relatedTarget||r.toElement,p=c,x=x?bi(x):null,x!==null&&(w=so(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=c),p!==x)){if(g=w1,I="onMouseLeave",k="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(g=T1,I="onPointerLeave",k="onPointerEnter",E="pointer"),w=p==null?m:Fo(p),y=x==null?m:Fo(x),m=new g(I,E+"leave",p,r,f),m.target=w,m.relatedTarget=y,I=null,bi(f)===c&&(g=new g(k,E+"enter",x,r,f),g.target=y,g.relatedTarget=w,I=g),w=I,p&&x)t:{for(g=p,k=x,E=0,y=g;y;y=Eo(y))E++;for(y=0,I=k;I;I=Eo(I))y++;for(;0<E-y;)g=Eo(g),E--;for(;0<y-E;)k=Eo(k),y--;for(;E--;){if(g===k||k!==null&&g===k.alternate)break t;g=Eo(g),k=Eo(k)}g=null}else g=null;p!==null&&F1(d,m,p,g,!1),x!==null&&w!==null&&F1(d,w,x,g,!0)}}e:{if(m=c?Fo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var O=$C;else if(A1(m))if(c2)O=KC;else{O=HC;var F=zC}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=GC);if(O&&(O=O(e,c))){l2(d,O,r,f);break e}F&&F(e,m,c),e==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&Im(m,"number",m.value)}switch(F=c?Fo(c):window,e){case"focusin":(A1(F)||F.contentEditable==="true")&&(Po=F,Um=c,xc=null);break;case"focusout":xc=Um=Po=null;break;case"mousedown":Vm=!0;break;case"contextmenu":case"mouseup":case"dragend":Vm=!1,R1(d,r,f);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":R1(d,r,f)}var v;if(yg)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ro?i2(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(a2&&r.locale!=="ko"&&(Ro||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ro&&(v=s2()):($a=f,gg="value"in $a?$a.value:$a.textContent,Ro=!0)),F=Eh(c,T),0<F.length&&(T=new E1(T,e,null,r,f),d.push({event:T,listeners:F}),v?T.data=v:(v=o2(r),v!==null&&(T.data=v)))),(v=jC?UC(e,r):VC(e,r))&&(c=Eh(c,"onBeforeInput"),0<c.length&&(f=new E1("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:c}),f.data=v))}y2(d,t)})}function Gc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Eh(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Uc(e,r),a!=null&&n.unshift(Gc(e,a,s)),a=Uc(e,t),a!=null&&n.push(Gc(e,a,s))),e=e.return}return n}function Eo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function F1(e,t,r,n,s){for(var a=t._reactName,i=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=Uc(r,a),l!=null&&i.unshift(Gc(r,l,o))):s||(l=Uc(r,a),l!=null&&i.push(Gc(r,l,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var eb=/\r\n?/g,tb=/\u0000|\uFFFD/g;function O1(e){return(typeof e=="string"?e:""+e).replace(eb,`
`).replace(tb,"")}function Tf(e,t,r){if(t=O1(t),O1(e)!==t&&r)throw Error(we(425))}function Th(){}var Bm=null,Wm=null;function $m(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,rb=typeof clearTimeout=="function"?clearTimeout:void 0,M1=typeof Promise=="function"?Promise:void 0,nb=typeof queueMicrotask=="function"?queueMicrotask:typeof M1<"u"?function(e){return M1.resolve(null).then(e).catch(sb)}:zm;function sb(e){setTimeout(function(){throw e})}function L0(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Wc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Wc(t)}function Ja(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function L1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var kl=Math.random().toString(36).slice(2),Ns="__reactFiber$"+kl,Kc="__reactProps$"+kl,da="__reactContainer$"+kl,Hm="__reactEvents$"+kl,ab="__reactListeners$"+kl,ib="__reactHandles$"+kl;function bi(e){var t=e[Ns];if(t)return t;for(var r=e.parentNode;r;){if(t=r[da]||r[Ns]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=L1(e);e!==null;){if(r=e[Ns])return r;e=L1(e)}return t}e=r,r=e.parentNode}return null}function Au(e){return e=e[Ns]||e[da],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(we(33))}function Id(e){return e[Kc]||null}var Gm=[],Oo=-1;function xi(e){return{current:e}}function bt(e){0>Oo||(e.current=Gm[Oo],Gm[Oo]=null,Oo--)}function Tt(e,t){Oo++,Gm[Oo]=e.current,e.current=t}var ci={},zr=xi(ci),mn=xi(!1),zi=ci;function sl(e,t){var r=e.type.contextTypes;if(!r)return ci;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pn(e){return e=e.childContextTypes,e!=null}function kh(){bt(mn),bt(zr)}function j1(e,t,r){if(zr.current!==ci)throw Error(we(168));Tt(zr,t),Tt(mn,r)}function w2(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(we(108,zN(e)||"Unknown",s));return jt({},r,n)}function Sh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,zi=zr.current,Tt(zr,e),Tt(mn,mn.current),!0}function U1(e,t,r){var n=e.stateNode;if(!n)throw Error(we(169));r?(e=w2(e,t,zi),n.__reactInternalMemoizedMergedChildContext=e,bt(mn),bt(zr),Tt(zr,e)):bt(mn),Tt(mn,r)}var Zs=null,Nd=!1,j0=!1;function E2(e){Zs===null?Zs=[e]:Zs.push(e)}function ob(e){Nd=!0,E2(e)}function vi(){if(!j0&&Zs!==null){j0=!0;var e=0,t=gt;try{var r=Zs;for(gt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Zs=null,Nd=!1}catch(s){throw Zs!==null&&(Zs=Zs.slice(e+1)),KE(hg,vi),s}finally{gt=t,j0=!1}}return null}var Mo=[],Lo=0,Ah=null,Ih=0,Vn=[],Bn=0,Hi=null,ea=1,ta="";function ki(e,t){Mo[Lo++]=Ih,Mo[Lo++]=Ah,Ah=e,Ih=t}function T2(e,t,r){Vn[Bn++]=ea,Vn[Bn++]=ta,Vn[Bn++]=Hi,Hi=e;var n=ea;e=ta;var s=32-hs(n)-1;n&=~(1<<s),r+=1;var a=32-hs(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,ea=1<<32-hs(t)+s|r<<s|n,ta=a+e}else ea=1<<a|r<<s|n,ta=e}function wg(e){e.return!==null&&(ki(e,1),T2(e,1,0))}function Eg(e){for(;e===Ah;)Ah=Mo[--Lo],Mo[Lo]=null,Ih=Mo[--Lo],Mo[Lo]=null;for(;e===Hi;)Hi=Vn[--Bn],Vn[Bn]=null,ta=Vn[--Bn],Vn[Bn]=null,ea=Vn[--Bn],Vn[Bn]=null}var Nn=null,An=null,Ft=!1,as=null;function k2(e,t){var r=Wn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function V1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nn=e,An=Ja(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nn=e,An=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Hi!==null?{id:ea,overflow:ta}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Wn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nn=e,An=null,!0):!1;default:return!1}}function Km(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qm(e){if(Ft){var t=An;if(t){var r=t;if(!V1(e,t)){if(Km(e))throw Error(we(418));t=Ja(r.nextSibling);var n=Nn;t&&V1(e,t)?k2(n,r):(e.flags=e.flags&-4097|2,Ft=!1,Nn=e)}}else{if(Km(e))throw Error(we(418));e.flags=e.flags&-4097|2,Ft=!1,Nn=e}}}function B1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nn=e}function kf(e){if(e!==Nn)return!1;if(!Ft)return B1(e),Ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$m(e.type,e.memoizedProps)),t&&(t=An)){if(Km(e))throw S2(),Error(we(418));for(;t;)k2(e,t),t=Ja(t.nextSibling)}if(B1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){An=Ja(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}An=null}}else An=Nn?Ja(e.stateNode.nextSibling):null;return!0}function S2(){for(var e=An;e;)e=Ja(e.nextSibling)}function al(){An=Nn=null,Ft=!1}function Tg(e){as===null?as=[e]:as.push(e)}var lb=ka.ReactCurrentBatchConfig;function Kl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var n=r.stateNode}if(!n)throw Error(we(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=s.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,e))}return e}function Sf(e,t){throw e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function W1(e){var t=e._init;return t(e._payload)}function A2(e){function t(k,E){if(e){var y=k.deletions;y===null?(k.deletions=[E],k.flags|=16):y.push(E)}}function r(k,E){if(!e)return null;for(;E!==null;)t(k,E),E=E.sibling;return null}function n(k,E){for(k=new Map;E!==null;)E.key!==null?k.set(E.key,E):k.set(E.index,E),E=E.sibling;return k}function s(k,E){return k=ri(k,E),k.index=0,k.sibling=null,k}function a(k,E,y){return k.index=y,e?(y=k.alternate,y!==null?(y=y.index,y<E?(k.flags|=2,E):y):(k.flags|=2,E)):(k.flags|=1048576,E)}function i(k){return e&&k.alternate===null&&(k.flags|=2),k}function o(k,E,y,I){return E===null||E.tag!==6?(E=H0(y,k.mode,I),E.return=k,E):(E=s(E,y),E.return=k,E)}function l(k,E,y,I){var O=y.type;return O===bo?f(k,E,y.props.children,I,y.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Oa&&W1(O)===E.type)?(I=s(E,y.props),I.ref=Kl(k,E,y),I.return=k,I):(I=nh(y.type,y.key,y.props,null,k.mode,I),I.ref=Kl(k,E,y),I.return=k,I)}function c(k,E,y,I){return E===null||E.tag!==4||E.stateNode.containerInfo!==y.containerInfo||E.stateNode.implementation!==y.implementation?(E=G0(y,k.mode,I),E.return=k,E):(E=s(E,y.children||[]),E.return=k,E)}function f(k,E,y,I,O){return E===null||E.tag!==7?(E=ji(y,k.mode,I,O),E.return=k,E):(E=s(E,y),E.return=k,E)}function d(k,E,y){if(typeof E=="string"&&E!==""||typeof E=="number")return E=H0(""+E,k.mode,y),E.return=k,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case mf:return y=nh(E.type,E.key,E.props,null,k.mode,y),y.ref=Kl(k,null,E),y.return=k,y;case Co:return E=G0(E,k.mode,y),E.return=k,E;case Oa:var I=E._init;return d(k,I(E._payload),y)}if(tc(E)||Wl(E))return E=ji(E,k.mode,y,null),E.return=k,E;Sf(k,E)}return null}function m(k,E,y,I){var O=E!==null?E.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return O!==null?null:o(k,E,""+y,I);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mf:return y.key===O?l(k,E,y,I):null;case Co:return y.key===O?c(k,E,y,I):null;case Oa:return O=y._init,m(k,E,O(y._payload),I)}if(tc(y)||Wl(y))return O!==null?null:f(k,E,y,I,null);Sf(k,y)}return null}function p(k,E,y,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return k=k.get(y)||null,o(E,k,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case mf:return k=k.get(I.key===null?y:I.key)||null,l(E,k,I,O);case Co:return k=k.get(I.key===null?y:I.key)||null,c(E,k,I,O);case Oa:var F=I._init;return p(k,E,y,F(I._payload),O)}if(tc(I)||Wl(I))return k=k.get(y)||null,f(E,k,I,O,null);Sf(E,I)}return null}function x(k,E,y,I){for(var O=null,F=null,v=E,T=E=0,S=null;v!==null&&T<y.length;T++){v.index>T?(S=v,v=null):S=v.sibling;var C=m(k,v,y[T],I);if(C===null){v===null&&(v=S);break}e&&v&&C.alternate===null&&t(k,v),E=a(C,E,T),F===null?O=C:F.sibling=C,F=C,v=S}if(T===y.length)return r(k,v),Ft&&ki(k,T),O;if(v===null){for(;T<y.length;T++)v=d(k,y[T],I),v!==null&&(E=a(v,E,T),F===null?O=v:F.sibling=v,F=v);return Ft&&ki(k,T),O}for(v=n(k,v);T<y.length;T++)S=p(v,k,T,y[T],I),S!==null&&(e&&S.alternate!==null&&v.delete(S.key===null?T:S.key),E=a(S,E,T),F===null?O=S:F.sibling=S,F=S);return e&&v.forEach(function(P){return t(k,P)}),Ft&&ki(k,T),O}function g(k,E,y,I){var O=Wl(y);if(typeof O!="function")throw Error(we(150));if(y=O.call(y),y==null)throw Error(we(151));for(var F=O=null,v=E,T=E=0,S=null,C=y.next();v!==null&&!C.done;T++,C=y.next()){v.index>T?(S=v,v=null):S=v.sibling;var P=m(k,v,C.value,I);if(P===null){v===null&&(v=S);break}e&&v&&P.alternate===null&&t(k,v),E=a(P,E,T),F===null?O=P:F.sibling=P,F=P,v=S}if(C.done)return r(k,v),Ft&&ki(k,T),O;if(v===null){for(;!C.done;T++,C=y.next())C=d(k,C.value,I),C!==null&&(E=a(C,E,T),F===null?O=C:F.sibling=C,F=C);return Ft&&ki(k,T),O}for(v=n(k,v);!C.done;T++,C=y.next())C=p(v,k,T,C.value,I),C!==null&&(e&&C.alternate!==null&&v.delete(C.key===null?T:C.key),E=a(C,E,T),F===null?O=C:F.sibling=C,F=C);return e&&v.forEach(function(b){return t(k,b)}),Ft&&ki(k,T),O}function w(k,E,y,I){if(typeof y=="object"&&y!==null&&y.type===bo&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mf:e:{for(var O=y.key,F=E;F!==null;){if(F.key===O){if(O=y.type,O===bo){if(F.tag===7){r(k,F.sibling),E=s(F,y.props.children),E.return=k,k=E;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Oa&&W1(O)===F.type){r(k,F.sibling),E=s(F,y.props),E.ref=Kl(k,F,y),E.return=k,k=E;break e}r(k,F);break}else t(k,F);F=F.sibling}y.type===bo?(E=ji(y.props.children,k.mode,I,y.key),E.return=k,k=E):(I=nh(y.type,y.key,y.props,null,k.mode,I),I.ref=Kl(k,E,y),I.return=k,k=I)}return i(k);case Co:e:{for(F=y.key;E!==null;){if(E.key===F)if(E.tag===4&&E.stateNode.containerInfo===y.containerInfo&&E.stateNode.implementation===y.implementation){r(k,E.sibling),E=s(E,y.children||[]),E.return=k,k=E;break e}else{r(k,E);break}else t(k,E);E=E.sibling}E=G0(y,k.mode,I),E.return=k,k=E}return i(k);case Oa:return F=y._init,w(k,E,F(y._payload),I)}if(tc(y))return x(k,E,y,I);if(Wl(y))return g(k,E,y,I);Sf(k,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,E!==null&&E.tag===6?(r(k,E.sibling),E=s(E,y),E.return=k,k=E):(r(k,E),E=H0(y,k.mode,I),E.return=k,k=E),i(k)):r(k,E)}return w}var il=A2(!0),I2=A2(!1),Nh=xi(null),Ch=null,jo=null,kg=null;function Sg(){kg=jo=Ch=null}function Ag(e){var t=Nh.current;bt(Nh),e._currentValue=t}function Ym(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Go(e,t){Ch=e,kg=jo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hn=!0),e.firstContext=null)}function Gn(e){var t=e._currentValue;if(kg!==e)if(e={context:e,memoizedValue:t,next:null},jo===null){if(Ch===null)throw Error(we(308));jo=e,Ch.dependencies={lanes:0,firstContext:e}}else jo=jo.next=e;return t}var Ri=null;function Ig(e){Ri===null?Ri=[e]:Ri.push(e)}function N2(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ig(t)):(r.next=s.next,s.next=r),t.interleaved=r,ma(e,n)}function ma(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ma=!1;function Ng(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Za(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ot&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ma(e,r)}return s=n.interleaved,s===null?(t.next=t,Ig(n)):(t.next=s.next,s.next=t),n.interleaved=t,ma(e,r)}function Qf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dg(e,r)}}function $1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bh(e,t,r,n){var s=e.updateQueue;Ma=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,i===null?a=c:i.next=c,i=l;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==i&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=l))}if(a!==null){var d=s.baseState;i=0,f=c=l=null,o=a;do{var m=o.lane,p=o.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,g=o;switch(m=t,p=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(p,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(p,d,m):x,m==null)break e;d=jt({},d,m);break e;case 2:Ma=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=p,l=d):f=f.next=p,i|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ki|=i,e.lanes=i,e.memoizedState=d}}function z1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(we(191,s));s.call(n)}}}var Iu={},Rs=xi(Iu),qc=xi(Iu),Yc=xi(Iu);function Pi(e){if(e===Iu)throw Error(we(174));return e}function Cg(e,t){switch(Tt(Yc,t),Tt(qc,e),Tt(Rs,Iu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cm(t,e)}bt(Rs),Tt(Rs,t)}function ol(){bt(Rs),bt(qc),bt(Yc)}function b2(e){Pi(Yc.current);var t=Pi(Rs.current),r=Cm(t,e.type);t!==r&&(Tt(qc,e),Tt(Rs,r))}function bg(e){qc.current===e&&(bt(Rs),bt(qc))}var Mt=xi(0);function Rh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var U0=[];function Rg(){for(var e=0;e<U0.length;e++)U0[e]._workInProgressVersionPrimary=null;U0.length=0}var Jf=ka.ReactCurrentDispatcher,V0=ka.ReactCurrentBatchConfig,Gi=0,Lt=null,ir=null,pr=null,Ph=!1,vc=!1,Xc=0,cb=0;function Pr(){throw Error(we(321))}function Pg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!gs(e[r],t[r]))return!1;return!0}function Dg(e,t,r,n,s,a){if(Gi=a,Lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jf.current=e===null||e.memoizedState===null?db:mb,e=r(n,s),vc){a=0;do{if(vc=!1,Xc=0,25<=a)throw Error(we(301));a+=1,pr=ir=null,t.updateQueue=null,Jf.current=pb,e=r(n,s)}while(vc)}if(Jf.current=Dh,t=ir!==null&&ir.next!==null,Gi=0,pr=ir=Lt=null,Ph=!1,t)throw Error(we(300));return e}function Fg(){var e=Xc!==0;return Xc=0,e}function Is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Lt.memoizedState=pr=e:pr=pr.next=e,pr}function Kn(){if(ir===null){var e=Lt.alternate;e=e!==null?e.memoizedState:null}else e=ir.next;var t=pr===null?Lt.memoizedState:pr.next;if(t!==null)pr=t,ir=e;else{if(e===null)throw Error(we(310));ir=e,e={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},pr===null?Lt.memoizedState=pr=e:pr=pr.next=e}return pr}function Qc(e,t){return typeof t=="function"?t(e):t}function B0(e){var t=Kn(),r=t.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=e;var n=ir,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var o=i=null,l=null,c=a;do{var f=c.lane;if((Gi&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,i=n):l=l.next=d,Lt.lanes|=f,Ki|=f}c=c.next}while(c!==null&&c!==a);l===null?i=n:l.next=o,gs(n,t.memoizedState)||(hn=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Lt.lanes|=a,Ki|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function W0(e){var t=Kn(),r=t.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);gs(a,t.memoizedState)||(hn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function R2(){}function P2(e,t){var r=Lt,n=Kn(),s=t(),a=!gs(n.memoizedState,s);if(a&&(n.memoizedState=s,hn=!0),n=n.queue,Og(O2.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||pr!==null&&pr.memoizedState.tag&1){if(r.flags|=2048,Jc(9,F2.bind(null,r,n,s,t),void 0,null),gr===null)throw Error(we(349));Gi&30||D2(r,t,s)}return s}function D2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function F2(e,t,r,n){t.value=r,t.getSnapshot=n,M2(t)&&L2(e)}function O2(e,t,r){return r(function(){M2(t)&&L2(e)})}function M2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gs(e,r)}catch{return!0}}function L2(e){var t=ma(e,1);t!==null&&ds(t,e,1,-1)}function H1(e){var t=Is();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:e},t.queue=e,e=e.dispatch=hb.bind(null,Lt,e),[t.memoizedState,e]}function Jc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function j2(){return Kn().memoizedState}function Zf(e,t,r,n){var s=Is();Lt.flags|=e,s.memoizedState=Jc(1|t,r,void 0,n===void 0?null:n)}function Cd(e,t,r,n){var s=Kn();n=n===void 0?null:n;var a=void 0;if(ir!==null){var i=ir.memoizedState;if(a=i.destroy,n!==null&&Pg(n,i.deps)){s.memoizedState=Jc(t,r,a,n);return}}Lt.flags|=e,s.memoizedState=Jc(1|t,r,a,n)}function G1(e,t){return Zf(8390656,8,e,t)}function Og(e,t){return Cd(2048,8,e,t)}function U2(e,t){return Cd(4,2,e,t)}function V2(e,t){return Cd(4,4,e,t)}function B2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function W2(e,t,r){return r=r!=null?r.concat([e]):null,Cd(4,4,B2.bind(null,t,e),r)}function Mg(){}function $2(e,t){var r=Kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Pg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function z2(e,t){var r=Kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Pg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function H2(e,t,r){return Gi&21?(gs(r,t)||(r=XE(),Lt.lanes|=r,Ki|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hn=!0),e.memoizedState=r)}function ub(e,t){var r=gt;gt=r!==0&&4>r?r:4,e(!0);var n=V0.transition;V0.transition={};try{e(!1),t()}finally{gt=r,V0.transition=n}}function G2(){return Kn().memoizedState}function fb(e,t,r){var n=ti(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},K2(e))q2(t,r);else if(r=N2(e,t,r,n),r!==null){var s=Jr();ds(r,e,n,s),Y2(r,t,n)}}function hb(e,t,r){var n=ti(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(K2(e))q2(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,r);if(s.hasEagerState=!0,s.eagerState=o,gs(o,i)){var l=t.interleaved;l===null?(s.next=s,Ig(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=N2(e,t,s,n),r!==null&&(s=Jr(),ds(r,e,n,s),Y2(r,t,n))}}function K2(e){var t=e.alternate;return e===Lt||t!==null&&t===Lt}function q2(e,t){vc=Ph=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Y2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dg(e,r)}}var Dh={readContext:Gn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},db={readContext:Gn,useCallback:function(e,t){return Is().memoizedState=[e,t===void 0?null:t],e},useContext:Gn,useEffect:G1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zf(4194308,4,B2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zf(4,2,e,t)},useMemo:function(e,t){var r=Is();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Is();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=fb.bind(null,Lt,e),[n.memoizedState,e]},useRef:function(e){var t=Is();return e={current:e},t.memoizedState=e},useState:H1,useDebugValue:Mg,useDeferredValue:function(e){return Is().memoizedState=e},useTransition:function(){var e=H1(!1),t=e[0];return e=ub.bind(null,e[1]),Is().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Lt,s=Is();if(Ft){if(r===void 0)throw Error(we(407));r=r()}else{if(r=t(),gr===null)throw Error(we(349));Gi&30||D2(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,G1(O2.bind(null,n,a,e),[e]),n.flags|=2048,Jc(9,F2.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Is(),t=gr.identifierPrefix;if(Ft){var r=ta,n=ea;r=(n&~(1<<32-hs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=cb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mb={readContext:Gn,useCallback:$2,useContext:Gn,useEffect:Og,useImperativeHandle:W2,useInsertionEffect:U2,useLayoutEffect:V2,useMemo:z2,useReducer:B0,useRef:j2,useState:function(){return B0(Qc)},useDebugValue:Mg,useDeferredValue:function(e){var t=Kn();return H2(t,ir.memoizedState,e)},useTransition:function(){var e=B0(Qc)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:R2,useSyncExternalStore:P2,useId:G2,unstable_isNewReconciler:!1},pb={readContext:Gn,useCallback:$2,useContext:Gn,useEffect:Og,useImperativeHandle:W2,useInsertionEffect:U2,useLayoutEffect:V2,useMemo:z2,useReducer:W0,useRef:j2,useState:function(){return W0(Qc)},useDebugValue:Mg,useDeferredValue:function(e){var t=Kn();return ir===null?t.memoizedState=e:H2(t,ir.memoizedState,e)},useTransition:function(){var e=W0(Qc)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:R2,useSyncExternalStore:P2,useId:G2,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){t=jt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Xm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:jt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var bd={isMounted:function(e){return(e=e._reactInternals)?so(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Jr(),s=ti(e),a=oa(n,s);a.payload=t,r!=null&&(a.callback=r),t=Za(e,a,s),t!==null&&(ds(t,e,s,n),Qf(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Jr(),s=ti(e),a=oa(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Za(e,a,s),t!==null&&(ds(t,e,s,n),Qf(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Jr(),n=ti(e),s=oa(r,n);s.tag=2,t!=null&&(s.callback=t),t=Za(e,s,n),t!==null&&(ds(t,e,n,r),Qf(t,e,n))}};function K1(e,t,r,n,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!zc(r,n)||!zc(s,a):!0}function X2(e,t,r){var n=!1,s=ci,a=t.contextType;return typeof a=="object"&&a!==null?a=Gn(a):(s=pn(t)?zi:zr.current,n=t.contextTypes,a=(n=n!=null)?sl(e,s):ci),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function q1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&bd.enqueueReplaceState(t,t.state,null)}function Qm(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ng(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Gn(a):(a=pn(t)?zi:zr.current,s.context=sl(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Xm(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bd.enqueueReplaceState(s,s.state,null),bh(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ll(e,t){try{var r="",n=t;do r+=$N(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function $0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Jm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gb=typeof WeakMap=="function"?WeakMap:Map;function Q2(e,t,r){r=oa(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Oh||(Oh=!0,lp=n),Jm(e,t)},r}function J2(e,t,r){r=oa(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Jm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Jm(e,t),typeof n!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Y1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gb;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=bb.bind(null,e,t,r),t.then(e,e))}function X1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Q1(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=oa(-1,1),t.tag=2,Za(r,t,1))),r.lanes|=1),e)}var xb=ka.ReactCurrentOwner,hn=!1;function qr(e,t,r,n){t.child=e===null?I2(t,null,r,n):il(t,e.child,r,n)}function J1(e,t,r,n,s){r=r.render;var a=t.ref;return Go(t,s),n=Dg(e,t,r,n,a,s),r=Fg(),e!==null&&!hn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pa(e,t,s)):(Ft&&r&&wg(t),t.flags|=1,qr(e,t,n,s),t.child)}function Z1(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!zg(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Z2(e,t,a,n,s)):(e=nh(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:zc,r(i,n)&&e.ref===t.ref)return pa(e,t,s)}return t.flags|=1,e=ri(a,n),e.ref=t.ref,e.return=t,t.child=e}function Z2(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(zc(a,n)&&e.ref===t.ref)if(hn=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(hn=!0);else return t.lanes=e.lanes,pa(e,t,s)}return Zm(e,t,r,n,s)}function eT(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Vo,En),En|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tt(Vo,En),En|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Tt(Vo,En),En|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Tt(Vo,En),En|=n;return qr(e,t,s,r),t.child}function tT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Zm(e,t,r,n,s){var a=pn(r)?zi:zr.current;return a=sl(t,a),Go(t,s),r=Dg(e,t,r,n,a,s),n=Fg(),e!==null&&!hn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pa(e,t,s)):(Ft&&n&&wg(t),t.flags|=1,qr(e,t,r,s),t.child)}function ey(e,t,r,n,s){if(pn(r)){var a=!0;Sh(t)}else a=!1;if(Go(t,s),t.stateNode===null)eh(e,t),X2(t,r,n),Qm(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Gn(c):(c=pn(r)?zi:zr.current,c=sl(t,c));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||l!==c)&&q1(t,i,n,c),Ma=!1;var m=t.memoizedState;i.state=m,bh(t,n,i,s),l=t.memoizedState,o!==n||m!==l||mn.current||Ma?(typeof f=="function"&&(Xm(t,r,f,n),l=t.memoizedState),(o=Ma||K1(t,r,o,n,m,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,C2(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:rs(t.type,o),i.props=c,d=t.pendingProps,m=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=Gn(l):(l=pn(r)?zi:zr.current,l=sl(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==d||m!==l)&&q1(t,i,n,l),Ma=!1,m=t.memoizedState,i.state=m,bh(t,n,i,s);var x=t.memoizedState;o!==d||m!==x||mn.current||Ma?(typeof p=="function"&&(Xm(t,r,p,n),x=t.memoizedState),(c=Ma||K1(t,r,c,n,m,x,l)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,x,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,x,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),i.props=n,i.state=x,i.context=l,n=c):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return ep(e,t,r,n,a,s)}function ep(e,t,r,n,s,a){tT(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&U1(t,r,!1),pa(e,t,a);n=t.stateNode,xb.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=il(t,e.child,null,a),t.child=il(t,null,o,a)):qr(e,t,o,a),t.memoizedState=n.state,s&&U1(t,r,!0),t.child}function rT(e){var t=e.stateNode;t.pendingContext?j1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&j1(e,t.context,!1),Cg(e,t.containerInfo)}function ty(e,t,r,n,s){return al(),Tg(s),t.flags|=256,qr(e,t,r,n),t.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function rp(e){return{baseLanes:e,cachePool:null,transitions:null}}function nT(e,t,r){var n=t.pendingProps,s=Mt.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Tt(Mt,s&1),e===null)return qm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Dd(i,n,0,null),e=ji(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=rp(r),t.memoizedState=tp,e):Lg(t,i));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return vb(e,t,i,n,o,s,r);if(a){a=n.fallback,i=t.mode,s=e.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=ri(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?a=ri(o,a):(a=ji(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?rp(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=tp,n}return a=e.child,e=a.sibling,n=ri(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Lg(e,t){return t=Dd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Af(e,t,r,n){return n!==null&&Tg(n),il(t,e.child,null,r),e=Lg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vb(e,t,r,n,s,a,i){if(r)return t.flags&256?(t.flags&=-257,n=$0(Error(we(422))),Af(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Dd({mode:"visible",children:n.children},s,0,null),a=ji(a,s,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&il(t,e.child,null,i),t.child.memoizedState=rp(i),t.memoizedState=tp,a);if(!(t.mode&1))return Af(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(we(419)),n=$0(a,n,void 0),Af(e,t,i,n)}if(o=(i&e.childLanes)!==0,hn||o){if(n=gr,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ma(e,s),ds(n,e,s,-1))}return $g(),n=$0(Error(we(421))),Af(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rb.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,An=Ja(s.nextSibling),Nn=t,Ft=!0,as=null,e!==null&&(Vn[Bn++]=ea,Vn[Bn++]=ta,Vn[Bn++]=Hi,ea=e.id,ta=e.overflow,Hi=t),t=Lg(t,n.children),t.flags|=4096,t)}function ry(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ym(e.return,t,r)}function z0(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function sT(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(qr(e,t,n.children,r),n=Mt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ry(e,r,t);else if(e.tag===19)ry(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Tt(Mt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Rh(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),z0(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Rh(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}z0(t,!0,r,null,a);break;case"together":z0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function eh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ki|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,r=ri(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ri(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function yb(e,t,r){switch(t.tag){case 3:rT(t),al();break;case 5:b2(t);break;case 1:pn(t.type)&&Sh(t);break;case 4:Cg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Tt(Nh,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Tt(Mt,Mt.current&1),t.flags|=128,null):r&t.child.childLanes?nT(e,t,r):(Tt(Mt,Mt.current&1),e=pa(e,t,r),e!==null?e.sibling:null);Tt(Mt,Mt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return sT(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tt(Mt,Mt.current),n)break;return null;case 22:case 23:return t.lanes=0,eT(e,t,r)}return pa(e,t,r)}var aT,np,iT,oT;aT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};np=function(){};iT=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Pi(Rs.current);var a=null;switch(r){case"input":s=Sm(e,s),n=Sm(e,n),a=[];break;case"select":s=jt({},s,{value:void 0}),n=jt({},n,{value:void 0}),a=[];break;case"textarea":s=Nm(e,s),n=Nm(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Th)}bm(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lc.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&o[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Nt("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};oT=function(e,t,r,n){r!==n&&(t.flags|=4)};function ql(e,t){if(!Ft)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Dr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _b(e,t,r){var n=t.pendingProps;switch(Eg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(t),null;case 1:return pn(t.type)&&kh(),Dr(t),null;case 3:return n=t.stateNode,ol(),bt(mn),bt(zr),Rg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,as!==null&&(fp(as),as=null))),np(e,t),Dr(t),null;case 5:bg(t);var s=Pi(Yc.current);if(r=t.type,e!==null&&t.stateNode!=null)iT(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(we(166));return Dr(t),null}if(e=Pi(Rs.current),kf(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Ns]=t,n[Kc]=a,e=(t.mode&1)!==0,r){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(s=0;s<nc.length;s++)Nt(nc[s],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":f1(n,a),Nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Nt("invalid",n);break;case"textarea":d1(n,a),Nt("invalid",n)}bm(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Tf(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Tf(n.textContent,o,e),s=["children",""+o]):Lc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Nt("scroll",n)}switch(r){case"input":pf(n),h1(n,a,!0);break;case"textarea":pf(n),m1(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Th)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=OE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Ns]=t,e[Kc]=n,aT(e,t,!1,!1),t.stateNode=e;e:{switch(i=Rm(r,n),r){case"dialog":Nt("cancel",e),Nt("close",e),s=n;break;case"iframe":case"object":case"embed":Nt("load",e),s=n;break;case"video":case"audio":for(s=0;s<nc.length;s++)Nt(nc[s],e);s=n;break;case"source":Nt("error",e),s=n;break;case"img":case"image":case"link":Nt("error",e),Nt("load",e),s=n;break;case"details":Nt("toggle",e),s=n;break;case"input":f1(e,n),s=Sm(e,n),Nt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=jt({},n,{value:void 0}),Nt("invalid",e);break;case"textarea":d1(e,n),s=Nm(e,n),Nt("invalid",e);break;default:s=n}bm(r,s),o=s;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?jE(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ME(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&jc(e,l):typeof l=="number"&&jc(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Lc.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Nt("scroll",e):l!=null&&og(e,a,l,i))}switch(r){case"input":pf(e),h1(e,n,!1);break;case"textarea":pf(e),m1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+li(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Wo(e,!!n.multiple,a,!1):n.defaultValue!=null&&Wo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Th)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dr(t),null;case 6:if(e&&t.stateNode!=null)oT(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(we(166));if(r=Pi(Yc.current),Pi(Rs.current),kf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ns]=t,(a=n.nodeValue!==r)&&(e=Nn,e!==null))switch(e.tag){case 3:Tf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tf(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ns]=t,t.stateNode=n}return Dr(t),null;case 13:if(bt(Mt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ft&&An!==null&&t.mode&1&&!(t.flags&128))S2(),al(),t.flags|=98560,a=!1;else if(a=kf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(we(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(we(317));a[Ns]=t}else al(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dr(t),a=!1}else as!==null&&(fp(as),as=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Mt.current&1?or===0&&(or=3):$g())),t.updateQueue!==null&&(t.flags|=4),Dr(t),null);case 4:return ol(),np(e,t),e===null&&Hc(t.stateNode.containerInfo),Dr(t),null;case 10:return Ag(t.type._context),Dr(t),null;case 17:return pn(t.type)&&kh(),Dr(t),null;case 19:if(bt(Mt),a=t.memoizedState,a===null)return Dr(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)ql(a,!1);else{if(or!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Rh(e),i!==null){for(t.flags|=128,ql(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Tt(Mt,Mt.current&1|2),t.child}e=e.sibling}a.tail!==null&&qt()>cl&&(t.flags|=128,n=!0,ql(a,!1),t.lanes=4194304)}else{if(!n)if(e=Rh(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ql(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Ft)return Dr(t),null}else 2*qt()-a.renderingStartTime>cl&&r!==1073741824&&(t.flags|=128,n=!0,ql(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=qt(),t.sibling=null,r=Mt.current,Tt(Mt,n?r&1|2:r&1),t):(Dr(t),null);case 22:case 23:return Wg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?En&1073741824&&(Dr(t),t.subtreeFlags&6&&(t.flags|=8192)):Dr(t),null;case 24:return null;case 25:return null}throw Error(we(156,t.tag))}function wb(e,t){switch(Eg(t),t.tag){case 1:return pn(t.type)&&kh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ol(),bt(mn),bt(zr),Rg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bg(t),null;case 13:if(bt(Mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bt(Mt),null;case 4:return ol(),null;case 10:return Ag(t.type._context),null;case 22:case 23:return Wg(),null;case 24:return null;default:return null}}var If=!1,jr=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Uo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Bt(e,t,n)}else r.current=null}function sp(e,t,r){try{r()}catch(n){Bt(e,t,n)}}var ny=!1;function Tb(e,t){if(Bm=_h,e=h2(),_g(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,o=-1,l=-1,c=0,f=0,d=e,m=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(o=i+s),d!==a||n!==0&&d.nodeType!==3||(l=i+n),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)m=d,d=p;for(;;){if(d===e)break t;if(m===r&&++c===s&&(o=i),m===a&&++f===n&&(l=i),(p=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wm={focusedElem:e,selectionRange:r},_h=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,w=x.memoizedState,k=t.stateNode,E=k.getSnapshotBeforeUpdate(t.elementType===t.type?g:rs(t.type,g),w);k.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(I){Bt(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return x=ny,ny=!1,x}function yc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&sp(t,r,a)}s=s.next}while(s!==n)}}function Rd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ap(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function lT(e){var t=e.alternate;t!==null&&(e.alternate=null,lT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ns],delete t[Kc],delete t[Hm],delete t[ab],delete t[ib])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cT(e){return e.tag===5||e.tag===3||e.tag===4}function sy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ip(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Th));else if(n!==4&&(e=e.child,e!==null))for(ip(e,t,r),e=e.sibling;e!==null;)ip(e,t,r),e=e.sibling}function op(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(op(e,t,r),e=e.sibling;e!==null;)op(e,t,r),e=e.sibling}var _r=null,ns=!1;function ba(e,t,r){for(r=r.child;r!==null;)uT(e,t,r),r=r.sibling}function uT(e,t,r){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(Td,r)}catch{}switch(r.tag){case 5:jr||Uo(r,t);case 6:var n=_r,s=ns;_r=null,ba(e,t,r),_r=n,ns=s,_r!==null&&(ns?(e=_r,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_r.removeChild(r.stateNode));break;case 18:_r!==null&&(ns?(e=_r,r=r.stateNode,e.nodeType===8?L0(e.parentNode,r):e.nodeType===1&&L0(e,r),Wc(e)):L0(_r,r.stateNode));break;case 4:n=_r,s=ns,_r=r.stateNode.containerInfo,ns=!0,ba(e,t,r),_r=n,ns=s;break;case 0:case 11:case 14:case 15:if(!jr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&sp(r,t,i),s=s.next}while(s!==n)}ba(e,t,r);break;case 1:if(!jr&&(Uo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Bt(r,t,o)}ba(e,t,r);break;case 21:ba(e,t,r);break;case 22:r.mode&1?(jr=(n=jr)||r.memoizedState!==null,ba(e,t,r),jr=n):ba(e,t,r);break;default:ba(e,t,r)}}function ay(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Eb),t.forEach(function(n){var s=Pb.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Zn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:_r=o.stateNode,ns=!1;break e;case 3:_r=o.stateNode.containerInfo,ns=!0;break e;case 4:_r=o.stateNode.containerInfo,ns=!0;break e}o=o.return}if(_r===null)throw Error(we(160));uT(a,i,s),_r=null,ns=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Bt(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fT(t,e),t=t.sibling}function fT(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zn(t,e),ks(e),n&4){try{yc(3,e,e.return),Rd(3,e)}catch(g){Bt(e,e.return,g)}try{yc(5,e,e.return)}catch(g){Bt(e,e.return,g)}}break;case 1:Zn(t,e),ks(e),n&512&&r!==null&&Uo(r,r.return);break;case 5:if(Zn(t,e),ks(e),n&512&&r!==null&&Uo(r,r.return),e.flags&32){var s=e.stateNode;try{jc(s,"")}catch(g){Bt(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&DE(s,a),Rm(o,i);var c=Rm(o,a);for(i=0;i<l.length;i+=2){var f=l[i],d=l[i+1];f==="style"?jE(s,d):f==="dangerouslySetInnerHTML"?ME(s,d):f==="children"?jc(s,d):og(s,f,d,c)}switch(o){case"input":Am(s,a);break;case"textarea":FE(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Wo(s,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?Wo(s,!!a.multiple,a.defaultValue,!0):Wo(s,!!a.multiple,a.multiple?[]:"",!1))}s[Kc]=a}catch(g){Bt(e,e.return,g)}}break;case 6:if(Zn(t,e),ks(e),n&4){if(e.stateNode===null)throw Error(we(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Bt(e,e.return,g)}}break;case 3:if(Zn(t,e),ks(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wc(t.containerInfo)}catch(g){Bt(e,e.return,g)}break;case 4:Zn(t,e),ks(e);break;case 13:Zn(t,e),ks(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Vg=qt())),n&4&&ay(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(jr=(c=jr)||f,Zn(t,e),jr=c):Zn(t,e),ks(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Ce=e,f=e.child;f!==null;){for(d=Ce=f;Ce!==null;){switch(m=Ce,p=m.child,m.tag){case 0:case 11:case 14:case 15:yc(4,m,m.return);break;case 1:Uo(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){Bt(n,r,g)}}break;case 5:Uo(m,m.return);break;case 22:if(m.memoizedState!==null){oy(d);continue}}p!==null?(p.return=m,Ce=p):oy(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=LE("display",i))}catch(g){Bt(e,e.return,g)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Bt(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Zn(t,e),ks(e),n&4&&ay(e);break;case 21:break;default:Zn(t,e),ks(e)}}function ks(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(cT(r)){var n=r;break e}r=r.return}throw Error(we(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(jc(s,""),n.flags&=-33);var a=sy(e);op(e,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,o=sy(e);ip(e,o,i);break;default:throw Error(we(161))}}catch(l){Bt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kb(e,t,r){Ce=e,hT(e)}function hT(e,t,r){for(var n=(e.mode&1)!==0;Ce!==null;){var s=Ce,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||If;if(!i){var o=s.alternate,l=o!==null&&o.memoizedState!==null||jr;o=If;var c=jr;if(If=i,(jr=l)&&!c)for(Ce=s;Ce!==null;)i=Ce,l=i.child,i.tag===22&&i.memoizedState!==null?ly(s):l!==null?(l.return=i,Ce=l):ly(s);for(;a!==null;)Ce=a,hT(a),a=a.sibling;Ce=s,If=o,jr=c}iy(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Ce=a):iy(e)}}function iy(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jr||Rd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!jr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:rs(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&z1(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}z1(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Wc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}jr||t.flags&512&&ap(t)}catch(m){Bt(t,t.return,m)}}if(t===e){Ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function oy(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function ly(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Rd(4,t)}catch(l){Bt(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){Bt(t,s,l)}}var a=t.return;try{ap(t)}catch(l){Bt(t,a,l)}break;case 5:var i=t.return;try{ap(t)}catch(l){Bt(t,i,l)}}}catch(l){Bt(t,t.return,l)}if(t===e){Ce=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ce=o;break}Ce=t.return}}var Sb=Math.ceil,Fh=ka.ReactCurrentDispatcher,jg=ka.ReactCurrentOwner,$n=ka.ReactCurrentBatchConfig,ot=0,gr=null,rr=null,kr=0,En=0,Vo=xi(0),or=0,Zc=null,Ki=0,Pd=0,Ug=0,_c=null,un=null,Vg=0,cl=1/0,Js=null,Oh=!1,lp=null,ei=null,Nf=!1,za=null,Mh=0,wc=0,cp=null,th=-1,rh=0;function Jr(){return ot&6?qt():th!==-1?th:th=qt()}function ti(e){return e.mode&1?ot&2&&kr!==0?kr&-kr:lb.transition!==null?(rh===0&&(rh=XE()),rh):(e=gt,e!==0||(e=window.event,e=e===void 0?16:n2(e.type)),e):1}function ds(e,t,r,n){if(50<wc)throw wc=0,cp=null,Error(we(185));ku(e,r,n),(!(ot&2)||e!==gr)&&(e===gr&&(!(ot&2)&&(Pd|=r),or===4&&ja(e,kr)),gn(e,n),r===1&&ot===0&&!(t.mode&1)&&(cl=qt()+500,Nd&&vi()))}function gn(e,t){var r=e.callbackNode;lC(e,t);var n=yh(e,e===gr?kr:0);if(n===0)r!==null&&x1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&x1(r),t===1)e.tag===0?ob(cy.bind(null,e)):E2(cy.bind(null,e)),nb(function(){!(ot&6)&&vi()}),r=null;else{switch(QE(n)){case 1:r=hg;break;case 4:r=qE;break;case 16:r=vh;break;case 536870912:r=YE;break;default:r=vh}r=_T(r,dT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dT(e,t){if(th=-1,rh=0,ot&6)throw Error(we(327));var r=e.callbackNode;if(Ko()&&e.callbackNode!==r)return null;var n=yh(e,e===gr?kr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Lh(e,n);else{t=n;var s=ot;ot|=2;var a=pT();(gr!==e||kr!==t)&&(Js=null,cl=qt()+500,Li(e,t));do try{Nb();break}catch(o){mT(e,o)}while(!0);Sg(),Fh.current=a,ot=s,rr!==null?t=0:(gr=null,kr=0,t=or)}if(t!==0){if(t===2&&(s=Mm(e),s!==0&&(n=s,t=up(e,s))),t===1)throw r=Zc,Li(e,0),ja(e,n),gn(e,qt()),r;if(t===6)ja(e,n);else{if(s=e.current.alternate,!(n&30)&&!Ab(s)&&(t=Lh(e,n),t===2&&(a=Mm(e),a!==0&&(n=a,t=up(e,a))),t===1))throw r=Zc,Li(e,0),ja(e,n),gn(e,qt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(we(345));case 2:Si(e,un,Js);break;case 3:if(ja(e,n),(n&130023424)===n&&(t=Vg+500-qt(),10<t)){if(yh(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Jr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zm(Si.bind(null,e,un,Js),t);break}Si(e,un,Js);break;case 4:if(ja(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-hs(n);a=1<<i,i=t[i],i>s&&(s=i),n&=~a}if(n=s,n=qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sb(n/1960))-n,10<n){e.timeoutHandle=zm(Si.bind(null,e,un,Js),n);break}Si(e,un,Js);break;case 5:Si(e,un,Js);break;default:throw Error(we(329))}}}return gn(e,qt()),e.callbackNode===r?dT.bind(null,e):null}function up(e,t){var r=_c;return e.current.memoizedState.isDehydrated&&(Li(e,t).flags|=256),e=Lh(e,t),e!==2&&(t=un,un=r,t!==null&&fp(t)),e}function fp(e){un===null?un=e:un.push.apply(un,e)}function Ab(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!gs(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ja(e,t){for(t&=~Ug,t&=~Pd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-hs(t),n=1<<r;e[r]=-1,t&=~n}}function cy(e){if(ot&6)throw Error(we(327));Ko();var t=yh(e,0);if(!(t&1))return gn(e,qt()),null;var r=Lh(e,t);if(e.tag!==0&&r===2){var n=Mm(e);n!==0&&(t=n,r=up(e,n))}if(r===1)throw r=Zc,Li(e,0),ja(e,t),gn(e,qt()),r;if(r===6)throw Error(we(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Si(e,un,Js),gn(e,qt()),null}function Bg(e,t){var r=ot;ot|=1;try{return e(t)}finally{ot=r,ot===0&&(cl=qt()+500,Nd&&vi())}}function qi(e){za!==null&&za.tag===0&&!(ot&6)&&Ko();var t=ot;ot|=1;var r=$n.transition,n=gt;try{if($n.transition=null,gt=1,e)return e()}finally{gt=n,$n.transition=r,ot=t,!(ot&6)&&vi()}}function Wg(){En=Vo.current,bt(Vo)}function Li(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rb(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(Eg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&kh();break;case 3:ol(),bt(mn),bt(zr),Rg();break;case 5:bg(n);break;case 4:ol();break;case 13:bt(Mt);break;case 19:bt(Mt);break;case 10:Ag(n.type._context);break;case 22:case 23:Wg()}r=r.return}if(gr=e,rr=e=ri(e.current,null),kr=En=t,or=0,Zc=null,Ug=Pd=Ki=0,un=_c=null,Ri!==null){for(t=0;t<Ri.length;t++)if(r=Ri[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}Ri=null}return e}function mT(e,t){do{var r=rr;try{if(Sg(),Jf.current=Dh,Ph){for(var n=Lt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ph=!1}if(Gi=0,pr=ir=Lt=null,vc=!1,Xc=0,jg.current=null,r===null||r.return===null){or=1,Zc=t,rr=null;break}e:{var a=e,i=r.return,o=r,l=t;if(t=kr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=o,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=X1(i);if(p!==null){p.flags&=-257,Q1(p,i,o,a,t),p.mode&1&&Y1(a,c,t),t=p,l=c;var x=t.updateQueue;if(x===null){var g=new Set;g.add(l),t.updateQueue=g}else x.add(l);break e}else{if(!(t&1)){Y1(a,c,t),$g();break e}l=Error(we(426))}}else if(Ft&&o.mode&1){var w=X1(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Q1(w,i,o,a,t),Tg(ll(l,o));break e}}a=l=ll(l,o),or!==4&&(or=2),_c===null?_c=[a]:_c.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var k=Q2(a,l,t);$1(a,k);break e;case 1:o=l;var E=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof E.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ei===null||!ei.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var I=J2(a,o,t);$1(a,I);break e}}a=a.return}while(a!==null)}xT(r)}catch(O){t=O,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(!0)}function pT(){var e=Fh.current;return Fh.current=Dh,e===null?Dh:e}function $g(){(or===0||or===3||or===2)&&(or=4),gr===null||!(Ki&268435455)&&!(Pd&268435455)||ja(gr,kr)}function Lh(e,t){var r=ot;ot|=2;var n=pT();(gr!==e||kr!==t)&&(Js=null,Li(e,t));do try{Ib();break}catch(s){mT(e,s)}while(!0);if(Sg(),ot=r,Fh.current=n,rr!==null)throw Error(we(261));return gr=null,kr=0,or}function Ib(){for(;rr!==null;)gT(rr)}function Nb(){for(;rr!==null&&!ZN();)gT(rr)}function gT(e){var t=yT(e.alternate,e,En);e.memoizedProps=e.pendingProps,t===null?xT(e):rr=t,jg.current=null}function xT(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=wb(r,t),r!==null){r.flags&=32767,rr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{or=6,rr=null;return}}else if(r=_b(r,t,En),r!==null){rr=r;return}if(t=t.sibling,t!==null){rr=t;return}rr=t=e}while(t!==null);or===0&&(or=5)}function Si(e,t,r){var n=gt,s=$n.transition;try{$n.transition=null,gt=1,Cb(e,t,r,n)}finally{$n.transition=s,gt=n}return null}function Cb(e,t,r,n){do Ko();while(za!==null);if(ot&6)throw Error(we(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(we(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(cC(e,a),e===gr&&(rr=gr=null,kr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Nf||(Nf=!0,_T(vh,function(){return Ko(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=$n.transition,$n.transition=null;var i=gt;gt=1;var o=ot;ot|=4,jg.current=null,Tb(e,r),fT(r,e),YC(Wm),_h=!!Bm,Wm=Bm=null,e.current=r,kb(r),eC(),ot=o,gt=i,$n.transition=a}else e.current=r;if(Nf&&(Nf=!1,za=e,Mh=s),a=e.pendingLanes,a===0&&(ei=null),nC(r.stateNode),gn(e,qt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Oh)throw Oh=!1,e=lp,lp=null,e;return Mh&1&&e.tag!==0&&Ko(),a=e.pendingLanes,a&1?e===cp?wc++:(wc=0,cp=e):wc=0,vi(),null}function Ko(){if(za!==null){var e=QE(Mh),t=$n.transition,r=gt;try{if($n.transition=null,gt=16>e?16:e,za===null)var n=!1;else{if(e=za,za=null,Mh=0,ot&6)throw Error(we(331));var s=ot;for(ot|=4,Ce=e.current;Ce!==null;){var a=Ce,i=a.child;if(Ce.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ce=c;Ce!==null;){var f=Ce;switch(f.tag){case 0:case 11:case 15:yc(8,f,a)}var d=f.child;if(d!==null)d.return=f,Ce=d;else for(;Ce!==null;){f=Ce;var m=f.sibling,p=f.return;if(lT(f),f===c){Ce=null;break}if(m!==null){m.return=p,Ce=m;break}Ce=p}}}var x=a.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ce=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,Ce=i;else e:for(;Ce!==null;){if(a=Ce,a.flags&2048)switch(a.tag){case 0:case 11:case 15:yc(9,a,a.return)}var k=a.sibling;if(k!==null){k.return=a.return,Ce=k;break e}Ce=a.return}}var E=e.current;for(Ce=E;Ce!==null;){i=Ce;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,Ce=y;else e:for(i=E;Ce!==null;){if(o=Ce,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Rd(9,o)}}catch(O){Bt(o,o.return,O)}if(o===i){Ce=null;break e}var I=o.sibling;if(I!==null){I.return=o.return,Ce=I;break e}Ce=o.return}}if(ot=s,vi(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(Td,e)}catch{}n=!0}return n}finally{gt=r,$n.transition=t}}return!1}function uy(e,t,r){t=ll(r,t),t=Q2(e,t,1),e=Za(e,t,1),t=Jr(),e!==null&&(ku(e,1,t),gn(e,t))}function Bt(e,t,r){if(e.tag===3)uy(e,e,r);else for(;t!==null;){if(t.tag===3){uy(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ei===null||!ei.has(n))){e=ll(r,e),e=J2(t,e,1),t=Za(t,e,1),e=Jr(),t!==null&&(ku(t,1,e),gn(t,e));break}}t=t.return}}function bb(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Jr(),e.pingedLanes|=e.suspendedLanes&r,gr===e&&(kr&r)===r&&(or===4||or===3&&(kr&130023424)===kr&&500>qt()-Vg?Li(e,0):Ug|=r),gn(e,t)}function vT(e,t){t===0&&(e.mode&1?(t=vf,vf<<=1,!(vf&130023424)&&(vf=4194304)):t=1);var r=Jr();e=ma(e,t),e!==null&&(ku(e,t,r),gn(e,r))}function Rb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vT(e,r)}function Pb(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(we(314))}n!==null&&n.delete(t),vT(e,r)}var yT;yT=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||mn.current)hn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return hn=!1,yb(e,t,r);hn=!!(e.flags&131072)}else hn=!1,Ft&&t.flags&1048576&&T2(t,Ih,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;eh(e,t),e=t.pendingProps;var s=sl(t,zr.current);Go(t,r),s=Dg(null,t,n,e,s,r);var a=Fg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(n)?(a=!0,Sh(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ng(t),s.updater=bd,t.stateNode=s,s._reactInternals=t,Qm(t,n,e,r),t=ep(null,t,n,!0,a,r)):(t.tag=0,Ft&&a&&wg(t),qr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(eh(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Fb(n),e=rs(n,e),s){case 0:t=Zm(null,t,n,e,r);break e;case 1:t=ey(null,t,n,e,r);break e;case 11:t=J1(null,t,n,e,r);break e;case 14:t=Z1(null,t,n,rs(n.type,e),r);break e}throw Error(we(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rs(n,s),Zm(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rs(n,s),ey(e,t,n,s,r);case 3:e:{if(rT(t),e===null)throw Error(we(387));n=t.pendingProps,a=t.memoizedState,s=a.element,C2(e,t),bh(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ll(Error(we(423)),t),t=ty(e,t,n,r,s);break e}else if(n!==s){s=ll(Error(we(424)),t),t=ty(e,t,n,r,s);break e}else for(An=Ja(t.stateNode.containerInfo.firstChild),Nn=t,Ft=!0,as=null,r=I2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(al(),n===s){t=pa(e,t,r);break e}qr(e,t,n,r)}t=t.child}return t;case 5:return b2(t),e===null&&qm(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,$m(n,s)?i=null:a!==null&&$m(n,a)&&(t.flags|=32),tT(e,t),qr(e,t,i,r),t.child;case 6:return e===null&&qm(t),null;case 13:return nT(e,t,r);case 4:return Cg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=il(t,null,n,r):qr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rs(n,s),J1(e,t,n,s,r);case 7:return qr(e,t,t.pendingProps,r),t.child;case 8:return qr(e,t,t.pendingProps.children,r),t.child;case 12:return qr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Tt(Nh,n._currentValue),n._currentValue=i,a!==null)if(gs(a.value,i)){if(a.children===s.children&&!mn.current){t=pa(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=oa(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Ym(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(we(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Ym(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}qr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Go(t,r),s=Gn(s),n=n(s),t.flags|=1,qr(e,t,n,r),t.child;case 14:return n=t.type,s=rs(n,t.pendingProps),s=rs(n.type,s),Z1(e,t,n,s,r);case 15:return Z2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rs(n,s),eh(e,t),t.tag=1,pn(n)?(e=!0,Sh(t)):e=!1,Go(t,r),X2(t,n,s),Qm(t,n,s,r),ep(null,t,n,!0,e,r);case 19:return sT(e,t,r);case 22:return eT(e,t,r)}throw Error(we(156,t.tag))};function _T(e,t){return KE(e,t)}function Db(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,t,r,n){return new Db(e,t,r,n)}function zg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fb(e){if(typeof e=="function")return zg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cg)return 11;if(e===ug)return 14}return 2}function ri(e,t){var r=e.alternate;return r===null?(r=Wn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nh(e,t,r,n,s,a){var i=2;if(n=e,typeof e=="function")zg(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case bo:return ji(r.children,s,a,t);case lg:i=8,s|=8;break;case wm:return e=Wn(12,r,t,s|2),e.elementType=wm,e.lanes=a,e;case Em:return e=Wn(13,r,t,s),e.elementType=Em,e.lanes=a,e;case Tm:return e=Wn(19,r,t,s),e.elementType=Tm,e.lanes=a,e;case bE:return Dd(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case NE:i=10;break e;case CE:i=9;break e;case cg:i=11;break e;case ug:i=14;break e;case Oa:i=16,n=null;break e}throw Error(we(130,e==null?e:typeof e,""))}return t=Wn(i,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function ji(e,t,r,n){return e=Wn(7,e,n,t),e.lanes=r,e}function Dd(e,t,r,n){return e=Wn(22,e,n,t),e.elementType=bE,e.lanes=r,e.stateNode={isHidden:!1},e}function H0(e,t,r){return e=Wn(6,e,null,t),e.lanes=r,e}function G0(e,t,r){return t=Wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ob(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A0(0),this.expirationTimes=A0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A0(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hg(e,t,r,n,s,a,i,o,l){return e=new Ob(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Wn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ng(a),e}function Mb(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function wT(e){if(!e)return ci;e=e._reactInternals;e:{if(so(e)!==e||e.tag!==1)throw Error(we(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(we(171))}if(e.tag===1){var r=e.type;if(pn(r))return w2(e,r,t)}return t}function ET(e,t,r,n,s,a,i,o,l){return e=Hg(r,n,!0,e,s,a,i,o,l),e.context=wT(null),r=e.current,n=Jr(),s=ti(r),a=oa(n,s),a.callback=t??null,Za(r,a,s),e.current.lanes=s,ku(e,s,n),gn(e,n),e}function Fd(e,t,r,n){var s=t.current,a=Jr(),i=ti(s);return r=wT(r),t.context===null?t.context=r:t.pendingContext=r,t=oa(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Za(s,t,i),e!==null&&(ds(e,s,i,a),Qf(e,s,i)),i}function jh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Gg(e,t){fy(e,t),(e=e.alternate)&&fy(e,t)}function Lb(){return null}var TT=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kg(e){this._internalRoot=e}Od.prototype.render=Kg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));Fd(e,t,null,null)};Od.prototype.unmount=Kg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qi(function(){Fd(null,e,null,null)}),t[da]=null}};function Od(e){this._internalRoot=e}Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=e2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<La.length&&t!==0&&t<La[r].priority;r++);La.splice(r,0,e),r===0&&r2(e)}};function qg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Md(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hy(){}function jb(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var c=jh(i);a.call(c)}}var i=ET(t,n,e,0,null,!1,!1,"",hy);return e._reactRootContainer=i,e[da]=i.current,Hc(e.nodeType===8?e.parentNode:e),qi(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=jh(l);o.call(c)}}var l=Hg(e,0,!1,null,null,!1,!1,"",hy);return e._reactRootContainer=l,e[da]=l.current,Hc(e.nodeType===8?e.parentNode:e),qi(function(){Fd(t,l,r,n)}),l}function Ld(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var o=s;s=function(){var l=jh(i);o.call(l)}}Fd(t,i,e,s)}else i=jb(r,t,e,s,n);return jh(i)}JE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=rc(t.pendingLanes);r!==0&&(dg(t,r|1),gn(t,qt()),!(ot&6)&&(cl=qt()+500,vi()))}break;case 13:qi(function(){var n=ma(e,1);if(n!==null){var s=Jr();ds(n,e,1,s)}}),Gg(e,1)}};mg=function(e){if(e.tag===13){var t=ma(e,134217728);if(t!==null){var r=Jr();ds(t,e,134217728,r)}Gg(e,134217728)}};ZE=function(e){if(e.tag===13){var t=ti(e),r=ma(e,t);if(r!==null){var n=Jr();ds(r,e,t,n)}Gg(e,t)}};e2=function(){return gt};t2=function(e,t){var r=gt;try{return gt=e,t()}finally{gt=r}};Dm=function(e,t,r){switch(t){case"input":if(Am(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Id(n);if(!s)throw Error(we(90));PE(n),Am(n,s)}}}break;case"textarea":FE(e,r);break;case"select":t=r.value,t!=null&&Wo(e,!!r.multiple,t,!1)}};BE=Bg;WE=qi;var Ub={usingClientEntryPoint:!1,Events:[Au,Fo,Id,UE,VE,Bg]},Yl={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vb={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=HE(e),e===null?null:e.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||Lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{Td=Cf.inject(Vb),bs=Cf}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ub;Pn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qg(t))throw Error(we(200));return Mb(e,t,null,r)};Pn.createRoot=function(e,t){if(!qg(e))throw Error(we(299));var r=!1,n="",s=TT;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Hg(e,1,!1,null,null,r,!1,n,s),e[da]=t.current,Hc(e.nodeType===8?e.parentNode:e),new Kg(t)};Pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=HE(t),e=e===null?null:e.stateNode,e};Pn.flushSync=function(e){return qi(e)};Pn.hydrate=function(e,t,r){if(!Md(t))throw Error(we(200));return Ld(null,e,t,!0,r)};Pn.hydrateRoot=function(e,t,r){if(!qg(e))throw Error(we(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=TT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=ET(t,null,e,1,r??null,s,!1,a,i),e[da]=t.current,Hc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Od(t)};Pn.render=function(e,t,r){if(!Md(t))throw Error(we(200));return Ld(null,e,t,!1,r)};Pn.unmountComponentAtNode=function(e){if(!Md(e))throw Error(we(40));return e._reactRootContainer?(qi(function(){Ld(null,null,e,!1,function(){e._reactRootContainer=null,e[da]=null})}),!0):!1};Pn.unstable_batchedUpdates=Bg;Pn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Md(r))throw Error(we(200));if(e==null||e._reactInternals===void 0)throw Error(we(38));return Ld(e,t,r,!1,n)};Pn.version="18.3.1-next-f1338f8080-20240426";function kT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kT)}catch(e){console.error(e)}}kT(),kE.exports=Pn;var Yg=kE.exports;const Bb=hE(Yg),Wb=fE({__proto__:null,default:Bb},[Yg]);var dy=Yg;ym.createRoot=dy.createRoot,ym.hydrateRoot=dy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pt.apply(this,arguments)}var tr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tr||(tr={}));const my="popstate";function $b(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return eu("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Yi(s)}return Hb(t,r,null,e)}function qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ul(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zb(){return Math.random().toString(36).substr(2,8)}function py(e,t){return{usr:e.state,key:e.key,idx:t}}function eu(e,t,r,n){return r===void 0&&(r=null),Pt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yi(t):t,{state:r,key:t&&t.key||n||zb()})}function Yi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Hb(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=tr.Pop,l=null,c=f();c==null&&(c=0,i.replaceState(Pt({},i.state,{idx:c}),""));function f(){return(i.state||{idx:null}).idx}function d(){o=tr.Pop;let w=f(),k=w==null?null:w-c;c=w,l&&l({action:o,location:g.location,delta:k})}function m(w,k){o=tr.Push;let E=eu(g.location,w,k);c=f()+1;let y=py(E,c),I=g.createHref(E);try{i.pushState(y,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(I)}a&&l&&l({action:o,location:g.location,delta:1})}function p(w,k){o=tr.Replace;let E=eu(g.location,w,k);c=f();let y=py(E,c),I=g.createHref(E);i.replaceState(y,"",I),a&&l&&l({action:o,location:g.location,delta:0})}function x(w){let k=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof w=="string"?w:Yi(w);return E=E.replace(/ $/,"%20"),qe(k,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,k)}let g={get action(){return o},get location(){return e(s,i)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(my,d),l=w,()=>{s.removeEventListener(my,d),l=null}},createHref(w){return t(s,w)},createURL:x,encodeLocation(w){let k=x(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:p,go(w){return i.go(w)}};return g}var pt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pt||(pt={}));const Gb=new Set(["lazy","caseSensitive","path","id","index","children"]);function Kb(e){return e.index===!0}function Uh(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((s,a)=>{let i=[...r,String(a)],o=typeof s.id=="string"?s.id:i.join("-");if(qe(s.index!==!0||!s.children,"Cannot specify children on an index route"),qe(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),Kb(s)){let l=Pt({},s,t(s),{id:o});return n[o]=l,l}else{let l=Pt({},s,t(s),{id:o,children:void 0});return n[o]=l,s.children&&(l.children=Uh(s.children,t,i,n)),l}})}function Ii(e,t,r){return r===void 0&&(r="/"),sh(e,t,r,!1)}function sh(e,t,r,n){let s=typeof t=="string"?yi(t):t,a=ga(s.pathname||"/",r);if(a==null)return null;let i=ST(e);Yb(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let c=iR(a);o=sR(i[l],c,n)}return o}function qb(e,t){let{route:r,pathname:n,params:s}=e;return{id:r.id,pathname:n,params:s,data:t[r.id],handle:r.handle}}function ST(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=la([n,l.relativePath]),f=r.concat(l);a.children&&a.children.length>0&&(qe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ST(a.children,t,f,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:rR(c,a.index),routesMeta:f})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of AT(a.path))s(a,i,l)}),t}function AT(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=AT(n.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function Yb(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:nR(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Xb=/^:[\w-]+$/,Qb=3,Jb=2,Zb=1,eR=10,tR=-2,gy=e=>e==="*";function rR(e,t){let r=e.split("/"),n=r.length;return r.some(gy)&&(n+=tR),t&&(n+=Jb),r.filter(s=>!gy(s)).reduce((s,a)=>s+(Xb.test(a)?Qb:a===""?Zb:eR),n)}function nR(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function sR(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",d=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!d&&c&&r&&!n[n.length-1].route.index&&(d=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:la([a,d.pathname]),pathnameBase:cR(la([a,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(a=la([a,d.pathnameBase]))}return i}function Vh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=aR(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,f,d)=>{let{paramName:m,isOptional:p}=f;if(m==="*"){let g=o[d]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const x=o[d];return p&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function aR(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ul(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function iR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ul(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ga(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function oR(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?yi(e):e;return{pathname:r?r.startsWith("/")?r:lR(r,t):t,search:uR(n),hash:fR(s)}}function lR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function K0(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IT(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function jd(e,t){let r=IT(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ud(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=yi(e):(s=Pt({},e),qe(!s.pathname||!s.pathname.includes("?"),K0("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),K0("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),K0("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let d=t.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}o=d>=0?t[d]:"/"}let l=oR(s,o),c=i&&i!=="/"&&i.endsWith("/"),f=(a||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const la=e=>e.join("/").replace(/\/\/+/g,"/"),cR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Bh{constructor(t,r,n,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function tu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NT=["post","put","patch","delete"],hR=new Set(NT),dR=["get",...NT],mR=new Set(dR),pR=new Set([301,302,303,307,308]),gR=new Set([307,308]),q0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vR=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),CT="remix-router-transitions";function yR(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;qe(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let X=e.detectErrorBoundary;s=re=>({hasErrorBoundary:X(re)})}else s=vR;let a={},i=Uh(e.routes,s,void 0,a),o,l=e.basename||"/",c=e.dataStrategy||TR,f=e.patchRoutesOnNavigation,d=Pt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),m=null,p=new Set,x=null,g=null,w=null,k=e.hydrationData!=null,E=Ii(i,e.history.location,l),y=!1,I=null;if(E==null&&!f){let X=ln(404,{pathname:e.history.location.pathname}),{matches:re,route:le}=Iy(i);E=re,I={[le.id]:X}}E&&!e.hydrationData&&Ys(E,i,e.history.location.pathname).active&&(E=null);let O;if(E)if(E.some(X=>X.route.lazy))O=!1;else if(!E.some(X=>X.route.loader))O=!0;else if(d.v7_partialHydration){let X=e.hydrationData?e.hydrationData.loaderData:null,re=e.hydrationData?e.hydrationData.errors:null;if(re){let le=E.findIndex(xe=>re[xe.route.id]!==void 0);O=E.slice(0,le+1).every(xe=>!dp(xe.route,X,re))}else O=E.every(le=>!dp(le.route,X,re))}else O=e.hydrationData!=null;else if(O=!1,E=[],d.v7_partialHydration){let X=Ys(null,i,e.history.location.pathname);X.active&&X.matches&&(y=!0,E=X.matches)}let F,v={historyAction:e.history.action,location:e.history.location,matches:E,initialized:O,navigation:q0,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||I,fetchers:new Map,blockers:new Map},T=tr.Pop,S=!1,C,P=!1,b=new Map,R=null,ae=!1,ee=!1,fe=[],ue=new Set,q=new Map,G=0,Z=-1,ce=new Map,j=new Set,Y=new Map,K=new Map,B=new Set,Q=new Map,de=new Map,Ee;function _e(){if(m=e.history.listen(X=>{let{action:re,location:le,delta:xe}=X;if(Ee){Ee(),Ee=void 0;return}ul(de.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ie=Ia({currentLocation:v.location,nextLocation:le,historyAction:re});if(Ie&&xe!=null){let N=new Promise(W=>{Ee=W});e.history.go(xe*-1),ws(Ie,{state:"blocked",location:le,proceed(){ws(Ie,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),N.then(()=>e.history.go(xe))},reset(){let W=new Map(v.blockers);W.set(Ie,Xl),H({blockers:W})}});return}return Fe(re,le)}),r){LR(t,b);let X=()=>jR(t,b);t.addEventListener("pagehide",X),R=()=>t.removeEventListener("pagehide",X)}return v.initialized||Fe(tr.Pop,v.location,{initialHydration:!0}),F}function ge(){m&&m(),R&&R(),p.clear(),C&&C.abort(),v.fetchers.forEach((X,re)=>_t(re)),v.blockers.forEach((X,re)=>Gs(re))}function De(X){return p.add(X),()=>p.delete(X)}function H(X,re){re===void 0&&(re={}),v=Pt({},v,X);let le=[],xe=[];d.v7_fetcherPersist&&v.fetchers.forEach((Ie,N)=>{Ie.state==="idle"&&(B.has(N)?xe.push(N):le.push(N))}),B.forEach(Ie=>{!v.fetchers.has(Ie)&&!q.has(Ie)&&xe.push(Ie)}),[...p].forEach(Ie=>Ie(v,{deletedFetchers:xe,viewTransitionOpts:re.viewTransitionOpts,flushSync:re.flushSync===!0})),d.v7_fetcherPersist?(le.forEach(Ie=>v.fetchers.delete(Ie)),xe.forEach(Ie=>_t(Ie))):xe.forEach(Ie=>B.delete(Ie))}function tt(X,re,le){var xe,Ie;let{flushSync:N}=le===void 0?{}:le,W=v.actionData!=null&&v.navigation.formMethod!=null&&ss(v.navigation.formMethod)&&v.navigation.state==="loading"&&((xe=X.state)==null?void 0:xe._isRedirect)!==!0,D;re.actionData?Object.keys(re.actionData).length>0?D=re.actionData:D=null:W?D=v.actionData:D=null;let M=re.loaderData?Sy(v.loaderData,re.loaderData,re.matches||[],re.errors):v.loaderData,L=v.blockers;L.size>0&&(L=new Map(L),L.forEach((ie,se)=>L.set(se,Xl)));let V=S===!0||v.navigation.formMethod!=null&&ss(v.navigation.formMethod)&&((Ie=X.state)==null?void 0:Ie._isRedirect)!==!0;o&&(i=o,o=void 0),ae||T===tr.Pop||(T===tr.Push?e.history.push(X,X.state):T===tr.Replace&&e.history.replace(X,X.state));let J;if(T===tr.Pop){let ie=b.get(v.location.pathname);ie&&ie.has(X.pathname)?J={currentLocation:v.location,nextLocation:X}:b.has(X.pathname)&&(J={currentLocation:X,nextLocation:v.location})}else if(P){let ie=b.get(v.location.pathname);ie?ie.add(X.pathname):(ie=new Set([X.pathname]),b.set(v.location.pathname,ie)),J={currentLocation:v.location,nextLocation:X}}H(Pt({},re,{actionData:D,loaderData:M,historyAction:T,location:X,initialized:!0,navigation:q0,revalidation:"idle",restoreScrollPosition:qs(X,re.matches||v.matches),preventScrollReset:V,blockers:L}),{viewTransitionOpts:J,flushSync:N===!0}),T=tr.Pop,S=!1,P=!1,ae=!1,ee=!1,fe=[]}async function He(X,re){if(typeof X=="number"){e.history.go(X);return}let le=hp(v.location,v.matches,l,d.v7_prependBasename,X,d.v7_relativeSplatPath,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:xe,submission:Ie,error:N}=xy(d.v7_normalizeFormMethod,!1,le,re),W=v.location,D=eu(v.location,xe,re&&re.state);D=Pt({},D,e.history.encodeLocation(D));let M=re&&re.replace!=null?re.replace:void 0,L=tr.Push;M===!0?L=tr.Replace:M===!1||Ie!=null&&ss(Ie.formMethod)&&Ie.formAction===v.location.pathname+v.location.search&&(L=tr.Replace);let V=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,J=(re&&re.flushSync)===!0,ie=Ia({currentLocation:W,nextLocation:D,historyAction:L});if(ie){ws(ie,{state:"blocked",location:D,proceed(){ws(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:D}),He(X,re)},reset(){let se=new Map(v.blockers);se.set(ie,Xl),H({blockers:se})}});return}return await Fe(L,D,{submission:Ie,pendingError:N,preventScrollReset:V,replace:re&&re.replace,enableViewTransition:re&&re.viewTransition,flushSync:J})}function Je(){if(At(),H({revalidation:"loading"}),v.navigation.state!=="submitting"){if(v.navigation.state==="idle"){Fe(v.historyAction,v.location,{startUninterruptedRevalidation:!0});return}Fe(T||v.historyAction,v.navigation.location,{overrideNavigation:v.navigation,enableViewTransition:P===!0})}}async function Fe(X,re,le){C&&C.abort(),C=null,T=X,ae=(le&&le.startUninterruptedRevalidation)===!0,xo(v.location,v.matches),S=(le&&le.preventScrollReset)===!0,P=(le&&le.enableViewTransition)===!0;let xe=o||i,Ie=le&&le.overrideNavigation,N=le!=null&&le.initialHydration&&v.matches&&v.matches.length>0&&!y?v.matches:Ii(xe,re,l),W=(le&&le.flushSync)===!0;if(N&&v.initialized&&!ee&&CR(v.location,re)&&!(le&&le.submission&&ss(le.submission.formMethod))){tt(re,{matches:N},{flushSync:W});return}let D=Ys(N,xe,re.pathname);if(D.active&&D.matches&&(N=D.matches),!N){let{error:ne,notFoundMatches:te,route:me}=Qn(re.pathname);tt(re,{matches:te,loaderData:{},errors:{[me.id]:ne}},{flushSync:W});return}C=new AbortController;let M=To(e.history,re,C.signal,le&&le.submission),L;if(le&&le.pendingError)L=[Ni(N).route.id,{type:pt.error,error:le.pendingError}];else if(le&&le.submission&&ss(le.submission.formMethod)){let ne=await Se(M,re,le.submission,N,D.active,{replace:le.replace,flushSync:W});if(ne.shortCircuited)return;if(ne.pendingActionResult){let[te,me]=ne.pendingActionResult;if(Tn(me)&&tu(me.error)&&me.error.status===404){C=null,tt(re,{matches:ne.matches,loaderData:{},errors:{[te]:me.error}});return}}N=ne.matches||N,L=ne.pendingActionResult,Ie=Y0(re,le.submission),W=!1,D.active=!1,M=To(e.history,M.url,M.signal)}let{shortCircuited:V,matches:J,loaderData:ie,errors:se}=await vt(M,re,N,D.active,Ie,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,W,L);V||(C=null,tt(re,Pt({matches:J||N},Ay(L),{loaderData:ie,errors:se})))}async function Se(X,re,le,xe,Ie,N){N===void 0&&(N={}),At();let W=OR(re,le);if(H({navigation:W},{flushSync:N.flushSync===!0}),Ie){let L=await On(xe,re.pathname,X.signal);if(L.type==="aborted")return{shortCircuited:!0};if(L.type==="error"){let V=Ni(L.partialMatches).route.id;return{matches:L.partialMatches,pendingActionResult:[V,{type:pt.error,error:L.error}]}}else if(L.matches)xe=L.matches;else{let{notFoundMatches:V,error:J,route:ie}=Qn(re.pathname);return{matches:V,pendingActionResult:[ie.id,{type:pt.error,error:J}]}}}let D,M=sc(xe,re);if(!M.route.action&&!M.route.lazy)D={type:pt.error,error:ln(405,{method:X.method,pathname:re.pathname,routeId:M.route.id})};else if(D=(await hr("action",v,X,[M],xe,null))[M.route.id],X.signal.aborted)return{shortCircuited:!0};if(Di(D)){let L;return N&&N.replace!=null?L=N.replace:L=Ey(D.response.headers.get("Location"),new URL(X.url),l)===v.location.pathname+v.location.search,await St(X,D,!0,{submission:le,replace:L}),{shortCircuited:!0}}if(Ha(D))throw ln(400,{type:"defer-action"});if(Tn(D)){let L=Ni(xe,M.route.id);return(N&&N.replace)!==!0&&(T=tr.Push),{matches:xe,pendingActionResult:[L.route.id,D]}}return{matches:xe,pendingActionResult:[M.route.id,D]}}async function vt(X,re,le,xe,Ie,N,W,D,M,L,V){let J=Ie||Y0(re,N),ie=N||W||Cy(J),se=!ae&&(!d.v7_partialHydration||!M);if(xe){if(se){let ht=Yt(V);H(Pt({navigation:J},ht!==void 0?{actionData:ht}:{}),{flushSync:L})}let Ge=await On(le,re.pathname,X.signal);if(Ge.type==="aborted")return{shortCircuited:!0};if(Ge.type==="error"){let ht=Ni(Ge.partialMatches).route.id;return{matches:Ge.partialMatches,loaderData:{},errors:{[ht]:Ge.error}}}else if(Ge.matches)le=Ge.matches;else{let{error:ht,notFoundMatches:vr,route:Mn}=Qn(re.pathname);return{matches:vr,loaderData:{},errors:{[Mn.id]:ht}}}}let ne=o||i,[te,me]=yy(e.history,v,le,ie,re,d.v7_partialHydration&&M===!0,d.v7_skipActionErrorRevalidation,ee,fe,ue,B,Y,j,ne,l,V);if(Ks(Ge=>!(le&&le.some(ht=>ht.route.id===Ge))||te&&te.some(ht=>ht.route.id===Ge)),Z=++G,te.length===0&&me.length===0){let Ge=Hs();return tt(re,Pt({matches:le,loaderData:{},errors:V&&Tn(V[1])?{[V[0]]:V[1].error}:null},Ay(V),Ge?{fetchers:new Map(v.fetchers)}:{}),{flushSync:L}),{shortCircuited:!0}}if(se){let Ge={};if(!xe){Ge.navigation=J;let ht=Yt(V);ht!==void 0&&(Ge.actionData=ht)}me.length>0&&(Ge.fetchers=fr(me)),H(Ge,{flushSync:L})}me.forEach(Ge=>{ft(Ge.key),Ge.controller&&q.set(Ge.key,Ge.controller)});let Te=()=>me.forEach(Ge=>ft(Ge.key));C&&C.signal.addEventListener("abort",Te);let{loaderResults:Ne,fetcherResults:ve}=await yt(v,le,te,me,X);if(X.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Te),me.forEach(Ge=>q.delete(Ge.key));let ke=bf(Ne);if(ke)return await St(X,ke.result,!0,{replace:D}),{shortCircuited:!0};if(ke=bf(ve),ke)return j.add(ke.key),await St(X,ke.result,!0,{replace:D}),{shortCircuited:!0};let{loaderData:Oe,errors:it}=ky(v,le,Ne,V,me,ve,Q);Q.forEach((Ge,ht)=>{Ge.subscribe(vr=>{(vr||Ge.done)&&Q.delete(ht)})}),d.v7_partialHydration&&M&&v.errors&&(it=Pt({},v.errors,it));let Ye=Hs(),mt=go(Z),on=Ye||mt||me.length>0;return Pt({matches:le,loaderData:Oe,errors:it},on?{fetchers:new Map(v.fetchers)}:{})}function Yt(X){if(X&&!Tn(X[1]))return{[X[0]]:X[1].data};if(v.actionData)return Object.keys(v.actionData).length===0?null:v.actionData}function fr(X){return X.forEach(re=>{let le=v.fetchers.get(re.key),xe=Ql(void 0,le?le.data:void 0);v.fetchers.set(re.key,xe)}),new Map(v.fetchers)}function sn(X,re,le,xe){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ft(X);let Ie=(xe&&xe.flushSync)===!0,N=o||i,W=hp(v.location,v.matches,l,d.v7_prependBasename,le,d.v7_relativeSplatPath,re,xe==null?void 0:xe.relative),D=Ii(N,W,l),M=Ys(D,N,W);if(M.active&&M.matches&&(D=M.matches),!D){Ot(X,re,ln(404,{pathname:W}),{flushSync:Ie});return}let{path:L,submission:V,error:J}=xy(d.v7_normalizeFormMethod,!0,W,xe);if(J){Ot(X,re,J,{flushSync:Ie});return}let ie=sc(D,L),se=(xe&&xe.preventScrollReset)===!0;if(V&&ss(V.formMethod)){zs(X,re,L,ie,D,M.active,Ie,se,V);return}Y.set(X,{routeId:re,path:L}),an(X,re,L,ie,D,M.active,Ie,se,V)}async function zs(X,re,le,xe,Ie,N,W,D,M){At(),Y.delete(X);function L(rt){if(!rt.route.action&&!rt.route.lazy){let Ts=ln(405,{method:M.formMethod,pathname:le,routeId:re});return Ot(X,re,Ts,{flushSync:W}),!0}return!1}if(!N&&L(xe))return;let V=v.fetchers.get(X);dt(X,MR(M,V),{flushSync:W});let J=new AbortController,ie=To(e.history,le,J.signal,M);if(N){let rt=await On(Ie,new URL(ie.url).pathname,ie.signal,X);if(rt.type==="aborted")return;if(rt.type==="error"){Ot(X,re,rt.error,{flushSync:W});return}else if(rt.matches){if(Ie=rt.matches,xe=sc(Ie,le),L(xe))return}else{Ot(X,re,ln(404,{pathname:le}),{flushSync:W});return}}q.set(X,J);let se=G,te=(await hr("action",v,ie,[xe],Ie,X))[xe.route.id];if(ie.signal.aborted){q.get(X)===J&&q.delete(X);return}if(d.v7_fetcherPersist&&B.has(X)){if(Di(te)||Tn(te)){dt(X,Fa(void 0));return}}else{if(Di(te))if(q.delete(X),Z>se){dt(X,Fa(void 0));return}else return j.add(X),dt(X,Ql(M)),St(ie,te,!1,{fetcherSubmission:M,preventScrollReset:D});if(Tn(te)){Ot(X,re,te.error);return}}if(Ha(te))throw ln(400,{type:"defer-action"});let me=v.navigation.location||v.location,Te=To(e.history,me,J.signal),Ne=o||i,ve=v.navigation.state!=="idle"?Ii(Ne,v.navigation.location,l):v.matches;qe(ve,"Didn't find any matches after fetcher action");let ke=++G;ce.set(X,ke);let Oe=Ql(M,te.data);v.fetchers.set(X,Oe);let[it,Ye]=yy(e.history,v,ve,M,me,!1,d.v7_skipActionErrorRevalidation,ee,fe,ue,B,Y,j,Ne,l,[xe.route.id,te]);Ye.filter(rt=>rt.key!==X).forEach(rt=>{let Ts=rt.key,Fl=v.fetchers.get(Ts),ef=Ql(void 0,Fl?Fl.data:void 0);v.fetchers.set(Ts,ef),ft(Ts),rt.controller&&q.set(Ts,rt.controller)}),H({fetchers:new Map(v.fetchers)});let mt=()=>Ye.forEach(rt=>ft(rt.key));J.signal.addEventListener("abort",mt);let{loaderResults:on,fetcherResults:Ge}=await yt(v,ve,it,Ye,Te);if(J.signal.aborted)return;J.signal.removeEventListener("abort",mt),ce.delete(X),q.delete(X),Ye.forEach(rt=>q.delete(rt.key));let ht=bf(on);if(ht)return St(Te,ht.result,!1,{preventScrollReset:D});if(ht=bf(Ge),ht)return j.add(ht.key),St(Te,ht.result,!1,{preventScrollReset:D});let{loaderData:vr,errors:Mn}=ky(v,ve,on,void 0,Ye,Ge,Q);if(v.fetchers.has(X)){let rt=Fa(te.data);v.fetchers.set(X,rt)}go(ke),v.navigation.state==="loading"&&ke>Z?(qe(T,"Expected pending action"),C&&C.abort(),tt(v.navigation.location,{matches:ve,loaderData:vr,errors:Mn,fetchers:new Map(v.fetchers)})):(H({errors:Mn,loaderData:Sy(v.loaderData,vr,ve,Mn),fetchers:new Map(v.fetchers)}),ee=!1)}async function an(X,re,le,xe,Ie,N,W,D,M){let L=v.fetchers.get(X);dt(X,Ql(M,L?L.data:void 0),{flushSync:W});let V=new AbortController,J=To(e.history,le,V.signal);if(N){let te=await On(Ie,new URL(J.url).pathname,J.signal,X);if(te.type==="aborted")return;if(te.type==="error"){Ot(X,re,te.error,{flushSync:W});return}else if(te.matches)Ie=te.matches,xe=sc(Ie,le);else{Ot(X,re,ln(404,{pathname:le}),{flushSync:W});return}}q.set(X,V);let ie=G,ne=(await hr("loader",v,J,[xe],Ie,X))[xe.route.id];if(Ha(ne)&&(ne=await Qg(ne,J.signal,!0)||ne),q.get(X)===V&&q.delete(X),!J.signal.aborted){if(B.has(X)){dt(X,Fa(void 0));return}if(Di(ne))if(Z>ie){dt(X,Fa(void 0));return}else{j.add(X),await St(J,ne,!1,{preventScrollReset:D});return}if(Tn(ne)){Ot(X,re,ne.error);return}qe(!Ha(ne),"Unhandled fetcher deferred data"),dt(X,Fa(ne.data))}}async function St(X,re,le,xe){let{submission:Ie,fetcherSubmission:N,preventScrollReset:W,replace:D}=xe===void 0?{}:xe;re.response.headers.has("X-Remix-Revalidate")&&(ee=!0);let M=re.response.headers.get("Location");qe(M,"Expected a Location header on the redirect Response"),M=Ey(M,new URL(X.url),l);let L=eu(v.location,M,{_isRedirect:!0});if(r){let te=!1;if(re.response.headers.has("X-Remix-Reload-Document"))te=!0;else if(Xg.test(M)){const me=e.history.createURL(M);te=me.origin!==t.location.origin||ga(me.pathname,l)==null}if(te){D?t.location.replace(M):t.location.assign(M);return}}C=null;let V=D===!0||re.response.headers.has("X-Remix-Replace")?tr.Replace:tr.Push,{formMethod:J,formAction:ie,formEncType:se}=v.navigation;!Ie&&!N&&J&&ie&&se&&(Ie=Cy(v.navigation));let ne=Ie||N;if(gR.has(re.response.status)&&ne&&ss(ne.formMethod))await Fe(V,L,{submission:Pt({},ne,{formAction:M}),preventScrollReset:W||S,enableViewTransition:le?P:void 0});else{let te=Y0(L,Ie);await Fe(V,L,{overrideNavigation:te,fetcherSubmission:N,preventScrollReset:W||S,enableViewTransition:le?P:void 0})}}async function hr(X,re,le,xe,Ie,N){let W,D={};try{W=await kR(c,X,re,le,xe,Ie,N,a,s)}catch(M){return xe.forEach(L=>{D[L.route.id]={type:pt.error,error:M}}),D}for(let[M,L]of Object.entries(W))if(bR(L)){let V=L.result;D[M]={type:pt.redirect,response:IR(V,le,M,Ie,l,d.v7_relativeSplatPath)}}else D[M]=await AR(L);return D}async function yt(X,re,le,xe,Ie){let N=X.matches,W=hr("loader",X,Ie,le,re,null),D=Promise.all(xe.map(async V=>{if(V.matches&&V.match&&V.controller){let ie=(await hr("loader",X,To(e.history,V.path,V.controller.signal),[V.match],V.matches,V.key))[V.match.route.id];return{[V.key]:ie}}else return Promise.resolve({[V.key]:{type:pt.error,error:ln(404,{pathname:V.path})}})})),M=await W,L=(await D).reduce((V,J)=>Object.assign(V,J),{});return await Promise.all([DR(re,M,Ie.signal,N,X.loaderData),FR(re,L,xe)]),{loaderResults:M,fetcherResults:L}}function At(){ee=!0,fe.push(...Ks()),Y.forEach((X,re)=>{q.has(re)&&ue.add(re),ft(re)})}function dt(X,re,le){le===void 0&&(le={}),v.fetchers.set(X,re),H({fetchers:new Map(v.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Ot(X,re,le,xe){xe===void 0&&(xe={});let Ie=Ni(v.matches,re);_t(X),H({errors:{[Ie.route.id]:le},fetchers:new Map(v.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function Ve(X){return K.set(X,(K.get(X)||0)+1),B.has(X)&&B.delete(X),v.fetchers.get(X)||xR}function _t(X){let re=v.fetchers.get(X);q.has(X)&&!(re&&re.state==="loading"&&ce.has(X))&&ft(X),Y.delete(X),ce.delete(X),j.delete(X),d.v7_fetcherPersist&&B.delete(X),ue.delete(X),v.fetchers.delete(X)}function Xt(X){let re=(K.get(X)||0)-1;re<=0?(K.delete(X),B.add(X),d.v7_fetcherPersist||_t(X)):K.set(X,re),H({fetchers:new Map(v.fetchers)})}function ft(X){let re=q.get(X);re&&(re.abort(),q.delete(X))}function _n(X){for(let re of X){let le=Ve(re),xe=Fa(le.data);v.fetchers.set(re,xe)}}function Hs(){let X=[],re=!1;for(let le of j){let xe=v.fetchers.get(le);qe(xe,"Expected fetcher: "+le),xe.state==="loading"&&(j.delete(le),X.push(le),re=!0)}return _n(X),re}function go(X){let re=[];for(let[le,xe]of ce)if(xe<X){let Ie=v.fetchers.get(le);qe(Ie,"Expected fetcher: "+le),Ie.state==="loading"&&(ft(le),ce.delete(le),re.push(le))}return _n(re),re.length>0}function Dl(X,re){let le=v.blockers.get(X)||Xl;return de.get(X)!==re&&de.set(X,re),le}function Gs(X){v.blockers.delete(X),de.delete(X)}function ws(X,re){let le=v.blockers.get(X)||Xl;qe(le.state==="unblocked"&&re.state==="blocked"||le.state==="blocked"&&re.state==="blocked"||le.state==="blocked"&&re.state==="proceeding"||le.state==="blocked"&&re.state==="unblocked"||le.state==="proceeding"&&re.state==="unblocked","Invalid blocker state transition: "+le.state+" -> "+re.state);let xe=new Map(v.blockers);xe.set(X,re),H({blockers:xe})}function Ia(X){let{currentLocation:re,nextLocation:le,historyAction:xe}=X;if(de.size===0)return;de.size>1&&ul(!1,"A router only supports one blocker at a time");let Ie=Array.from(de.entries()),[N,W]=Ie[Ie.length-1],D=v.blockers.get(N);if(!(D&&D.state==="proceeding")&&W({currentLocation:re,nextLocation:le,historyAction:xe}))return N}function Qn(X){let re=ln(404,{pathname:X}),le=o||i,{matches:xe,route:Ie}=Iy(le);return Ks(),{notFoundMatches:xe,route:Ie,error:re}}function Ks(X){let re=[];return Q.forEach((le,xe)=>{(!X||X(xe))&&(le.cancel(),re.push(xe),Q.delete(xe))}),re}function Es(X,re,le){if(x=X,w=re,g=le||null,!k&&v.navigation===q0){k=!0;let xe=qs(v.location,v.matches);xe!=null&&H({restoreScrollPosition:xe})}return()=>{x=null,w=null,g=null}}function Fn(X,re){return g&&g(X,re.map(xe=>qb(xe,v.loaderData)))||X.key}function xo(X,re){if(x&&w){let le=Fn(X,re);x[le]=w()}}function qs(X,re){if(x){let le=Fn(X,re),xe=x[le];if(typeof xe=="number")return xe}return null}function Ys(X,re,le){if(f)if(X){if(Object.keys(X[0].params).length>0)return{active:!0,matches:sh(re,le,l,!0)}}else return{active:!0,matches:sh(re,le,l,!0)||[]};return{active:!1,matches:null}}async function On(X,re,le,xe){if(!f)return{type:"success",matches:X};let Ie=X;for(;;){let N=o==null,W=o||i,D=a;try{await f({signal:le,path:re,matches:Ie,fetcherKey:xe,patch:(V,J)=>{le.aborted||wy(V,J,W,D,s)}})}catch(V){return{type:"error",error:V,partialMatches:Ie}}finally{N&&!le.aborted&&(i=[...i])}if(le.aborted)return{type:"aborted"};let M=Ii(W,re,l);if(M)return{type:"success",matches:M};let L=sh(W,re,l,!0);if(!L||Ie.length===L.length&&Ie.every((V,J)=>V.route.id===L[J].route.id))return{type:"success",matches:null};Ie=L}}function vo(X){a={},o=Uh(X,s,void 0,a)}function sr(X,re){let le=o==null;wy(X,re,o||i,a,s),le&&(i=[...i],H({}))}return F={get basename(){return l},get future(){return d},get state(){return v},get routes(){return i},get window(){return t},initialize:_e,subscribe:De,enableScrollRestoration:Es,navigate:He,fetch:sn,revalidate:Je,createHref:X=>e.history.createHref(X),encodeLocation:X=>e.history.encodeLocation(X),getFetcher:Ve,deleteFetcher:Xt,dispose:ge,getBlocker:Dl,deleteBlocker:Gs,patchRoutes:sr,_internalFetchControllers:q,_internalActiveDeferreds:Q,_internalSetRoutes:vo},F}function _R(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function hp(e,t,r,n,s,a,i,o){let l,c;if(i){l=[];for(let d of t)if(l.push(d),d.route.id===i){c=d;break}}else l=t,c=t[t.length-1];let f=Ud(s||".",jd(l,a),ga(e.pathname,r)||e.pathname,o==="path");if(s==null&&(f.search=e.search,f.hash=e.hash),(s==null||s===""||s===".")&&c){let d=Jg(f.search);if(c.route.index&&!d)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let m=new URLSearchParams(f.search),p=m.getAll("index");m.delete("index"),p.filter(g=>g).forEach(g=>m.append("index",g));let x=m.toString();f.search=x?"?"+x:""}}return n&&r!=="/"&&(f.pathname=f.pathname==="/"?r:la([r,f.pathname])),Yi(f)}function xy(e,t,r,n){if(!n||!_R(n))return{path:r};if(n.formMethod&&!PR(n.formMethod))return{path:r,error:ln(405,{method:n.formMethod})};let s=()=>({path:r,error:ln(400,{type:"invalid-body"})}),a=n.formMethod||"get",i=e?a.toUpperCase():a.toLowerCase(),o=PT(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ss(i))return s();let m=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((p,x)=>{let[g,w]=x;return""+p+g+"="+w+`
`},""):String(n.body);return{path:r,submission:{formMethod:i,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:m}}}else if(n.formEncType==="application/json"){if(!ss(i))return s();try{let m=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:i,formAction:o,formEncType:n.formEncType,formData:void 0,json:m,text:void 0}}}catch{return s()}}}qe(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=mp(n.formData),c=n.formData;else if(n.body instanceof FormData)l=mp(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=Ty(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=Ty(l)}catch{return s()}let f={formMethod:i,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ss(f.formMethod))return{path:r,submission:f};let d=yi(r);return t&&d.search&&Jg(d.search)&&l.append("index",""),d.search="?"+l,{path:Yi(d),submission:f}}function vy(e,t,r){r===void 0&&(r=!1);let n=e.findIndex(s=>s.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function yy(e,t,r,n,s,a,i,o,l,c,f,d,m,p,x,g){let w=g?Tn(g[1])?g[1].error:g[1].data:void 0,k=e.createURL(t.location),E=e.createURL(s),y=r;a&&t.errors?y=vy(r,Object.keys(t.errors)[0],!0):g&&Tn(g[1])&&(y=vy(r,g[0]));let I=g?g[1].statusCode:void 0,O=i&&I&&I>=400,F=y.filter((T,S)=>{let{route:C}=T;if(C.lazy)return!0;if(C.loader==null)return!1;if(a)return dp(C,t.loaderData,t.errors);if(wR(t.loaderData,t.matches[S],T)||l.some(R=>R===T.route.id))return!0;let P=t.matches[S],b=T;return _y(T,Pt({currentUrl:k,currentParams:P.params,nextUrl:E,nextParams:b.params},n,{actionResult:w,actionStatus:I,defaultShouldRevalidate:O?!1:o||k.pathname+k.search===E.pathname+E.search||k.search!==E.search||bT(P,b)}))}),v=[];return d.forEach((T,S)=>{if(a||!r.some(ae=>ae.route.id===T.routeId)||f.has(S))return;let C=Ii(p,T.path,x);if(!C){v.push({key:S,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let P=t.fetchers.get(S),b=sc(C,T.path),R=!1;m.has(S)?R=!1:c.has(S)?(c.delete(S),R=!0):P&&P.state!=="idle"&&P.data===void 0?R=o:R=_y(b,Pt({currentUrl:k,currentParams:t.matches[t.matches.length-1].params,nextUrl:E,nextParams:r[r.length-1].params},n,{actionResult:w,actionStatus:I,defaultShouldRevalidate:O?!1:o})),R&&v.push({key:S,routeId:T.routeId,path:T.path,matches:C,match:b,controller:new AbortController})}),[F,v]}function dp(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,s=r!=null&&r[e.id]!==void 0;return!n&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!s}function wR(e,t,r){let n=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return n||s}function bT(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function _y(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function wy(e,t,r,n,s){var a;let i;if(e){let c=n[e];qe(c,"No route found to patch children into: routeId = "+e),c.children||(c.children=[]),i=c.children}else i=r;let o=t.filter(c=>!i.some(f=>RT(c,f))),l=Uh(o,s,[e||"_","patch",String(((a=i)==null?void 0:a.length)||"0")],n);i.push(...l)}function RT(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var s;return(s=t.children)==null?void 0:s.some(a=>RT(r,a))}):!1}async function ER(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let s=r[e.id];qe(s,"No route found in manifest");let a={};for(let i in n){let l=s[i]!==void 0&&i!=="hasErrorBoundary";ul(!l,'Route "'+s.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!l&&!Gb.has(i)&&(a[i]=n[i])}Object.assign(s,a),Object.assign(s,Pt({},t(s),{lazy:void 0}))}async function TR(e){let{matches:t}=e,r=t.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,a,i)=>Object.assign(s,{[r[i].route.id]:a}),{})}async function kR(e,t,r,n,s,a,i,o,l,c){let f=a.map(p=>p.route.lazy?ER(p.route,l,o):void 0),d=a.map((p,x)=>{let g=f[x],w=s.some(E=>E.route.id===p.route.id);return Pt({},p,{shouldLoad:w,resolve:async E=>(E&&n.method==="GET"&&(p.route.lazy||p.route.loader)&&(w=!0),w?SR(t,n,p,g,E,c):Promise.resolve({type:pt.data,result:void 0}))})}),m=await e({matches:d,request:n,params:a[0].params,fetcherKey:i,context:c});try{await Promise.all(f)}catch{}return m}async function SR(e,t,r,n,s,a){let i,o,l=c=>{let f,d=new Promise((x,g)=>f=g);o=()=>f(),t.signal.addEventListener("abort",o);let m=x=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):c({request:t,params:r.params,context:a},...x!==void 0?[x]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(g=>m(g)):m())}}catch(x){return{type:"error",result:x}}})();return Promise.race([p,d])};try{let c=r.route[e];if(n)if(c){let f,[d]=await Promise.all([l(c).catch(m=>{f=m}),n]);if(f!==void 0)throw f;i=d}else if(await n,c=r.route[e],c)i=await l(c);else if(e==="action"){let f=new URL(t.url),d=f.pathname+f.search;throw ln(405,{method:t.method,pathname:d,routeId:r.route.id})}else return{type:pt.data,result:void 0};else if(c)i=await l(c);else{let f=new URL(t.url),d=f.pathname+f.search;throw ln(404,{pathname:d})}qe(i.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:pt.error,result:c}}finally{o&&t.signal.removeEventListener("abort",o)}return i}async function AR(e){let{result:t,type:r}=e;if(DT(t)){let d;try{let m=t.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?t.body==null?d=null:d=await t.json():d=await t.text()}catch(m){return{type:pt.error,error:m}}return r===pt.error?{type:pt.error,error:new Bh(t.status,t.statusText,d),statusCode:t.status,headers:t.headers}:{type:pt.data,data:d,statusCode:t.status,headers:t.headers}}if(r===pt.error){if(Ny(t)){var n,s;if(t.data instanceof Error){var a,i;return{type:pt.error,error:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}}return{type:pt.error,error:new Bh(((n=t.init)==null?void 0:n.status)||500,void 0,t.data),statusCode:tu(t)?t.status:void 0,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}}return{type:pt.error,error:t,statusCode:tu(t)?t.status:void 0}}if(RR(t)){var o,l;return{type:pt.deferred,deferredData:t,statusCode:(o=t.init)==null?void 0:o.status,headers:((l=t.init)==null?void 0:l.headers)&&new Headers(t.init.headers)}}if(Ny(t)){var c,f;return{type:pt.data,data:t.data,statusCode:(c=t.init)==null?void 0:c.status,headers:(f=t.init)!=null&&f.headers?new Headers(t.init.headers):void 0}}return{type:pt.data,data:t}}function IR(e,t,r,n,s,a){let i=e.headers.get("Location");if(qe(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!Xg.test(i)){let o=n.slice(0,n.findIndex(l=>l.route.id===r)+1);i=hp(new URL(t.url),o,s,!0,i,a),e.headers.set("Location",i)}return e}function Ey(e,t,r){if(Xg.test(e)){let n=e,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=ga(s.pathname,r)!=null;if(s.origin===t.origin&&a)return s.pathname+s.search+s.hash}return e}function To(e,t,r,n){let s=e.createURL(PT(t)).toString(),a={signal:r};if(n&&ss(n.formMethod)){let{formMethod:i,formEncType:o}=n;a.method=i.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(n.json)):o==="text/plain"?a.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?a.body=mp(n.formData):a.body=n.formData}return new Request(s,a)}function mp(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Ty(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function NR(e,t,r,n,s){let a={},i=null,o,l=!1,c={},f=r&&Tn(r[1])?r[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let m=d.route.id,p=t[m];if(qe(!Di(p),"Cannot handle redirect results in processLoaderData"),Tn(p)){let x=p.error;f!==void 0&&(x=f,f=void 0),i=i||{};{let g=Ni(e,m);i[g.route.id]==null&&(i[g.route.id]=x)}a[m]=void 0,l||(l=!0,o=tu(p.error)?p.error.status:500),p.headers&&(c[m]=p.headers)}else Ha(p)?(n.set(m,p.deferredData),a[m]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(o=p.statusCode),p.headers&&(c[m]=p.headers)):(a[m]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(o=p.statusCode),p.headers&&(c[m]=p.headers))}),f!==void 0&&r&&(i={[r[0]]:f},a[r[0]]=void 0),{loaderData:a,errors:i,statusCode:o||200,loaderHeaders:c}}function ky(e,t,r,n,s,a,i){let{loaderData:o,errors:l}=NR(t,r,n,i);return s.forEach(c=>{let{key:f,match:d,controller:m}=c,p=a[f];if(qe(p,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(Tn(p)){let x=Ni(e.matches,d==null?void 0:d.route.id);l&&l[x.route.id]||(l=Pt({},l,{[x.route.id]:p.error})),e.fetchers.delete(f)}else if(Di(p))qe(!1,"Unhandled fetcher revalidation redirect");else if(Ha(p))qe(!1,"Unhandled fetcher deferred data");else{let x=Fa(p.data);e.fetchers.set(f,x)}}),{loaderData:o,errors:l}}function Sy(e,t,r,n){let s=Pt({},t);for(let a of r){let i=a.route.id;if(t.hasOwnProperty(i)?t[i]!==void 0&&(s[i]=t[i]):e[i]!==void 0&&a.route.loader&&(s[i]=e[i]),n&&n.hasOwnProperty(i))break}return s}function Ay(e){return e?Tn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ni(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Iy(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ln(e,t){let{pathname:r,routeId:n,method:s,type:a,message:i}=t===void 0?{}:t,o="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(o="Bad Request",s&&r&&n?l="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):e===403?(o="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):e===404?(o="Not Found",l='No route matches URL "'+r+'"'):e===405&&(o="Method Not Allowed",s&&r&&n?l="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new Bh(e||500,o,new Error(l),!0)}function bf(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,s]=t[r];if(Di(s))return{key:n,result:s}}}function PT(e){let t=typeof e=="string"?yi(e):e;return Yi(Pt({},t,{hash:""}))}function CR(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function bR(e){return DT(e.result)&&pR.has(e.result.status)}function Ha(e){return e.type===pt.deferred}function Tn(e){return e.type===pt.error}function Di(e){return(e&&e.type)===pt.redirect}function Ny(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function RR(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function DT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function PR(e){return mR.has(e.toLowerCase())}function ss(e){return hR.has(e.toLowerCase())}async function DR(e,t,r,n,s){let a=Object.entries(t);for(let i=0;i<a.length;i++){let[o,l]=a[i],c=e.find(m=>(m==null?void 0:m.route.id)===o);if(!c)continue;let f=n.find(m=>m.route.id===c.route.id),d=f!=null&&!bT(f,c)&&(s&&s[c.route.id])!==void 0;Ha(l)&&d&&await Qg(l,r,!1).then(m=>{m&&(t[o]=m)})}}async function FR(e,t,r){for(let n=0;n<r.length;n++){let{key:s,routeId:a,controller:i}=r[n],o=t[s];e.find(c=>(c==null?void 0:c.route.id)===a)&&Ha(o)&&(qe(i,"Expected an AbortController for revalidating fetcher deferred result"),await Qg(o,i.signal,!0).then(c=>{c&&(t[s]=c)}))}}async function Qg(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:pt.data,data:e.deferredData.unwrappedData}}catch(s){return{type:pt.error,error:s}}return{type:pt.data,data:e.deferredData.data}}}function Jg(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function sc(e,t){let r=typeof t=="string"?yi(t).search:t.search;if(e[e.length-1].route.index&&Jg(r||""))return e[e.length-1];let n=IT(e);return n[n.length-1]}function Cy(e){let{formMethod:t,formAction:r,formEncType:n,text:s,formData:a,json:i}=e;if(!(!t||!r||!n)){if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:i,text:void 0}}}function Y0(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function OR(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ql(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function MR(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Fa(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LR(e,t){try{let r=e.sessionStorage.getItem(CT);if(r){let n=JSON.parse(r);for(let[s,a]of Object.entries(n||{}))a&&Array.isArray(a)&&t.set(s,new Set(a||[]))}}catch{}}function jR(e,t){if(t.size>0){let r={};for(let[n,s]of t)r[n]=[...s];try{e.sessionStorage.setItem(CT,JSON.stringify(r))}catch(n){ul(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wh.apply(this,arguments)}const Nu=U.createContext(null),Zg=U.createContext(null),Sa=U.createContext(null),ex=U.createContext(null),Vs=U.createContext({outlet:null,matches:[],isDataRoute:!1}),FT=U.createContext(null);function UR(e,t){let{relative:r}=t===void 0?{}:t;Sl()||qe(!1);let{basename:n,navigator:s}=U.useContext(Sa),{hash:a,pathname:i,search:o}=Bd(e,{relative:r}),l=i;return n!=="/"&&(l=i==="/"?n:la([n,i])),s.createHref({pathname:l,search:o,hash:a})}function Sl(){return U.useContext(ex)!=null}function vs(){return Sl()||qe(!1),U.useContext(ex).location}function OT(e){U.useContext(Sa).static||U.useLayoutEffect(e)}function ys(){let{isDataRoute:e}=U.useContext(Vs);return e?ZR():VR()}function VR(){Sl()||qe(!1);let e=U.useContext(Nu),{basename:t,future:r,navigator:n}=U.useContext(Sa),{matches:s}=U.useContext(Vs),{pathname:a}=vs(),i=JSON.stringify(jd(s,r.v7_relativeSplatPath)),o=U.useRef(!1);return OT(()=>{o.current=!0}),U.useCallback(function(c,f){if(f===void 0&&(f={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=Ud(c,JSON.parse(i),a,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:la([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,i,a,e])}const BR=U.createContext(null);function WR(e){let t=U.useContext(Vs).outlet;return t&&U.createElement(BR.Provider,{value:e},t)}function Vd(){let{matches:e}=U.useContext(Vs),t=e[e.length-1];return t?t.params:{}}function Bd(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=U.useContext(Sa),{matches:s}=U.useContext(Vs),{pathname:a}=vs(),i=JSON.stringify(jd(s,n.v7_relativeSplatPath));return U.useMemo(()=>Ud(e,JSON.parse(i),a,r==="path"),[e,i,a,r])}function $R(e,t,r,n){Sl()||qe(!1);let{navigator:s}=U.useContext(Sa),{matches:a}=U.useContext(Vs),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c=vs(),f;f=c;let d=f.pathname||"/",m=d;if(l!=="/"){let g=l.replace(/^\//,"").split("/");m="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Ii(e,{pathname:m});return qR(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:la([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:la([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,r,n)}function zR(){let e=JR(),t=tu(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),r?U.createElement("pre",{style:s},r):null,null)}const HR=U.createElement(zR,null);class GR extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?U.createElement(Vs.Provider,{value:this.props.routeContext},U.createElement(FT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KR(e){let{routeContext:t,match:r,children:n}=e,s=U.useContext(Nu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(Vs.Provider,{value:t},n)}function qR(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let f=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);f>=0||qe(!1),i=i.slice(0,Math.min(i.length,f+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:m,errors:p}=r,x=d.route.loader&&m[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||x){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((f,d,m)=>{let p,x=!1,g=null,w=null;r&&(p=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||HR,l&&(c<0&&m===0?(e4("route-fallback"),x=!0,w=null):c===m&&(x=!0,w=d.route.hydrateFallbackElement||null)));let k=t.concat(i.slice(0,m+1)),E=()=>{let y;return p?y=g:x?y=w:d.route.Component?y=U.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,U.createElement(KR,{match:d,routeContext:{outlet:f,matches:k,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?U.createElement(GR,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:E(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):E()},null)}var MT=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(MT||{}),LT=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(LT||{});function YR(e){let t=U.useContext(Nu);return t||qe(!1),t}function XR(e){let t=U.useContext(Zg);return t||qe(!1),t}function QR(e){let t=U.useContext(Vs);return t||qe(!1),t}function jT(e){let t=QR(),r=t.matches[t.matches.length-1];return r.route.id||qe(!1),r.route.id}function JR(){var e;let t=U.useContext(FT),r=XR(LT.UseRouteError),n=jT();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ZR(){let{router:e}=YR(MT.UseNavigateStable),t=jT(),r=U.useRef(!1);return OT(()=>{r.current=!0}),U.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Wh({fromRouteId:t},a)))},[e,t])}const by={};function e4(e,t,r){by[e]||(by[e]=!0)}function t4(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function r4(e){let{to:t,replace:r,state:n,relative:s}=e;Sl()||qe(!1);let{future:a,static:i}=U.useContext(Sa),{matches:o}=U.useContext(Vs),{pathname:l}=vs(),c=ys(),f=Ud(t,jd(o,a.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(f);return U.useEffect(()=>c(JSON.parse(d),{replace:r,state:n,relative:s}),[c,d,s,r,n]),null}function UT(e){return WR(e.context)}function n4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=tr.Pop,navigator:a,static:i=!1,future:o}=e;Sl()&&qe(!1);let l=t.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:a,static:i,future:Wh({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);typeof n=="string"&&(n=yi(n));let{pathname:f="/",search:d="",hash:m="",state:p=null,key:x="default"}=n,g=U.useMemo(()=>{let w=ga(f,l);return w==null?null:{location:{pathname:w,search:d,hash:m,state:p,key:x},navigationType:s}},[l,f,d,m,p,x,s]);return g==null?null:U.createElement(Sa.Provider,{value:c},U.createElement(ex.Provider,{children:r,value:g}))}new Promise(()=>{});function s4(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:U.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:U.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:U.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fl.apply(this,arguments)}function VT(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function a4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function i4(e,t){return e.button===0&&(!t||t==="_self")&&!a4(e)}function pp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function o4(e,t){let r=pp(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}const l4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c4=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],u4="6";try{window.__reactRouterVersion=u4}catch{}function f4(e,t){return yR({basename:void 0,future:fl({},void 0,{v7_prependBasename:!0}),history:$b({window:void 0}),hydrationData:h4(),routes:e,mapRouteProperties:s4,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function h4(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=fl({},t,{errors:d4(t.errors)})),t}function d4(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")r[n]=new Bh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let i=new a(s.message);i.stack="",r[n]=i}catch{}}if(r[n]==null){let a=new Error(s.message);a.stack="",r[n]=a}}else r[n]=s;return r}const BT=U.createContext({isTransitioning:!1}),m4=U.createContext(new Map),p4="startTransition",Ry=bN[p4],g4="flushSync",Py=Wb[g4];function x4(e){Ry?Ry(e):e()}function Jl(e){Py?Py(e):e()}let v4=class{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function y4(e){let{fallbackElement:t,router:r,future:n}=e,[s,a]=U.useState(r.state),[i,o]=U.useState(),[l,c]=U.useState({isTransitioning:!1}),[f,d]=U.useState(),[m,p]=U.useState(),[x,g]=U.useState(),w=U.useRef(new Map),{v7_startTransition:k}=n||{},E=U.useCallback(T=>{k?x4(T):T()},[k]),y=U.useCallback((T,S)=>{let{deletedFetchers:C,flushSync:P,viewTransitionOpts:b}=S;T.fetchers.forEach((ae,ee)=>{ae.data!==void 0&&w.current.set(ee,ae.data)}),C.forEach(ae=>w.current.delete(ae));let R=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!b||R){P?Jl(()=>a(T)):E(()=>a(T));return}if(P){Jl(()=>{m&&(f&&f.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let ae=r.window.document.startViewTransition(()=>{Jl(()=>a(T))});ae.finished.finally(()=>{Jl(()=>{d(void 0),p(void 0),o(void 0),c({isTransitioning:!1})})}),Jl(()=>p(ae));return}m?(f&&f.resolve(),m.skipTransition(),g({state:T,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(o(T),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[r.window,m,f,w,E]);U.useLayoutEffect(()=>r.subscribe(y),[r,y]),U.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new v4)},[l]),U.useEffect(()=>{if(f&&i&&r.window){let T=i,S=f.promise,C=r.window.document.startViewTransition(async()=>{E(()=>a(T)),await S});C.finished.finally(()=>{d(void 0),p(void 0),o(void 0),c({isTransitioning:!1})}),p(C)}},[E,i,f,r.window]),U.useEffect(()=>{f&&i&&s.location.key===i.location.key&&f.resolve()},[f,m,s.location,i]),U.useEffect(()=>{!l.isTransitioning&&x&&(o(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),g(void 0))},[l.isTransitioning,x]),U.useEffect(()=>{},[]);let I=U.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:T=>r.navigate(T),push:(T,S,C)=>r.navigate(T,{state:S,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(T,S,C)=>r.navigate(T,{replace:!0,state:S,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[r]),O=r.basename||"/",F=U.useMemo(()=>({router:r,navigator:I,static:!1,basename:O}),[r,I,O]),v=U.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return U.useEffect(()=>t4(n,r.future),[n,r.future]),U.createElement(U.Fragment,null,U.createElement(Nu.Provider,{value:F},U.createElement(Zg.Provider,{value:s},U.createElement(m4.Provider,{value:w.current},U.createElement(BT.Provider,{value:l},U.createElement(n4,{basename:O,location:s.location,navigationType:s.historyAction,navigator:I,future:v},s.initialized||r.future.v7_partialHydration?U.createElement(_4,{routes:r.routes,future:r.future,state:s}):t))))),null)}const _4=U.memo(w4);function w4(e){let{routes:t,future:r,state:n}=e;return $R(t,void 0,n,r)}const E4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ke=U.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:o,target:l,to:c,preventScrollReset:f,viewTransition:d}=t,m=VT(t,l4),{basename:p}=U.useContext(Sa),x,g=!1;if(typeof c=="string"&&T4.test(c)&&(x=c,E4))try{let y=new URL(window.location.href),I=c.startsWith("//")?new URL(y.protocol+c):new URL(c),O=ga(I.pathname,p);I.origin===y.origin&&O!=null?c=O+I.search+I.hash:g=!0}catch{}let w=UR(c,{relative:s}),k=S4(c,{replace:i,state:o,target:l,preventScrollReset:f,relative:s,viewTransition:d});function E(y){n&&n(y),y.defaultPrevented||k(y)}return U.createElement("a",fl({},m,{href:x||w,onClick:g||a?n:E,ref:r,target:l}))}),Ra=U.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:i=!1,style:o,to:l,viewTransition:c,children:f}=t,d=VT(t,c4),m=Bd(l,{relative:d.relative}),p=vs(),x=U.useContext(Zg),{navigator:g,basename:w}=U.useContext(Sa),k=x!=null&&I4(m)&&c===!0,E=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,y=p.pathname,I=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(y=y.toLowerCase(),I=I?I.toLowerCase():null,E=E.toLowerCase()),I&&w&&(I=ga(I,w)||I);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let F=y===E||!i&&y.startsWith(E)&&y.charAt(O)==="/",v=I!=null&&(I===E||!i&&I.startsWith(E)&&I.charAt(E.length)==="/"),T={isActive:F,isPending:v,isTransitioning:k},S=F?n:void 0,C;typeof a=="function"?C=a(T):C=[a,F?"active":null,v?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(T):o;return U.createElement(Ke,fl({},d,{"aria-current":S,className:C,ref:r,style:P,to:l,viewTransition:c}),typeof f=="function"?f(T):f)});var gp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(gp||(gp={}));var Dy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dy||(Dy={}));function k4(e){let t=U.useContext(Nu);return t||qe(!1),t}function S4(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=t===void 0?{}:t,l=ys(),c=vs(),f=Bd(e,{relative:i});return U.useCallback(d=>{if(i4(d,r)){d.preventDefault();let m=n!==void 0?n:Yi(c)===Yi(f);l(e,{replace:m,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,f,n,s,r,e,a,i,o])}function A4(e){let t=U.useRef(pp(e)),r=U.useRef(!1),n=vs(),s=U.useMemo(()=>o4(n.search,r.current?null:t.current),[n.search]),a=ys(),i=U.useCallback((o,l)=>{const c=pp(typeof o=="function"?o(s):o);r.current=!0,a("?"+c,l)},[a,s]);return[s,i]}function I4(e,t){t===void 0&&(t={});let r=U.useContext(BT);r==null&&qe(!1);let{basename:n}=k4(gp.useViewTransitionState),s=Bd(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=ga(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ga(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Vh(s.pathname,i)!=null||Vh(s.pathname,a)!=null}var Fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},N4=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const s=e[r++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[r++];t[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=e[r++],i=e[r++],o=e[r++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const a=e[r++],i=e[r++];t[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return t.join("")},$T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<e.length;s+=3){const a=e[s],i=s+1<e.length,o=i?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,f=a>>2,d=(a&3)<<4|o>>4;let m=(o&15)<<2|c>>6,p=c&63;l||(p=64,i||(m=64)),n.push(r[f],r[d],r[m],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(WT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):N4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<e.length;){const a=r[e.charAt(s++)],o=s<e.length?r[e.charAt(s)]:0;++s;const c=s<e.length?r[e.charAt(s)]:64;++s;const d=s<e.length?r[e.charAt(s)]:64;if(++s,a==null||o==null||c==null||d==null)throw new C4;const m=a<<2|o>>4;if(n.push(m),c!==64){const p=o<<4&240|c>>2;if(n.push(p),d!==64){const x=c<<6&192|d;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class C4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b4=function(e){const t=WT(e);return $T.encodeByteArray(t,!0)},$h=function(e){return b4(e).replace(/\./g,"")},zT=function(e){try{return $T.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=()=>R4().__FIREBASE_DEFAULTS__,D4=()=>{if(typeof process>"u"||typeof Fy>"u")return;const e=Fy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},F4=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&zT(e[1]);return t&&JSON.parse(t)},Wd=()=>{try{return P4()||D4()||F4()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},HT=e=>{var t,r;return(r=(t=Wd())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[e]},tx=e=>{const t=HT(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},GT=()=>{var e;return(e=Wd())===null||e===void 0?void 0:e.config},KT=e=>{var t;return(t=Wd())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",s=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$h(JSON.stringify(r)),$h(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hr())}function L4(){var e;const t=(e=Wd())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U4(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function V4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B4(){const e=Hr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function W4(){return!L4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $4(){try{return typeof indexedDB=="object"}catch{return!1}}function z4(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="FirebaseError";class _s extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=H4,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},s=`${this.service}/${t}`,a=this.errors[t],i=a?G4(a,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new _s(s,o,n)}}function G4(e,t){return e.replace(K4,(r,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const K4=/\{\$([^}]+)}/g;function q4(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function zh(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const s of r){if(!n.includes(s))return!1;const a=e[s],i=t[s];if(Oy(a)&&Oy(i)){if(!zh(a,i))return!1}else if(a!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Oy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Y4(e,t){const r=new X4(e,t);return r.subscribe.bind(r)}class X4{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let s;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Q4(t,["next","error","complete"])?s=t:s={next:t,error:r,complete:n},s.next===void 0&&(s.next=X0),s.error===void 0&&(s.error=X0),s.complete===void 0&&(s.complete=X0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q4(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function X0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(e){return e&&e._delegate?e._delegate:e}class xa{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new O4;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(eP(t))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(t=Ai){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ai){return this.instances.has(t)}getOptions(t=Ai){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&i.resolve(s)}return s}onInit(t,r){var n;const s=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(t),this.onInitCallbacks.set(s,a);const i=this.instances.get(s);return i&&t(i,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Z4(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Ai){return this.component?this.component.multipleInstances?t:Ai:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z4(e){return e===Ai?void 0:e}function eP(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new J4(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ze||(Ze={}));const rP={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},nP=Ze.INFO,sP={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},aP=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),s=sP[t];if(s)console[s](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rx{constructor(t){this.name=t,this._logLevel=nP,this._logHandler=aP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?rP[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...t),this._logHandler(this,Ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...t),this._logHandler(this,Ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...t),this._logHandler(this,Ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...t),this._logHandler(this,Ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...t),this._logHandler(this,Ze.ERROR,...t)}}const iP=(e,t)=>t.some(r=>e instanceof r);let My,Ly;function oP(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lP(){return Ly||(Ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YT=new WeakMap,xp=new WeakMap,XT=new WeakMap,Q0=new WeakMap,nx=new WeakMap;function cP(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{r(ni(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&YT.set(r,e)}).catch(()=>{}),nx.set(t,e),t}function uP(e){if(xp.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{r(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});xp.set(e,t)}let vp={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return xp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||XT.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ni(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function fP(e){vp=e(vp)}function hP(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(J0(this),t,...r);return XT.set(n,t.sort?t.sort():[t]),ni(n)}:lP().includes(e)?function(...t){return e.apply(J0(this),t),ni(YT.get(this))}:function(...t){return ni(e.apply(J0(this),t))}}function dP(e){return typeof e=="function"?hP(e):(e instanceof IDBTransaction&&uP(e),iP(e,oP())?new Proxy(e,vp):e)}function ni(e){if(e instanceof IDBRequest)return cP(e);if(Q0.has(e))return Q0.get(e);const t=dP(e);return t!==e&&(Q0.set(e,t),nx.set(t,e)),t}const J0=e=>nx.get(e);function mP(e,t,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const i=indexedDB.open(e,t),o=ni(i);return n&&i.addEventListener("upgradeneeded",l=>{n(ni(i.result),l.oldVersion,l.newVersion,ni(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const pP=["get","getKey","getAll","getAllKeys","count"],gP=["put","add","delete","clear"],Z0=new Map;function jy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Z0.get(t))return Z0.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=gP.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||pP.includes(r)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Z0.set(t,a),a}fP(e=>({...e,get:(t,r,n)=>jy(t,r)||e.get(t,r,n),has:(t,r)=>!!jy(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(vP(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function vP(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const yp="@firebase/app",Uy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new rx("@firebase/app"),yP="@firebase/app-compat",_P="@firebase/analytics-compat",wP="@firebase/analytics",EP="@firebase/app-check-compat",TP="@firebase/app-check",kP="@firebase/auth",SP="@firebase/auth-compat",AP="@firebase/database",IP="@firebase/data-connect",NP="@firebase/database-compat",CP="@firebase/functions",bP="@firebase/functions-compat",RP="@firebase/installations",PP="@firebase/installations-compat",DP="@firebase/messaging",FP="@firebase/messaging-compat",OP="@firebase/performance",MP="@firebase/performance-compat",LP="@firebase/remote-config",jP="@firebase/remote-config-compat",UP="@firebase/storage",VP="@firebase/storage-compat",BP="@firebase/firestore",WP="@firebase/vertexai-preview",$P="@firebase/firestore-compat",zP="firebase",HP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",GP={[yp]:"fire-core",[yP]:"fire-core-compat",[wP]:"fire-analytics",[_P]:"fire-analytics-compat",[TP]:"fire-app-check",[EP]:"fire-app-check-compat",[kP]:"fire-auth",[SP]:"fire-auth-compat",[AP]:"fire-rtdb",[IP]:"fire-data-connect",[NP]:"fire-rtdb-compat",[CP]:"fire-fn",[bP]:"fire-fn-compat",[RP]:"fire-iid",[PP]:"fire-iid-compat",[DP]:"fire-fcm",[FP]:"fire-fcm-compat",[OP]:"fire-perf",[MP]:"fire-perf-compat",[LP]:"fire-rc",[jP]:"fire-rc-compat",[UP]:"fire-gcs",[VP]:"fire-gcs-compat",[BP]:"fire-fst",[$P]:"fire-fst-compat",[WP]:"fire-vertex","fire-js":"fire-js",[zP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new Map,KP=new Map,wp=new Map;function Vy(e,t){try{e.container.addComponent(t)}catch(r){va.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function ui(e){const t=e.name;if(wp.has(t))return va.debug(`There were multiple attempts to register component ${t}.`),!1;wp.set(t,e);for(const r of Hh.values())Vy(r,e);for(const r of KP.values())Vy(r,e);return!0}function Ru(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function ra(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new Cu("app","Firebase",qP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(t,r,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=HP;function QT(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n=Object.assign({name:_p,automaticDataCollectionEnabled:!1},t),s=n.name;if(typeof s!="string"||!s)throw si.create("bad-app-name",{appName:String(s)});if(r||(r=GT()),!r)throw si.create("no-options");const a=Hh.get(s);if(a){if(zh(r,a.options)&&zh(n,a.config))return a;throw si.create("duplicate-app",{appName:s})}const i=new tP(s);for(const l of wp.values())i.addComponent(l);const o=new YP(r,n,i);return Hh.set(s,o),o}function $d(e=_p){const t=Hh.get(e);if(!t&&e===_p&&GT())return QT();if(!t)throw si.create("no-app",{appName:e});return t}function zn(e,t,r){var n;let s=(n=GP[e])!==null&&n!==void 0?n:e;r&&(s+=`-${r}`);const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const o=[`Unable to register library "${s}" with version "${t}":`];a&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),va.warn(o.join(" "));return}ui(new xa(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firebase-heartbeat-database",QP=1,ru="firebase-heartbeat-store";let em=null;function JT(){return em||(em=mP(XP,QP,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ru)}catch(r){console.warn(r)}}}}).catch(e=>{throw si.create("idb-open",{originalErrorMessage:e.message})})),em}async function JP(e){try{const r=(await JT()).transaction(ru),n=await r.objectStore(ru).get(ZT(e));return await r.done,n}catch(t){if(t instanceof _s)va.warn(t.message);else{const r=si.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});va.warn(r.message)}}}async function By(e,t){try{const n=(await JT()).transaction(ru,"readwrite");await n.objectStore(ru).put(t,ZT(e)),await n.done}catch(r){if(r instanceof _s)va.warn(r.message);else{const n=si.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});va.warn(n.message)}}}function ZT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=1024,eD=30*24*60*60*1e3;class tD{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new nD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Wy();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=eD}),this._storage.overwrite(this._heartbeatsCache))}catch(n){va.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Wy(),{heartbeatsToSend:n,unsentEntries:s}=rD(this._heartbeatsCache.heartbeats),a=$h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return va.warn(r),""}}}function Wy(){return new Date().toISOString().substring(0,10)}function rD(e,t=ZP){const r=[];let n=e.slice();for(const s of e){const a=r.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),$y(r)>t){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),$y(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class nD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $4()?z4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await JP(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return By(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return By(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function $y(e){return $h(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(e){ui(new xa("platform-logger",t=>new xP(t),"PRIVATE")),ui(new xa("heartbeat",t=>new tD(t),"PRIVATE")),zn(yp,Uy,e),zn(yp,Uy,"esm2017"),zn("fire-js","")}sD("");function sx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function ek(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aD=ek,tk=new Cu("auth","Firebase",ek());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new rx("@firebase/auth");function iD(e,...t){Gh.logLevel<=Ze.WARN&&Gh.warn(`Auth (${ao}): ${e}`,...t)}function ah(e,...t){Gh.logLevel<=Ze.ERROR&&Gh.error(`Auth (${ao}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(e,...t){throw ix(e,...t)}function ms(e,...t){return ix(e,...t)}function ax(e,t,r){const n=Object.assign(Object.assign({},aD()),{[t]:r});return new Cu("auth","Firebase",n).create(t,{appName:e.name})}function Ui(e){return ax(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oD(e,t,r){const n=r;if(!(t instanceof n))throw n.name!==t.constructor.name&&Os(e,"argument-error"),ax(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ix(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return tk.create(e,...t)}function je(e,t,...r){if(!e)throw ix(t,...r)}function na(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ah(t),new Error(t)}function ya(e,t){e||na(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function lD(){return zy()==="http:"||zy()==="https:"}function zy(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lD()||U4()||"connection"in navigator)?navigator.onLine:!0}function uD(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,r){this.shortDelay=t,this.longDelay=r,ya(r>t,"Short delay should be less than long delay!"),this.isMobile=M4()||V4()}get(){return cD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(e,t){ya(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Pu(3e4,6e4);function lx(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Al(e,t,r,n,s={}){return nk(e,s,async()=>{let a={},i={};n&&(t==="GET"?i=n:a={body:JSON.stringify(n)});const o=bu(Object.assign({key:e.config.apiKey},i)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},a);return j4()||(c.referrerPolicy="no-referrer"),rk.fetch()(sk(e,e.config.apiHost,r,o),c)})}async function nk(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},fD),t);try{const s=new mD(e),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw Rf(e,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(e,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw Rf(e,"email-already-in-use",i);if(l==="USER_DISABLED")throw Rf(e,"user-disabled",i);const f=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ax(e,f,c);Os(e,f)}}catch(s){if(s instanceof _s)throw s;Os(e,"network-request-failed",{message:String(s)})}}async function dD(e,t,r,n,s={}){const a=await Al(e,t,r,n,s);return"mfaPendingCredential"in a&&Os(e,"multi-factor-auth-required",{_serverResponse:a}),a}function sk(e,t,r,n){const s=`${t}${r}?${n}`;return e.config.emulator?ox(e.config,s):`${e.config.apiScheme}://${s}`}class mD{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ms(this.auth,"network-request-failed")),hD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rf(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ms(e,t,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(e,t){return Al(e,"POST","/v1/accounts:delete",t)}async function ak(e,t){return Al(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ik(e,t=!1){const r=zt(e),n=await r.getIdToken(t),s=cx(n);je(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:Ec(tm(s.auth_time)),issuedAtTime:Ec(tm(s.iat)),expirationTime:Ec(tm(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function tm(e){return Number(e)*1e3}function cx(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const s=zT(r);return s?JSON.parse(s):(ah("Failed to decode base64 JWT payload"),null)}catch(s){return ah("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hy(e){const t=cx(e);return je(t,"internal-error"),je(typeof t.exp<"u","internal-error"),je(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof _s&&gD(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function gD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(e){var t;const r=e.auth,n=await e.getIdToken(),s=await nu(e,ak(r,{idToken:n}));je(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];e._notifyReloadListener(a);const i=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?ok(a.providerUserInfo):[],o=yD(e.providerData,i),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),f=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Tp(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(e,d)}async function vD(e){const t=zt(e);await Kh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yD(e,t){return[...e.filter(n=>!t.some(s=>s.providerId===n.providerId)),...t]}function ok(e){return e.map(t=>{var{providerId:r}=t,n=sx(t,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(e,t){const r=await nk(e,{},async()=>{const n=bu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=e.config,i=sk(e,s,"/v1/token",`key=${a}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",rk.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function wD(e,t){return Al(e,"POST","/v2/accounts:revokeToken",lx(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){je(t.idToken,"internal-error"),je(typeof t.idToken<"u","internal-error"),je(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Hy(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){je(t.length!==0,"internal-error");const r=Hy(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await _D(t,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,i=new qo;return n&&(je(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),s&&(je(typeof s=="string","internal-error",{appName:t}),i.accessToken=s),a&&(je(typeof a=="number","internal-error",{appName:t}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(e,t){je(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class sa{constructor(t){var{uid:r,auth:n,stsTokenManager:s}=t,a=sx(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Tp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await nu(this,this.stsTokenManager.getToken(this.auth,t));return je(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return ik(this,t)}reload(){return vD(this)}_assign(t){this!==t&&(je(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new sa(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await Kh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ra(this.auth.app))return Promise.reject(Ui(this.auth));const t=await this.getIdToken();return await nu(this,pD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var n,s,a,i,o,l,c,f;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,p=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,x=(i=r.photoURL)!==null&&i!==void 0?i:void 0,g=(o=r.tenantId)!==null&&o!==void 0?o:void 0,w=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,k=(c=r.createdAt)!==null&&c!==void 0?c:void 0,E=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:I,isAnonymous:O,providerData:F,stsTokenManager:v}=r;je(y&&v,t,"internal-error");const T=qo.fromJSON(this.name,v);je(typeof y=="string",t,"internal-error"),Pa(d,t.name),Pa(m,t.name),je(typeof I=="boolean",t,"internal-error"),je(typeof O=="boolean",t,"internal-error"),Pa(p,t.name),Pa(x,t.name),Pa(g,t.name),Pa(w,t.name),Pa(k,t.name),Pa(E,t.name);const S=new sa({uid:y,auth:t,email:m,emailVerified:I,displayName:d,isAnonymous:O,photoURL:x,phoneNumber:p,tenantId:g,stsTokenManager:T,createdAt:k,lastLoginAt:E});return F&&Array.isArray(F)&&(S.providerData=F.map(C=>Object.assign({},C))),w&&(S._redirectEventId=w),S}static async _fromIdTokenResponse(t,r,n=!1){const s=new qo;s.updateFromServerResponse(r);const a=new sa({uid:r.localId,auth:t,stsTokenManager:s,isAnonymous:n});return await Kh(a),a}static async _fromGetAccountInfoResponse(t,r,n){const s=r.users[0];je(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ok(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new qo;o.updateFromIdToken(n);const l=new sa({uid:s.localId,auth:t,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;function aa(e){ya(e instanceof Function,"Expected a class definition");let t=Gy.get(e);return t?(ya(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Gy.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}lk.type="NONE";const Ky=lk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(e,t,r){return`firebase:${e}:${t}:${r}`}class Yo{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=ih(this.userKey,s.apiKey,a),this.fullPersistenceKey=ih("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?sa._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Yo(aa(Ky),t,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||aa(Ky);const i=ih(n,t.config.apiKey,t.name);let o=null;for(const c of r)try{const f=await c._get(i);if(f){const d=sa._fromJSON(t,f);c!==a&&(o=d),a=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Yo(a,t,n):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(i)}catch{}})),new Yo(a,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ck(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mk(t))return"Blackberry";if(pk(t))return"Webos";if(uk(t))return"Safari";if((t.includes("chrome/")||fk(t))&&!t.includes("edge/"))return"Chrome";if(dk(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function ck(e=Hr()){return/firefox\//i.test(e)}function uk(e=Hr()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fk(e=Hr()){return/crios\//i.test(e)}function hk(e=Hr()){return/iemobile/i.test(e)}function dk(e=Hr()){return/android/i.test(e)}function mk(e=Hr()){return/blackberry/i.test(e)}function pk(e=Hr()){return/webos/i.test(e)}function ux(e=Hr()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ED(e=Hr()){var t;return ux(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function TD(){return B4()&&document.documentMode===10}function gk(e=Hr()){return ux(e)||dk(e)||pk(e)||mk(e)||/windows phone/i.test(e)||hk(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(e,t=[]){let r;switch(e){case"Browser":r=qy(Hr());break;case"Worker":r=`${qy(Hr())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${ao}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=a=>new Promise((i,o)=>{try{const l=t(a);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(e,t={}){return Al(e,"GET","/v2/passwordPolicy",lx(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=6;class ID{constructor(t){var r,n,s,a;const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:AD,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,n,s,a,i,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(i=l.containsNumericCharacter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),s&&(r.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<t.length;s++)n=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t,r,n,s){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yy(this),this.idTokenSubscription=new Yy(this),this.beforeStateQueue=new kD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=aa(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await ak(this,{idToken:t}),n=await sa._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(ra(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(t);(!i||i===o)&&(l!=null&&l.user)&&(s=l.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Kh(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=uD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ra(this.app))return Promise.reject(Ui(this));const r=t?zt(t):null;return r&&je(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&je(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ra(this.app)?Promise.reject(Ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ra(this.app)?Promise.reject(Ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SD(this),r=new ID(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Cu("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await wD(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&aa(t)||this._popupRedirectResolver;je(r,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[aa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=t.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&iD(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function zd(e){return zt(e)}class Yy{constructor(t){this.auth=t,this.observer=null,this.addObserver=Y4(r=>this.observer=r)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CD(e){fx=e}function bD(e){return fx.loadJS(e)}function RD(){return fx.gapiScript}function PD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(e,t){const r=Ru(e,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(zh(a,t??{}))return s;Os(s,"already-initialized")}return r.initialize({options:t})}function FD(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(aa);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function OD(e,t,r){const n=zd(e);je(n._canInitEmulator,n,"emulator-config-failed"),je(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const s=!1,a=vk(t),{host:i,port:o}=MD(t),l=o===null?"":`:${o}`;n.config.emulator={url:`${a}//${i}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),LD()}function vk(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function MD(e){const t=vk(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:Xy(n.substr(a.length+1))}}else{const[a,i]=n.split(":");return{host:a,port:Xy(i)}}}function Xy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function LD(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return na("not implemented")}_getIdTokenResponse(t){return na("not implemented")}_linkToIdToken(t,r){return na("not implemented")}_getReauthenticationResolver(t){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(e,t){return dD(e,"POST","/v1/accounts:signInWithIdp",lx(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="http://localhost";class Xi extends yk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Xi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Os("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:s}=r,a=sx(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new Xi(n,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Xo(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Xo(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Xo(t,r)}buildRequest(){const t={requestUri:jD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=bu(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends hx{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends Du{constructor(){super("facebook.com")}static credential(t){return Xi._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ua.credentialFromTaggedObject(t)}static credentialFromError(t){return Ua.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ua.credential(t.oauthAccessToken)}catch{return null}}}Ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Xi._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return Cs.credential(r,n)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Du{constructor(){super("github.com")}static credential(t){return Xi._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Va.credentialFromTaggedObject(t)}static credentialFromError(t){return Va.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Va.credential(t.oauthAccessToken)}catch{return null}}}Va.GITHUB_SIGN_IN_METHOD="github.com";Va.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Du{constructor(){super("twitter.com")}static credential(t,r){return Xi._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Ba.credentialFromTaggedObject(t)}static credentialFromError(t){return Ba.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Ba.credential(r,n)}catch{return null}}}Ba.TWITTER_SIGN_IN_METHOD="twitter.com";Ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,s=!1){const a=await sa._fromIdTokenResponse(t,n,s),i=Qy(n);return new hl({user:a,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const s=Qy(n);return new hl({user:t,providerId:s,_tokenResponse:n,operationType:r})}}function Qy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends _s{constructor(t,r,n,s){var a;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,s){return new qh(t,r,n,s)}}function _k(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(e,a,t,n):a})}async function UD(e,t,r=!1){const n=await nu(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return hl._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(e,t,r=!1){const{auth:n}=e;if(ra(n.app))return Promise.reject(Ui(n));const s="reauthenticate";try{const a=await nu(e,_k(n,s,t,e),r);je(a.idToken,n,"internal-error");const i=cx(a.idToken);je(i,n,"internal-error");const{sub:o}=i;return je(e.uid===o,n,"user-mismatch"),hl._forOperation(e,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Os(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(e,t,r=!1){if(ra(e.app))return Promise.reject(Ui(e));const n="signIn",s=await _k(e,n,t),a=await hl._fromIdTokenResponse(e,n,s);return r||await e._updateCurrentUser(a.user),a}function WD(e,t,r,n){return zt(e).onIdTokenChanged(t,r,n)}function $D(e,t,r){return zt(e).beforeAuthStateChanged(t,r)}function wk(e,t,r,n){return zt(e).onAuthStateChanged(t,r,n)}function zD(e){return zt(e).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=1e3,GD=10;class Tk extends Ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&t(r,s,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},a=this.storage.getItem(n);TD()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,GD):s()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},HD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}Tk.type="LOCAL";const KD=Tk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk extends Ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}kk.type="SESSION";const Sk=kk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const n=new Hd(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:s,data:a}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map(async c=>c(r.origin,a)),l=await qD(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const c=dx("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(m.data.response);break;default:clearTimeout(f),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function XD(e){Ps().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function QD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JD(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function ZD(){return Ak()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="firebaseLocalStorageDb",e3=1,Xh="firebaseLocalStorage",Nk="fbase_key";class Fu{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Gd(e,t){return e.transaction([Xh],t?"readwrite":"readonly").objectStore(Xh)}function t3(){const e=indexedDB.deleteDatabase(Ik);return new Fu(e).toPromise()}function kp(){const e=indexedDB.open(Ik,e3);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(Xh,{keyPath:Nk})}catch(s){r(s)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Xh)?t(n):(n.close(),await t3(),t(await kp()))})})}async function Jy(e,t,r){const n=Gd(e,!0).put({[Nk]:t,value:r});return new Fu(n).toPromise()}async function r3(e,t){const r=Gd(e,!1).get(t),n=await new Fu(r).toPromise();return n===void 0?null:n.value}function Zy(e,t){const r=Gd(e,!0).delete(t);return new Fu(r).toPromise()}const n3=800,s3=3;class Ck{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>s3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ak()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hd._getInstance(ZD()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await QD(),!this.activeServiceWorker)return;this.sender=new YD(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||JD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kp();return await Jy(t,Yh,"1"),await Zy(t,Yh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jy(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>r3(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zy(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=Gd(s,!1).getAll();return new Fu(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ck.type="LOCAL";const a3=Ck;new Pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(e,t){return t?aa(t):(je(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends yk{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xo(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Xo(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Xo(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function i3(e){return BD(e.auth,new mx(e),e.bypassAuthState)}function o3(e){const{auth:t,user:r}=e;return je(r,t,"internal-error"),VD(r,new mx(e),e.bypassAuthState)}async function l3(e){const{auth:t,user:r}=e;return je(r,t,"internal-error"),UD(r,new mx(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(t,r,n,s,a=!1){this.auth=t,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:i,type:o}=t;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return i3;case"linkViaPopup":case"linkViaRedirect":return l3;case"reauthViaPopup":case"reauthViaRedirect":return o3;default:Os(this.auth,"internal-error")}}resolve(t){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new Pu(2e3,1e4);async function Pk(e,t,r){if(ra(e.app))return Promise.reject(ms(e,"operation-not-supported-in-this-environment"));const n=zd(e);oD(e,t,hx);const s=bk(n,r);return new Fi(n,"signInViaPopup",t,s).executeNotNull()}class Fi extends Rk{constructor(t,r,n,s,a){super(t,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,Fi.currentPopupAction&&Fi.currentPopupAction.cancel(),Fi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return je(t,this.auth,"internal-error"),t}async onExecution(){ya(this.filter.length===1,"Popup operations only handle one event");const t=dx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,c3.get())};t()}}Fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="pendingRedirect",oh=new Map;class f3 extends Rk{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=oh.get(this.auth._key());if(!t){try{const n=await h3(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}oh.set(this.auth._key(),t)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h3(e,t){const r=p3(t),n=m3(e);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function d3(e,t){oh.set(e._key(),t)}function m3(e){return aa(e._redirectPersistence)}function p3(e){return ih(u3,e.config.apiKey,e.name)}async function g3(e,t,r=!1){if(ra(e.app))return Promise.reject(Ui(e));const n=zd(e),s=bk(n,t),i=await new f3(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=10*60*1e3;class v3{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!y3(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!Dk(t)){const s=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ms(this.auth,s))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=x3&&this.cachedEventUids.clear(),this.cachedEventUids.has(e_(t))}saveEventToCache(t){this.cachedEventUids.add(e_(t)),this.lastProcessedEventTime=Date.now()}}function e_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Dk({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function y3(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dk(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(e,t={}){return Al(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E3=/^https?/;async function T3(e){if(e.config.emulator)return;const{authorizedDomains:t}=await _3(e);for(const r of t)try{if(k3(r))return}catch{}Os(e,"unauthorized-domain")}function k3(e){const t=Ep(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!E3.test(r))return!1;if(w3.test(e))return n===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=new Pu(3e4,6e4);function t_(){const e=Ps().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function A3(e){return new Promise((t,r)=>{var n,s,a;function i(){t_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{t_(),r(ms(e,"network-request-failed"))},timeout:S3.get()})}if(!((s=(n=Ps().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((a=Ps().gapi)===null||a===void 0)&&a.load)i();else{const o=PD("iframefcb");return Ps()[o]=()=>{gapi.load?i():r(ms(e,"network-request-failed"))},bD(`${RD()}?onload=${o}`).catch(l=>r(l))}}).catch(t=>{throw lh=null,t})}let lh=null;function I3(e){return lh=lh||A3(e),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=new Pu(5e3,15e3),C3="__/auth/iframe",b3="emulator/auth/iframe",R3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D3(e){const t=e.config;je(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?ox(t,b3):`https://${e.config.authDomain}/${C3}`,n={apiKey:t.apiKey,appName:e.name,v:ao},s=P3.get(e.config.apiHost);s&&(n.eid=s);const a=e._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${bu(n).slice(1)}`}async function F3(e){const t=await I3(e),r=Ps().gapi;return je(r,e,"internal-error"),t.open({where:document.body,url:D3(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R3,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const i=ms(e,"network-request-failed"),o=Ps().setTimeout(()=>{a(i)},N3.get());function l(){Ps().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M3=500,L3=600,j3="_blank",U3="http://localhost";class r_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V3(e,t,r,n=M3,s=L3){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},O3),{width:n.toString(),height:s.toString(),top:a,left:i}),c=Hr().toLowerCase();r&&(o=fk(c)?j3:r),ck(c)&&(t=t||U3,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[p,x])=>`${m}${p}=${x},`,"");if(ED(c)&&o!=="_self")return B3(t||"",o),new r_(null);const d=window.open(t||"",o,f);je(d,e,"popup-blocked");try{d.focus()}catch{}return new r_(d)}function B3(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="__/auth/handler",$3="emulator/auth/handler",z3=encodeURIComponent("fac");async function n_(e,t,r,n,s,a){je(e.config.authDomain,e,"auth-domain-config-required"),je(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:ao,eventId:s};if(t instanceof hx){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",q4(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,d]of Object.entries({}))i[f]=d}if(t instanceof Du){const f=t.getScopes().filter(d=>d!=="");f.length>0&&(i.scopes=f.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await e._getAppCheckToken(),c=l?`#${z3}=${encodeURIComponent(l)}`:"";return`${H3(e)}?${bu(o).slice(1)}${c}`}function H3({config:e}){return e.emulator?ox(e,$3):`https://${e.authDomain}/${W3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class G3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sk,this._completeRedirectFn=g3,this._overrideRedirectResult=d3}async _openPopup(t,r,n,s){var a;ya((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await n_(t,r,n,Ep(),s);return V3(t,i,dx())}async _openRedirect(t,r,n,s){await this._originValidation(t);const a=await n_(t,r,n,Ep(),s);return XD(a),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(ya(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await F3(t),n=new v3(t);return r.register("authEvent",s=>(je(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(rm,{type:rm},s=>{var a;const i=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[rm];i!==void 0&&r(!!i),Os(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=T3(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return gk()||uk()||ux()}}const K3=G3;var s_="@firebase/auth",a_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X3(e){ui(new xa("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;je(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xk(e)},c=new ND(n,s,a,l);return FD(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),ui(new xa("auth-internal",t=>{const r=zd(t.getProvider("auth").getImmediate());return(n=>new q3(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(s_,a_,Y3(e)),zn(s_,a_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=5*60,J3=KT("authIdTokenMaxAge")||Q3;let i_=null;const Z3=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>J3)return;const s=r==null?void 0:r.token;i_!==s&&(i_=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eF(e=$d()){const t=Ru(e,"auth");if(t.isInitialized())return t.getImmediate();const r=DD(e,{popupRedirectResolver:K3,persistence:[a3,KD,Sk]}),n=KT("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const i=Z3(a.toString());$D(r,i,()=>i(r.currentUser)),WD(r,o=>i(o))}}const s=HT("auth");return s&&OD(r,`http://${s}`),r}function tF(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}CD({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=s=>{const a=ms("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",tF().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X3("Browser");var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vi,Fk;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(v,T){function S(){}S.prototype=T.prototype,v.D=T.prototype,v.prototype=new S,v.prototype.constructor=v,v.C=function(C,P,b){for(var R=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)R[ae-2]=arguments[ae];return T.prototype[P].apply(C,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,T,S){S||(S=0);var C=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)C[P]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(P=0;16>P;++P)C[P]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=v.g[0],S=v.g[1],P=v.g[2];var b=v.g[3],R=T+(b^S&(P^b))+C[0]+3614090360&4294967295;T=S+(R<<7&4294967295|R>>>25),R=b+(P^T&(S^P))+C[1]+3905402710&4294967295,b=T+(R<<12&4294967295|R>>>20),R=P+(S^b&(T^S))+C[2]+606105819&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(T^P&(b^T))+C[3]+3250441966&4294967295,S=P+(R<<22&4294967295|R>>>10),R=T+(b^S&(P^b))+C[4]+4118548399&4294967295,T=S+(R<<7&4294967295|R>>>25),R=b+(P^T&(S^P))+C[5]+1200080426&4294967295,b=T+(R<<12&4294967295|R>>>20),R=P+(S^b&(T^S))+C[6]+2821735955&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(T^P&(b^T))+C[7]+4249261313&4294967295,S=P+(R<<22&4294967295|R>>>10),R=T+(b^S&(P^b))+C[8]+1770035416&4294967295,T=S+(R<<7&4294967295|R>>>25),R=b+(P^T&(S^P))+C[9]+2336552879&4294967295,b=T+(R<<12&4294967295|R>>>20),R=P+(S^b&(T^S))+C[10]+4294925233&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(T^P&(b^T))+C[11]+2304563134&4294967295,S=P+(R<<22&4294967295|R>>>10),R=T+(b^S&(P^b))+C[12]+1804603682&4294967295,T=S+(R<<7&4294967295|R>>>25),R=b+(P^T&(S^P))+C[13]+4254626195&4294967295,b=T+(R<<12&4294967295|R>>>20),R=P+(S^b&(T^S))+C[14]+2792965006&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(T^P&(b^T))+C[15]+1236535329&4294967295,S=P+(R<<22&4294967295|R>>>10),R=T+(P^b&(S^P))+C[1]+4129170786&4294967295,T=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(T^S))+C[6]+3225465664&4294967295,b=T+(R<<9&4294967295|R>>>23),R=P+(T^S&(b^T))+C[11]+643717713&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^T&(P^b))+C[0]+3921069994&4294967295,S=P+(R<<20&4294967295|R>>>12),R=T+(P^b&(S^P))+C[5]+3593408605&4294967295,T=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(T^S))+C[10]+38016083&4294967295,b=T+(R<<9&4294967295|R>>>23),R=P+(T^S&(b^T))+C[15]+3634488961&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^T&(P^b))+C[4]+3889429448&4294967295,S=P+(R<<20&4294967295|R>>>12),R=T+(P^b&(S^P))+C[9]+568446438&4294967295,T=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(T^S))+C[14]+3275163606&4294967295,b=T+(R<<9&4294967295|R>>>23),R=P+(T^S&(b^T))+C[3]+4107603335&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^T&(P^b))+C[8]+1163531501&4294967295,S=P+(R<<20&4294967295|R>>>12),R=T+(P^b&(S^P))+C[13]+2850285829&4294967295,T=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(T^S))+C[2]+4243563512&4294967295,b=T+(R<<9&4294967295|R>>>23),R=P+(T^S&(b^T))+C[7]+1735328473&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^T&(P^b))+C[12]+2368359562&4294967295,S=P+(R<<20&4294967295|R>>>12),R=T+(S^P^b)+C[5]+4294588738&4294967295,T=S+(R<<4&4294967295|R>>>28),R=b+(T^S^P)+C[8]+2272392833&4294967295,b=T+(R<<11&4294967295|R>>>21),R=P+(b^T^S)+C[11]+1839030562&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^T)+C[14]+4259657740&4294967295,S=P+(R<<23&4294967295|R>>>9),R=T+(S^P^b)+C[1]+2763975236&4294967295,T=S+(R<<4&4294967295|R>>>28),R=b+(T^S^P)+C[4]+1272893353&4294967295,b=T+(R<<11&4294967295|R>>>21),R=P+(b^T^S)+C[7]+4139469664&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^T)+C[10]+3200236656&4294967295,S=P+(R<<23&4294967295|R>>>9),R=T+(S^P^b)+C[13]+681279174&4294967295,T=S+(R<<4&4294967295|R>>>28),R=b+(T^S^P)+C[0]+3936430074&4294967295,b=T+(R<<11&4294967295|R>>>21),R=P+(b^T^S)+C[3]+3572445317&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^T)+C[6]+76029189&4294967295,S=P+(R<<23&4294967295|R>>>9),R=T+(S^P^b)+C[9]+3654602809&4294967295,T=S+(R<<4&4294967295|R>>>28),R=b+(T^S^P)+C[12]+3873151461&4294967295,b=T+(R<<11&4294967295|R>>>21),R=P+(b^T^S)+C[15]+530742520&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^T)+C[2]+3299628645&4294967295,S=P+(R<<23&4294967295|R>>>9),R=T+(P^(S|~b))+C[0]+4096336452&4294967295,T=S+(R<<6&4294967295|R>>>26),R=b+(S^(T|~P))+C[7]+1126891415&4294967295,b=T+(R<<10&4294967295|R>>>22),R=P+(T^(b|~S))+C[14]+2878612391&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~T))+C[5]+4237533241&4294967295,S=P+(R<<21&4294967295|R>>>11),R=T+(P^(S|~b))+C[12]+1700485571&4294967295,T=S+(R<<6&4294967295|R>>>26),R=b+(S^(T|~P))+C[3]+2399980690&4294967295,b=T+(R<<10&4294967295|R>>>22),R=P+(T^(b|~S))+C[10]+4293915773&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~T))+C[1]+2240044497&4294967295,S=P+(R<<21&4294967295|R>>>11),R=T+(P^(S|~b))+C[8]+1873313359&4294967295,T=S+(R<<6&4294967295|R>>>26),R=b+(S^(T|~P))+C[15]+4264355552&4294967295,b=T+(R<<10&4294967295|R>>>22),R=P+(T^(b|~S))+C[6]+2734768916&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~T))+C[13]+1309151649&4294967295,S=P+(R<<21&4294967295|R>>>11),R=T+(P^(S|~b))+C[4]+4149444226&4294967295,T=S+(R<<6&4294967295|R>>>26),R=b+(S^(T|~P))+C[11]+3174756917&4294967295,b=T+(R<<10&4294967295|R>>>22),R=P+(T^(b|~S))+C[2]+718787259&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~T))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+T&4294967295,v.g[1]=v.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,v.g[2]=v.g[2]+P&4294967295,v.g[3]=v.g[3]+b&4294967295}n.prototype.u=function(v,T){T===void 0&&(T=v.length);for(var S=T-this.blockSize,C=this.B,P=this.h,b=0;b<T;){if(P==0)for(;b<=S;)s(this,v,b),b+=this.blockSize;if(typeof v=="string"){for(;b<T;)if(C[P++]=v.charCodeAt(b++),P==this.blockSize){s(this,C),P=0;break}}else for(;b<T;)if(C[P++]=v[b++],P==this.blockSize){s(this,C),P=0;break}}this.h=P,this.o+=T},n.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var T=1;T<v.length-8;++T)v[T]=0;var S=8*this.o;for(T=v.length-8;T<v.length;++T)v[T]=S&255,S/=256;for(this.u(v),v=Array(16),T=S=0;4>T;++T)for(var C=0;32>C;C+=8)v[S++]=this.g[T]>>>C&255;return v};function a(v,T){var S=o;return Object.prototype.hasOwnProperty.call(S,v)?S[v]:S[v]=T(v)}function i(v,T){this.h=T;for(var S=[],C=!0,P=v.length-1;0<=P;P--){var b=v[P]|0;C&&b==T||(S[P]=b,C=!1)}this.g=S}var o={};function l(v){return-128<=v&&128>v?a(v,function(T){return new i([T|0],0>T?-1:0)}):new i([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return d;if(0>v)return w(c(-v));for(var T=[],S=1,C=0;v>=S;C++)T[C]=v/S|0,S*=4294967296;return new i(T,0)}function f(v,T){if(v.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v.charAt(0)=="-")return w(f(v.substring(1),T));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(T,8)),C=d,P=0;P<v.length;P+=8){var b=Math.min(8,v.length-P),R=parseInt(v.substring(P,P+b),T);8>b?(b=c(Math.pow(T,b)),C=C.j(b).add(c(R))):(C=C.j(S),C=C.add(c(R)))}return C}var d=l(0),m=l(1),p=l(16777216);e=i.prototype,e.m=function(){if(g(this))return-w(this).m();for(var v=0,T=1,S=0;S<this.g.length;S++){var C=this.i(S);v+=(0<=C?C:4294967296+C)*T,T*=4294967296}return v},e.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x(this))return"0";if(g(this))return"-"+w(this).toString(v);for(var T=c(Math.pow(v,6)),S=this,C="";;){var P=I(S,T).g;S=k(S,P.j(T));var b=((0<S.g.length?S.g[0]:S.h)>>>0).toString(v);if(S=P,x(S))return b+C;for(;6>b.length;)b="0"+b;C=b+C}},e.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function x(v){if(v.h!=0)return!1;for(var T=0;T<v.g.length;T++)if(v.g[T]!=0)return!1;return!0}function g(v){return v.h==-1}e.l=function(v){return v=k(this,v),g(v)?-1:x(v)?0:1};function w(v){for(var T=v.g.length,S=[],C=0;C<T;C++)S[C]=~v.g[C];return new i(S,~v.h).add(m)}e.abs=function(){return g(this)?w(this):this},e.add=function(v){for(var T=Math.max(this.g.length,v.g.length),S=[],C=0,P=0;P<=T;P++){var b=C+(this.i(P)&65535)+(v.i(P)&65535),R=(b>>>16)+(this.i(P)>>>16)+(v.i(P)>>>16);C=R>>>16,b&=65535,R&=65535,S[P]=R<<16|b}return new i(S,S[S.length-1]&-2147483648?-1:0)};function k(v,T){return v.add(w(T))}e.j=function(v){if(x(this)||x(v))return d;if(g(this))return g(v)?w(this).j(w(v)):w(w(this).j(v));if(g(v))return w(this.j(w(v)));if(0>this.l(p)&&0>v.l(p))return c(this.m()*v.m());for(var T=this.g.length+v.g.length,S=[],C=0;C<2*T;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<v.g.length;P++){var b=this.i(C)>>>16,R=this.i(C)&65535,ae=v.i(P)>>>16,ee=v.i(P)&65535;S[2*C+2*P]+=R*ee,E(S,2*C+2*P),S[2*C+2*P+1]+=b*ee,E(S,2*C+2*P+1),S[2*C+2*P+1]+=R*ae,E(S,2*C+2*P+1),S[2*C+2*P+2]+=b*ae,E(S,2*C+2*P+2)}for(C=0;C<T;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=T;C<2*T;C++)S[C]=0;return new i(S,0)};function E(v,T){for(;(v[T]&65535)!=v[T];)v[T+1]+=v[T]>>>16,v[T]&=65535,T++}function y(v,T){this.g=v,this.h=T}function I(v,T){if(x(T))throw Error("division by zero");if(x(v))return new y(d,d);if(g(v))return T=I(w(v),T),new y(w(T.g),w(T.h));if(g(T))return T=I(v,w(T)),new y(w(T.g),T.h);if(30<v.g.length){if(g(v)||g(T))throw Error("slowDivide_ only works with positive integers.");for(var S=m,C=T;0>=C.l(v);)S=O(S),C=O(C);var P=F(S,1),b=F(C,1);for(C=F(C,2),S=F(S,2);!x(C);){var R=b.add(C);0>=R.l(v)&&(P=P.add(S),b=R),C=F(C,1),S=F(S,1)}return T=k(v,P.j(T)),new y(P,T)}for(P=d;0<=v.l(T);){for(S=Math.max(1,Math.floor(v.m()/T.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),b=c(S),R=b.j(T);g(R)||0<R.l(v);)S-=C,b=c(S),R=b.j(T);x(b)&&(b=m),P=P.add(b),v=k(v,R)}return new y(P,v)}e.A=function(v){return I(this,v).h},e.and=function(v){for(var T=Math.max(this.g.length,v.g.length),S=[],C=0;C<T;C++)S[C]=this.i(C)&v.i(C);return new i(S,this.h&v.h)},e.or=function(v){for(var T=Math.max(this.g.length,v.g.length),S=[],C=0;C<T;C++)S[C]=this.i(C)|v.i(C);return new i(S,this.h|v.h)},e.xor=function(v){for(var T=Math.max(this.g.length,v.g.length),S=[],C=0;C<T;C++)S[C]=this.i(C)^v.i(C);return new i(S,this.h^v.h)};function O(v){for(var T=v.g.length+1,S=[],C=0;C<T;C++)S[C]=v.i(C)<<1|v.i(C-1)>>>31;return new i(S,v.h)}function F(v,T){var S=T>>5;T%=32;for(var C=v.g.length-S,P=[],b=0;b<C;b++)P[b]=0<T?v.i(b+S)>>>T|v.i(b+S+1)<<32-T:v.i(b+S);return new i(P,v.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Fk=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=f,Vi=i}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ok,ac,Mk,ch,Sp,Lk,jk,Uk;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,A){return h==Array.prototype||h==Object.prototype||(h[_]=A.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var _=0;_<h.length;++_){var A=h[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=r(this);function s(h,_){if(_)e:{var A=n;h=h.split(".");for(var z=0;z<h.length-1;z++){var oe=h[z];if(!(oe in A))break e;A=A[oe]}h=h[h.length-1],z=A[h],_=_(z),_!=z&&_!=null&&t(A,h,{configurable:!0,writable:!0,value:_})}}function a(h,_){h instanceof String&&(h+="");var A=0,z=!1,oe={next:function(){if(!z&&A<h.length){var he=A++;return{value:_(he,h[he]),done:!1}}return z=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}s("Array.prototype.values",function(h){return h||function(){return a(this,function(_,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function c(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function f(h,_,A){return h.call.apply(h.bind,arguments)}function d(h,_,A){if(!h)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,z),h.apply(_,oe)}}return function(){return h.apply(_,arguments)}}function m(h,_,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:d,m.apply(null,arguments)}function p(h,_){var A=Array.prototype.slice.call(arguments,1);return function(){var z=A.slice();return z.push.apply(z,arguments),h.apply(this,z)}}function x(h,_){function A(){}A.prototype=_.prototype,h.aa=_.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(z,oe,he){for(var Ae=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)Ae[wt-2]=arguments[wt];return _.prototype[oe].apply(z,Ae)}}function g(h){const _=h.length;if(0<_){const A=Array(_);for(let z=0;z<_;z++)A[z]=h[z];return A}return[]}function w(h,_){for(let A=1;A<arguments.length;A++){const z=arguments[A];if(l(z)){const oe=h.length||0,he=z.length||0;h.length=oe+he;for(let Ae=0;Ae<he;Ae++)h[oe+Ae]=z[Ae]}else h.push(z)}}class k{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function E(h){return/^[\s\xa0]*$/.test(h)}function y(){var h=o.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var O=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function F(h,_,A){for(const z in h)_.call(A,h[z],z,h)}function v(h,_){for(const A in h)_.call(void 0,h[A],A,h)}function T(h){const _={};for(const A in h)_[A]=h[A];return _}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,_){let A,z;for(let oe=1;oe<arguments.length;oe++){z=arguments[oe];for(A in z)h[A]=z[A];for(let he=0;he<S.length;he++)A=S[he],Object.prototype.hasOwnProperty.call(z,A)&&(h[A]=z[A])}}function P(h){var _=1;h=h.split(":");const A=[];for(;0<_&&h.length;)A.push(h.shift()),_--;return h.length&&A.push(h.join(":")),A}function b(h){o.setTimeout(()=>{throw h},0)}function R(){var h=G;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ae{constructor(){this.h=this.g=null}add(_,A){const z=ee.get();z.set(_,A),this.h?this.h.next=z:this.g=z,this.h=z}}var ee=new k(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,q=!1,G=new ae,Z=()=>{const h=o.Promise.resolve(void 0);ue=()=>{h.then(ce)}};var ce=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(A){b(A)}var _=ee;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}q=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};o.addEventListener("test",A,_),o.removeEventListener("test",A,_)}catch{}return h}();function B(h,_){if(Y.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,z=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(O){e:{try{I(_.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(_=null)}}else A=="mouseover"?_=h.fromElement:A=="mouseout"&&(_=h.toElement);this.relatedTarget=_,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Q[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&B.aa.h.call(this)}}x(B,Y);var Q={2:"touch",3:"pen",4:"mouse"};B.prototype.h=function(){B.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function _e(h,_,A,z,oe){this.listener=h,this.proxy=null,this.src=_,this.type=A,this.capture=!!z,this.ha=oe,this.key=++Ee,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h){this.src=h,this.g={},this.h=0}De.prototype.add=function(h,_,A,z,oe){var he=h.toString();h=this.g[he],h||(h=this.g[he]=[],this.h++);var Ae=tt(h,_,z,oe);return-1<Ae?(_=h[Ae],A||(_.fa=!1)):(_=new _e(_,this.src,he,!!z,oe),_.fa=A,h.push(_)),_};function H(h,_){var A=_.type;if(A in h.g){var z=h.g[A],oe=Array.prototype.indexOf.call(z,_,void 0),he;(he=0<=oe)&&Array.prototype.splice.call(z,oe,1),he&&(ge(_),h.g[A].length==0&&(delete h.g[A],h.h--))}}function tt(h,_,A,z){for(var oe=0;oe<h.length;++oe){var he=h[oe];if(!he.da&&he.listener==_&&he.capture==!!A&&he.ha==z)return oe}return-1}var He="closure_lm_"+(1e6*Math.random()|0),Je={};function Fe(h,_,A,z,oe){if(Array.isArray(_)){for(var he=0;he<_.length;he++)Fe(h,_[he],A,z,oe);return null}return A=hr(A),h&&h[de]?h.K(_,A,c(z)?!!z.capture:!1,oe):Se(h,_,A,!1,z,oe)}function Se(h,_,A,z,oe,he){if(!_)throw Error("Invalid event type");var Ae=c(oe)?!!oe.capture:!!oe,wt=an(h);if(wt||(h[He]=wt=new De(h)),A=wt.add(_,A,z,Ae,he),A.proxy)return A;if(z=vt(),A.proxy=z,z.src=h,z.listener=A,h.addEventListener)K||(oe=Ae),oe===void 0&&(oe=!1),h.addEventListener(_.toString(),z,oe);else if(h.attachEvent)h.attachEvent(sn(_.toString()),z);else if(h.addListener&&h.removeListener)h.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return A}function vt(){function h(A){return _.call(h.src,h.listener,A)}const _=zs;return h}function Yt(h,_,A,z,oe){if(Array.isArray(_))for(var he=0;he<_.length;he++)Yt(h,_[he],A,z,oe);else z=c(z)?!!z.capture:!!z,A=hr(A),h&&h[de]?(h=h.i,_=String(_).toString(),_ in h.g&&(he=h.g[_],A=tt(he,A,z,oe),-1<A&&(ge(he[A]),Array.prototype.splice.call(he,A,1),he.length==0&&(delete h.g[_],h.h--)))):h&&(h=an(h))&&(_=h.g[_.toString()],h=-1,_&&(h=tt(_,A,z,oe)),(A=-1<h?_[h]:null)&&fr(A))}function fr(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[de])H(_.i,h);else{var A=h.type,z=h.proxy;_.removeEventListener?_.removeEventListener(A,z,h.capture):_.detachEvent?_.detachEvent(sn(A),z):_.addListener&&_.removeListener&&_.removeListener(z),(A=an(_))?(H(A,h),A.h==0&&(A.src=null,_[He]=null)):ge(h)}}}function sn(h){return h in Je?Je[h]:Je[h]="on"+h}function zs(h,_){if(h.da)h=!0;else{_=new B(_,this);var A=h.listener,z=h.ha||h.src;h.fa&&fr(h),h=A.call(z,_)}return h}function an(h){return h=h[He],h instanceof De?h:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function hr(h){return typeof h=="function"?h:(h[St]||(h[St]=function(_){return h.handleEvent(_)}),h[St])}function yt(){j.call(this),this.i=new De(this),this.M=this,this.F=null}x(yt,j),yt.prototype[de]=!0,yt.prototype.removeEventListener=function(h,_,A,z){Yt(this,h,_,A,z)};function At(h,_){var A,z=h.F;if(z)for(A=[];z;z=z.F)A.push(z);if(h=h.M,z=_.type||_,typeof _=="string")_=new Y(_,h);else if(_ instanceof Y)_.target=_.target||h;else{var oe=_;_=new Y(z,h),C(_,oe)}if(oe=!0,A)for(var he=A.length-1;0<=he;he--){var Ae=_.g=A[he];oe=dt(Ae,z,!0,_)&&oe}if(Ae=_.g=h,oe=dt(Ae,z,!0,_)&&oe,oe=dt(Ae,z,!1,_)&&oe,A)for(he=0;he<A.length;he++)Ae=_.g=A[he],oe=dt(Ae,z,!1,_)&&oe}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var A=h.g[_],z=0;z<A.length;z++)ge(A[z]);delete h.g[_],h.h--}}this.F=null},yt.prototype.K=function(h,_,A,z){return this.i.add(String(h),_,!1,A,z)},yt.prototype.L=function(h,_,A,z){return this.i.add(String(h),_,!0,A,z)};function dt(h,_,A,z){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var oe=!0,he=0;he<_.length;++he){var Ae=_[he];if(Ae&&!Ae.da&&Ae.capture==A){var wt=Ae.listener,yr=Ae.ha||Ae.src;Ae.fa&&H(h.i,Ae),oe=wt.call(yr,z)!==!1&&oe}}return oe&&!z.defaultPrevented}function Ot(h,_,A){if(typeof h=="function")A&&(h=m(h,A));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:o.setTimeout(h,_||0)}function Ve(h){h.g=Ot(()=>{h.g=null,h.i&&(h.i=!1,Ve(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class _t extends j{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(h){j.call(this),this.h=h,this.g={}}x(Xt,j);var ft=[];function _n(h){F(h.g,function(_,A){this.g.hasOwnProperty(A)&&fr(_)},h),h.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),_n(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hs=o.JSON.stringify,go=o.JSON.parse,Dl=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Gs(){}Gs.prototype.h=null;function ws(h){return h.h||(h.h=h.i())}function Ia(){}var Qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ks(){Y.call(this,"d")}x(Ks,Y);function Es(){Y.call(this,"c")}x(Es,Y);var Fn={},xo=null;function qs(){return xo=xo||new yt}Fn.La="serverreachability";function Ys(h){Y.call(this,Fn.La,h)}x(Ys,Y);function On(h){const _=qs();At(_,new Ys(_))}Fn.STAT_EVENT="statevent";function vo(h,_){Y.call(this,Fn.STAT_EVENT,h),this.stat=_}x(vo,Y);function sr(h){const _=qs();At(_,new vo(_,h))}Fn.Ma="timingevent";function X(h,_){Y.call(this,Fn.Ma,h),this.size=_}x(X,Y);function re(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},_)}function le(){this.g=!0}le.prototype.xa=function(){this.g=!1};function xe(h,_,A,z,oe,he){h.info(function(){if(h.g)if(he)for(var Ae="",wt=he.split("&"),yr=0;yr<wt.length;yr++){var ct=wt[yr].split("=");if(1<ct.length){var br=ct[0];ct=ct[1];var Rr=br.split("_");Ae=2<=Rr.length&&Rr[1]=="type"?Ae+(br+"="+ct+"&"):Ae+(br+"=redacted&")}}else Ae=null;else Ae=he;return"XMLHTTP REQ ("+z+") [attempt "+oe+"]: "+_+`
`+A+`
`+Ae})}function Ie(h,_,A,z,oe,he,Ae){h.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+oe+"]: "+_+`
`+A+`
`+he+" "+Ae})}function N(h,_,A,z){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+D(h,A)+(z?" "+z:"")})}function W(h,_){h.info(function(){return"TIMEOUT: "+_})}le.prototype.info=function(){};function D(h,_){if(!h.g)return _;if(!_)return null;try{var A=JSON.parse(_);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var z=A[h];if(!(2>z.length)){var oe=z[1];if(Array.isArray(oe)&&!(1>oe.length)){var he=oe[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Ae=1;Ae<oe.length;Ae++)oe[Ae]=""}}}}return Hs(A)}catch{return _}}var M={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},L={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},V;function J(){}x(J,Gs),J.prototype.g=function(){return new XMLHttpRequest},J.prototype.i=function(){return{}},V=new J;function ie(h,_,A,z){this.j=h,this.i=_,this.l=A,this.R=z||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new se}function se(){this.i=null,this.g="",this.h=!1}var ne={},te={};function me(h,_,A){h.L=1,h.v=nf(Xs(_)),h.m=A,h.P=!0,Te(h,null)}function Te(h,_){h.F=Date.now(),ke(h),h.A=Xs(h.v);var A=h.A,z=h.R;Array.isArray(z)||(z=[String(z)]),Lv(A.i,"t",z),h.C=0,A=h.j.J,h.h=new se,h.g=t1(h.j,A?_:null,!h.m),0<h.O&&(h.M=new _t(m(h.Y,h,h.g),h.O)),_=h.U,A=h.g,z=h.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(ft[0]=oe.toString()),oe=ft);for(var he=0;he<oe.length;he++){var Ae=Fe(A,oe[he],z||_.handleEvent,!1,_.h||_);if(!Ae)break;_.g[Ae.key]=Ae}_=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),On(),xe(h.i,h.u,h.A,h.l,h.R,h.m)}ie.prototype.ca=function(h){h=h.target;const _=this.M;_&&Qs(h)==3?_.j():this.Y(h)},ie.prototype.Y=function(h){try{if(h==this.g)e:{const Rr=Qs(this.g);var _=this.g.Ba();const wo=this.g.Z();if(!(3>Rr)&&(Rr!=3||this.g&&(this.h.h||this.g.oa()||zv(this.g)))){this.J||Rr!=4||_==7||(_==8||0>=wo?On(3):On(2)),it(this);var A=this.g.Z();this.X=A;t:if(Ne(this)){var z=zv(this.g);h="";var oe=z.length,he=Qs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mt(this),Ye(this);var Ae="";break t}this.h.i=new o.TextDecoder}for(_=0;_<oe;_++)this.h.h=!0,h+=this.h.i.decode(z[_],{stream:!(he&&_==oe-1)});z.length=0,this.h.g+=h,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=A==200,Ie(this.i,this.u,this.A,this.l,this.R,Rr,A),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,yr=this.g;if((wt=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(wt)){var ct=wt;break t}}ct=null}if(A=ct)N(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,on(this,A);else{this.o=!1,this.s=3,sr(12),mt(this),Ye(this);break e}}if(this.P){A=!0;let Jn;for(;!this.J&&this.C<Ae.length;)if(Jn=ve(this,Ae),Jn==te){Rr==4&&(this.s=4,sr(14),A=!1),N(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==ne){this.s=4,sr(15),N(this.i,this.l,Ae,"[Invalid Chunk]"),A=!1;break}else N(this.i,this.l,Jn,null),on(this,Jn);if(Ne(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rr!=4||Ae.length!=0||this.h.h||(this.s=1,sr(16),A=!1),this.o=this.o&&A,!A)N(this.i,this.l,Ae,"[Invalid Chunked Response]"),mt(this),Ye(this);else if(0<Ae.length&&!this.W){this.W=!0;var br=this.j;br.g==this&&br.ba&&!br.M&&(br.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),y0(br),br.M=!0,sr(11))}}else N(this.i,this.l,Ae,null),on(this,Ae);Rr==4&&mt(this),this.o&&!this.J&&(Rr==4?Qv(this.j,this):(this.o=!1,ke(this)))}else dN(this.g),A==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,sr(12)):(this.s=0,sr(13)),mt(this),Ye(this)}}}catch{}finally{}};function Ne(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ve(h,_){var A=h.C,z=_.indexOf(`
`,A);return z==-1?te:(A=Number(_.substring(A,z)),isNaN(A)?ne:(z+=1,z+A>_.length?te:(_=_.slice(z,z+A),h.C=z+A,_)))}ie.prototype.cancel=function(){this.J=!0,mt(this)};function ke(h){h.S=Date.now()+h.I,Oe(h,h.I)}function Oe(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=re(m(h.ba,h),_)}function it(h){h.B&&(o.clearTimeout(h.B),h.B=null)}ie.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(W(this.i,this.A),this.L!=2&&(On(),sr(17)),mt(this),this.s=2,Ye(this)):Oe(this,this.S-h)};function Ye(h){h.j.G==0||h.J||Qv(h.j,h)}function mt(h){it(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,_n(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function on(h,_){try{var A=h.j;if(A.G!=0&&(A.g==h||rt(A.h,h))){if(!h.K&&rt(A.h,h)&&A.G==3){try{var z=A.Da.g.parse(_)}catch{z=null}if(Array.isArray(z)&&z.length==3){var oe=z;if(oe[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)uf(A),lf(A);else break e;v0(A),sr(18)}}else A.za=oe[1],0<A.za-A.T&&37500>oe[2]&&A.F&&A.v==0&&!A.C&&(A.C=re(m(A.Za,A),6e3));if(1>=Mn(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ti(A,11)}else if((h.K||A.g==h)&&uf(A),!E(_))for(oe=A.Da.g.parse(_),_=0;_<oe.length;_++){let ct=oe[_];if(A.T=ct[0],ct=ct[1],A.G==2)if(ct[0]=="c"){A.K=ct[1],A.ia=ct[2];const br=ct[3];br!=null&&(A.la=br,A.j.info("VER="+A.la));const Rr=ct[4];Rr!=null&&(A.Aa=Rr,A.j.info("SVER="+A.Aa));const wo=ct[5];wo!=null&&typeof wo=="number"&&0<wo&&(z=1.5*wo,A.L=z,A.j.info("backChannelRequestTimeoutMs_="+z)),z=A;const Jn=h.g;if(Jn){const hf=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hf){var he=z.h;he.g||hf.indexOf("spdy")==-1&&hf.indexOf("quic")==-1&&hf.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Ts(he,he.h),he.h=null))}if(z.D){const _0=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;_0&&(z.ya=_0,It(z.I,z.D,_0))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),z=A;var Ae=h;if(z.qa=e1(z,z.J?z.ia:null,z.W),Ae.K){Fl(z.h,Ae);var wt=Ae,yr=z.L;yr&&(wt.I=yr),wt.B&&(it(wt),ke(wt)),z.g=Ae}else Yv(z);0<A.i.length&&cf(A)}else ct[0]!="stop"&&ct[0]!="close"||Ti(A,7);else A.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Ti(A,7):x0(A):ct[0]!="noop"&&A.l&&A.l.ta(ct),A.v=0)}}On(4)}catch{}}var Ge=class{constructor(h,_){this.g=h,this.map=_}};function ht(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Mn(h){return h.h?1:h.g?h.g.size:0}function rt(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ts(h,_){h.g?h.g.add(_):h.h=_}function Fl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}ht.prototype.cancel=function(){if(this.i=ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ef(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const A of h.g.values())_=_.concat(A.D);return _}return g(h.i)}function JI(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var _=[],A=h.length,z=0;z<A;z++)_.push(h[z]);return _}_=[],A=0;for(z in h)_[A++]=h[z];return _}function ZI(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var _=[];h=h.length;for(var A=0;A<h;A++)_.push(A);return _}_=[],A=0;for(const z in h)_[A++]=z;return _}}}function Rv(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var A=ZI(h),z=JI(h),oe=z.length,he=0;he<oe;he++)_.call(void 0,z[he],A&&A[he],h)}var Pv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eN(h,_){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var z=h[A].indexOf("="),oe=null;if(0<=z){var he=h[A].substring(0,z);oe=h[A].substring(z+1)}else he=h[A];_(he,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Ei(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ei){this.h=h.h,tf(this,h.j),this.o=h.o,this.g=h.g,rf(this,h.s),this.l=h.l;var _=h.i,A=new Ll;A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),Dv(this,A),this.m=h.m}else h&&(_=String(h).match(Pv))?(this.h=!1,tf(this,_[1]||"",!0),this.o=Ol(_[2]||""),this.g=Ol(_[3]||"",!0),rf(this,_[4]),this.l=Ol(_[5]||"",!0),Dv(this,_[6]||"",!0),this.m=Ol(_[7]||"")):(this.h=!1,this.i=new Ll(null,this.h))}Ei.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Ml(_,Fv,!0),":");var A=this.g;return(A||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ml(_,Fv,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Ml(A,A.charAt(0)=="/"?nN:rN,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Ml(A,aN)),h.join("")};function Xs(h){return new Ei(h)}function tf(h,_,A){h.j=A?Ol(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function rf(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Dv(h,_,A){_ instanceof Ll?(h.i=_,iN(h.i,h.h)):(A||(_=Ml(_,sN)),h.i=new Ll(_,h.h))}function It(h,_,A){h.i.set(_,A)}function nf(h){return It(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ol(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ml(h,_,A){return typeof h=="string"?(h=encodeURI(h).replace(_,tN),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tN(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fv=/[#\/\?@]/g,rN=/[#\?:]/g,nN=/[#\?]/g,sN=/[#\?@]/g,aN=/#/g;function Ll(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Na(h){h.g||(h.g=new Map,h.h=0,h.i&&eN(h.i,function(_,A){h.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}e=Ll.prototype,e.add=function(h,_){Na(this),this.i=null,h=yo(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(_),this.h+=1,this};function Ov(h,_){Na(h),_=yo(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Mv(h,_){return Na(h),_=yo(h,_),h.g.has(_)}e.forEach=function(h,_){Na(this),this.g.forEach(function(A,z){A.forEach(function(oe){h.call(_,oe,z,this)},this)},this)},e.na=function(){Na(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),A=[];for(let z=0;z<_.length;z++){const oe=h[z];for(let he=0;he<oe.length;he++)A.push(_[z])}return A},e.V=function(h){Na(this);let _=[];if(typeof h=="string")Mv(this,h)&&(_=_.concat(this.g.get(yo(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)_=_.concat(h[A])}return _},e.set=function(h,_){return Na(this),this.i=null,h=yo(this,h),Mv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Lv(h,_,A){Ov(h,_),0<A.length&&(h.i=null,h.g.set(yo(h,_),g(A)),h.h+=A.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var A=0;A<_.length;A++){var z=_[A];const he=encodeURIComponent(String(z)),Ae=this.V(z);for(z=0;z<Ae.length;z++){var oe=he;Ae[z]!==""&&(oe+="="+encodeURIComponent(String(Ae[z]))),h.push(oe)}}return this.i=h.join("&")};function yo(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function iN(h,_){_&&!h.j&&(Na(h),h.i=null,h.g.forEach(function(A,z){var oe=z.toLowerCase();z!=oe&&(Ov(this,z),Lv(this,oe,A))},h)),h.j=_}function oN(h,_){const A=new le;if(o.Image){const z=new Image;z.onload=p(Ca,A,"TestLoadImage: loaded",!0,_,z),z.onerror=p(Ca,A,"TestLoadImage: error",!1,_,z),z.onabort=p(Ca,A,"TestLoadImage: abort",!1,_,z),z.ontimeout=p(Ca,A,"TestLoadImage: timeout",!1,_,z),o.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=h}else _(!1)}function lN(h,_){const A=new le,z=new AbortController,oe=setTimeout(()=>{z.abort(),Ca(A,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:z.signal}).then(he=>{clearTimeout(oe),he.ok?Ca(A,"TestPingServer: ok",!0,_):Ca(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(oe),Ca(A,"TestPingServer: error",!1,_)})}function Ca(h,_,A,z,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),z(A)}catch{}}function cN(){this.g=new Dl}function uN(h,_,A){const z=A||"";try{Rv(h,function(oe,he){let Ae=oe;c(oe)&&(Ae=Hs(oe)),_.push(z+he+"="+encodeURIComponent(Ae))})}catch(oe){throw _.push(z+"type="+encodeURIComponent("_badmap")),oe}}function sf(h){this.l=h.Ub||null,this.j=h.eb||!1}x(sf,Gs),sf.prototype.g=function(){return new af(this.l,this.j)},sf.prototype.i=function(h){return function(){return h}}({});function af(h,_){yt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(af,yt),e=af.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ul(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||o).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jl(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jv(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function jv(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?jl(this):Ul(this),this.readyState==3&&jv(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,jl(this))},e.Qa=function(h){this.g&&(this.response=h,jl(this))},e.ga=function(){this.g&&jl(this)};function jl(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ul(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=_.next();return h.join(`\r
`)};function Ul(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(af.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Uv(h){let _="";return F(h,function(A,z){_+=z,_+=":",_+=A,_+=`\r
`}),_}function g0(h,_,A){e:{for(z in A){var z=!1;break e}z=!0}z||(A=Uv(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):It(h,_,A))}function Vt(h){yt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Vt,yt);var fN=/^https?$/i,hN=["POST","PUT"];e=Vt.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,A,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():V.g(),this.v=this.o?ws(this.o):ws(V),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(he){Vv(this,he);return}if(h=A||"",A=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var oe in z)A.set(oe,z[oe]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const he of z.keys())A.set(he,z.get(he));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(A.keys()).find(he=>he.toLowerCase()=="content-type"),oe=o.FormData&&h instanceof o.FormData,!(0<=Array.prototype.indexOf.call(hN,_,void 0))||z||oe||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Ae]of A)this.g.setRequestHeader(he,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$v(this),this.u=!0,this.g.send(h),this.u=!1}catch(he){Vv(this,he)}};function Vv(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Bv(h),of(h)}function Bv(h){h.A||(h.A=!0,At(h,"complete"),At(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,At(this,"complete"),At(this,"abort"),of(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),of(this,!0)),Vt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wv(this):this.bb())},e.bb=function(){Wv(this)};function Wv(h){if(h.h&&typeof i<"u"&&(!h.v[1]||Qs(h)!=4||h.Z()!=2)){if(h.u&&Qs(h)==4)Ot(h.Ea,0,h);else if(At(h,"readystatechange"),Qs(h)==4){h.h=!1;try{const Ae=h.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var z;if(z=Ae===0){var oe=String(h.D).match(Pv)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),z=!fN.test(oe?oe.toLowerCase():"")}A=z}if(A)At(h,"complete"),At(h,"success");else{h.m=6;try{var he=2<Qs(h)?h.g.statusText:""}catch{he=""}h.l=he+" ["+h.Z()+"]",Bv(h)}}finally{of(h)}}}}function of(h,_){if(h.g){$v(h);const A=h.g,z=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||At(h,"ready");try{A.onreadystatechange=z}catch{}}}function $v(h){h.I&&(o.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function Qs(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<Qs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),go(_)}};function zv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function dN(h){const _={};h=(h.g&&2<=Qs(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<h.length;z++){if(E(h[z]))continue;var A=P(h[z]);const oe=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const he=_[oe]||[];_[oe]=he,he.push(A)}v(_,function(z){return z.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vl(h,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||_}function Hv(h){this.Aa=0,this.i=[],this.j=new le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vl("baseRetryDelayMs",5e3,h),this.cb=Vl("retryDelaySeedMs",1e4,h),this.Wa=Vl("forwardChannelMaxRetries",2,h),this.wa=Vl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ht(h&&h.concurrentRequestLimit),this.Da=new cN,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Hv.prototype,e.la=8,e.G=1,e.connect=function(h,_,A,z){sr(0),this.W=h,this.H=_||{},A&&z!==void 0&&(this.H.OSID=A,this.H.OAID=z),this.F=this.X,this.I=e1(this,null,this.W),cf(this)};function x0(h){if(Gv(h),h.G==3){var _=h.U++,A=Xs(h.I);if(It(A,"SID",h.K),It(A,"RID",_),It(A,"TYPE","terminate"),Bl(h,A),_=new ie(h,h.j,_),_.L=2,_.v=nf(Xs(A)),A=!1,o.navigator&&o.navigator.sendBeacon)try{A=o.navigator.sendBeacon(_.v.toString(),"")}catch{}!A&&o.Image&&(new Image().src=_.v,A=!0),A||(_.g=t1(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ke(_)}Zv(h)}function lf(h){h.g&&(y0(h),h.g.cancel(),h.g=null)}function Gv(h){lf(h),h.u&&(o.clearTimeout(h.u),h.u=null),uf(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&o.clearTimeout(h.s),h.s=null)}function cf(h){if(!vr(h.h)&&!h.s){h.s=!0;var _=h.Ga;ue||Z(),q||(ue(),q=!0),G.add(_,h),h.B=0}}function mN(h,_){return Mn(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=re(m(h.Ga,h,_),Jv(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const oe=new ie(this,this.j,h);let he=this.o;if(this.S&&(he?(he=T(he),C(he,this.S)):he=this.S),this.m!==null||this.O||(oe.H=he,he=null),this.P)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var z=this.i[A];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(_+=z,4096<_){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=qv(this,oe,_),A=Xs(this.I),It(A,"RID",h),It(A,"CVER",22),this.D&&It(A,"X-HTTP-Session-Id",this.D),Bl(this,A),he&&(this.O?_="headers="+encodeURIComponent(String(Uv(he)))+"&"+_:this.m&&g0(A,this.m,he)),Ts(this.h,oe),this.Ua&&It(A,"TYPE","init"),this.P?(It(A,"$req",_),It(A,"SID","null"),oe.T=!0,me(oe,A,null)):me(oe,A,_),this.G=2}}else this.G==3&&(h?Kv(this,h):this.i.length==0||vr(this.h)||Kv(this))};function Kv(h,_){var A;_?A=_.l:A=h.U++;const z=Xs(h.I);It(z,"SID",h.K),It(z,"RID",A),It(z,"AID",h.T),Bl(h,z),h.m&&h.o&&g0(z,h.m,h.o),A=new ie(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),_&&(h.i=_.D.concat(h.i)),_=qv(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ts(h.h,A),me(A,z,_)}function Bl(h,_){h.H&&F(h.H,function(A,z){It(_,z,A)}),h.l&&Rv({},function(A,z){It(_,z,A)})}function qv(h,_,A){A=Math.min(h.i.length,A);var z=h.l?m(h.l.Na,h.l,h):null;e:{var oe=h.i;let he=-1;for(;;){const Ae=["count="+A];he==-1?0<A?(he=oe[0].g,Ae.push("ofs="+he)):he=0:Ae.push("ofs="+he);let wt=!0;for(let yr=0;yr<A;yr++){let ct=oe[yr].g;const br=oe[yr].map;if(ct-=he,0>ct)he=Math.max(0,oe[yr].g-100),wt=!1;else try{uN(br,Ae,"req"+ct+"_")}catch{z&&z(br)}}if(wt){z=Ae.join("&");break e}}}return h=h.i.splice(0,A),_.D=h,z}function Yv(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ue||Z(),q||(ue(),q=!0),G.add(_,h),h.v=0}}function v0(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=re(m(h.Fa,h),Jv(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Xv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=re(m(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sr(10),lf(this),Xv(this))};function y0(h){h.A!=null&&(o.clearTimeout(h.A),h.A=null)}function Xv(h){h.g=new ie(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xs(h.qa);It(_,"RID","rpc"),It(_,"SID",h.K),It(_,"AID",h.T),It(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&It(_,"TO",h.ja),It(_,"TYPE","xmlhttp"),Bl(h,_),h.m&&h.o&&g0(_,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=nf(Xs(_)),A.m=null,A.P=!0,Te(A,h)}e.Za=function(){this.C!=null&&(this.C=null,lf(this),v0(this),sr(19))};function uf(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function Qv(h,_){var A=null;if(h.g==_){uf(h),y0(h),h.g=null;var z=2}else if(rt(h.h,_))A=_.D,Fl(h.h,_),z=1;else return;if(h.G!=0){if(_.o)if(z==1){A=_.m?_.m.length:0,_=Date.now()-_.F;var oe=h.B;z=qs(),At(z,new X(z,A)),cf(h)}else Yv(h);else if(oe=_.s,oe==3||oe==0&&0<_.X||!(z==1&&mN(h,_)||z==2&&v0(h)))switch(A&&0<A.length&&(_=h.h,_.i=_.i.concat(A)),oe){case 1:Ti(h,5);break;case 4:Ti(h,10);break;case 3:Ti(h,6);break;default:Ti(h,2)}}}function Jv(h,_){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*_}function Ti(h,_){if(h.j.info("Error code "+_),_==2){var A=m(h.fb,h),z=h.Xa;const oe=!z;z=new Ei(z||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||tf(z,"https"),nf(z),oe?oN(z.toString(),A):lN(z.toString(),A)}else sr(2);h.G=0,h.l&&h.l.sa(_),Zv(h),Gv(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),sr(2)):(this.j.info("Failed to ping google.com"),sr(1))};function Zv(h){if(h.G=0,h.ka=[],h.l){const _=ef(h.h);(_.length!=0||h.i.length!=0)&&(w(h.ka,_),w(h.ka,h.i),h.h.i.length=0,g(h.i),h.i.length=0),h.l.ra()}}function e1(h,_,A){var z=A instanceof Ei?Xs(A):new Ei(A);if(z.g!="")_&&(z.g=_+"."+z.g),rf(z,z.s);else{var oe=o.location;z=oe.protocol,_=_?_+"."+oe.hostname:oe.hostname,oe=+oe.port;var he=new Ei(null);z&&tf(he,z),_&&(he.g=_),oe&&rf(he,oe),A&&(he.l=A),z=he}return A=h.D,_=h.ya,A&&_&&It(z,A,_),It(z,"VER",h.la),Bl(h,z),z}function t1(h,_,A){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Vt(new sf({eb:A})):new Vt(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function r1(){}e=r1.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ff(){}ff.prototype.g=function(h,_){return new wn(h,_)};function wn(h,_){yt.call(this),this.g=new Hv(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!E(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!E(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new _o(this)}x(wn,yt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){x0(this.g)},wn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=Hs(h),h=A);_.i.push(new Ge(_.Ya++,h)),_.G==3&&cf(_)},wn.prototype.N=function(){this.g.l=null,delete this.j,x0(this.g),delete this.g,wn.aa.N.call(this)};function n1(h){Ks.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const A in _){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(n1,Ks);function s1(){Es.call(this),this.status=1}x(s1,Es);function _o(h){this.g=h}x(_o,r1),_o.prototype.ua=function(){At(this.g,"a")},_o.prototype.ta=function(h){At(this.g,new n1(h))},_o.prototype.sa=function(h){At(this.g,new s1)},_o.prototype.ra=function(){At(this.g,"b")},ff.prototype.createWebChannel=ff.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Uk=function(){return new ff},jk=function(){return qs()},Lk=Fn,Sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},M.NO_ERROR=0,M.TIMEOUT=8,M.HTTP_ERROR=6,ch=M,L.COMPLETE="complete",Mk=L,Ia.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",yt.prototype.listen=yt.prototype.K,ac=Ia,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,Ok=Vt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const l_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new rx("@firebase/firestore");function Zl(){return Qi.logLevel}function Re(e,...t){if(Qi.logLevel<=Ze.DEBUG){const r=t.map(px);Qi.debug(`Firestore (${Il}): ${e}`,...r)}}function _a(e,...t){if(Qi.logLevel<=Ze.ERROR){const r=t.map(px);Qi.error(`Firestore (${Il}): ${e}`,...r)}}function dl(e,...t){if(Qi.logLevel<=Ze.WARN){const r=t.map(px);Qi.warn(`Firestore (${Il}): ${e}`,...r)}}function px(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(e="Unexpected state"){const t=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: `+e;throw _a(t),new Error(t)}function xt(e,t){e||Ue()}function $e(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends _s{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Mr.UNAUTHENTICATED))}shutdown(){}}class nF{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sF{constructor(t){this.t=t,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){xt(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ca,t.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ca)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(xt(typeof n.accessToken=="string"),new Vk(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return xt(t===null||typeof t=="string"),new Mr(t)}}class aF{constructor(t,r,n){this.l=t,this.h=r,this.P=n,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iF{constructor(t,r,n){this.l=t,this.h=r,this.P=n}getToken(){return Promise.resolve(new aF(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oF{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lF{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){xt(this.o===void 0);const n=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.R;return this.R=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>n(a))};const s=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(xt(typeof r.token=="string"),this.R=r.token,new oF(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const s=cF(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=t.charAt(s[a]%t.length))}return n}}function ut(e,t){return e<t?-1:e>t?1:0}function ml(e,t,r){return e.length===t.length&&e.every((n,s)=>r(n,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new be(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new be(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new be(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new be(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return cr.fromMillis(Date.now())}static fromDate(t){return cr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*r));return new cr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Be(t)}static min(){return new Be(new cr(0,0))}static max(){return new Be(new cr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t,r,n){r===void 0?r=0:r>t.length&&Ue(),n===void 0?n=t.length-r:n>t.length-r&&Ue(),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return su.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof su?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let s=0;s<n;s++){const a=t.get(s),i=r.get(s);if(a<i)return-1;if(a>i)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Ct extends su{construct(t,r,n){return new Ct(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new be(pe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Ct(r)}static emptyPath(){return new Ct([])}}const uF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends su{construct(t,r,n){return new Tr(t,r,n)}static isValidIdentifier(t){return uF.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tr(["__name__"])}static fromServerFormat(t){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new be(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<t.length;){const o=t[s];if(o==="\\"){if(s+1===t.length)throw new be(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new be(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(n+=o,s++):(a(),s++)}if(a(),i)throw new be(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Tr(r)}static emptyPath(){return new Tr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.path=t}static fromPath(t){return new Pe(Ct.fromString(t))}static fromName(t){return new Pe(Ct.fromString(t).popFirst(5))}static empty(){return new Pe(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ct.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ct.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Pe(new Ct(t.slice()))}}function fF(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(n===1e9?new cr(r+1,0):new cr(r,n));return new fi(s,Pe.empty(),t)}function hF(e){return new fi(e.readTime,e.key,-1)}class fi{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new fi(Be.min(),Pe.empty(),-1)}static max(){return new fi(Be.max(),Pe.empty(),-1)}}function dF(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=Pe.comparator(e.documentKey,t.documentKey),r!==0?r:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(e){if(e.code!==pe.FAILED_PRECONDITION||e.message!==mF)throw e;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new ye((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof ye?r:ye.resolve(r)}catch(r){return ye.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):ye.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):ye.reject(r)}static resolve(t){return new ye((r,n)=>{r(t)})}static reject(t){return new ye((r,n)=>{n(t)})}static waitFor(t){return new ye((r,n)=>{let s=0,a=0,i=!1;t.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&r()},l=>n(l))}),i=!0,a===s&&r()})}static or(t){let r=ye.resolve(!1);for(const n of t)r=r.next(s=>s?ye.resolve(s):n());return r}static forEach(t,r){const n=[];return t.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(t,r){return new ye((n,s)=>{const a=t.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const c=l;r(t[c]).next(f=>{i[c]=f,++o,o===a&&n(i)},f=>s(f))}})}static doWhile(t,r){return new ye((n,s)=>{const a=()=>{t()===!0?r().next(()=>{a()},s):n()};a()})}}function gF(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Mu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}gx.oe=-1;function Kd(e){return e==null}function Qh(e){return e===0&&1/e==-1/0}function xF(e){return typeof e=="number"&&Number.isInteger(e)&&!Qh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function io(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Wk(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t,r){this.comparator=t,this.root=r||wr.EMPTY}insert(t,r){return new Ut(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(t){return new Ut(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wr.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Df(this.root,t,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Df(this.root,t,this.comparator,!0)}}class Df{constructor(t,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=r?n(t.key,r):1,r&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wr{constructor(t,r,n,s,a){this.key=t,this.value=r,this.color=n??wr.RED,this.left=s??wr.EMPTY,this.right=a??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,s,a){return new wr(t??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let s=this;const a=n(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,s=this;if(r(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(t,s.key)===0){if(s.right.isEmpty())return wr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const t=this.left.check();if(t!==this.right.check())throw Ue();return t+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1;wr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(t,r,n,s,a){return this}insert(t,r,n){return new wr(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t){this.comparator=t,this.data=new Ut(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;r(s.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new u_(this.data.getIterator())}getIteratorFrom(t){return new u_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Sr)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Sr(this.comparator);return r.data=t,r}}class u_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.fields=t,t.sort(Tr.comparator)}static empty(){return new In([])}unionWith(t){let r=new Sr(Tr.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new In(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return ml(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $k("Invalid base64 string: "+a):a}}(t);return new Cr(r)}static fromUint8Array(t){const r=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(t);return new Cr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const vF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(e){if(xt(!!e),typeof e=="string"){let t=0;const r=vF.exec(e);if(xt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),t=Number(s)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Kt(e.seconds),nanos:Kt(e.nanos)}}function Kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ji(e){return typeof e=="string"?Cr.fromBase64String(e):Cr.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function vx(e){const t=e.mapValue.fields.__previous_value__;return xx(t)?vx(t):t}function au(e){const t=hi(e.mapValue.fields.__local_write_time__.timestampValue);return new cr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(t,r,n,s,a,i,o,l,c){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class iu{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof iu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff={mapValue:{}};function Zi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xx(e)?4:wF(e)?9007199254740991:_F(e)?10:11:Ue()}function Ms(e,t){if(e===t)return!0;const r=Zi(e);if(r!==Zi(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return au(e).isEqual(au(t));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=hi(s.timestampValue),o=hi(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,a){return Ji(s.bytesValue).isEqual(Ji(a.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,a){return Kt(s.geoPointValue.latitude)===Kt(a.geoPointValue.latitude)&&Kt(s.geoPointValue.longitude)===Kt(a.geoPointValue.longitude)}(e,t);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Kt(s.integerValue)===Kt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=Kt(s.doubleValue),o=Kt(a.doubleValue);return i===o?Qh(i)===Qh(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return ml(e.arrayValue.values||[],t.arrayValue.values||[],Ms);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(c_(i)!==c_(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Ms(i[l],o[l])))return!1;return!0}(e,t);default:return Ue()}}function ou(e,t){return(e.values||[]).find(r=>Ms(r,t))!==void 0}function pl(e,t){if(e===t)return 0;const r=Zi(e),n=Zi(t);if(r!==n)return ut(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return function(a,i){const o=Kt(a.integerValue||a.doubleValue),l=Kt(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return f_(e.timestampValue,t.timestampValue);case 4:return f_(au(e),au(t));case 5:return ut(e.stringValue,t.stringValue);case 6:return function(a,i){const o=Ji(a),l=Ji(i);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let c=0;c<o.length&&c<l.length;c++){const f=ut(o[c],l[c]);if(f!==0)return f}return ut(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(a,i){const o=ut(Kt(a.latitude),Kt(i.latitude));return o!==0?o:ut(Kt(a.longitude),Kt(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return h_(e.arrayValue,t.arrayValue);case 10:return function(a,i){var o,l,c,f;const d=a.fields||{},m=i.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,g=ut(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return g!==0?g:h_(p,x)}(e.mapValue,t.mapValue);case 11:return function(a,i){if(a===Ff.mapValue&&i===Ff.mapValue)return 0;if(a===Ff.mapValue)return 1;if(i===Ff.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),c=i.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const m=ut(l[d],f[d]);if(m!==0)return m;const p=pl(o[l[d]],c[f[d]]);if(p!==0)return p}return ut(l.length,f.length)}(e.mapValue,t.mapValue);default:throw Ue()}}function f_(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const r=hi(e),n=hi(t),s=ut(r.seconds,n.seconds);return s!==0?s:ut(r.nanos,n.nanos)}function h_(e,t){const r=e.values||[],n=t.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=pl(r[s],n[s]);if(a)return a}return ut(r.length,n.length)}function gl(e){return Ap(e)}function Ap(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=hi(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Ji(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return Pe.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=Ap(a);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const i of n)a?a=!1:s+=",",s+=`${i}:${Ap(r.fields[i])}`;return s+"}"}(e.mapValue):Ue()}function d_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ip(e){return!!e&&"integerValue"in e}function yx(e){return!!e&&"arrayValue"in e}function m_(e){return!!e&&"nullValue"in e}function p_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uh(e){return!!e&&"mapValue"in e}function _F(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Tc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return io(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Tc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Tc(e.arrayValue.values[r]);return t}return Object.assign({},e)}function wF(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.value=t}static empty(){return new fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!uh(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tc(r)}setAll(t){let r=Tr.emptyPath(),n={},s=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}i?n[o.lastSegment()]=Tc(i):s.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(t){const r=this.field(t.popLast());uh(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Ms(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=r.mapValue.fields[t.get(n)];uh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(t,r,n){io(r,(s,a)=>t[s]=a);for(const s of n)delete t[s]}clone(){return new fn(Tc(this.value))}}function zk(e){const t=[];return io(e.fields,(r,n)=>{const s=new Tr([r]);if(uh(n)){const a=zk(n.mapValue).fields;if(a.length===0)t.push(s);else for(const i of a)t.push(s.child(i))}else t.push(s)}),new In(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,r,n,s,a,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(t){return new Ur(t,0,Be.min(),Be.min(),Be.min(),fn.empty(),0)}static newFoundDocument(t,r,n,s){return new Ur(t,1,r,Be.min(),n,s,0)}static newNoDocument(t,r){return new Ur(t,2,r,Be.min(),Be.min(),fn.empty(),0)}static newUnknownDocument(t,r){return new Ur(t,3,r,Be.min(),Be.min(),fn.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ur&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,r){this.position=t,this.inclusive=r}}function g_(e,t,r){let n=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(a.field.isKeyField()?n=Pe.comparator(Pe.fromName(i.referenceValue),r.key):n=pl(i,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function x_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!Ms(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t,r="asc"){this.field=t,this.dir=r}}function EF(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{}class nr extends Hk{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new kF(t,r,n):r==="array-contains"?new IF(t,n):r==="in"?new NF(t,n):r==="not-in"?new CF(t,n):r==="array-contains-any"?new bF(t,n):new nr(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new SF(t,n):new AF(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(pl(r,this.value)):r!==null&&Zi(this.value)===Zi(r)&&this.matchesComparison(pl(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xs extends Hk{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new xs(t,r)}matches(t){return Gk(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gk(e){return e.op==="and"}function Kk(e){return TF(e)&&Gk(e)}function TF(e){for(const t of e.filters)if(t instanceof xs)return!1;return!0}function Np(e){if(e instanceof nr)return e.field.canonicalString()+e.op.toString()+gl(e.value);if(Kk(e))return e.filters.map(t=>Np(t)).join(",");{const t=e.filters.map(r=>Np(r)).join(",");return`${e.op}(${t})`}}function qk(e,t){return e instanceof nr?function(n,s){return s instanceof nr&&n.op===s.op&&n.field.isEqual(s.field)&&Ms(n.value,s.value)}(e,t):e instanceof xs?function(n,s){return s instanceof xs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,i,o)=>a&&qk(i,s.filters[o]),!0):!1}(e,t):void Ue()}function Yk(e){return e instanceof nr?function(r){return`${r.field.canonicalString()} ${r.op} ${gl(r.value)}`}(e):e instanceof xs?function(r){return r.op.toString()+" {"+r.getFilters().map(Yk).join(" ,")+"}"}(e):"Filter"}class kF extends nr{constructor(t,r,n){super(t,r,n),this.key=Pe.fromName(n.referenceValue)}matches(t){const r=Pe.comparator(t.key,this.key);return this.matchesComparison(r)}}class SF extends nr{constructor(t,r){super(t,"in",r),this.keys=Xk("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class AF extends nr{constructor(t,r){super(t,"not-in",r),this.keys=Xk("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Xk(e,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Pe.fromName(n.referenceValue))}class IF extends nr{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return yx(r)&&ou(r.arrayValue,this.value)}}class NF extends nr{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&ou(this.value.arrayValue,r)}}class CF extends nr{constructor(t,r){super(t,"not-in",r)}matches(t){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!ou(this.value.arrayValue,r)}}class bF extends nr{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!yx(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ou(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(t,r=null,n=[],s=[],a=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.ue=null}}function v_(e,t=null,r=[],n=[],s=null,a=null,i=null){return new RF(e,t,r,n,s,a,i)}function _x(e){const t=$e(e);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>Np(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Kd(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>gl(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>gl(n)).join(",")),t.ue=r}return t.ue}function wx(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!EF(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!qk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!x_(e.startAt,t.startAt)&&x_(e.endAt,t.endAt)}function Cp(e){return Pe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,r=null,n=[],s=[],a=null,i="F",o=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PF(e,t,r,n,s,a,i,o){return new Lu(e,t,r,n,s,a,i,o)}function qd(e){return new Lu(e)}function y_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Qk(e){return e.collectionGroup!==null}function kc(e){const t=$e(e);if(t.ce===null){t.ce=[];const r=new Set;for(const a of t.explicitOrderBy)t.ce.push(a),r.add(a.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Sr(Tr.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(t).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||t.ce.push(new Zh(a,n))}),r.has(Tr.keyField().canonicalString())||t.ce.push(new Zh(Tr.keyField(),n))}return t.ce}function Ds(e){const t=$e(e);return t.le||(t.le=DF(t,kc(e))),t.le}function DF(e,t){if(e.limitType==="F")return v_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Zh(s.field,a)});const r=e.endAt?new Jh(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Jh(e.startAt.position,e.startAt.inclusive):null;return v_(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function bp(e,t){const r=e.filters.concat([t]);return new Lu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function Rp(e,t,r){return new Lu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Yd(e,t){return wx(Ds(e),Ds(t))&&e.limitType===t.limitType}function Jk(e){return`${_x(Ds(e))}|lt:${e.limitType}`}function So(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>Yk(s)).join(", ")}]`),Kd(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>gl(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>gl(s)).join(",")),`Target(${n})`}(Ds(e))}; limitType=${e.limitType})`}function Xd(e,t){return t.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Pe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(e,t)&&function(n,s){for(const a of kc(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(e,t)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(e,t)&&function(n,s){return!(n.startAt&&!function(i,o,l){const c=g_(i,o,l);return i.inclusive?c<=0:c<0}(n.startAt,kc(n),s)||n.endAt&&!function(i,o,l){const c=g_(i,o,l);return i.inclusive?c>=0:c>0}(n.endAt,kc(n),s))}(e,t)}function FF(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zk(e){return(t,r)=>{let n=!1;for(const s of kc(e)){const a=OF(s,t,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function OF(e,t,r){const n=e.field.isKeyField()?Pe.comparator(t.key,r.key):function(a,i,o){const l=i.data.field(a),c=o.data.field(a);return l!==null&&c!==null?pl(l,c):Ue()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,r]);s.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){io(this.inner,(r,n)=>{for(const[s,a]of n)t(s,a)})}isEmpty(){return Wk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new Ut(Pe.comparator);function wa(){return MF}const eS=new Ut(Pe.comparator);function ic(...e){let t=eS;for(const r of e)t=t.insert(r.key,r);return t}function tS(e){let t=eS;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Oi(){return Sc()}function rS(){return Sc()}function Sc(){return new Nl(e=>e.toString(),(e,t)=>e.isEqual(t))}const LF=new Ut(Pe.comparator),jF=new Sr(Pe.comparator);function Qe(...e){let t=jF;for(const r of e)t=t.add(r);return t}const UF=new Sr(ut);function VF(){return UF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(t)?"-0":t}}function nS(e){return{integerValue:""+e}}function sS(e,t){return xF(t)?nS(t):Ex(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function BF(e,t,r){return e instanceof lu?function(s,a){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&xx(a)&&(a=vx(a)),a&&(i.fields.__previous_value__=a),{mapValue:i}}(r,t):e instanceof cu?iS(e,t):e instanceof uu?oS(e,t):function(s,a){const i=aS(s,a),o=__(i)+__(s.Pe);return Ip(i)&&Ip(s.Pe)?nS(o):Ex(s.serializer,o)}(e,t)}function WF(e,t,r){return e instanceof cu?iS(e,t):e instanceof uu?oS(e,t):r}function aS(e,t){return e instanceof fu?function(n){return Ip(n)||function(a){return!!a&&"doubleValue"in a}(n)}(t)?t:{integerValue:0}:null}class lu extends Qd{}class cu extends Qd{constructor(t){super(),this.elements=t}}function iS(e,t){const r=lS(t);for(const n of e.elements)r.some(s=>Ms(s,n))||r.push(n);return{arrayValue:{values:r}}}class uu extends Qd{constructor(t){super(),this.elements=t}}function oS(e,t){let r=lS(t);for(const n of e.elements)r=r.filter(s=>!Ms(s,n));return{arrayValue:{values:r}}}class fu extends Qd{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function __(e){return Kt(e.integerValue||e.doubleValue)}function lS(e){return yx(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t,r){this.field=t,this.transform=r}}function $F(e,t){return e.field.isEqual(t.field)&&function(n,s){return n instanceof cu&&s instanceof cu||n instanceof uu&&s instanceof uu?ml(n.elements,s.elements,Ms):n instanceof fu&&s instanceof fu?Ms(n.Pe,s.Pe):n instanceof lu&&s instanceof lu}(e.transform,t.transform)}class zF{constructor(t,r){this.version=t,this.transformResults=r}}class Hn{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Hn}static exists(t){return new Hn(void 0,t)}static updateTime(t){return new Hn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Jd{}function uS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Tx(e.key,Hn.none()):new ju(e.key,e.data,Hn.none());{const r=e.data,n=fn.empty();let s=new Sr(Tr.comparator);for(let a of t.fields)if(!s.has(a)){let i=r.field(a);i===null&&a.length>1&&(a=a.popLast(),i=r.field(a)),i===null?n.delete(a):n.set(a,i),s=s.add(a)}return new _i(e.key,n,new In(s.toArray()),Hn.none())}}function HF(e,t,r){e instanceof ju?function(s,a,i){const o=s.value.clone(),l=E_(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof _i?function(s,a,i){if(!fh(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=E_(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(fS(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Ac(e,t,r,n){return e instanceof ju?function(a,i,o,l){if(!fh(a.precondition,i))return o;const c=a.value.clone(),f=T_(a.fieldTransforms,l,i);return c.setAll(f),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(e,t,r,n):e instanceof _i?function(a,i,o,l){if(!fh(a.precondition,i))return o;const c=T_(a.fieldTransforms,l,i),f=i.data;return f.setAll(fS(a)),f.setAll(c),i.convertToFoundDocument(i.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(e,t,r,n):function(a,i,o){return fh(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function GF(e,t){let r=null;for(const n of e.fieldTransforms){const s=t.data.field(n.field),a=aS(n.transform,s||null);a!=null&&(r===null&&(r=fn.empty()),r.set(n.field,a))}return r||null}function w_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ml(n,s,(a,i)=>$F(a,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ju extends Jd{constructor(t,r,n,s=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _i extends Jd{constructor(t,r,n,s,a=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function fS(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function E_(e,t,r){const n=new Map;xt(e.length===r.length);for(let s=0;s<r.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);n.set(a.field,WF(i,o,r[s]))}return n}function T_(e,t,r){const n=new Map;for(const s of e){const a=s.transform,i=r.data.field(s.field);n.set(s.field,BF(a,i,t))}return n}class Tx extends Jd{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KF extends Jd{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(t,r,n,s){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&HF(a,t,n[s])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Ac(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Ac(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=rS();return this.mutations.forEach(s=>{const a=t.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=r.has(s.key)?null:o;const l=uS(i,o);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Be.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Qe())}isEqual(t){return this.batchId===t.batchId&&ml(this.mutations,t.mutations,(r,n)=>w_(r,n))&&ml(this.baseMutations,t.baseMutations,(r,n)=>w_(r,n))}}class kx{constructor(t,r,n,s){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(t,r,n){xt(t.mutations.length===n.length);let s=function(){return LF}();const a=t.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,n[i].version);return new kx(t,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,nt;function QF(e){switch(e){default:return Ue();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function hS(e){if(e===void 0)return _a("GRPC error has no .code"),pe.UNKNOWN;switch(e){case Jt.OK:return pe.OK;case Jt.CANCELLED:return pe.CANCELLED;case Jt.UNKNOWN:return pe.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return pe.INTERNAL;case Jt.UNAVAILABLE:return pe.UNAVAILABLE;case Jt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Jt.NOT_FOUND:return pe.NOT_FOUND;case Jt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Jt.ABORTED:return pe.ABORTED;case Jt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Jt.DATA_LOSS:return pe.DATA_LOSS;default:return Ue()}}(nt=Jt||(Jt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new Vi([4294967295,4294967295],0);function k_(e){const t=JF().encode(e),r=new Fk;return r.update(t),new Uint8Array(r.digest())}function S_(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Vi([r,n],0),new Vi([s,a],0)]}class Sx{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new oc(`Invalid padding: ${r}`);if(n<0)throw new oc(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new oc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=Vi.fromNumber(this.Ie)}Ee(t,r,n){let s=t.add(r.multiply(Vi.fromNumber(n)));return s.compare(ZF)===1&&(s=new Vi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const r=k_(t),[n,s]=S_(r);for(let a=0;a<this.hashCount;a++){const i=this.Ee(n,s,a);if(!this.de(i))return!1}return!0}static create(t,r,n){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),i=new Sx(a,s,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.Ie===0)return;const r=k_(t),[n,s]=S_(r);for(let a=0;a<this.hashCount;a++){const i=this.Ee(n,s,a);this.Ae(i)}}Ae(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,r,n,s,a){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const s=new Map;return s.set(t,Uu.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Zd(Be.min(),s,new Ut(ut),wa(),Qe())}}class Uu{constructor(t,r,n,s,a){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Uu(n,r,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t,r,n,s){this.Re=t,this.removedTargetIds=r,this.key=n,this.Ve=s}}class dS{constructor(t,r){this.targetId=t,this.me=r}}class mS{constructor(t,r,n=Cr.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=s}}class A_{constructor(){this.fe=0,this.ge=N_(),this.pe=Cr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Qe(),r=Qe(),n=Qe();return this.ge.forEach((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ue()}}),new Uu(this.pe,this.ye,t,r,n)}Ce(){this.we=!1,this.ge=N_()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,xt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eO{constructor(t){this.Le=t,this.Be=new Map,this.ke=wa(),this.qe=I_(),this.Qe=new Ut(ut)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const n=this.Ge(r);switch(t.state){case 0:this.ze(r)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(t.resumeToken));break;default:Ue()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(t){const r=t.targetId,n=t.me.count,s=this.Je(r);if(s){const a=s.target;if(Cp(a))if(n===0){const i=new Pe(a.path);this.Ue(r,i,Ur.newNoDocument(i,Be.min()))}else xt(n===1);else{const i=this.Ye(r);if(i!==n){const o=this.Ze(t),l=o?this.Xe(o,t,i):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let i,o;try{i=Ji(n).toUint8Array()}catch(l){if(l instanceof $k)return dl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Sx(i,s,a)}catch(l){return dl(l instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(t,r,n){return r.me.count===n-this.nt(t,r.targetId)?0:2}nt(t,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;t.mightContain(o)||(this.Ue(r,a,null),s++)}),s}rt(t){const r=new Map;this.Be.forEach((a,i)=>{const o=this.Je(i);if(o){if(a.current&&Cp(o.target)){const l=new Pe(o.target.path);this.ke.get(l)!==null||this.it(i,l)||this.Ue(i,l,Ur.newNoDocument(l,t))}a.be&&(r.set(i,a.ve()),a.Ce())}});let n=Qe();this.qe.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.ke.forEach((a,i)=>i.setReadTime(t));const s=new Zd(t,r,this.Qe,this.ke,n);return this.ke=wa(),this.qe=I_(),this.Qe=new Ut(ut),s}$e(t,r){if(!this.ze(t))return;const n=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,n){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new A_,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new Sr(ut),this.qe=this.qe.insert(t,r)),r}ze(t){const r=this.Je(t)!==null;return r||Re("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new A_),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function I_(){return new Ut(Pe.comparator)}function N_(){return new Ut(Pe.comparator)}const tO={asc:"ASCENDING",desc:"DESCENDING"},rO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nO={and:"AND",or:"OR"};class sO{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Pp(e,t){return e.useProto3Json||Kd(t)?t:{value:t}}function ed(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function aO(e,t){return ed(e,t.toTimestamp())}function Fs(e){return xt(!!e),Be.fromTimestamp(function(r){const n=hi(r);return new cr(n.seconds,n.nanos)}(e))}function Ax(e,t){return Dp(e,t).canonicalString()}function Dp(e,t){const r=function(s){return new Ct(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?r:r.child(t)}function gS(e){const t=Ct.fromString(e);return xt(wS(t)),t}function Fp(e,t){return Ax(e.databaseId,t.path)}function nm(e,t){const r=gS(t);if(r.get(1)!==e.databaseId.projectId)throw new be(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new be(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new Pe(vS(r))}function xS(e,t){return Ax(e.databaseId,t)}function iO(e){const t=gS(e);return t.length===4?Ct.emptyPath():vS(t)}function Op(e){return new Ct(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vS(e){return xt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function C_(e,t,r){return{name:Fp(e,t),fields:r.value.mapValue.fields}}function oO(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ue()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(c,f){return c.useProto3Json?(xt(f===void 0||typeof f=="string"),Cr.fromBase64String(f||"")):(xt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Cr.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(c){const f=c.code===void 0?pe.UNKNOWN:hS(c.code);return new be(f,c.message||"")}(i);r=new mS(n,s,a,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const s=nm(e,n.document.name),a=Fs(n.document.updateTime),i=n.document.createTime?Fs(n.document.createTime):Be.min(),o=new fn({mapValue:{fields:n.document.fields}}),l=Ur.newFoundDocument(s,a,i,o),c=n.targetIds||[],f=n.removedTargetIds||[];r=new hh(c,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const s=nm(e,n.document),a=n.readTime?Fs(n.readTime):Be.min(),i=Ur.newNoDocument(s,a),o=n.removedTargetIds||[];r=new hh([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const s=nm(e,n.document),a=n.removedTargetIds||[];r=new hh([],a,s,null)}else{if(!("filter"in t))return Ue();{t.filter;const n=t.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,i=new XF(s,a),o=n.targetId;r=new dS(o,i)}}return r}function lO(e,t){let r;if(t instanceof ju)r={update:C_(e,t.key,t.value)};else if(t instanceof Tx)r={delete:Fp(e,t.key)};else if(t instanceof _i)r={update:C_(e,t.key,t.data),updateMask:xO(t.fieldMask)};else{if(!(t instanceof KF))return Ue();r={verify:Fp(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(a,i){const o=i.transform;if(o instanceof lu)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof cu)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof uu)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof fu)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw Ue()}(0,n))),t.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:aO(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ue()}(e,t.precondition)),r}function cO(e,t){return e&&e.length>0?(xt(t!==void 0),e.map(r=>function(s,a){let i=s.updateTime?Fs(s.updateTime):Fs(a);return i.isEqual(Be.min())&&(i=Fs(a)),new zF(i,s.transformResults||[])}(r,t))):[]}function uO(e,t){return{documents:[xS(e,t.path)]}}function fO(e,t){const r={structuredQuery:{}},n=t.path;let s;t.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=xS(e,s);const a=function(c){if(c.length!==0)return _S(xs.create(c,"and"))}(t.filters);a&&(r.structuredQuery.where=a);const i=function(c){if(c.length!==0)return c.map(f=>function(m){return{field:Ao(m.field),direction:mO(m.dir)}}(f))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=Pp(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:r,parent:s}}function hO(e){let t=iO(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){xt(n===1);const f=r.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let a=[];r.where&&(a=function(d){const m=yS(d);return m instanceof xs&&Kk(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(d){return d.map(m=>function(x){return new Zh(Io(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(d){let m;return m=typeof d=="object"?d.value:d,Kd(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(d){const m=!!d.before,p=d.values||[];return new Jh(p,m)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const m=!d.before,p=d.values||[];return new Jh(p,m)}(r.endAt)),PF(t,s,i,a,o,"F",l,c)}function dO(e,t){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function yS(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Io(r.unaryFilter.field);return nr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Io(r.unaryFilter.field);return nr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Io(r.unaryFilter.field);return nr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Io(r.unaryFilter.field);return nr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(e):e.fieldFilter!==void 0?function(r){return nr.create(Io(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return xs.create(r.compositeFilter.filters.map(n=>yS(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue()}}(r.compositeFilter.op))}(e):Ue()}function mO(e){return tO[e]}function pO(e){return rO[e]}function gO(e){return nO[e]}function Ao(e){return{fieldPath:e.canonicalString()}}function Io(e){return Tr.fromServerFormat(e.fieldPath)}function _S(e){return e instanceof nr?function(r){if(r.op==="=="){if(p_(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NAN"}};if(m_(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(p_(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NOT_NAN"}};if(m_(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(r.field),op:pO(r.op),value:r.value}}}(e):e instanceof xs?function(r){const n=r.getFilters().map(s=>_S(s));return n.length===1?n[0]:{compositeFilter:{op:gO(r.op),filters:n}}}(e):Ue()}function xO(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function wS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t,r,n,s,a=Be.min(),i=Be.min(),o=Cr.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Ga(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(t){this.ct=t}}function yO(e){const t=hO({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Rp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.un=new wO}addToCollectionParentIndex(t,r){return this.un.add(r),ye.resolve()}getCollectionParents(t,r){return ye.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return ye.resolve()}deleteFieldIndex(t,r){return ye.resolve()}deleteAllFieldIndexes(t){return ye.resolve()}createTargetIndexes(t,r){return ye.resolve()}getDocumentsMatchingTarget(t,r){return ye.resolve(null)}getIndexType(t,r){return ye.resolve(0)}getFieldIndexes(t,r){return ye.resolve([])}getNextCollectionGroupToUpdate(t){return ye.resolve(null)}getMinOffset(t,r){return ye.resolve(fi.min())}getMinOffsetFromCollectionGroup(t,r){return ye.resolve(fi.min())}updateCollectionGroup(t,r,n){return ye.resolve()}updateIndexEntries(t,r){return ye.resolve()}}class wO{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),s=this.index[r]||new Sr(Ct.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(t){const r=t.lastSegment(),n=t.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(t){return(this.index[t]||new Sr(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new xl(0)}static kn(){return new xl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.changes=new Nl(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Ur.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ye.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(t,r,n,s){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(t,r))).next(s=>(n!==null&&Ac(n.mutation,s,In.empty(),cr.now()),s))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Qe()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Qe()){const s=Oi();return this.populateOverlays(t,s,r).next(()=>this.computeViews(t,r,s,n).next(a=>{let i=ic();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Oi();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Qe()))}populateOverlays(t,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(t,s).next(a=>{a.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,s){let a=wa();const i=Sc(),o=function(){return Sc()}();return r.forEach((l,c)=>{const f=n.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof _i)?a=a.insert(c.key,c):f!==void 0?(i.set(c.key,f.mutation.getFieldMask()),Ac(f.mutation,c,f.mutation.getFieldMask(),cr.now())):i.set(c.key,In.empty())}),this.recalculateAndSaveOverlays(t,a).next(l=>(l.forEach((c,f)=>i.set(c,f)),r.forEach((c,f)=>{var d;return o.set(c,new TO(f,(d=i.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(t,r){const n=Sc();let s=new Ut((i,o)=>i-o),a=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let f=n.get(l)||In.empty();f=o.applyToLocalView(c,f),n.set(l,f);const d=(s.get(o.batchId)||Qe()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,f=l.value,d=rS();f.forEach(m=>{if(!a.has(m)){const p=uS(r.get(m),n.get(m));p!==null&&d.set(m,p),a=a.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ye.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,s){return function(i){return Pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):Qk(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,s):this.getDocumentsMatchingCollectionQuery(t,r,n,s)}getNextDocuments(t,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,s-a.size):ye.resolve(Oi());let o=-1,l=a;return i.next(c=>ye.forEach(c,(f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(f)?ye.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{l=l.insert(f,m)}))).next(()=>this.populateOverlays(t,c,a)).next(()=>this.computeViews(t,l,c,Qe())).next(f=>({batchId:o,changes:tS(f)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Pe(r)).next(n=>{let s=ic();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(t,r,n,s){const a=r.collectionGroup;let i=ic();return this.indexManager.getCollectionParents(t,a).next(o=>ye.forEach(o,l=>{const c=function(d,m){return new Lu(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(t,c,n,s).next(f=>{f.forEach((d,m)=>{i=i.insert(d,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,a,s))).next(i=>{a.forEach((l,c)=>{const f=c.getKey();i.get(f)===null&&(i=i.insert(f,Ur.newInvalidDocument(f)))});let o=ic();return i.forEach((l,c)=>{const f=a.get(l);f!==void 0&&Ac(f.mutation,c,In.empty(),cr.now()),Xd(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return ye.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Fs(s.createTime)}}(r)),ye.resolve()}getNamedQuery(t,r){return ye.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:yO(s.bundledQuery),readTime:Fs(s.readTime)}}(r)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.overlays=new Ut(Pe.comparator),this.Ir=new Map}getOverlay(t,r){return ye.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Oi();return ye.forEach(r,s=>this.getOverlay(t,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((s,a)=>{this.ht(t,r,a)}),ye.resolve()}removeOverlaysForBatchId(t,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),ye.resolve()}getOverlaysForCollection(t,r,n){const s=Oi(),a=r.length+1,i=new Pe(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>n&&s.set(l.getKey(),l)}return ye.resolve(s)}getOverlaysForCollectionGroup(t,r,n,s){let a=new Ut((c,f)=>c-f);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let f=a.get(c.largestBatchId);f===null&&(f=Oi(),a=a.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const o=Oi(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>o.set(c,f)),!(o.size()>=s)););return ye.resolve(o)}ht(t,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new YF(r,n));let a=this.Ir.get(r);a===void 0&&(a=Qe(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.sessionToken=Cr.EMPTY_BYTE_STRING}getSessionToken(t){return ye.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.Tr=new Sr(dr.Er),this.dr=new Sr(dr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const n=new dr(t,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Vr(new dr(t,r))}mr(t,r){t.forEach(n=>this.removeReference(n,r))}gr(t){const r=new Pe(new Ct([])),n=new dr(r,t),s=new dr(r,t+1),a=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),a.push(i.key)}),a}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new Pe(new Ct([])),n=new dr(r,t),s=new dr(r,t+1);let a=Qe();return this.dr.forEachInRange([n,s],i=>{a=a.add(i.key)}),a}containsKey(t){const r=new dr(t,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class dr{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return Pe.comparator(t.key,r.key)||ut(t.wr,r.wr)}static Ar(t,r){return ut(t.wr,r.wr)||Pe.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Sr(dr.Er)}checkEmpty(t){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new qF(a,r,n,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new dr(o.key,a)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return ye.resolve(i)}lookupMutationBatch(t,r){return ye.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,s=this.vr(n),a=s<0?0:s;return ye.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new dr(r,0),s=new dr(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,s],i=>{const o=this.Dr(i.wr);a.push(o)}),ye.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Sr(ut);return r.forEach(s=>{const a=new dr(s,0),i=new dr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,i],o=>{n=n.add(o.wr)})}),ye.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,s=n.length+1;let a=n;Pe.isDocumentKey(a)||(a=a.child(""));const i=new dr(new Pe(a),0);let o=new Sr(ut);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},i),ye.resolve(this.Cr(o))}Cr(t){const r=[];return t.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(t,r){xt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ye.forEach(r.mutations,s=>{const a=new dr(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,r){const n=new dr(r,0),s=this.br.firstAfterOrEqual(n);return ye.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,ye.resolve()}Fr(t,r){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t){this.Mr=t,this.docs=function(){return new Ut(Pe.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return ye.resolve(n?n.document.mutableCopy():Ur.newInvalidDocument(r))}getEntries(t,r){let n=wa();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Ur.newInvalidDocument(s))}),ye.resolve(n)}getDocumentsMatchingQuery(t,r,n,s){let a=wa();const i=r.path,o=new Pe(i.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||dF(hF(f),n)<=0||(s.has(f.key)||Xd(r,f))&&(a=a.insert(f.key,f.mutableCopy()))}return ye.resolve(a)}getAllFromCollectionGroup(t,r,n,s){Ue()}Or(t,r){return ye.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new bO(this)}getSize(t){return ye.resolve(this.size)}}class bO extends EO{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(t,s)):this.cr.removeEntry(n)}),ye.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t){this.persistence=t,this.Nr=new Nl(r=>_x(r),wx),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ix,this.targetCount=0,this.kr=xl.Bn()}forEachTarget(t,r){return this.Nr.forEach((n,s)=>r(s)),ye.resolve()}getLastRemoteSnapshotVersion(t){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ye.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ye.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new xl(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,ye.resolve()}updateTargetData(t,r){return this.Kn(r),ye.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ye.resolve()}removeTargets(t,r,n){let s=0;const a=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(i),a.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)}),ye.waitFor(a).next(()=>s)}getTargetCount(t){return ye.resolve(this.targetCount)}getTargetData(t,r){const n=this.Nr.get(r)||null;return ye.resolve(n)}addMatchingKeys(t,r,n){return this.Br.Rr(r,n),ye.resolve()}removeMatchingKeys(t,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(i=>{a.push(s.markPotentiallyOrphaned(t,i))}),ye.waitFor(a)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),ye.resolve()}getMatchingKeysForTargetId(t,r){const n=this.Br.yr(r);return ye.resolve(n)}containsKey(t,r){return ye.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(t,r){this.qr={},this.overlays={},this.Qr=new gx(0),this.Kr=!1,this.Kr=!0,this.$r=new IO,this.referenceDelegate=t(this),this.Ur=new RO(this),this.indexManager=new _O,this.remoteDocumentCache=function(s){return new CO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new vO(r),this.Gr=new SO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new AO,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.qr[t.toKey()];return n||(n=new NO(r,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,n){Re("MemoryPersistence","Starting transaction:",t);const s=new DO(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(t,r){return ye.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,r)))}}class DO extends pF{constructor(t){super(),this.currentSequenceNumber=t}}class Nx{constructor(t){this.persistence=t,this.Jr=new Ix,this.Yr=null}static Zr(t){return new Nx(t)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(t,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ye.resolve()}removeReference(t,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ye.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),ye.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Xr,n=>{const s=Pe.fromPath(n);return this.ei(t,s).next(a=>{a||r.removeEntry(s,Be.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return ye.or([()=>ye.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t,r,n,s){this.targetId=t,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(t,r){let n=Qe(),s=Qe();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Cx(t,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return W4()?8:gF(Hr())>0?6:4}()}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,n,s){const a={result:null};return this.Yi(t,r).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.Zi(t,r,s,n).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new FO;return this.Xi(t,r,i).next(o=>{if(a.result=o,this.zi)return this.es(t,r,i,o.size)})}).next(()=>a.result)}es(t,r,n,s){return n.documentReadCount<this.ji?(Zl()<=Ze.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",So(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ye.resolve()):(Zl()<=Ze.DEBUG&&Re("QueryEngine","Query:",So(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Zl()<=Ze.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",So(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ds(r))):ye.resolve())}Yi(t,r){if(y_(r))return ye.resolve(null);let n=Ds(r);return this.indexManager.getIndexType(t,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Rp(r,null,"F"),n=Ds(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(a=>{const i=Qe(...a);return this.Ji.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,i,l.readTime)?this.Yi(t,Rp(r,null,"F")):this.rs(t,c,r,l)}))})))}Zi(t,r,n,s){return y_(r)||s.isEqual(Be.min())?ye.resolve(null):this.Ji.getDocuments(t,n).next(a=>{const i=this.ts(r,a);return this.ns(r,i,n,s)?ye.resolve(null):(Zl()<=Ze.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),So(r)),this.rs(t,i,r,fF(s,-1)).next(o=>o))})}ts(t,r){let n=new Sr(Zk(t));return r.forEach((s,a)=>{Xd(t,a)&&(n=n.add(a))}),n}ns(t,r,n,s){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const a=t.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(t,r,n){return Zl()<=Ze.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",So(r)),this.Ji.getDocumentsMatchingQuery(t,r,fi.min(),n)}rs(t,r,n,s){return this.Ji.getDocumentsMatchingQuery(t,n,s).next(a=>(r.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(t,r,n,s){this.persistence=t,this.ss=r,this.serializer=s,this.os=new Ut(ut),this._s=new Nl(a=>_x(a),wx),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new kO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function LO(e,t,r,n){return new MO(e,t,r,n)}async function ES(e,t){const r=$e(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.ls(t),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const i=[],o=[];let l=Qe();for(const c of s){i.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of a){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function jO(e,t){const r=$e(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=t.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,f){const d=c.batch,m=d.keys();let p=ye.resolve();return m.forEach(x=>{p=p.next(()=>f.getEntry(l,x)).next(g=>{const w=c.docVersions.get(x);xt(w!==null),g.version.compareTo(w)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),f.addEntry(g)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,t,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Qe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(t))).next(()=>r.localDocuments.getDocuments(n,s))})}function TS(e){const t=$e(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function UO(e,t){const r=$e(e),n=t.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];t.targetChanges.forEach((f,d)=>{const m=s.get(d);if(!m)return;o.push(r.Ur.removeMatchingKeys(a,f.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(a,f.addedDocuments,d)));let p=m.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(d)!==null?p=p.withResumeToken(Cr.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,n)),s=s.insert(d,p),function(g,w,k){return g.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,p,f)&&o.push(r.Ur.updateTargetData(a,p))});let l=wa(),c=Qe();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(VO(a,i,t.documentUpdates).next(f=>{l=f.Ps,c=f.Is})),!n.isEqual(Be.min())){const f=r.Ur.getLastRemoteSnapshotVersion(a).next(d=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(f)}return ye.waitFor(o).next(()=>i.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(r.os=s,a))}function VO(e,t,r){let n=Qe(),s=Qe();return r.forEach(a=>n=n.add(a)),t.getEntries(e,n).next(a=>{let i=wa();return r.forEach((o,l)=>{const c=a.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Be.min())?(t.removeEntry(o,l.readTime),i=i.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),i=i.insert(o,l)):Re("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:i,Is:s}})}function BO(e,t){const r=$e(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function WO(e,t){const r=$e(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,t).next(a=>a?(s=a,ye.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Ga(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(t,n.targetId)),n})}async function Mp(e,t,r){const n=$e(e),s=n.os.get(t),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Mu(i))throw i;Re("LocalStore",`Failed to update sequence numbers for target ${t}: ${i}`)}n.os=n.os.remove(t),n._s.delete(s.target)}function b_(e,t,r){const n=$e(e);let s=Be.min(),a=Qe();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,f){const d=$e(l),m=d._s.get(f);return m!==void 0?ye.resolve(d.os.get(m)):d.Ur.getTargetData(c,f)}(n,i,Ds(t)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>n.ss.getDocumentsMatchingQuery(i,t,r?s:Be.min(),r?a:Qe())).next(o=>($O(n,FF(t),o),{documents:o,Ts:a})))}function $O(e,t,r){let n=e.us.get(t)||Be.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),e.us.set(t,n)}class R_{constructor(){this.activeTargetIds=VF()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zO{constructor(){this.so=new R_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,n){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new R_,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of=null;function sm(){return Of===null?Of=function(){return 268435456+Math.round(2147483648*Math.random())}():Of++,"0x"+Of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="WebChannelConnection";class qO extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(r,n,s,a,i){const o=sm(),l=this.xo(r,n.toUriEncodedString());Re("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,a,i),this.No(r,l,c,s).then(f=>(Re("RestConnection",`Received RPC '${r}' ${o}: `,f),f),f=>{throw dl("RestConnection",`RPC '${r}' ${o} failed with error: `,f,"url: ",l,"request:",s),f})}Lo(r,n,s,a,i,o){return this.Mo(r,n,s,a,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Il}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,i)=>r[i]=a),s&&s.headers.forEach((a,i)=>r[i]=a)}xo(r,n){const s=GO[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,n,s){const a=sm();return new Promise((i,o)=>{const l=new Ok;l.setWithCredentials(!0),l.listenOnce(Mk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ch.NO_ERROR:const f=l.getResponseJson();Re(Fr,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(f)),i(f);break;case ch.TIMEOUT:Re(Fr,`RPC '${t}' ${a} timed out`),o(new be(pe.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const d=l.getStatus();if(Re(Fr,`RPC '${t}' ${a} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const x=function(w){const k=w.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(k)>=0?k:pe.UNKNOWN}(p.status);o(new be(x,p.message))}else o(new be(pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new be(pe.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{Re(Fr,`RPC '${t}' ${a} completed.`)}});const c=JSON.stringify(s);Re(Fr,`RPC '${t}' ${a} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(t,r,n){const s=sm(),a=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Uk(),o=jk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const f=a.join("");Re(Fr,`Creating RPC '${t}' stream ${s}: ${f}`,l);const d=i.createWebChannel(f,l);let m=!1,p=!1;const x=new KO({Io:w=>{p?Re(Fr,`Not sending because RPC '${t}' stream ${s} is closed:`,w):(m||(Re(Fr,`Opening RPC '${t}' stream ${s} transport.`),d.open(),m=!0),Re(Fr,`RPC '${t}' stream ${s} sending:`,w),d.send(w))},To:()=>d.close()}),g=(w,k,E)=>{w.listen(k,y=>{try{E(y)}catch(I){setTimeout(()=>{throw I},0)}})};return g(d,ac.EventType.OPEN,()=>{p||(Re(Fr,`RPC '${t}' stream ${s} transport opened.`),x.yo())}),g(d,ac.EventType.CLOSE,()=>{p||(p=!0,Re(Fr,`RPC '${t}' stream ${s} transport closed`),x.So())}),g(d,ac.EventType.ERROR,w=>{p||(p=!0,dl(Fr,`RPC '${t}' stream ${s} transport errored:`,w),x.So(new be(pe.UNAVAILABLE,"The operation could not be completed")))}),g(d,ac.EventType.MESSAGE,w=>{var k;if(!p){const E=w.data[0];xt(!!E);const y=E,I=y.error||((k=y[0])===null||k===void 0?void 0:k.error);if(I){Re(Fr,`RPC '${t}' stream ${s} received error:`,I);const O=I.status;let F=function(S){const C=Jt[S];if(C!==void 0)return hS(C)}(O),v=I.message;F===void 0&&(F=pe.INTERNAL,v="Unknown error status: "+O+" with message "+I.message),p=!0,x.So(new be(F,v)),d.close()}else Re(Fr,`RPC '${t}' stream ${s} received:`,E),x.bo(E)}}),g(o,Lk.STAT_EVENT,w=>{w.stat===Sp.PROXY?Re(Fr,`RPC '${t}' stream ${s} detected buffering proxy`):w.stat===Sp.NOPROXY&&Re(Fr,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(e){return new sO(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t,r,n=1e3,s=1.5,a=6e4){this.ui=t,this.timerId=r,this.ko=n,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t,r,n,s,a,i,o,l){this.ui=t,this.Ho=n,this.Jo=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kS(t,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():r&&r.code===pe.RESOURCE_EXHAUSTED?(_a(r.toString()),_a("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(r)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{t(()=>{const s=new be(pe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(t,r){const n=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return Re("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YO extends SS{constructor(t,r,n,s,a,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=oO(this.serializer,t),n=function(a){if(!("targetChange"in a))return Be.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Be.min():i.readTime?Fs(i.readTime):Be.min()}(t);return this.listener.d_(r,n)}A_(t){const r={};r.database=Op(this.serializer),r.addTarget=function(a,i){let o;const l=i.target;if(o=Cp(l)?{documents:uO(a,l)}:{query:fO(a,l)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=pS(a,i.resumeToken);const c=Pp(a,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Be.min())>0){o.readTime=ed(a,i.snapshotVersion.toTimestamp());const c=Pp(a,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,t);const n=dO(this.serializer,t);n&&(r.labels=n),this.a_(r)}R_(t){const r={};r.database=Op(this.serializer),r.removeTarget=t,this.a_(r)}}class XO extends SS{constructor(t,r,n,s,a,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return xt(!!t.streamToken),this.lastStreamToken=t.streamToken,xt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){xt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=cO(t.writeResults,t.commitTime),n=Fs(t.commitTime);return this.listener.g_(n,r)}p_(){const t={};t.database=Op(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>lO(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO extends class{}{constructor(t,r,n,s){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new be(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Mo(t,Dp(r,n),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(pe.UNKNOWN,a.toString())})}Lo(t,r,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(t,Dp(r,n),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(pe.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JO{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_a(r),this.D_=!1):Re("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(t,r,n,s,a){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(i=>{n.enqueueAndForget(async()=>{oo(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=$e(l);c.L_.add(4),await Vu(c),c.q_.set("Unknown"),c.L_.delete(4),await t0(c)}(this))})}),this.q_=new JO(n,s)}}async function t0(e){if(oo(e))for(const t of e.B_)await t(!0)}async function Vu(e){for(const t of e.B_)await t(!1)}function AS(e,t){const r=$e(e);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),Dx(r)?Px(r):Cl(r).r_()&&Rx(r,t))}function bx(e,t){const r=$e(e),n=Cl(r);r.N_.delete(t),n.r_()&&IS(r,t),r.N_.size===0&&(n.r_()?n.o_():oo(r)&&r.q_.set("Unknown"))}function Rx(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Be.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Cl(e).A_(t)}function IS(e,t){e.Q_.xe(t),Cl(e).R_(t)}function Px(e){e.Q_=new eO({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Cl(e).start(),e.q_.v_()}function Dx(e){return oo(e)&&!Cl(e).n_()&&e.N_.size>0}function oo(e){return $e(e).L_.size===0}function NS(e){e.Q_=void 0}async function eM(e){e.q_.set("Online")}async function tM(e){e.N_.forEach((t,r)=>{Rx(e,t)})}async function rM(e,t){NS(e),Dx(e)?(e.q_.M_(t),Px(e)):e.q_.set("Unknown")}async function nM(e,t,r){if(e.q_.set("Online"),t instanceof mS&&t.state===2&&t.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))}(e,t)}catch(n){Re("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await td(e,n)}else if(t instanceof hh?e.Q_.Ke(t):t instanceof dS?e.Q_.He(t):e.Q_.We(t),!r.isEqual(Be.min()))try{const n=await TS(e.localStore);r.compareTo(n)>=0&&await function(a,i){const o=a.Q_.rt(i);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=a.N_.get(c);f&&a.N_.set(c,f.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,c)=>{const f=a.N_.get(l);if(!f)return;a.N_.set(l,f.withResumeToken(Cr.EMPTY_BYTE_STRING,f.snapshotVersion)),IS(a,l);const d=new Ga(f.target,l,c,f.sequenceNumber);Rx(a,d)}),a.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){Re("RemoteStore","Failed to raise snapshot:",n),await td(e,n)}}async function td(e,t,r){if(!Mu(t))throw t;e.L_.add(1),await Vu(e),e.q_.set("Offline"),r||(r=()=>TS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await r(),e.L_.delete(1),await t0(e)})}function CS(e,t){return t().catch(r=>td(e,r,t))}async function r0(e){const t=$e(e),r=di(t);let n=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;sM(t);)try{const s=await BO(t.localStore,n);if(s===null){t.O_.length===0&&r.o_();break}n=s.batchId,aM(t,s)}catch(s){await td(t,s)}bS(t)&&RS(t)}function sM(e){return oo(e)&&e.O_.length<10}function aM(e,t){e.O_.push(t);const r=di(e);r.r_()&&r.V_&&r.m_(t.mutations)}function bS(e){return oo(e)&&!di(e).n_()&&e.O_.length>0}function RS(e){di(e).start()}async function iM(e){di(e).p_()}async function oM(e){const t=di(e);for(const r of e.O_)t.m_(r.mutations)}async function lM(e,t,r){const n=e.O_.shift(),s=kx.from(n,t,r);await CS(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await r0(e)}async function cM(e,t){t&&di(e).V_&&await async function(n,s){if(function(i){return QF(i)&&i!==pe.ABORTED}(s.code)){const a=n.O_.shift();di(n).s_(),await CS(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await r0(n)}}(e,t),bS(e)&&RS(e)}async function D_(e,t){const r=$e(e);r.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const n=oo(r);r.L_.add(3),await Vu(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),await t0(r)}async function uM(e,t){const r=$e(e);t?(r.L_.delete(2),await t0(r)):t||(r.L_.add(2),await Vu(r),r.q_.set("Unknown"))}function Cl(e){return e.K_||(e.K_=function(r,n,s){const a=$e(r);return a.w_(),new YO(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(e.datastore,e.asyncQueue,{Eo:eM.bind(null,e),Ro:tM.bind(null,e),mo:rM.bind(null,e),d_:nM.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Dx(e)?Px(e):e.q_.set("Unknown")):(await e.K_.stop(),NS(e))})),e.K_}function di(e){return e.U_||(e.U_=function(r,n,s){const a=$e(r);return a.w_(),new XO(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iM.bind(null,e),mo:cM.bind(null,e),f_:oM.bind(null,e),g_:lM.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await r0(e)):(await e.U_.stop(),e.O_.length>0&&(Re("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(t,r,n,s,a){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,s,a){const i=Date.now()+n,o=new Fx(t,r,i,s,a);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ox(e,t){if(_a("AsyncQueue",`${t}: ${e}`),Mu(e))return new be(pe.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t){this.comparator=t?(r,n)=>t(r,n)||Pe.comparator(r.key,n.key):(r,n)=>Pe.comparator(r.key,n.key),this.keyedMap=ic(),this.sortedSet=new Ut(this.comparator)}static emptySet(t){return new Qo(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Qo)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Qo;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.W_=new Ut(Pe.comparator)}track(t){const r=t.doc.key,n=this.W_.get(r);n?t.type!==0&&n.type===3?this.W_=this.W_.insert(r,t):t.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.W_=this.W_.remove(r):t.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):Ue():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,n)=>{t.push(n)}),t}}class vl{constructor(t,r,n,s,a,i,o,l,c){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,r,n,s,a){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new vl(t,r,Qo.emptySet(r),i,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class hM{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=$e(r),a=s.queries;s.queries=O_(),a.forEach((i,o)=>{for(const l of o.j_)l.onError(n)})})(this,new be(pe.ABORTED,"Firestore shutting down"))}}function O_(){return new Nl(e=>Jk(e),Yd)}async function Mx(e,t){const r=$e(e);let n=3;const s=t.query;let a=r.queries.get(s);a?!a.H_()&&t.J_()&&(n=2):(a=new fM,n=t.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(s,!0);break;case 1:a.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const o=Ox(i,`Initialization of query '${So(t.query)}' failed`);return void t.onError(o)}r.queries.set(s,a),a.j_.push(t),t.Z_(r.onlineState),a.z_&&t.X_(a.z_)&&jx(r)}async function Lx(e,t){const r=$e(e),n=t.query;let s=3;const a=r.queries.get(n);if(a){const i=a.j_.indexOf(t);i>=0&&(a.j_.splice(i,1),a.j_.length===0?s=t.J_()?0:1:!a.H_()&&t.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function dM(e,t){const r=$e(e);let n=!1;for(const s of t){const a=s.query,i=r.queries.get(a);if(i){for(const o of i.j_)o.X_(s)&&(n=!0);i.z_=s}}n&&jx(r)}function mM(e,t,r){const n=$e(e),s=n.queries.get(t);if(s)for(const a of s.j_)a.onError(r);n.queries.delete(t)}function jx(e){e.Y_.forEach(t=>{t.next()})}var Lp,M_;(M_=Lp||(Lp={})).ea="default",M_.Cache="cache";class Ux{constructor(t,r,n){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){const n=[];for(const s of t.docChanges)s.type!==3&&n.push(s);t=new vl(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){if(!t.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(t){t=vl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(t){this.key=t}}class DS{constructor(t){this.key=t}}class pM{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=Zk(t),this.Ra=new Qo(this.Aa)}get Va(){return this.Ta}ma(t,r){const n=r?r.fa:new F_,s=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,d)=>{const m=s.get(f),p=Xd(this.query,d)?d:null,x=!!m&&this.mutatedKeys.has(m.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;m&&p?m.data.isEqual(p.data)?x!==g&&(n.track({type:3,doc:p}),w=!0):this.ga(m,p)||(n.track({type:2,doc:p}),w=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!m&&p?(n.track({type:0,doc:p}),w=!0):m&&!p&&(n.track({type:1,doc:m}),w=!0,(l||c)&&(o=!0)),w&&(p?(i=i.add(p),a=g?a.add(f):a.delete(f)):(i=i.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const f=this.query.limitType==="F"?i.last():i.first();i=i.delete(f.key),a=a.delete(f.key),n.track({type:1,doc:f})}return{Ra:i,fa:n,ns:o,mutatedKeys:a}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,s){const a=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const i=t.fa.G_();i.sort((f,d)=>function(p,x){const g=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return g(p)-g(x)}(f.type,d.type)||this.Aa(f.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,i.length!==0||c?{snapshot:new vl(this.query,t.Ra,a,i,t.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new F_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Qe(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return t.forEach(n=>{this.da.has(n)||r.push(new DS(n))}),this.da.forEach(n=>{t.has(n)||r.push(new PS(n))}),r}ba(t){this.Ta=t.Ts,this.da=Qe();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return vl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gM{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class xM{constructor(t){this.key=t,this.va=!1}}class vM{constructor(t,r,n,s,a,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Nl(o=>Jk(o),Yd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ut(Pe.comparator),this.Na=new Map,this.La=new Ix,this.Ba={},this.ka=new Map,this.qa=xl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yM(e,t,r=!0){const n=US(e);let s;const a=n.Fa.get(t);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await FS(n,t,r,!0),s}async function _M(e,t){const r=US(e);await FS(r,t,!0,!1)}async function FS(e,t,r,n){const s=await WO(e.localStore,Ds(t)),a=s.targetId,i=e.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await wM(e,t,a,i==="current",s.resumeToken)),e.isPrimaryClient&&r&&AS(e.remoteStore,s),o}async function wM(e,t,r,n,s){e.Ka=(d,m,p)=>async function(g,w,k,E){let y=w.view.ma(k);y.ns&&(y=await b_(g.localStore,w.query,!1).then(({documents:v})=>w.view.ma(v,y)));const I=E&&E.targetChanges.get(w.targetId),O=E&&E.targetMismatches.get(w.targetId)!=null,F=w.view.applyChanges(y,g.isPrimaryClient,I,O);return j_(g,w.targetId,F.wa),F.snapshot}(e,d,m,p);const a=await b_(e.localStore,t,!0),i=new pM(t,a.Ts),o=i.ma(a.documents),l=Uu.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",s),c=i.applyChanges(o,e.isPrimaryClient,l);j_(e,r,c.wa);const f=new gM(t,r,i);return e.Fa.set(t,f),e.Ma.has(r)?e.Ma.get(r).push(t):e.Ma.set(r,[t]),c.snapshot}async function EM(e,t,r){const n=$e(e),s=n.Fa.get(t),a=n.Ma.get(s.targetId);if(a.length>1)return n.Ma.set(s.targetId,a.filter(i=>!Yd(i,t))),void n.Fa.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Mp(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&bx(n.remoteStore,s.targetId),jp(n,s.targetId)}).catch(Ou)):(jp(n,s.targetId),await Mp(n.localStore,s.targetId,!0))}async function TM(e,t){const r=$e(e),n=r.Fa.get(t),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),bx(r.remoteStore,n.targetId))}async function kM(e,t,r){const n=RM(e);try{const s=await function(i,o){const l=$e(i),c=cr.now(),f=o.reduce((p,x)=>p.add(x.key),Qe());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=wa(),g=Qe();return l.cs.getEntries(p,f).next(w=>{x=w,x.forEach((k,E)=>{E.isValidDocument()||(g=g.add(k))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,x)).next(w=>{d=w;const k=[];for(const E of o){const y=GF(E,d.get(E.key).overlayedDocument);y!=null&&k.push(new _i(E.key,y,zk(y.value.mapValue),Hn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,k,o)}).next(w=>{m=w;const k=w.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(p,w.batchId,k)})}).then(()=>({batchId:m.batchId,changes:tS(d)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let c=i.Ba[i.currentUser.toKey()];c||(c=new Ut(ut)),c=c.insert(o,l),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await Bu(n,s.changes),await r0(n.remoteStore)}catch(s){const a=Ox(s,"Failed to persist write");r.reject(a)}}async function OS(e,t){const r=$e(e);try{const n=await UO(r.localStore,t);t.targetChanges.forEach((s,a)=>{const i=r.Na.get(a);i&&(xt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?xt(i.va):s.removedDocuments.size>0&&(xt(i.va),i.va=!1))}),await Bu(r,n,t)}catch(n){await Ou(n)}}function L_(e,t,r){const n=$e(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((a,i)=>{const o=i.view.Z_(t);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=$e(i);l.onlineState=o;let c=!1;l.queries.forEach((f,d)=>{for(const m of d.j_)m.Z_(o)&&(c=!0)}),c&&jx(l)}(n.eventManager,t),s.length&&n.Ca.d_(s),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function SM(e,t,r){const n=$e(e);n.sharedClientState.updateQueryState(t,"rejected",r);const s=n.Na.get(t),a=s&&s.key;if(a){let i=new Ut(Pe.comparator);i=i.insert(a,Ur.newNoDocument(a,Be.min()));const o=Qe().add(a),l=new Zd(Be.min(),new Map,new Ut(ut),i,o);await OS(n,l),n.Oa=n.Oa.remove(a),n.Na.delete(t),Vx(n)}else await Mp(n.localStore,t,!1).then(()=>jp(n,t,r)).catch(Ou)}async function AM(e,t){const r=$e(e),n=t.batch.batchId;try{const s=await jO(r.localStore,t);LS(r,n,null),MS(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Bu(r,s)}catch(s){await Ou(s)}}async function IM(e,t,r){const n=$e(e);try{const s=await function(i,o){const l=$e(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(xt(d!==null),f=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(n.localStore,t);LS(n,t,r),MS(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Bu(n,s)}catch(s){await Ou(s)}}function MS(e,t){(e.ka.get(t)||[]).forEach(r=>{r.resolve()}),e.ka.delete(t)}function LS(e,t,r){const n=$e(e);let s=n.Ba[n.currentUser.toKey()];if(s){const a=s.get(t);a&&(r?a.reject(r):a.resolve(),s=s.remove(t)),n.Ba[n.currentUser.toKey()]=s}}function jp(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Ma.get(t))e.Fa.delete(n),r&&e.Ca.$a(n,r);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(n=>{e.La.containsKey(n)||jS(e,n)})}function jS(e,t){e.xa.delete(t.path.canonicalString());const r=e.Oa.get(t);r!==null&&(bx(e.remoteStore,r),e.Oa=e.Oa.remove(t),e.Na.delete(r),Vx(e))}function j_(e,t,r){for(const n of r)n instanceof PS?(e.La.addReference(n.key,t),NM(e,n)):n instanceof DS?(Re("SyncEngine","Document no longer in limbo: "+n.key),e.La.removeReference(n.key,t),e.La.containsKey(n.key)||jS(e,n.key)):Ue()}function NM(e,t){const r=t.key,n=r.path.canonicalString();e.Oa.get(r)||e.xa.has(n)||(Re("SyncEngine","New document in limbo: "+r),e.xa.add(n),Vx(e))}function Vx(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const r=new Pe(Ct.fromString(t)),n=e.qa.next();e.Na.set(n,new xM(r)),e.Oa=e.Oa.insert(r,n),AS(e.remoteStore,new Ga(Ds(qd(r.path)),n,"TargetPurposeLimboResolution",gx.oe))}}async function Bu(e,t,r){const n=$e(e),s=[],a=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{i.push(n.Ka(l,t,r).then(c=>{var f;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(f=r==null?void 0:r.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Cx.Wi(l.targetId,c);a.push(d)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(l,c){const f=$e(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ye.forEach(c,m=>ye.forEach(m.$i,p=>f.persistence.referenceDelegate.addReference(d,m.targetId,p)).next(()=>ye.forEach(m.Ui,p=>f.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))}catch(d){if(!Mu(d))throw d;Re("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const p=f.os.get(m),x=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(m,g)}}}(n.localStore,a))}async function CM(e,t){const r=$e(e);if(!r.currentUser.isEqual(t)){Re("SyncEngine","User change. New user:",t.toKey());const n=await ES(r.localStore,t);r.currentUser=t,function(a,i){a.ka.forEach(o=>{o.forEach(l=>{l.reject(new be(pe.CANCELLED,i))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Bu(r,n.hs)}}function bM(e,t){const r=$e(e),n=r.Na.get(t);if(n&&n.va)return Qe().add(n.key);{let s=Qe();const a=r.Ma.get(t);if(!a)return s;for(const i of a){const o=r.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}function US(e){const t=$e(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=OS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SM.bind(null,t),t.Ca.d_=dM.bind(null,t.eventManager),t.Ca.$a=mM.bind(null,t.eventManager),t}function RM(e){const t=$e(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=AM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IM.bind(null,t),t}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=e0(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return LO(this.persistence,new OO,t.initialUser,this.serializer)}Ga(t){return new PO(Nx.Zr,this.serializer)}Wa(t){return new zO}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class Up{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>L_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=CM.bind(null,this.syncEngine),await uM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new hM}()}createDatastore(t){const r=e0(t.databaseInfo.databaseId),n=function(a){return new qO(a)}(t.databaseInfo);return function(a,i,o,l){return new QO(a,i,o,l)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,s,a,i,o){return new ZO(n,s,a,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>L_(this.syncEngine,r,0),function(){return P_.D()?new P_:new HO}())}createSyncEngine(t,r){return function(s,a,i,o,l,c,f){const d=new vM(s,a,i,o,l,c);return f&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(s){const a=$e(s);Re("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Vu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Up.provider={build:()=>new Up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):_a("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(t,r,n,s,a){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Mr.UNAUTHENTICATED,this.clientId=Bk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async i=>{Re("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Re("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=Ox(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function im(e,t){e.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async s=>{n.isEqual(s)||(await ES(t.localStore,s),n=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function U_(e,t){e.asyncQueue.verifyOperationInProgress();const r=await DM(e);Re("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>D_(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,s)=>D_(t.remoteStore,s)),e._onlineComponents=t}async function DM(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{await im(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;dl("Error using user provided cache. Falling back to memory cache: "+r),await im(e,new rd)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),await im(e,new rd);return e._offlineComponents}async function VS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),await U_(e,e._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),await U_(e,new Up))),e._onlineComponents}function FM(e){return VS(e).then(t=>t.syncEngine)}async function nd(e){const t=await VS(e),r=t.eventManager;return r.onListen=yM.bind(null,t.syncEngine),r.onUnlisten=EM.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=_M.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=TM.bind(null,t.syncEngine),r}function OM(e,t,r={}){const n=new ca;return e.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,c){const f=new Bx({next:m=>{f.Za(),i.enqueueAndForget(()=>Lx(a,d));const p=m.docs.has(o);!p&&m.fromCache?c.reject(new be(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new be(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new Ux(qd(o.path),f,{includeMetadataChanges:!0,_a:!0});return Mx(a,d)}(await nd(e),e.asyncQueue,t,r,n)),n.promise}function MM(e,t,r={}){const n=new ca;return e.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,c){const f=new Bx({next:m=>{f.Za(),i.enqueueAndForget(()=>Lx(a,d)),m.fromCache&&l.source==="server"?c.reject(new be(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new Ux(o,f,{includeMetadataChanges:!0,_a:!0});return Mx(a,d)}(await nd(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(e,t,r){if(!r)throw new be(pe.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function LM(e,t,r,n){if(t===!0&&n===!0)throw new be(pe.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function B_(e){if(!Pe.isDocumentKey(e))throw new be(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function W_(e){if(Pe.isDocumentKey(e))throw new be(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function n0(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ue()}function xn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new be(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=n0(e);throw new be(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t){var r,n;if(t.host===void 0){if(t.ssl!==void 0)throw new be(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new be(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}LM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BS((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class s0{constructor(t,r,n,s){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new be(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $_(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new rF;switch(n.type){case"firstParty":return new iF(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new be(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=V_.get(r);n&&(Re("ComponentProvider","Removing Datastore"),V_.delete(r),n.terminate())}(this),Promise.resolve()}}function jM(e,t,r,n={}){var s;const a=(e=xn(e,s0))._getSettings(),i=`${t}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==i&&dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:i,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Mr.MOCK_USER;else{o=qT(n.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new be(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mr(c)}e._authCredentials=new nF(new Vk(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new lo(this.firestore,t,this._query)}}class Wr{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wr(this.firestore,t,this._key)}}class ai extends lo{constructor(t,r,n){super(t,r,qd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wr(this.firestore,null,new Pe(t))}withConverter(t){return new ai(this.firestore,t,this._path)}}function Rt(e,t,...r){if(e=zt(e),WS("collection","path",t),e instanceof s0){const n=Ct.fromString(t,...r);return W_(n),new ai(e,null,n)}{if(!(e instanceof Wr||e instanceof ai))throw new be(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ct.fromString(t,...r));return W_(n),new ai(e.firestore,null,n)}}function Et(e,t,...r){if(e=zt(e),arguments.length===1&&(t=Bk.newId()),WS("doc","path",t),e instanceof s0){const n=Ct.fromString(t,...r);return B_(n),new Wr(e,null,new Pe(n))}{if(!(e instanceof Wr||e instanceof ai))throw new be(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ct.fromString(t,...r));return B_(n),new Wr(e.firestore,e instanceof ai?e.converter:null,new Pe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kS(this,"async_queue_retry"),this.Vu=()=>{const n=am();n&&Re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=t;const r=am();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=am();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ca;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Mu(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(n);throw _a("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(t,r,n){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const s=Fx.createAndSchedule(this,t,r,n,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}function H_(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(e,["next","error","complete"])}class Ea extends s0{constructor(t,r,n,s){super(t,r,n,s),this.type="firestore",this._queue=new z_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new z_(t),this._firestoreClient=void 0,await t}}}function UM(e,t){const r=typeof e=="object"?e:$d(),n=typeof e=="string"?e:"(default)",s=Ru(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=tx("firestore");a&&jM(s,...a)}return s}function a0(e){if(e._terminated)throw new be(pe.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||VM(e),e._firestoreClient}function VM(e){var t,r,n;const s=e._freezeSettings(),a=function(o,l,c,f){return new yF(o,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,BS(f.experimentalLongPollingOptions),f.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new PM(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yl(Cr.fromBase64String(t))}catch(r){throw new be(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new yl(Cr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new be(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new be(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new be(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=/^__.*__$/;class WM{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new _i(t,this.data,this.fieldMask,r,this.fieldTransforms):new ju(t,this.data,r,this.fieldTransforms)}}class $S{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new _i(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function zS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class zx{constructor(t,r,n,s,a,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new zx(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),s=this.Fu({path:n,xu:!1});return s.Ou(t),s}Nu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return sd(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(zS(this.Cu)&&BM.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class $M{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||e0(t)}Qu(t,r,n,s=!1){return new zx({Cu:t,methodName:r,qu:n,path:Tr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o0(e){const t=e._freezeSettings(),r=e0(e._databaseId);return new $M(e._databaseId,!!t.ignoreUndefinedProperties,r)}function HS(e,t,r,n,s,a={}){const i=e.Qu(a.merge||a.mergeFields?2:0,t,r,s);Kx("Data must be an object, but it was:",i,n);const o=GS(n,i);let l,c;if(a.merge)l=new In(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const f=[];for(const d of a.mergeFields){const m=Vp(t,d,r);if(!i.contains(m))throw new be(pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qS(f,m)||f.push(m)}l=new In(f),c=i.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=i.fieldTransforms;return new WM(new fn(o),l,c)}class l0 extends Wu{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof l0}}class Hx extends Wu{_toFieldTransform(t){return new cS(t.path,new lu)}isEqual(t){return t instanceof Hx}}class Gx extends Wu{constructor(t,r){super(t),this.$u=r}_toFieldTransform(t){const r=new fu(t.serializer,sS(t.serializer,this.$u));return new cS(t.path,r)}isEqual(t){return t instanceof Gx&&this.$u===t.$u}}function zM(e,t,r,n){const s=e.Qu(1,t,r);Kx("Data must be an object, but it was:",s,n);const a=[],i=fn.empty();io(n,(l,c)=>{const f=qx(t,l,r);c=zt(c);const d=s.Nu(f);if(c instanceof l0)a.push(f);else{const m=$u(c,d);m!=null&&(a.push(f),i.set(f,m))}});const o=new In(a);return new $S(i,o,s.fieldTransforms)}function HM(e,t,r,n,s,a){const i=e.Qu(1,t,r),o=[Vp(t,n,r)],l=[s];if(a.length%2!=0)throw new be(pe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)o.push(Vp(t,a[m])),l.push(a[m+1]);const c=[],f=fn.empty();for(let m=o.length-1;m>=0;--m)if(!qS(c,o[m])){const p=o[m];let x=l[m];x=zt(x);const g=i.Nu(p);if(x instanceof l0)c.push(p);else{const w=$u(x,g);w!=null&&(c.push(p),f.set(p,w))}}const d=new In(c);return new $S(f,d,i.fieldTransforms)}function GM(e,t,r,n=!1){return $u(r,e.Qu(n?4:3,t))}function $u(e,t){if(KS(e=zt(e)))return Kx("Unsupported field value:",t,e),GS(e,t);if(e instanceof Wu)return function(n,s){if(!zS(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(n,s){const a=[];let i=0;for(const o of n){let l=$u(o,s.Lu(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(e,t)}return function(n,s){if((n=zt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return sS(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=cr.fromDate(n);return{timestampValue:ed(s.serializer,a)}}if(n instanceof cr){const a=new cr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ed(s.serializer,a)}}if(n instanceof Wx)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yl)return{bytesValue:pS(s.serializer,n._byteString)};if(n instanceof Wr){const a=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(a))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ax(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof $x)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return Ex(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${n0(n)}`)}(e,t)}function GS(e,t){const r={};return Wk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):io(e,(n,s)=>{const a=$u(s,t.Mu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function KS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof cr||e instanceof Wx||e instanceof yl||e instanceof Wr||e instanceof Wu||e instanceof $x)}function Kx(e,t,r){if(!KS(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=n0(r);throw n==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+n)}}function Vp(e,t,r){if((t=zt(t))instanceof i0)return t._internalPath;if(typeof t=="string")return qx(e,t);throw sd("Field path arguments must be of type string or ",e,!1,void 0,r)}const KM=new RegExp("[~\\*/\\[\\]]");function qx(e,t,r){if(t.search(KM)>=0)throw sd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new i0(...t.split("."))._internalPath}catch{throw sd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function sd(e,t,r,n,s){const a=n&&!n.isEmpty(),i=s!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new be(pe.INVALID_ARGUMENT,o+e+l)}function qS(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t,r,n,s,a){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Yx("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class qM extends YS{data(){return super.data()}}function Yx(e,t){return typeof t=="string"?qx(e,t):t instanceof i0?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new be(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xx{}class YM extends Xx{}function Cn(e,t,...r){let n=[];t instanceof Xx&&n.push(t),n=n.concat(r),function(a){const i=a.filter(l=>l instanceof Qx).length,o=a.filter(l=>l instanceof c0).length;if(i>1||i>0&&o>0)throw new be(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class c0 extends YM{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new c0(t,r,n)}_apply(t){const r=this._parse(t);return QS(t._query,r),new lo(t.firestore,t.converter,bp(t._query,r))}_parse(t){const r=o0(t.firestore);return function(a,i,o,l,c,f,d){let m;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new be(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){K_(d,f);const p=[];for(const x of d)p.push(G_(l,a,x));m={arrayValue:{values:p}}}else m=G_(l,a,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||K_(d,f),m=GM(o,i,d,f==="in"||f==="not-in");return nr.create(c,f,m)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Zr(e,t,r){const n=t,s=Yx("where",e);return c0._create(s,n,r)}class Qx extends Xx{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Qx(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:xs.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)QS(i,l),i=bp(i,l)}(t._query,r),new lo(t.firestore,t.converter,bp(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G_(e,t,r){if(typeof(r=zt(r))=="string"){if(r==="")throw new be(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qk(t)&&r.indexOf("/")!==-1)throw new be(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Ct.fromString(r));if(!Pe.isDocumentKey(n))throw new be(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return d_(e,new Pe(n))}if(r instanceof Wr)return d_(e,r._key);throw new be(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n0(r)}.`)}function K_(e,t){if(!Array.isArray(e)||e.length===0)throw new be(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function QS(e,t){const r=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new be(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new be(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class XM{convertValue(t,r="none"){switch(Zi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Ji(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Ue()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return io(t,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(t){var r,n,s;const a=(s=(n=(r=t.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>Kt(i.doubleValue));return new $x(a)}convertGeoPoint(t){return new Wx(Kt(t.latitude),Kt(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=vx(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(au(t));default:return null}}convertTimestamp(t){const r=hi(t);return new cr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Ct.fromString(t);xt(wS(n));const s=new iu(n.get(1),n.get(3)),a=new Pe(n.popFirst(5));return s.isEqual(r)||_a(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ZS extends YS{constructor(t,r,n,s,a,i){super(t,r,n,s,i),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(Yx("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class dh extends ZS{data(t={}){return super.data(t)}}class eA{constructor(t,r,n,s){this._firestore=t,this._userDataWriter=r,this._snapshot=s,this.metadata=new lc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new dh(this._firestore,this._userDataWriter,n.key,n,new lc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new be(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new dh(s._firestore,s._userDataWriter,o.doc.key,o.doc,new lc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new dh(s._firestore,s._userDataWriter,o.doc.key,o.doc,new lc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),f=i.indexOf(o.doc.key)),{type:QM(o.type),doc:l,oldIndex:c,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function QM(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(e){e=xn(e,Wr);const t=xn(e.firestore,Ea);return OM(a0(t),e._key).then(r=>tA(t,e,r))}class Jx extends XM{constructor(t){super(),this.firestore=t}convertBytes(t){return new yl(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Wr(this.firestore,null,r)}}function $t(e){e=xn(e,lo);const t=xn(e.firestore,Ea),r=a0(t),n=new Jx(t);return XS(e._query),MM(r,e._query).then(s=>new eA(t,n,e,s))}function qn(e,t,r){e=xn(e,Wr);const n=xn(e.firestore,Ea),s=JS(e.converter,t,r);return u0(n,[HS(o0(n),"setDoc",e._key,s,e.converter!==null,r).toMutation(e._key,Hn.none())])}function Ls(e,t,r,...n){e=xn(e,Wr);const s=xn(e.firestore,Ea),a=o0(s);let i;return i=typeof(t=zt(t))=="string"||t instanceof i0?HM(a,"updateDoc",e._key,t,r,n):zM(a,"updateDoc",e._key,t),u0(s,[i.toMutation(e._key,Hn.exists(!0))])}function JM(e){return u0(xn(e.firestore,Ea),[new Tx(e._key,Hn.none())])}function zu(e,t){const r=xn(e.firestore,Ea),n=Et(e),s=JS(e.converter,t);return u0(r,[HS(o0(e.firestore),"addDoc",n._key,s,e.converter!==null,{}).toMutation(n._key,Hn.exists(!1))]).then(()=>n)}function ZM(e,...t){var r,n,s;e=zt(e);let a={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||H_(t[i])||(a=t[i],i++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(H_(t[i])){const d=t[i];t[i]=(r=d.next)===null||r===void 0?void 0:r.bind(d),t[i+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),t[i+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,f;if(e instanceof Wr)c=xn(e.firestore,Ea),f=qd(e._key.path),l={next:d=>{t[i]&&t[i](tA(c,e,d))},error:t[i+1],complete:t[i+2]};else{const d=xn(e,lo);c=xn(d.firestore,Ea),f=d._query;const m=new Jx(c);l={next:p=>{t[i]&&t[i](new eA(c,m,d,p))},error:t[i+1],complete:t[i+2]},XS(e._query)}return function(m,p,x,g){const w=new Bx(g),k=new Ux(p,w,x);return m.asyncQueue.enqueueAndForget(async()=>Mx(await nd(m),k)),()=>{w.Za(),m.asyncQueue.enqueueAndForget(async()=>Lx(await nd(m),k))}}(a0(c),f,o,l)}function u0(e,t){return function(n,s){const a=new ca;return n.asyncQueue.enqueueAndForget(async()=>kM(await FM(n),s,a)),a.promise}(a0(e),t)}function tA(e,t,r){const n=r.docs.get(t._key),s=new Jx(e);return new ZS(e,s,t._key,n,new lc(r.hasPendingWrites,r.fromCache),t.converter)}function eL(){return new Hx("serverTimestamp")}function tL(e){return new Gx("increment",e)}(function(t,r=!0){(function(s){Il=s})(ao),ui(new xa("firestore",(n,{instanceIdentifier:s,options:a})=>{const i=n.getProvider("app").getImmediate(),o=new Ea(new sF(n.getProvider("auth-internal")),new lF(n.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new be(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(c.options.projectId,f)}(i,s),i);return a=Object.assign({useFetchStreams:r},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),zn(l_,"4.7.3",t),zn(l_,"4.7.3","esm2017")})();var rL="firebase",nL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(rL,nL,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebasestorage.googleapis.com",sL="storageBucket",aL=2*60*1e3,iL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends _s{constructor(t,r,n=0){super(om(t),`Firebase Storage: ${r} (${om(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return om(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var js;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(js||(js={}));function om(e){return"storage/"+e}function oL(){const e="An unknown error occurred, please check the error payload for server response.";return new Bs(js.UNKNOWN,e)}function lL(){return new Bs(js.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cL(){return new Bs(js.CANCELED,"User canceled the upload/download.")}function uL(e){return new Bs(js.INVALID_URL,"Invalid URL '"+e+"'.")}function fL(e){return new Bs(js.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function q_(e){return new Bs(js.INVALID_ARGUMENT,e)}function nA(){return new Bs(js.APP_DELETED,"The Firebase app was deleted.")}function hL(e){return new Bs(js.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=cs.makeFromUrl(t,r)}catch{return new cs(t,"")}if(n.path==="")return n;throw fL(t)}static makeFromUrl(t,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+s+i,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const f="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},g=r===rA?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",k=new RegExp(`^https?://${g}/${s}/${w}`,"i"),y=[{regex:o,indices:l,postModify:a},{regex:p,indices:x,postModify:c},{regex:k,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<y.length;I++){const O=y[I],F=O.regex.exec(t);if(F){const v=F[O.indices.bucket];let T=F[O.indices.path];T||(T=""),n=new cs(v,T),O.postModify(n);break}}if(n==null)throw uL(t);return n}}class dL{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(e,t,r){let n=1,s=null,a=null,i=!1,o=0;function l(){return o===2}let c=!1;function f(...w){c||(c=!0,t.apply(null,w))}function d(w){s=setTimeout(()=>{s=null,e(p,l())},w)}function m(){a&&clearTimeout(a)}function p(w,...k){if(c){m();return}if(w){m(),f.call(null,w,...k);return}if(l()||i){m(),f.call(null,w,...k);return}n<64&&(n*=2);let y;o===1?(o=2,y=0):y=(n+Math.random())*1e3,d(y)}let x=!1;function g(w){x||(x=!0,m(),!c&&(s!==null?(w||(o=2),clearTimeout(s),d(0)):w||(o=1)))}return d(0),a=setTimeout(()=>{i=!0,g(!0)},r),g}function pL(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(e){return e!==void 0}function Y_(e,t,r,n){if(n<t)throw q_(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw q_(`Invalid value for '${e}'. Expected ${r} or less.`)}function xL(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const s=t(n)+"="+t(e[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var ad;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(ad||(ad={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(e,t){const r=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,a=t.indexOf(e)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(t,r,n,s,a,i,o,l,c,f,d,m=!0){this.url_=t,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,x)=>{this.resolve_=p,this.reject_=x,this.start_()})}start_(){const t=(n,s)=>{if(s){n(!1,new Mf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const i=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&a.addUploadProgressListener(i),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(i),this.pendingConnection_=null;const o=a.getErrorCode()===ad.NO_ERROR,l=a.getStatus();if(!o||vL(l,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===ad.ABORT;n(!1,new Mf(!1,null,f));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Mf(c,a))})},r=(n,s)=>{const a=this.resolve_,i=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());gL(l)?a(l):a()}catch(l){i(l)}else if(o!==null){const l=oL();l.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,l)):i(l)}else if(s.canceled){const l=this.appDelete_?nA():cL();i(l)}else{const l=lL();i(l)}};this.canceled_?r(!1,new Mf(!1,null,!0)):this.backoffId_=mL(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&pL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mf{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function _L(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function wL(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function EL(e,t){t&&(e["X-Firebase-GMPID"]=t)}function TL(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function kL(e,t,r,n,s,a,i=!0){const o=xL(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return EL(c,t),_L(c,r),wL(c,a),TL(c,n),new yL(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function AL(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,r){this._service=t,r instanceof cs?this._location=r:this._location=cs.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new id(t,r)}get root(){const t=new cs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AL(this._location.path)}get storage(){return this._service}get parent(){const t=SL(this._location.path);if(t===null)return null;const r=new cs(this._location.bucket,t);return new id(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw hL(t)}}function X_(e,t){const r=t==null?void 0:t[sL];return r==null?null:cs.makeFromBucketSpec(r,e)}function IL(e,t,r,n={}){e.host=`${t}:${r}`,e._protocol="http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:qT(s,e.app.options.projectId))}class NL{constructor(t,r,n,s,a){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=rA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aL,this._maxUploadRetryTime=iL,this._requests=new Set,s!=null?this._bucket=cs.makeFromBucketSpec(s,this._host):this._bucket=X_(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=cs.makeFromBucketSpec(this._url,t):this._bucket=X_(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Y_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Y_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new id(this,t)}_makeRequest(t,r,n,s,a=!0){if(this._deleted)return new dL(nA());{const i=kL(t,this._appId,n,s,r,this._firebaseVersion,a);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,s).getPromise()}}const Q_="@firebase/storage",J_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="storage";function CL(e=$d(),t){e=zt(e);const n=Ru(e,sA).getImmediate({identifier:t}),s=tx("storage");return s&&bL(n,...s),n}function bL(e,t,r,n={}){IL(e,t,r,n)}function RL(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new NL(r,n,s,t,ao)}function PL(){ui(new xa(sA,RL,"PUBLIC").setMultipleInstances(!0)),zn(Q_,J_,""),zn(Q_,J_,"esm2017")}PL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="type.googleapis.com/google.protobuf.Int64Value",FL="type.googleapis.com/google.protobuf.UInt64Value";function aA(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function Bp(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>Bp(t));if(typeof e=="function"||typeof e=="object")return aA(e,t=>Bp(t));throw new Error("Data cannot be encoded in JSON: "+e)}function od(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case DL:case FL:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>od(t)):typeof e=="function"||typeof e=="object"?aA(e,t=>od(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jo extends _s{constructor(t,r,n){super(`${Zx}/${t}`,r||""),this.details=n}}function OL(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ML(e,t){let r=OL(e),n=r,s;try{const a=t&&t.error;if(a){const i=a.status;if(typeof i=="string"){if(!Z_[i])return new Jo("internal","internal");r=Z_[i],n=i}const o=a.message;typeof o=="string"&&(n=o),s=a.details,s!==void 0&&(s=od(s))}}catch{}return r==="ok"?null:new Jo(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(t,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="us-central1";function jL(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Jo("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class UL{constructor(t,r,n,s,a=Wp,i){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new LL(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Wp}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function VL(e,t,r){e.emulatorOrigin=`http://${t}:${r}`}function BL(e,t,r){return n=>$L(e,t,n,{})}async function WL(e,t,r,n){r["Content-Type"]="application/json";let s;try{s=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}function $L(e,t,r,n){const s=e._url(t);return zL(e,s,r,n)}async function zL(e,t,r,n){r=Bp(r);const s={data:r},a={},i=await e.contextProvider.getContext(n.limitedUseAppCheckTokens);i.authToken&&(a.Authorization="Bearer "+i.authToken),i.messagingToken&&(a["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=i.appCheckToken);const o=n.timeout||7e4,l=jL(o),c=await Promise.race([WL(t,s,a,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new Jo("cancelled","Firebase Functions instance was deleted.");const f=ML(c.status,c.json);if(f)throw f;if(!c.json)throw new Jo("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Jo("internal","Response is missing data field.");return{data:od(d)}}const ew="@firebase/functions",tw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="auth-internal",GL="app-check-internal",KL="messaging-internal";function qL(e,t){const r=(n,{instanceIdentifier:s})=>{const a=n.getProvider("app").getImmediate(),i=n.getProvider(HL),o=n.getProvider(KL),l=n.getProvider(GL);return new UL(a,i,o,l,s,e)};ui(new xa(Zx,r,"PUBLIC").setMultipleInstances(!0)),zn(ew,tw,t),zn(ew,tw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(e=$d(),t=Wp){const n=Ru(zt(e),Zx).getImmediate({identifier:t}),s=tx("functions");return s&&XL(n,...s),n}function XL(e,t,r){VL(zt(e),t,r)}function QL(e,t,r){return BL(zt(e),t)}qL(fetch.bind(self));const JL={apiKey:"AIzaSyD5-h96WDy4SzuP1XqClyBbpd1CL_tNZQw",authDomain:"my-xmas-movies.firebaseapp.com",projectId:"my-xmas-movies",storageBucket:"my-xmas-movies.firebasestorage.app",messagingSenderId:"534280822678",appId:"1:534280822678:web:5e91b52cb61b7ed71a47b7"},f0=QT(JL),Ic=eF(f0),iA=new Cs;iA.setCustomParameters({prompt:"select_account"});const ZL=iA,Me=UM(f0);CL(f0);const e6=YL(f0),oA=U.createContext(void 0),yn=()=>{const e=U.useContext(oA);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},t6=({children:e})=>{const[t,r]=U.useState(null),[n,s]=U.useState(null),[a,i]=U.useState(!0),[o,l]=U.useState(null);U.useEffect(()=>{const m=wk(Ic,async p=>{if(r(p),l(null),p)try{const x=Et(Me,"users",p.uid),g=await vn(x);if(g.exists())await qn(x,{lastLoginAt:eL()},{merge:!0}),s(g.data());else{const w={email:p.email||"",displayName:p.displayName||"User",photoURL:p.photoURL||void 0,createdAt:new Date,lastLoginAt:new Date};await qn(x,w),s({id:p.uid,...w})}}catch(x){console.error("Error fetching user profile:",x),l("Failed to load user profile")}else s(null);i(!1)});return()=>m()},[]);const d={currentUser:t,userProfile:n,isLoading:a,error:o,signInWithGoogle:async()=>{try{l(null),i(!0);const m=new Cs;await Pk(Ic,m)}catch(m){console.error("Login error:",m),l(m.message||"Failed to sign in")}finally{i(!1)}},signOut:async()=>{try{await zD(Ic)}catch(m){console.error("Sign out error:",m),l(m.message||"Failed to sign out")}}};return u.jsx(oA.Provider,{value:d,children:e})},Hu=()=>{const[e,t]=U.useState(!1),[r,n]=U.useState(!0),[s,a]=U.useState(null),[i,o]=U.useState(null);return U.useEffect(()=>{const l=wk(Ic,async c=>{if(n(!0),a(null),!c){t(!1),o(null),n(!1);return}o({uid:c.uid,email:c.email});try{const d=(await ik(c,!0)).claims.admin===!0;t(d)}catch(f){console.error("Error checking admin status:",f),a("Failed to verify admin status"),t(!1)}finally{n(!1)}});return()=>l()},[]),{isAdmin:e,loading:r,error:s,currentUser:i}},r6=({snowflakeCount:e=100,mobileSnowflakeCount:t=50})=>{const[r,n]=U.useState(!1),[s,a]=U.useState(e),i=U.useRef(null),o=U.useRef([]),l=U.useRef(0);return U.useEffect(()=>{const c=()=>{const f=window.matchMedia("(max-width: 768px)").matches;n(f),a(f?t:e)};return c(),window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}},[e,t]),U.useEffect(()=>{const c=i.current;if(!c)return;const f=c.getContext("2d");if(!f)return;const d=()=>{c.width=window.innerWidth,c.height=window.innerHeight},m=()=>{o.current=[];for(let w=0;w<s;w++)o.current.push({x:Math.random()*c.width,y:Math.random()*c.height,size:r?Math.random()*3+1:Math.random()*4+1,speed:r?Math.random()*.8+.3:Math.random()*1+.5,opacity:r?Math.random()*.5+.2:Math.random()*.6+.3,wind:r?Math.random()*.3-.15:Math.random()*.5-.25})},p=w=>{f.beginPath(),f.arc(w.x,w.y,w.size,0,Math.PI*2),f.fillStyle=`rgba(255, 255, 255, ${w.opacity})`,f.fill()},x=w=>{w.y+=w.speed,w.x+=w.wind,w.y>c.height&&(w.y=-10,w.x=Math.random()*c.width),w.x>c.width?w.x=0:w.x<0&&(w.x=c.width)},g=()=>{f.clearRect(0,0,c.width,c.height),o.current.forEach(w=>{p(w),x(w)}),l.current=requestAnimationFrame(g)};return window.addEventListener("resize",d),d(),m(),g(),()=>{window.removeEventListener("resize",d),cancelAnimationFrame(l.current)}},[s]),u.jsx("canvas",{ref:i,className:"fixed top-0 left-0 w-full h-full pointer-events-none z-10","aria-hidden":"true"})},n6=()=>{const[e,t]=U.useState(!1),[r,n]=U.useState(null),[s,a]=U.useState(!1);U.useEffect(()=>{const l=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;a(l);const c=f=>{f.preventDefault(),n(f),t(!0)};return window.addEventListener("beforeinstallprompt",c),window.matchMedia("(display-mode: standalone)").matches&&t(!1),()=>{window.removeEventListener("beforeinstallprompt",c)}},[]);const i=async()=>{if(!r)return;r.prompt();const{outcome:l}=await r.userChoice;n(null),t(!1),console.log(`User ${l==="accepted"?"accepted":"dismissed"} the install prompt`)},o=()=>{t(!1),localStorage.setItem("installPromptDismissed","true")};return e?u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-green-800 text-white p-4 shadow-lg z-50 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"mr-3 text-2xl",children:u.jsx("i",{className:"fas fa-gift"})}),u.jsx("div",{children:s?u.jsxs("p",{children:["Install this app on your device: tap ",u.jsx("i",{className:"fas fa-share"}),' and then "Add to Home Screen"']}):u.jsx("p",{children:"Add Christmas Movies to your home screen!"})})]}),u.jsxs("div",{className:"flex items-center",children:[!s&&u.jsx("button",{onClick:i,className:"bg-red-700 hover:bg-red-800 text-white py-1 px-4 rounded-full mr-2",children:"Install"}),u.jsx("button",{onClick:o,className:"bg-transparent hover:bg-green-700 text-white py-1 px-2 rounded-full",children:u.jsx("i",{className:"fas fa-times"})})]})]}):null};function s6(){const{currentUser:e}=yn(),{isAdmin:t}=Hu(),[r,n]=U.useState(!1),s=vs();U.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),U.useEffect(()=>{r&&n(!1)},[s.pathname]);const a=()=>{n(!r)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-xmas-bg to-xmas-card bg-opacity-95",children:[u.jsx(r6,{snowflakeCount:150,mobileSnowflakeCount:40}),u.jsx(n6,{}),u.jsxs("div",{className:"navbar bg-gradient-to-r from-xmas-card via-xmas-card to-xmas-bg border-b border-xmas-gold px-2 sm:px-4 shadow-lg relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-60"}),u.jsx("div",{className:"absolute -bottom-4 left-0 right-0 h-8 snow-accumulation-fast"}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("button",{className:"btn btn-ghost btn-sm md:hidden relative z-10",onClick:a,"aria-label":"Toggle navigation menu",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),u.jsxs(Ke,{to:"/",className:"hidden sm:flex items-center group",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-xmas-gold to-xmas-line rounded-full opacity-70 group-hover:opacity-100 blur transition duration-200"}),u.jsx("div",{className:"relative flex items-center justify-center w-10 h-10 bg-xmas-card rounded-full border border-xmas-gold overflow-hidden",children:u.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})})]}),u.jsx("div",{className:"ml-3 font-christmas text-xl sm:text-2xl bg-gradient-to-br from-xmas-gold via-xmas-snow to-xmas-gold bg-clip-text text-transparent font-bold",children:"Christmas Movies"})]}),u.jsxs(Ke,{to:"/",className:"sm:hidden flex items-center",children:[u.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-xmas-card border border-xmas-gold overflow-hidden",children:u.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover"})}),u.jsx("span",{className:"ml-2 font-christmas text-lg text-xmas-gold",children:"Christmas Movies"})]})]}),u.jsx("div",{className:"flex-1"}),u.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e&&u.jsxs(Ke,{to:"/profile",className:"btn btn-primary btn-sm hidden md:flex",children:[u.jsx("i",{className:"fas fa-user-circle mr-1"})," Profile"]}),e?u.jsxs("div",{className:"dropdown dropdown-end",children:[u.jsx("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar cursor-pointer",children:u.jsx("div",{className:"w-10 rounded-full border border-xmas-gold",children:e.photoURL?u.jsx("img",{src:e.photoURL,alt:"Profile"}):u.jsx("div",{className:"bg-xmas-card flex items-center justify-center h-full",children:u.jsx("i",{className:"fas fa-user text-xmas-gold"})})})}),u.jsxs("ul",{tabIndex:0,className:"dropdown-content menu menu-sm mt-3 z-[1] p-2 shadow bg-xmas-card rounded-box w-52 border border-xmas-gold",children:[u.jsx("li",{children:u.jsxs(Ke,{to:"/profile",className:"justify-between",children:["Profile",u.jsx("i",{className:"fas fa-user-circle"})]})}),u.jsx("li",{children:u.jsxs(Ke,{to:"/movies",children:["My Movies",u.jsx("i",{className:"fas fa-film"})]})}),u.jsx("li",{children:u.jsxs(Ke,{to:"/random",children:["Random Movie",u.jsx("i",{className:"fas fa-random"})]})}),u.jsx("li",{children:u.jsxs(Ke,{to:"/import",children:["Import Movies",u.jsx("i",{className:"fas fa-file-import"})]})}),t&&u.jsx("li",{children:u.jsxs(Ke,{to:"/admin",className:"text-xmas-gold",children:["Admin Dashboard",u.jsx("i",{className:"fas fa-crown"})]})})]})]}):u.jsxs(Ke,{to:"/login",className:"btn btn-primary btn-sm",children:[u.jsx("i",{className:"fas fa-sign-in-alt mr-1"})," Sign In"]})]})]}),u.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-70 z-20 transition-opacity duration-300 md:hidden ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:a}),u.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-xmas-bg to-xmas-card border-r border-xmas-gold z-30 transform transition-transform duration-300 ease-in-out md:hidden shadow-xl ${r?"translate-x-0":"-translate-x-full"}`,children:[u.jsxs("div",{className:"relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-60"}),u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-xmas-gold bg-xmas-card bg-opacity-80",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-xmas-card border border-xmas-gold shadow-lg overflow-hidden",children:u.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover"})}),u.jsx("div",{className:"ml-3 font-christmas text-xl bg-gradient-to-br from-xmas-gold via-xmas-snow to-xmas-gold bg-clip-text text-transparent font-bold",children:"Christmas Movies"})]}),u.jsx("button",{className:"btn btn-ghost btn-sm text-xmas-text hover:text-xmas-line",onClick:a,"aria-label":"Close navigation menu",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),u.jsx("div",{className:"overflow-y-auto h-full pb-20",children:u.jsx("div",{className:"p-4 pt-6",children:u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-christmas text-xl text-xmas-gold mb-4 pl-2 border-l-2 border-xmas-line",children:"Navigation"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsx("li",{children:u.jsx(Ra,{to:"/",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-home mr-3 text-xmas-gold"}),u.jsx("span",{children:"Home"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})}),e?u.jsxs(u.Fragment,{children:[u.jsx("li",{children:u.jsx(Ra,{to:"/movies",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-film mr-3 text-xmas-gold"}),u.jsx("span",{children:"My Movies"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})}),u.jsx("li",{children:u.jsx(Ra,{to:"/random",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-random mr-3 text-xmas-gold"}),u.jsx("span",{children:"Random Movie"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})}),u.jsx("li",{children:u.jsx(Ra,{to:"/achievements",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-trophy mr-3 text-xmas-gold"}),u.jsx("span",{children:"Achievements"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})}),u.jsx("li",{children:u.jsx(Ra,{to:"/import",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-file-import mr-3 text-xmas-gold"}),u.jsx("span",{children:"Add Movies"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})}),u.jsx("li",{children:u.jsx(Ra,{to:"/profile",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-user-circle mr-3 text-xmas-gold"}),u.jsx("span",{children:"Profile"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})}),t&&u.jsx("li",{children:u.jsx(Ra,{to:"/admin",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-crown mr-3 text-xmas-gold"}),u.jsx("span",{children:"Admin Dashboard"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})})]}):u.jsx("li",{children:u.jsx(Ra,{to:"/login",onClick:a,className:({isActive:i})=>i?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:i})=>u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-sign-in-alt mr-3 text-xmas-gold"}),u.jsx("span",{children:"Sign In"}),u.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${i?"visible":"invisible"}`})]})})})]})]})})})]}),u.jsx("main",{className:"p-4",children:u.jsx(UT,{})}),u.jsx("div",{className:"fixed bottom-0 left-0 w-full pointer-events-none",children:u.jsx("div",{className:"container mx-auto",children:u.jsxs("div",{className:"relative h-16",children:[u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-40"}),u.jsx("div",{className:"absolute bottom-4 left-4 opacity-30",children:u.jsx("i",{className:"fas fa-tree text-4xl text-xmas-gold"})}),u.jsx("div",{className:"absolute bottom-4 right-4 opacity-30",children:u.jsx("i",{className:"fas fa-star text-4xl text-xmas-gold"})})]})})})]})}const lA=U.createContext(null);function a6({children:e}){const[t,r]=U.useState([]),n=U.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]),s=U.useCallback((i,o)=>{const l=Math.random().toString(36).slice(2);r(c=>[...c,{id:l,kind:i,message:o}]),setTimeout(()=>n(l),3e3)},[n]),a=U.useMemo(()=>({push:s}),[s]);return u.jsxs(lA.Provider,{value:a,children:[e,u.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 space-y-2",children:t.map(i=>u.jsxs("div",{className:`alert shadow-lg max-w-sm border-2 rounded-xl bg-gradient-to-r ${i.kind==="success"?"from-green-700/90 to-emerald-600/90 border-green-300":i.kind==="error"?"from-red-800/90 to-rose-700/90 border-red-300":"from-sky-700/90 to-cyan-600/90 border-sky-300"} text-white`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-lg mr-2",children:i.kind==="success"?"":i.kind==="error"?"":""}),u.jsx("span",{className:"ml-1",children:i.message})]}),u.jsx("button",{className:"btn btn-ghost btn-xs text-white/80 hover:text-white",onClick:()=>n(i.id),children:""})]},i.id))})]})}function cA(){const e=U.useContext(lA);if(!e)throw new Error("useToast must be used inside <ToastProvider>");return{success:t=>e.push("success",t),error:t=>e.push("error",t),info:t=>e.push("info",t)}}const rw=({children:e})=>{const{currentUser:t,isLoading:r}=yn();return r?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):t?e?u.jsx(u.Fragment,{children:e}):u.jsx(UT,{}):u.jsx(r4,{to:"/login"})},Zo=[{id:"first_snowflake",name:"First Snowflake",description:"You logged your very first watched Christmas movie.",hint:"Watch 1 movie.",icon:"",check:e=>e.totalWatched>=1},{id:"snowball_starter",name:"Snowball Starter",description:"You have started to build your festive watchlist.",hint:"Watch 5 movies.",icon:"",check:e=>e.totalWatched>=5},{id:"blizzard_binger",name:"Blizzard Binger",description:"You powered through a flurry of festive films.",hint:"Watch 20 movies.",icon:"",check:e=>e.totalWatched>=20},{id:"christmas_marathoner",name:"Christmas Marathoner",description:"You turned Christmas movies into a marathon event.",hint:"Watch 50 movies.",icon:"",check:e=>e.totalWatched>=50},{id:"twelve_days",name:"12 Days of Christmas",description:"You kept the festive streak going for 12 days.",hint:"Watch a movie daily for 12 days.",icon:"",check:e=>e.hasTwelveDayStreak},{id:"the_grinch",name:"The Grinch",description:"Not every movie can be a Christmas miracle.",hint:"Give a movie 1.",icon:"",check:e=>e.lowRatingAny},{id:"santas_favourite",name:"Santa's Favourite",description:"You found a film worthy of Santa himself.",hint:"Give a movie a perfect 10.",icon:"",check:e=>e.highRatingAny},{id:"the_critic",name:"The Critic",description:"You have opinions on a lot of movies.",hint:"Rate 20 movies.",icon:"",check:e=>e.totalRated>=20},{id:"nice_list",name:"Nice List",description:"You are generous with your festive ratings.",hint:"Keep your average rating above 5.",icon:"",check:e=>e.averageRating>5},{id:"classic_connoisseur",name:"Classic Connoisseur",description:"You appreciate the classics before Y2K.",hint:"Watch 5 movies released before 2000.",icon:"",check:e=>e.classicWatched>=5},{id:"animated_joy",name:"Animated Joy",description:"You love animated festive adventures.",hint:"Watch 5 animated Christmas movies.",icon:"",check:e=>e.animatedCount>=5},{id:"romcom_reindeer",name:"Rom-Com Reindeer",description:"You love a festive rom-com.",hint:"Watch 5 Christmas romance movies.",icon:"",check:e=>e.romanceCount>=5},{id:"decorator",name:"Decorator",description:"You have a whole row of favourites lit up.",hint:"Mark 10 movies as favourite.",icon:"",check:e=>e.favoriteCount>=10},{id:"elf_mode",name:"Elf Mode",description:"You keep coming back like a dedicated Christmas elf.",hint:"Use the app on 10 different days.",icon:"",check:e=>e.usageDistinctDays>=10},{id:"christmas_eve_watcher",name:"Christmas Eve Watcher",description:"You watched a movie on Christmas Eve.",hint:"Watch a movie on Dec 24.",icon:"",check:e=>e.hasChristmasEveWatch},{id:"new_years_cozy",name:"New Year's Cozy",description:"You started the year with a cozy movie.",hint:"Watch a movie on Jan 1.",icon:"",check:e=>e.hasNewYearsWatch}];function nw(e){if(!e)return null;if(e instanceof Date)return e;if(typeof e.toDate=="function")return e.toDate();if(typeof e=="object"&&"seconds"in e)return new Date(e.seconds*1e3);if(typeof e=="string"){const t=new Date(e);if(!isNaN(t.getTime()))return t}return null}function i6(e,t){let r=0,n=0,s=0,a=0,i=0,o=0,l=0,c=!1,f=!1;const d=new Set,m=new Set,p=new Set;for(const O of e){if(O.watched){r++;const v=nw(O.watchedDate);if(v){const S=v.toISOString().split("T")[0];p.add(S);const C=v.getMonth();v.getDate(),C===11&&d.add(S)}const T=t[O.movieId];T&&T.releaseDate&&T.releaseDate.substring(0,4)<"2000"&&a++,T&&T.genres&&T.genres.includes("Romance")&&i++,T&&T.genres&&T.genres.includes("Animation")&&o++}O.favorite&&l++,typeof O.rating=="number"&&(n++,s+=O.rating,O.rating<=1&&(c=!0),O.rating>=10&&(f=!0));const F=nw(O.updatedAt||O.addedAt);if(F){const v=F.toISOString().split("T")[0];m.add(v)}}const x=Array.from(p).map(O=>{const F=new Date(O+"T00:00:00Z");return Math.floor(F.getTime()/864e5)}).sort((O,F)=>O-F);let g=!1,w=0,k=null;for(const O of x){if(k===null||O===k+1?w+=1:O!==k&&(w=1),w>=12){g=!0;break}k=O}let E=!1,y=!1;for(const O of p){const F=new Date(O+"T00:00:00Z"),v=F.getMonth(),T=F.getDate();v===11&&T===24&&(E=!0),v===0&&T===1&&(y=!0)}const I=n>0?s/n:0;return{totalWatched:r,totalRated:n,averageRating:I,lowRatingAny:c,highRatingAny:f,classicWatched:a,romanceCount:i,animatedCount:o,favoriteCount:l,usageDistinctDays:m.size,decemberDistinctDays:d.size,hasChristmasEveWatch:E,hasNewYearsWatch:y,hasTwelveDayStreak:g}}async function mh(e){const t=await $t(Rt(Me,`users/${e}/movies`)),r=[],n=new Set;t.forEach(f=>{const d=f.data();r.push({id:f.id,...d}),d.movieId&&n.add(d.movieId)});const s={};if(n.size){const f=Array.from(n);for(const d of f){(await $t(Rt(Me,"movies"))).forEach(p=>{const x=p.data();s[p.id]={id:p.id,...x}});break}}const a=i6(r,s),i=Rt(Me,`users/${e}/achievements`),o=await $t(i),l=new Set;o.forEach(f=>l.add(f.id));const c=[];for(const f of Zo)!l.has(f.id)&&f.check(a)&&(c.push(f.id),await qn(Et(Me,`users/${e}/achievements`,f.id),{unlockedAt:new Date,seen:!1}));return c}const o6=()=>{const{currentUser:e}=yn(),[t,r]=U.useState(new Date),[n,s]=U.useState(null),[a,i]=U.useState(null),o=Zo.length;U.useEffect(()=>{const f=setInterval(()=>r(new Date),1e3);return()=>clearInterval(f)},[]);const l=U.useMemo(()=>{const f=t.getFullYear(),d=new Date(f,11,25,0,0,0);return t>d?new Date(f+1,11,25,0,0,0):d},[t]),c=U.useMemo(()=>{const f=l.getTime()-t.getTime(),d=Math.max(0,Math.floor(f/1e3)),m=Math.floor(d/86400),p=Math.floor(d%86400/3600),x=Math.floor(d%3600/60),g=d%60;return{days:m,hours:p,minutes:x,seconds:g}},[t,l]);return U.useEffect(()=>{const f=Et(Me,"stats","global"),d=ZM(f,m=>{const p=m.data();s(typeof(p==null?void 0:p.watchedTotal)=="number"?p.watchedTotal:0)});return()=>d()},[]),U.useEffect(()=>{if(!e){i(null);return}(async()=>{try{const d=Rt(Me,`users/${e.uid}/achievements`),m=await $t(d);i(m.size)}catch(d){console.error("Error loading achievements count",d),i(null)}})()},[e]),u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h1",{className:"font-christmas text-5xl md:text-7xl text-xmas-line mb-4",children:"My Christmas Movies"}),u.jsx("p",{className:"text-xl md:text-2xl text-xmas-snow mb-8",children:"Track, rate, and discover your favourite Christmas movies!"}),u.jsx("div",{className:"flex flex-col md:flex-row justify-center gap-6 mb-4 md:mb-6",children:e?u.jsxs(u.Fragment,{children:[u.jsxs(Ke,{to:"/movies",className:"btn btn-primary btn-lg text-xl px-8 py-3 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30",children:[u.jsx("i",{className:"fas fa-film mr-2"})," My Movies"]}),u.jsxs(Ke,{to:"/random",className:"btn btn-primary btn-lg text-xl px-8 py-3 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30",children:[u.jsx("i",{className:"fas fa-random mr-2"})," Random Movie"]}),u.jsxs(Ke,{to:"/achievements",className:"btn btn-primary btn-lg text-xl px-8 py-3 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30",children:[u.jsx("i",{className:"fas fa-trophy mr-2"})," Achievements"]})]}):u.jsxs(Ke,{to:"/login",className:"btn btn-primary btn-lg text-xl px-8 py-3 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30",children:[u.jsx("i",{className:"fas fa-sign-in-alt mr-2"})," Sign In"]})})]}),u.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:u.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-xmas-gold to-transparent"})}),u.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-30 relative",children:[u.jsx("h2",{className:"font-christmas text-3xl text-xmas-gold text-center mb-6",children:"Countdown to Christmas"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-stretch",children:[u.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"text-5xl md:text-6xl font-bold text-xmas-line mb-2",children:[c.days,"d ",c.hours,"h ",c.minutes,"m ",c.seconds,"s"]}),u.jsx("p",{className:"text-xmas-text text-opacity-80",children:"until Christmas Day"})]}),u.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-gold flex flex-col items-center justify-center",children:[u.jsx("div",{className:"text-5xl md:text-6xl font-bold text-xmas-gold mb-2",children:n??""}),u.jsx("p",{className:"text-xmas-text text-opacity-80 text-center",children:"total movies watched"})]})]})]}),u.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-20 snow-accumulation snow-accumulation-slow relative",children:[u.jsx("h2",{className:"font-christmas text-3xl text-xmas-line mb-6 text-center",children:"Features"}),u.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[u.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:u.jsx("i",{className:"fas fa-search"})}),u.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Find Movies"}),u.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Search and discover Christmas movies using OMDb data"})]}),u.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-gold",children:[u.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:u.jsx("i",{className:"fas fa-star"})}),u.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Rate & Review"}),u.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Keep track of movies you've watched and rate them"})]}),u.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[u.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:u.jsx("i",{className:"fas fa-random"})}),u.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Random Picker"}),u.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Can't decide what to watch? Let our random movie picker help!"})]}),u.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[u.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:u.jsx("i",{className:"fas fa-trophy"})}),u.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Achievements"}),u.jsx("p",{className:"text-center text-xmas-text text-opacity-80 mb-2",children:"Unlock festive badges as you watch, rate, and explore."}),e&&u.jsx("p",{className:"text-center text-xmas-text text-opacity-80 font-medium",children:typeof a=="number"?`${a} / ${o} unlocked`:`${o} to discover`})]})]})]}),u.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-30 snow-accumulation snow-accumulation-fast relative",children:u.jsxs("div",{className:"mb-6 text-center",children:[u.jsxs("h2",{className:"font-christmas text-3xl md:text-4xl text-xmas-gold inline-block relative",children:[u.jsx("span",{className:"relative z-10",children:"Create Your Collection"}),u.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-1 bg-xmas-gold opacity-30 rounded-full"})]}),u.jsx("p",{className:"mt-4 mb-6",children:"Add movies to your collection and rate them"}),e?u.jsxs(Ke,{to:"/import",className:"btn btn-primary",children:[u.jsx("i",{className:"fas fa-file-import mr-2"})," Add Movies"]}):u.jsxs(Ke,{to:"/login",className:"btn btn-primary",children:[u.jsx("i",{className:"fas fa-sign-in-alt mr-2"})," Sign In to Add"]})]})}),u.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:u.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-xmas-gold to-transparent"})}),u.jsxs("footer",{className:"text-center text-xmas-mute mt-12 pb-8 space-y-4",children:[u.jsxs("p",{children:[" ",new Date().getFullYear()," Christmas Movie Database"]}),u.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-xs md:text-sm text-xmas-mute/80",children:[u.jsx("a",{href:"https://www.omdbapi.com/",target:"_blank",rel:"noopener noreferrer",className:"link link-hover",children:"OMDb API"}),u.jsx("p",{className:"max-w-xl px-4 text-center",children:"This product uses the OMDb API but is not endorsed or certified by OMDb."})]})]})]})},l6=()=>{const e=ys(),{currentUser:t,isLoading:r,error:n,signInWithGoogle:s}=yn();U.useEffect(()=>{t&&!r&&e("/")},[t,r,e]);const a=async()=>{try{await s()}catch(i){console.error("Login failed:",i)}};return r?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsx("div",{className:"container mx-auto px-4 py-12",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"font-christmas text-4xl text-xmas-line mb-2",children:"Christmas Movie Database"}),u.jsx("p",{className:"text-xmas-mute",children:"Sign in to manage your Christmas movie collection"})]}),u.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[n&&u.jsx("div",{className:"bg-error bg-opacity-10 border-l-4 border-error p-4 mb-6 rounded",children:u.jsx("p",{className:"text-error",children:n})}),u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("p",{className:"mb-4",children:"Sign in with your Google account to access your Christmas movie collection."}),u.jsx("p",{className:"text-sm text-xmas-mute mb-6",children:"Track, rate, and discover Christmas movies!"}),u.jsxs("button",{onClick:a,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[u.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
                  s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20\r
                  s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),u.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039\r
                  l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),u.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
                  c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),u.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
                  c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),"Sign in with Google"]})]})]}),u.jsx("div",{className:"text-center mt-6",children:u.jsx("p",{className:"text-sm text-xmas-mute",children:"By signing in, you agree to our Terms of Service and Privacy Policy."})})]})})},uA=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),ev=(e,t)=>`/movies/${uA(e)}?id=${t}`,fA=e=>new URLSearchParams(e).get("id"),c6=5*60*1e3;let is=null;const u6=(e,t,r)=>{is={userMovies:t,movies:r,timestamp:Date.now(),userId:e}},f6=e=>!is||is.userId!==e||Date.now()-is.timestamp>c6?null:{userMovies:is.userMovies,movies:is.movies},hA=()=>{is=null},h6=(e,t,r)=>{is&&is.userId===e&&(is.userMovies[t]=r,is.timestamp=Date.now())},Gu=async(e,t,r)=>{const n=Et(Me,`users/${e}/movies`,t);if((await vn(n)).exists()){const o={...r,updatedAt:new Date};r.rating===null&&(o.rating=null),r.watchedDate===null&&(o.watchedDate=null),r.review===null&&(o.review=null),await Ls(n,o)}else{const o={userId:e,movieId:t,watched:r.watched||!1,favorite:r.favorite||!1,addedAt:new Date,updatedAt:new Date,...r};await qn(n,o)}const a=await vn(n),i={id:a.id,...a.data()};return h6(e,t,i),i},ld=async(e,t)=>{const r=Et(Me,`users/${e}/movies`,t),n=await vn(r);return n.exists()?{id:n.id,...n.data()}:null},dA=async e=>{const t=Rt(Me,`users/${e}/movies`),r=await $t(t),n=[];return r.forEach(s=>{n.push({id:s.id,...s.data()})}),n},d6=async(e,t)=>{const r=Et(Me,`users/${e}/movies`,t);await JM(r),hA()},Ku=async e=>{const t=f6(e);if(t)return t;const r=await dA(e),n={},s=[];r.forEach(o=>{n[o.movieId]=o,s.push(o.movieId)});const a=[];if(s.length>0)for(let l=0;l<s.length;l+=10){const f=s.slice(l,l+10).map(m=>vn(Et(Me,"movies",m)).then(p=>p.exists()?{id:p.id,...p.data()}:null).catch(p=>(console.error(`Error fetching movie ${m}:`,p),null))),d=await Promise.all(f);a.push(...d.filter(Boolean))}const i={userMovies:n,movies:a};return u6(e,n,a),i},os=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.match(/(\d{4})/);if(!r)return null;const n=parseInt(r[1],10);return Number.isFinite(n)?String(n):null},m6=()=>{const{currentUser:e,userProfile:t}=yn(),r=cA(),[n,s]=U.useState([]),[a,i]=U.useState({}),[o,l]=U.useState(!0),[c,f]=U.useState(!0),[d,m]=U.useState(null),[p,x]=U.useState("all"),[g,w]=U.useState({option:"title",direction:"asc"}),[k,E]=U.useState(""),[y,I]=U.useState("all"),[O,F]=U.useState(!1),[v,T]=U.useState(!1),[S,C]=U.useState(""),[P,b]=U.useState(""),[R,ae]=U.useState(""),[ee,fe]=U.useState(!1),ue=vs();ys();const q=B=>B.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),G=async()=>{if(e)try{fe(!0);const B=Et(Me,"users",e.uid),Q={isPublicWatchlist:v,publicWatchlistName:S||null,publicWatchlistTagline:P||null,publicWatchlistSlug:R||null};if(v&&!Q.publicWatchlistSlug){const de=S||(t==null?void 0:t.displayName)||"xmas-watchlist";Q.publicWatchlistSlug=q(de),ae(Q.publicWatchlistSlug)}if(await Ls(B,Q),v&&Q.publicWatchlistSlug){const de=Et(Me,"publicProfiles",Q.publicWatchlistSlug);await qn(de,{userId:e.uid,displayName:(t==null?void 0:t.displayName)||"",photoURL:(t==null?void 0:t.photoURL)||null,publicWatchlistName:Q.publicWatchlistName||null,publicWatchlistTagline:Q.publicWatchlistTagline||null,publicWatchlistSlug:Q.publicWatchlistSlug,isPublicWatchlist:!0},{merge:!0})}else if(!v&&R){const de=Et(Me,"publicProfiles",R);await qn(de,{userId:e.uid,isPublicWatchlist:!1,publicWatchlistName:null,publicWatchlistTagline:null},{merge:!0})}r.success("Sharing settings saved")}catch(B){console.error("Error saving sharing settings:",B),r.error("Failed to save sharing settings")}finally{fe(!1)}},Z=async()=>{if(R)try{const Q=`${window.location.origin}/u/${R}`;await navigator.clipboard.writeText(Q),r.success("Link copied to clipboard")}catch(B){console.error("Failed to copy link",B),r.error("Failed to copy link")}};U.useEffect(()=>{const B=new URLSearchParams(ue.search),Q=B.get("q")||"",de=B.get("field")||"all";Q!==k&&E(Q),de!==y&&I(de)},[ue.search]),U.useEffect(()=>{t&&(T(!!t.isPublicWatchlist),C(t.publicWatchlistName||""),b(t.publicWatchlistTagline||""),ae(t.publicWatchlistSlug||""))},[t]),U.useEffect(()=>{v&&S&&(R||ae(q(S)))},[v,S,R]),U.useEffect(()=>{(async()=>{if(e)try{f(!0);const{userMovies:Q,movies:de}=await Ku(e.uid);i(Q),s(de)}catch(Q){console.error("Error fetching movies:",Q),m("Failed to load movies")}finally{f(!1),l(!1)}})()},[e,ue.key]);const ce=B=>{w(Q=>Q.option===B?{option:B,direction:Q.direction==="asc"?"desc":"asc"}:{option:B,direction:"asc"})},j=U.useCallback(B=>{var ge;if(!k.trim())return!0;const Q=k.toLowerCase().trim(),de=Q.split(",").map(De=>De.trim()).filter(Boolean),Ee=De=>B.cast&&B.cast.some(H=>H.toLowerCase().includes(De)),_e=a[B.id];switch(y){case"title":return B.title.toLowerCase().includes(Q)||B.sortTitle&&B.sortTitle.toLowerCase().includes(Q)||B.originalTitle&&B.originalTitle.toLowerCase().includes(Q);case"year":return!!B.releaseDate&&!!((ge=os(B.releaseDate))!=null&&ge.includes(Q));case"cast":return de.length?de.some(De=>Ee(De)):Ee(Q);case"all":default:{const De=B.releaseDate&&os(B.releaseDate);return B.title.toLowerCase().includes(Q)||B.sortTitle&&B.sortTitle.toLowerCase().includes(Q)||B.originalTitle&&B.originalTitle.toLowerCase().includes(Q)||De&&De.includes(Q)||B.overview&&B.overview.toLowerCase().includes(Q)||B.genres&&B.genres.some(H=>H.toLowerCase().includes(Q))||B.directors&&B.directors.some(H=>H.toLowerCase().includes(Q))||B.cast&&B.cast.some(H=>H.toLowerCase().includes(Q))||_e&&_e.review&&_e.review.toLowerCase().includes(Q)}}},[k,y,a]),Y=U.useMemo(()=>{if(c)return[];l(!0);const B=n.filter(Q=>{const de=a[Q.id];let Ee=!0;switch(p){case"watched":Ee=de&&de.watched;break;case"unwatched":Ee=!de||!de.watched;break;case"favorites":Ee=de&&de.favorite;break}return Ee&&j(Q)}).sort((Q,de)=>{const Ee=a[Q.id],_e=a[de.id],ge=g.direction==="asc"?1:-1;switch(g.option){case"title":const De=Q.sortTitle||Q.title,H=de.sortTitle||de.title;return De.localeCompare(H)*ge;case"year":{const Se=Q.releaseDate&&os(Q.releaseDate),vt=de.releaseDate&&os(de.releaseDate),Yt=Se?parseInt(Se,10):0,fr=vt?parseInt(vt,10):0;return(Yt-fr)*ge}case"rating":const tt=(Ee==null?void 0:Ee.rating)||0,He=(_e==null?void 0:_e.rating)||0;return(tt-He)*ge;case"watched":const Je=Ee!=null&&Ee.watched?1:0,Fe=_e!=null&&_e.watched?1:0;return(Je-Fe)*ge;default:return 0}});return l(!1),B},[n,a,p,g,k,y,c]),K=Y;return c?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 sm:mb-8 gap-3",children:[u.jsx("h1",{className:"font-christmas text-2xl sm:text-3xl md:text-4xl text-xmas-line",children:"My Christmas Movies"}),u.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center",children:[u.jsxs(Ke,{to:"/random",className:"btn btn-primary btn-sm sm:btn-md",children:[u.jsx("i",{className:"fas fa-random mr-1 sm:mr-2"})," ",u.jsx("span",{className:"hidden xs:inline",children:"Random Movie"}),u.jsx("span",{className:"xs:hidden",children:"Random"})]}),u.jsxs(Ke,{to:"/import",className:"btn btn-primary btn-sm sm:btn-md",children:[u.jsx("i",{className:"fas fa-file-import mr-1 sm:mr-2"})," ",u.jsx("span",{className:"hidden xs:inline",children:"Add Movies"}),u.jsx("span",{className:"xs:hidden",children:"Import"})]}),u.jsxs("button",{type:"button",className:"btn btn-primary btn-sm sm:btn-md",onClick:()=>F(!0),children:[u.jsx("i",{className:"fas fa-share-alt mr-1 sm:mr-2"}),u.jsx("span",{className:"hidden xs:inline",children:"Share"}),u.jsx("span",{className:"xs:hidden",children:"Share"})]})]})]}),d&&u.jsxs("div",{className:"alert alert-error mb-6",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:d})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-3",children:[u.jsxs("div",{className:"relative flex-grow",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:u.jsx("i",{className:"fas fa-search text-gray-400"})}),u.jsx("input",{type:"text",className:"input input-bordered input-sm sm:input-md w-full pl-8 pr-8",placeholder:"   Search movies...",value:k,onChange:B=>E(B.target.value)}),k&&u.jsx("button",{className:"absolute inset-y-0 right-0 pr-2 flex items-center",onClick:()=>E(""),children:u.jsx("i",{className:"fas fa-times text-gray-400 hover:text-gray-600"})})]}),u.jsxs("select",{className:"select select-bordered select-sm sm:select-md w-full sm:w-36",value:y,onChange:B=>I(B.target.value),children:[u.jsx("option",{value:"all",children:"All Fields"}),u.jsx("option",{value:"title",children:"Title Only"}),u.jsx("option",{value:"year",children:"Year Only"}),u.jsx("option",{value:"cast",children:"Cast Only"})]})]}),u.jsxs("div",{className:"tabs tabs-boxed mb-3 text-xs sm:text-sm overflow-x-auto",children:[u.jsx("button",{className:`tab ${p==="all"?"tab-active":""}`,onClick:()=>x("all"),children:"All Movies"}),u.jsx("button",{className:`tab ${p==="watched"?"tab-active":""}`,onClick:()=>x("watched"),children:"Watched"}),u.jsx("button",{className:`tab ${p==="unwatched"?"tab-active":""}`,onClick:()=>x("unwatched"),children:"Watch"}),u.jsxs("button",{className:`tab ${p==="favorites"?"tab-active":""}`,onClick:()=>x("favorites"),children:[u.jsx("span",{className:"hidden sm:inline",children:"Favourites"}),u.jsx("span",{className:"sm:hidden",children:"Favs"})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-3 bg-xmas-card bg-opacity-50 p-2 rounded-lg overflow-x-auto",children:[u.jsx("span",{className:"text-xs sm:text-sm font-medium mr-1",children:"Sort:"}),u.jsxs("div",{className:"flex flex-nowrap gap-1 overflow-x-auto",children:[u.jsxs("button",{className:`btn btn-xs ${g.option==="title"?"btn-primary":"btn-ghost"}`,onClick:()=>ce("title"),children:["Title ",g.option==="title"&&u.jsx("i",{className:`fas fa-sort-${g.direction==="asc"?"up":"down"} ml-1`})]}),u.jsxs("button",{className:`btn btn-xs ${g.option==="year"?"btn-primary":"btn-ghost"}`,onClick:()=>ce("year"),children:["Year ",g.option==="year"&&u.jsx("i",{className:`fas fa-sort-${g.direction==="asc"?"up":"down"} ml-1`})]}),u.jsxs("button",{className:`btn btn-xs ${g.option==="rating"?"btn-primary":"btn-ghost"}`,onClick:()=>ce("rating"),children:["Rating ",g.option==="rating"&&u.jsx("i",{className:`fas fa-sort-${g.direction==="asc"?"up":"down"} ml-1`})]}),u.jsxs("button",{className:`btn btn-xs ${g.option==="watched"?"btn-primary":"btn-ghost"}`,onClick:()=>ce("watched"),children:[u.jsx("span",{className:"hidden sm:inline",children:"Watched Status"}),u.jsx("span",{className:"sm:hidden",children:"Watched"}),g.option==="watched"&&u.jsx("i",{className:`fas fa-sort-${g.direction==="asc"?"up":"down"} ml-1`})]})]})]}),u.jsxs("div",{className:"flex flex-col xs:flex-row justify-between items-start xs:items-center mb-3 text-xs sm:text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:Y.length})," ",Y.length===1?"movie":"movies"," found",k&&u.jsxs("span",{className:"ml-1 text-xmas-mute",children:["for: ",u.jsxs("span",{className:"font-medium",children:['"',k,'"']})]})]}),g.option&&u.jsxs("div",{className:"text-xmas-mute",children:["Sorted by ",u.jsx("span",{className:"font-medium",children:g.option})," (",g.direction==="asc"?"asc":"desc",")"]})]}),o&&!c&&u.jsx("div",{className:"flex justify-center items-center py-4",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-xmas-gold"})}),Y.length===0?u.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[u.jsx("h3",{className:"text-xl mb-4",children:"No movies found"}),u.jsx("p",{className:"mb-4",children:p==="all"?"You haven't added any Christmas movies yet.":`You don't have any ${p} Christmas movies.`}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[u.jsxs(Ke,{to:"/import",className:"btn btn-primary",children:[u.jsx("i",{className:"fas fa-file-import mr-2"})," Add Movies"]}),n.length>0&&u.jsxs(Ke,{to:"/random",className:"btn btn-primary",children:[u.jsx("i",{className:"fas fa-random mr-2"})," Random Movie"]})]})]}):u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 sm:gap-3",children:K.map(B=>{const Q=a[B.id];return u.jsx(Ke,{to:ev(B.title,B.id),state:{from:"movies"},className:"block transition-transform hover:scale-[1.02] hover:shadow-xl",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-xmas-card shadow-md h-full flex flex-col",children:[u.jsxs("div",{className:"relative",children:[Q!=null&&Q.posterUrlOverride||B.posterUrl?u.jsx("img",{src:(Q==null?void 0:Q.posterUrlOverride)||B.posterUrl,alt:B.title,className:"w-full h-auto object-cover",style:{aspectRatio:"2/3"},loading:"lazy"}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3"},children:u.jsx("i",{className:"fas fa-film text-2xl text-gray-500"})}),Q&&Q.watched&&u.jsx("div",{className:"absolute top-1 right-1 bg-primary rounded-full p-1 shadow-md",children:u.jsx("i",{className:"fas fa-check text-xs text-white"})}),Q&&Q.favorite&&u.jsx("div",{className:"absolute top-1 left-1 text-yellow-400 drop-shadow-md",children:u.jsx("i",{className:"fas fa-star text-sm"})})]}),u.jsxs("div",{className:"p-1 sm:p-2 flex-grow flex flex-col",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium line-clamp-2",children:B.title}),u.jsxs("div",{className:"flex justify-between items-center mt-1",children:[u.jsx("p",{className:"text-xs text-gray-400",children:B.releaseDate&&os(B.releaseDate)}),Q&&Q.rating&&u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-yellow-400 mr-0.5",children:u.jsx("i",{className:"fas fa-star text-xs"})}),u.jsx("span",{className:"text-xs",children:Q.rating})]})]})]})]})},B.id)})}),O&&u.jsxs("dialog",{className:"modal modal-open",children:[u.jsxs("div",{className:"modal-box max-w-lg",children:[u.jsx("h3",{className:"font-bold text-lg mb-2",children:"Share your watchlist"}),u.jsx("p",{className:"text-sm mb-4",children:"Create a shareable page that shows your watched Christmas movies, ratings and vibes."}),u.jsx("div",{className:"form-control mb-4",children:u.jsxs("label",{className:"label cursor-pointer",children:[u.jsx("span",{className:"label-text",children:"Make my watchlist public"}),u.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:v,onChange:B=>T(B.target.checked)})]})}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsxs("div",{className:"form-control",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Public display name"})}),u.jsx("input",{type:"text",className:"input input-bordered input-sm sm:input-md",value:S,onChange:B=>C(B.target.value),placeholder:"My Xmas Movies"})]}),u.jsxs("div",{className:"form-control",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Tagline / bio (optional)"})}),u.jsx("input",{type:"text",className:"input input-bordered input-sm sm:input-md",value:P,onChange:B=>b(B.target.value),placeholder:"Only the coziest Xmas movies allowed"})]}),R&&u.jsxs("div",{className:"mt-1 text-xs text-xmas-mute",children:["Your public link: ",u.jsxs("span",{className:"font-mono",children:["/u/",R]})]})]}),u.jsxs("div",{className:"modal-action flex flex-wrap gap-2 justify-between",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{className:"btn btn-primary btn-sm",onClick:G,disabled:ee,children:[ee&&u.jsx("span",{className:"loading loading-spinner loading-xs mr-1"}),"Save"]}),u.jsxs("button",{type:"button",className:"btn btn-outline btn-sm",onClick:Z,disabled:!R,children:[u.jsx("i",{className:"fas fa-link mr-2"}),"Copy link"]})]}),u.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:()=>F(!1),children:"Close"})]})]}),u.jsx("form",{method:"dialog",className:"modal-backdrop",onClick:()=>F(!1),children:u.jsx("button",{children:"close"})})]})]})},$p=Et(Me,"stats","global");async function p6(){(await vn($p)).exists()||await qn($p,{watchedTotal:0,updatedAt:new Date},{merge:!0})}async function g6(e){await p6(),await Ls($p,{watchedTotal:tL(e),updatedAt:new Date})}const x6=[{id:"heartwarming",label:"Heartwarming",emoji:"",type:"positive"},{id:"very_christmassy",label:"Very Christmassy",emoji:"",type:"positive"},{id:"snowy",label:"Snowy Setting",emoji:"",type:"positive"},{id:"funny",label:"Funny",emoji:"",type:"positive"},{id:"cheesy",label:"Cheesy (Good Way)",emoji:"",type:"positive"},{id:"romantic",label:"Romantic",emoji:"",type:"positive"},{id:"family_friendly",label:"Family Friendly",emoji:"",type:"positive"},{id:"background",label:"Good Background Watch",emoji:"",type:"positive"},{id:"tearjerker",label:"Emotional",emoji:"",type:"positive"},{id:"rewatch",label:"Would Rewatch",emoji:"",type:"positive"}],v6=[{id:"slow",label:"Slow Pacing",emoji:"",type:"negative"},{id:"boring",label:"A Bit Boring",emoji:"",type:"negative"},{id:"low_christmas",label:"Low Xmas Vibes",emoji:"",type:"negative"},{id:"weak_chemistry",label:"Weak Chemistry",emoji:"",type:"negative"},{id:"confusing",label:"Confusing Plot",emoji:"",type:"negative"},{id:"too_long",label:"Too Long",emoji:"",type:"negative"},{id:"cringey",label:"Cringey",emoji:"",type:"negative"},{id:"fake_snow",label:"Fake Snow",emoji:"",type:"negative"},{id:"hammy",label:"Hammy",emoji:"",type:"negative"}],y6={heartwarming:"heartwarming",very_christmassy:"full of Christmas vibes",snowy:"with a lovely snowy setting",funny:"with some funny moments",cheesy:"a bit cheesy in a good way",romantic:"with sweet romantic moments",family_friendly:"very family friendly",background:"great as a cosy background watch",tearjerker:"quite emotional at times",rewatch:"something I'd happily rewatch"},_6={slow:"quite slow in places",boring:"a bit boring overall",low_christmas:"lighter on Christmas vibes than expected",weak_chemistry:"with weak chemistry between the leads",confusing:"a bit confusing at times",too_long:"longer than it needed to be",cringey:"a bit cringey in parts",fake_snow:"with fake snow",hammy:"hammy overacting"};function w6(e){return!e||e<=0?"An easy-going Christmas movie.":e>=9?"Absolutely loved this Christmas movie.":e>=8?"Really enjoyed this festive watch.":e>=7?"A good Christmas movie I liked overall.":e>=6?"A decent cosy watch with some nice moments.":e>=5?"An okay Christmas movie, but nothing special.":e>=3?"Not really my thing, it had a few issues.":"I didn't enjoy this Christmas movie very much."}function sw(e){if(e.length===0)return"";if(e.length===1)return e[0];const t=e[e.length-1];return`${e.slice(0,-1).join(", ")} and ${t}`}function E6(e){const t=e.map(s=>y6[s]).filter(Boolean),r=e.map(s=>_6[s]).filter(Boolean);let n="";return t.length&&(n+=` It felt ${sw(t)}.`),r.length&&(n+=` However, it was ${sw(r)}.`),n}const T6=({rating:e,initialTags:t=[],initialAutoReview:r="",onChange:n})=>{const[s,a]=U.useState(t),[i,o]=U.useState(r);U.useEffect(()=>{a(t)},[t.join("|")]),U.useEffect(()=>{o(r)},[r]);const l=d=>{a(m=>m.includes(d)?m.filter(p=>p!==d):[...m,d])},c=()=>{const d=w6(e),m=E6(s),p=(d+m).trim();o(p),n&&n({tags:s,autoReview:p})},f=d=>s.includes(d);return u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Quick Vibe Review"}),u.jsx("span",{className:"text-xs opacity-80",children:"Pick a few that fit, then generate."})]}),u.jsx("p",{className:"text-xs mb-1 opacity-80",children:"What worked?"}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:x6.map(d=>u.jsxs("button",{type:"button",onClick:()=>l(d.id),className:`btn btn-xs rounded-full border ${f(d.id)?"btn-accent text-base-100":"btn-ghost border-base-300 text-sm"}`,children:[u.jsx("span",{className:"mr-1",children:d.emoji}),d.label]},d.id))}),u.jsx("p",{className:"text-xs mb-1 opacity-80",children:"What didn't?"}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v6.map(d=>u.jsxs("button",{type:"button",onClick:()=>l(d.id),className:`btn btn-xs rounded-full border ${f(d.id)?"btn-error text-base-100":"btn-ghost border-base-300 text-sm"}`,children:[u.jsx("span",{className:"mr-1",children:d.emoji}),d.label]},d.id))}),u.jsx("button",{type:"button",onClick:c,className:"btn btn-sm btn-primary",children:" Generate Review From Tags"}),i&&u.jsxs("p",{className:"mt-3 text-sm opacity-90 italic",children:["Generated preview: ",i,""]})]})},k6=({watched:e,watchedDate:t,onWatchedDateChange:r,rating:n,onRatingChange:s,review:a,onReviewChange:i,vibeTags:o,onVibeChange:l,saving:c,onSave:f})=>u.jsxs(u.Fragment,{children:[u.jsx("h2",{className:"text-2xl font-christmas text-xmas-gold mb-4",children:"Your Rating & Review"}),e&&u.jsxs("div",{className:"form-control mb-4",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Date Watched"})}),u.jsx("input",{type:"date",className:"input input-bordered",value:t,onChange:d=>r(d.target.value)})]}),u.jsxs("div",{className:"form-control mb-4",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Your Rating"})}),u.jsx("div",{className:"rating rating-lg",children:[1,2,3,4,5,6,7,8,9,10].map(d=>u.jsx("input",{type:"radio",name:"rating",className:`mask mask-star-2 ${d<=5?"bg-orange-400":"bg-yellow-400"}`,checked:n===d,onChange:()=>s(d)},d))}),n&&u.jsx("div",{className:"mt-2",children:u.jsx("button",{className:"btn btn-xs btn-ghost",onClick:()=>s(null),children:"Clear Rating"})})]}),u.jsx(T6,{rating:n,initialTags:o,initialAutoReview:a,onChange:l}),u.jsxs("div",{className:"form-control mb-6 mt-4",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Your Review"})}),u.jsx("textarea",{className:"textarea textarea-bordered h-32",placeholder:"Write your thoughts about this movie...",value:a,onChange:d=>i(d.target.value)})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{className:"btn btn-primary btn-sm sm:btn-md",onClick:f,disabled:c,children:c?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})})})]}),S6=()=>{var G;const{movieId:e}=Vd(),t=vs(),r=ys(),{currentUser:n}=yn(),s=cA(),a=fA(t.search),o=((G=t.state)==null?void 0:G.from)==="import"?"/import":"/movies",[l,c]=U.useState(null),[f,d]=U.useState(null),[m,p]=U.useState(!0),[x,g]=U.useState(null),[w,k]=U.useState(!1),[E,y]=U.useState(!1),[I,O]=U.useState(""),[F,v]=U.useState(null),[T,S]=U.useState(""),[C,P]=U.useState(!1),[b,R]=U.useState([]),ae=U.useRef(null);U.useEffect(()=>{(async()=>{if(!n||!a){g("Movie not found"),p(!1);return}try{p(!0);const ce=await vn(Et(Me,"movies",a));if(!ce.exists()){g("Movie not found"),p(!1);return}const j={id:ce.id,...ce.data()};c(j);const Y=await ld(n.uid,a);if(Y){d(Y),y(Y.watched);let K="";if(Y.watchedDate)try{if(Y.watchedDate instanceof Date)K=Y.watchedDate.toISOString().split("T")[0];else{const B=Y.watchedDate;if(typeof B=="object"&&B!==null&&"seconds"in B){const Q=B;K=new Date(Q.seconds*1e3).toISOString().split("T")[0]}else{const Q=new Date(Y.watchedDate);isNaN(Q.getTime())||(K=Q.toISOString().split("T")[0])}}}catch(B){console.error("Error parsing watchedDate:",B)}O(K),v(Y.rating||null),S(Y.review||""),P(Y.favorite),R(Y.vibeTags||[])}}catch(ce){console.error("Error fetching movie data:",ce),g("Failed to load movie data")}finally{p(!1)}})()},[n,a]),U.useEffect(()=>{E&&ae.current&&typeof window<"u"&&window.innerWidth<768&&ae.current.scrollIntoView({behavior:"smooth",block:"start"})},[E]);const ee=async()=>{if(!(!n||!a||!l))try{k(!0);const Z={userId:n.uid,movieId:a,watched:E,favorite:C,updatedAt:new Date,vibeTags:b};if(E&&I)try{Z.watchedDate=new Date(I),isNaN(Z.watchedDate.getTime())&&delete Z.watchedDate}catch(Y){console.error("Error parsing watchedDate for save:",Y),delete Z.watchedDate}else E||(Z.watchedDate=null);Z.rating=F,Z.review=T||null;const ce=await Gu(n.uid,a,Z);d(ce);const j=await mh(n.uid);if(j.length){const Y=j.map(K=>{var B;return((B=Zo.find(Q=>Q.id===K))==null?void 0:B.name)||K}).join(", ");s.success(`You unlocked: ${Y}! `)}}catch(Z){console.error("Error saving movie data:",Z),g("Failed to save movie data")}finally{k(!1)}},fe=async()=>{if(!n||!a)return;const Z=!C;P(Z);try{const ce=Et(Me,"users",n.uid,"movies",a);(await vn(ce)).exists()?await Ls(ce,{favorite:Z,updatedAt:new Date}):await qn(ce,{userId:n.uid,movieId:a,favorite:Z,watched:!1,rating:null,review:"",vibeTags:[],addedAt:new Date,updatedAt:new Date},{merge:!0}),d(K=>K&&{...K,favorite:Z});const Y=await mh(n.uid);if(Y.length){const K=Y.map(B=>{var Q;return((Q=Zo.find(de=>de.id===B))==null?void 0:Q.name)||B}).join(", ");s.success(`You unlocked: ${K}! `)}}catch(ce){console.error("Failed to toggle favorite",ce),P(!Z)}},ue=async()=>{if(!(!n||!a||!window.confirm("Are you sure you want to remove this movie from your collection?")))try{k(!0),await d6(n.uid,a),r("/movies")}catch(Z){console.error("Error deleting movie:",Z),g("Failed to delete movie"),k(!1)}},q=async()=>{if(!n||!a)return;const Z=!E;y(Z);try{const ce=Et(Me,"users",n.uid,"movies",a),j=await vn(ce),Y=j.exists()?!!j.data().watched:!1;j.exists()?await Ls(ce,{watched:Z,...Z?{}:{watchedDate:null},updatedAt:new Date}):await qn(ce,{userId:n.uid,movieId:a,watched:Z,favorite:!1,rating:null,review:"",vibeTags:[],addedAt:new Date,updatedAt:new Date},{merge:!0}),d(B=>B&&{...B,watched:Z}),Y!==Z&&await g6(Z?1:-1);const K=await mh(n.uid);if(K.length){const B=K.map(Q=>{var de;return((de=Zo.find(Ee=>Ee.id===Q))==null?void 0:de.name)||Q}).join(", ");s.success(`You unlocked: ${B}! `)}}catch(ce){console.error("Failed to toggle watched",ce),y(!Z)}};return m?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):l?u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("div",{className:"mb-4",children:u.jsxs(Ke,{to:o,className:"btn btn-primary btn-sm sm:btn-md",children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Movies"]})}),x&&u.jsxs("div",{className:"alert alert-error mb-6",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:x})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"md:col-span-1",children:[u.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:f!=null&&f.posterUrlOverride||l.posterUrl?u.jsx("img",{src:(f==null?void 0:f.posterUrlOverride)||l.posterUrl,alt:l.title,className:"w-full object-contain",style:{aspectRatio:"2/3"}}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3"},children:u.jsx("i",{className:"fas fa-film text-6xl text-gray-500"})})}),u.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[u.jsxs("button",{className:`btn ${C?"btn-primary":"btn-outline"} w-full`,onClick:fe,children:[u.jsx("i",{className:`fas fa-star mr-2 ${C?"text-white":""}`}),C?"Favourited":"Add to Favourites"]}),u.jsxs(Ke,{to:`/movies/${e}/edit-poster${t.search}`,className:"btn btn-outline w-full",children:[u.jsx("i",{className:"fas fa-image mr-2"}),"Edit Poster"]}),u.jsxs("button",{className:`btn ${E?"btn-success":"btn-outline"} w-full`,onClick:q,children:[u.jsx("i",{className:`fas fa-check mr-2 ${E?"text-white":""}`}),E?"Watched":"Mark as Watched"]}),u.jsxs("button",{className:"btn btn-error btn-outline w-full",onClick:ue,disabled:w,children:[u.jsx("i",{className:"fas fa-trash mr-2"}),"Remove from Collection"]})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line mb-2",children:l.title}),l.releaseDate&&u.jsx("p",{className:"text-lg text-gray-400 mb-4",children:new Date(l.releaseDate).getFullYear()}),l.genres&&l.genres.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:l.genres.map((Z,ce)=>u.jsx("span",{className:"badge badge-outline",children:Z},ce))}),l.runtime&&u.jsxs("p",{className:"mb-4",children:[u.jsx("i",{className:"fas fa-clock mr-2 text-xmas-gold"}),Math.floor(l.runtime/60),"h ",l.runtime%60,"m"]}),l.overview&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Overview"}),u.jsx("p",{className:"text-gray-300",children:l.overview})]}),l.directors&&l.directors.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Director",l.directors.length>1?"s":""]}),u.jsx("p",{children:l.directors.join(", ")})]}),l.cast&&l.cast.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Cast"}),u.jsx("p",{className:"flex flex-wrap gap-1",children:l.cast.slice(0,10).map((Z,ce)=>u.jsxs(Tu.Fragment,{children:[u.jsx(Ke,{to:`/movies?q=${encodeURIComponent(Z)}&field=cast`,className:"link link-primary",children:Z}),ce<Math.min(l.cast.length,10)-1&&u.jsx("span",{children:","})]},Z))})]}),u.jsxs("div",{ref:ae,children:[u.jsx("div",{className:"divider"}),E&&u.jsx(k6,{watched:E,watchedDate:I,onWatchedDateChange:O,rating:F,onRatingChange:v,review:T,onReviewChange:S,vibeTags:b,onVibeChange:({tags:Z,autoReview:ce})=>{R(Z),S(ce)},saving:w,onSave:ee})]})]})]})]}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"alert alert-error",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:"Movie not found"})]}),u.jsx("div",{className:"mt-4",children:u.jsxs(Ke,{to:o,className:"btn btn-primary btn-sm sm:btn-md",children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Movies"]})})]})};function cd(e,t){let r=0;const n=(e.title||"").toLowerCase(),s=(t.Title||"").toLowerCase();if(n&&s)if(n===s)r+=60;else if(s.includes(n)||n.includes(s))r+=40;else{const a=n.split(" "),i=s.split(" "),o=a.filter(l=>i.includes(l));r+=o.length/Math.max(a.length,i.length)*40}if(e.releaseDate!=null&&t.Year){const a=String(e.releaseDate).slice(0,4),i=String(t.Year).slice(0,4),o=parseInt(a,10),l=parseInt(i,10);!isNaN(o)&&!isNaN(l)&&(o===l?r+=40:Math.abs(o-l)<=1&&(r+=20))}return Math.min(Math.round(r),100)}const dn=e=>e!=null&&e.Poster&&e.Poster!=="N/A"?e.Poster:(e==null?void 0:e.posterUrl)||"",A6=({onSelect:e,userMovieIds:t})=>{const r=ys(),[n,s]=U.useState([]),[a,i]=U.useState(!0),[o,l]=U.useState(null),[c,f]=U.useState(""),[d,m]=U.useState("all"),[p,x]=U.useState("title-asc"),[g,w]=U.useState(!1);U.useEffect(()=>{(async()=>{try{i(!0),l(null);const F=(await $t(Rt(Me,"movies"))).docs.map(v=>{var S;const T=v.data();return T.imdbId?{id:T.imdbId,title:T.title,release_date:T.releaseDate,poster_path:(S=T.posterUrl)!=null&&S.startsWith("https://image.tmdb.org/t/p/")?T.posterUrl.replace("https://image.tmdb.org/t/p/w500",""):null,posterUrl:T.posterUrl||null,source:"local",firestoreId:v.id,cast:T.cast||[],runtime:T.runtime,genres:T.genres||[],overview:T.overview}:null}).filter(Boolean);s(F)}catch(O){console.error("Error loading local catalogue:",O),l((O==null?void 0:O.message)??"Failed to load local catalogue")}finally{i(!1)}})()},[]);const k=U.useCallback(I=>{var T;if(!c.trim())return!0;const O=c.toLowerCase().trim(),F=O.split(",").map(S=>S.trim()).filter(Boolean),v=S=>I.cast&&I.cast.some(C=>C.toLowerCase().includes(S));switch(d){case"title":return I.title.toLowerCase().includes(O);case"year":return!!I.release_date&&!!((T=os(I.release_date))!=null&&T.includes(O));case"cast":return F.length?F.some(S=>v(S)):v(O);case"all":default:{const S=I.release_date&&os(I.release_date);return I.title.toLowerCase().includes(O)||S&&S.includes(O)||I.cast&&I.cast.some(C=>C.toLowerCase().includes(O))}}},[c,d]),E=U.useMemo(()=>n.filter(I=>{if(!k(I))return!1;const O=!!I.firestoreId&&t.includes(I.firestoreId);return!(g&&O)}),[n,k,t,g]),y=U.useMemo(()=>{const I=[...E],O=F=>{if(!F.release_date)return 0;const v=os(F.release_date);if(!v)return 0;const T=parseInt(v,10);return Number.isNaN(T)?0:T};return I.sort((F,v)=>{switch(p){case"title-asc":return F.title.localeCompare(v.title);case"title-desc":return v.title.localeCompare(F.title);case"year-desc":{const T=O(F);return O(v)-T||F.title.localeCompare(v.title)}case"year-asc":{const T=O(F),S=O(v);return T-S||F.title.localeCompare(v.title)}default:return 0}}),I},[E,p]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row gap-2",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 flex-1",children:[u.jsxs("div",{className:"relative flex-grow",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:u.jsx("i",{className:"fas fa-search text-gray-400"})}),u.jsx("input",{type:"text",className:"input input-bordered input-sm sm:input-md w-full pl-8 pr-8",placeholder:"   Search catalogue by title, cast, year...",value:c,onChange:I=>f(I.target.value)}),c&&u.jsx("button",{className:"absolute inset-y-0 right-0 pr-2 flex items-center",onClick:()=>f(""),children:u.jsx("i",{className:"fas fa-times text-gray-400 hover:text-gray-600"})})]}),u.jsxs("select",{className:"select select-bordered select-sm sm:select-md w-full sm:w-40",value:d,onChange:I=>m(I.target.value),children:[u.jsx("option",{value:"all",children:"All Fields"}),u.jsx("option",{value:"title",children:"Title Only"}),u.jsx("option",{value:"year",children:"Year Only"}),u.jsx("option",{value:"cast",children:"Cast Only"})]})]}),u.jsx("div",{className:"flex items-center justify-end",children:u.jsxs("select",{className:"select select-bordered select-sm sm:select-md w-full sm:w-52",value:p,onChange:I=>x(I.target.value),children:[u.jsx("option",{value:"title-asc",children:"Sort: Title (A  Z)"}),u.jsx("option",{value:"title-desc",children:"Sort: Title (Z  A)"}),u.jsx("option",{value:"year-desc",children:"Sort: Year (Newest  Oldest)"}),u.jsx("option",{value:"year-asc",children:"Sort: Year (Oldest  Newest)"})]})})]}),u.jsxs("div",{className:"flex flex-col xs:flex-row justify-between items-start xs:items-center text-xs sm:text-sm gap-2",children:[u.jsx("div",{children:a?u.jsx("span",{children:"Loading catalogue"}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"font-medium",children:y.length})," ",y.length===1?"movie":"movies"," in catalogue",c&&u.jsxs("span",{className:"ml-1 opacity-70",children:["for: ",u.jsxs("span",{className:"font-medium",children:['"',c,'"']})]})]})}),u.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[u.jsx("input",{type:"checkbox",className:"checkbox checkbox-xs sm:checkbox-sm",checked:g,onChange:I=>w(I.target.checked)}),u.jsx("span",{children:"Hide owned movies"})]})]}),o&&u.jsx("div",{className:"alert alert-error",children:o}),a&&u.jsx("div",{className:"flex justify-center p-6",children:u.jsx("span",{className:"loading loading-spinner loading-lg"})}),!a&&y.length===0&&!o&&u.jsxs("div",{className:"bg-xmas-card bg-opacity-60 rounded-lg p-6 text-center",children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No movies found"}),u.jsx("p",{className:"text-sm opacity-80 mb-2",children:"Try changing your search text, field, or sort order."})]}),!a&&y.length>0&&u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 sm:gap-3",children:y.map(I=>{const O=!!I.firestoreId&&t.includes(I.firestoreId);return u.jsx("div",{className:`block transition-transform hover:scale-[1.02] hover:shadow-xl ${O?"opacity-60 cursor-pointer":"cursor-pointer"}`,onClick:()=>{O&&I.firestoreId?r(ev(I.title,I.firestoreId),{state:{from:"import"}}):e(I)},children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-xmas-card shadow-md h-full flex flex-col",children:[u.jsxs("div",{className:"relative",children:[dn(I)?u.jsx("img",{src:dn(I),alt:I.title,className:"w-full h-auto object-cover",style:{aspectRatio:"2/3"},loading:"lazy"}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3"},children:u.jsx("i",{className:"fas fa-film text-2xl text-gray-500"})}),O&&u.jsxs("div",{className:`\r
                          absolute top-1 left-1 \r
                          badge badge-success \r
                          px-2 py-0.5 \r
                          text-[0.6rem] leading-none \r
                          whitespace-nowrap \r
                          flex items-center gap-1 \r
                          shadow\r
                        `,children:[u.jsx("i",{className:"fas fa-check text-[0.6rem]"}),u.jsx("span",{children:"Owned"})]})]}),u.jsxs("div",{className:"p-1 sm:p-2 flex-grow flex flex-col",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium line-clamp-2",children:I.title}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:I.release_date&&os(I.release_date)})]})]})},I.firestoreId||I.id)})})]})},mA=e=>{const t=e.trim();return/^The\s+/i.test(t)?t.replace(/^The\s+/i,"").trim():/^A\s+/i.test(t)?t.replace(/^A\s+/i,"").trim():/^An\s+/i.test(t)?t.replace(/^An\s+/i,"").trim():t},pA="https://www.omdbapi.com/",gA=e=>(e||"").toLowerCase().replace(/^(the|a|an)\s+/,"").replace(/[^a-z0-9]+/g," ").trim(),I6=e=>{const t=new Set,r=n=>{const s=gA(n||"");s&&(t.add(s),s.split(" ").forEach(a=>a&&t.add(a)))};return r(e.Title),e.Year&&t.add(e.Year),e.Genre&&e.Genre.split(",").forEach(n=>r(n)),e.Actors&&e.Actors.split(",").forEach(n=>r(n)),e.Director&&e.Director.split(",").forEach(n=>r(n)),Array.from(t).slice(0,200)},Bi=async(e,t)=>{const r=`${pA}?apikey=${t}&s=${encodeURIComponent(e)}&type=movie`,n=await fetch(r);if(!n.ok)throw new Error(`OMDb API error: ${n.status}`);const s=await n.json();if(s.Response==="False"||!s.Search)throw new Error(s.Error||"No results from OMDb");return s.Search},ii=async(e,t)=>{const r=`${pA}?apikey=${t}&i=${encodeURIComponent(e)}&plot=full`,n=await fetch(r);if(!n.ok)throw new Error(`OMDb API error: ${n.status}`);const s=await n.json();if(s.Response==="False")throw new Error(s.Error||"Failed to fetch OMDb details");return s},hu=e=>{const t=e.Title,r=mA(t),n=gA(r),s=e.Year,a=e.Released&&e.Released!=="N/A"?e.Released:s&&s!=="N/A"?`${s}-01-01`:null,i=e.Runtime&&e.Runtime!=="N/A"?parseInt(e.Runtime,10):null,o=e.Genre&&e.Genre!=="N/A"?e.Genre.split(",").map(d=>d.trim()).filter(Boolean):[],l=e.Director&&e.Director!=="N/A"?e.Director.split(",").map(d=>d.trim()).filter(Boolean):[],c=e.Actors&&e.Actors!=="N/A"?e.Actors.split(",").map(d=>d.trim()).filter(Boolean):[],f=e.Plot&&e.Plot!=="N/A"?e.Plot:null;return{imdbId:e.imdbID,title:t,sortTitle:r,sortTitleLower:n,originalTitle:t,releaseDate:a,posterUrl:e.Poster&&e.Poster!=="N/A"?e.Poster:null,backdropUrl:null,overview:f,runtime:i,genres:o,directors:l,cast:c,isChristmas:!0,keywords:I6(e),updatedAt:new Date}},N6=({omdbApiKey:e,onSelect:t})=>{const[r,n]=U.useState(""),[s,a]=U.useState(!1),[i,o]=U.useState([]),[l,c]=U.useState(null),f=async()=>{if(r.trim())try{a(!0),c(null);const d=await Bi(r,e);o(d)}catch(d){c((d==null?void 0:d.message)??"OMDb search failed")}finally{a(!1)}};return u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{className:"input input-bordered flex-1",value:r,onChange:d=>n(d.target.value),placeholder:"Search OMDb...",onKeyDown:d=>d.key==="Enter"&&f()}),u.jsx("button",{className:"btn btn-primary",onClick:f,disabled:s||!e,children:s?u.jsx("span",{className:"loading loading-spinner loading-sm"}):"Search"})]}),l&&u.jsx("div",{className:"alert alert-error",children:l}),i.length>0&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:i.map(d=>u.jsxs("div",{className:"card bg-base-100 shadow cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t(d),children:[u.jsx("figure",{children:dn(d)?u.jsx("img",{src:dn(d),alt:d.Title,className:"w-full h-64 object-contain"}):u.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-base-200",children:u.jsx("i",{className:"fas fa-film text-3xl opacity-50"})})}),u.jsxs("div",{className:"card-body p-3",children:[u.jsx("div",{className:"font-semibold",children:d.Title}),u.jsx("div",{className:"text-xs opacity-70",children:d.Year})]})]},d.imdbID))})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var xA=1252,C6=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],tv={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},rv=function(e){C6.indexOf(e)!=-1&&(xA=tv[0]=e)};function b6(){rv(1252)}var us=function(e){rv(e)};function vA(){us(1200),b6()}function aw(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function R6(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function yA(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var cc=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?R6(e.slice(2)):t==254&&r==255?yA(e.slice(2)):t==65279?e.slice(1):e},Lf=function(t){return String.fromCharCode(t)},iw=function(t){return String.fromCharCode(t)},du,Ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ow(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,c=0;c<e.length;)r=e.charCodeAt(c++),a=r>>2,n=e.charCodeAt(c++),i=(r&3)<<4|n>>4,s=e.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),t+=Ka.charAt(a)+Ka.charAt(i)+Ka.charAt(o)+Ka.charAt(l);return t}function Rn(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)a=Ka.indexOf(e.charAt(c++)),i=Ka.indexOf(e.charAt(c++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Ka.indexOf(e.charAt(c++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=Ka.indexOf(e.charAt(c++)),s=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var et=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),co=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function mi(e){return et?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function lw(e){return et?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ls=function(t){return et?co(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function uo(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function nv(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return nv(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Wa=et?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:co(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function P6(e){for(var t=[],r=0,n=e.length+250,s=mi(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=mi(65535),n=65530)}return t.push(s.slice(0,r)),Wa(t)}var en=/\u0000/g,uc=/[\u0001-\u0006]/g;function el(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function fs(e,t){var r=""+e;return r.length>=t?r:Wt("0",t-r.length)+r}function sv(e,t){var r=""+e;return r.length>=t?r:Wt(" ",t-r.length)+r}function ud(e,t){var r=""+e;return r.length>=t?r:r+Wt(" ",t-r.length)}function D6(e,t){var r=""+Math.round(e);return r.length>=t?r:Wt("0",t-r.length)+r}function F6(e,t){var r=""+e;return r.length>=t?r:Wt("0",t-r.length)+r}var cw=Math.pow(2,32);function ko(e,t){if(e>cw||e<-cw)return D6(e,t);var r=Math.round(e);return F6(r,t)}function fd(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var uw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function O6(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ze={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},fw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},M6={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hd(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,l=1,c=0,f=0,d=Math.floor(s);c<t&&(d=Math.floor(s),o=d*i+a,f=d*c+l,!(s-d<5e-8));)s=1/(s-d),a=i,i=o,l=c,c=f;if(f>t&&(c>t?(f=l,o=a):(f=c,o=i)),!r)return[0,n*o,f];var m=Math.floor(n*o/f);return[m,n*o-m*f,f]}function Mi(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=W6(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var _A=new Date(1899,11,31,0,0,0),L6=_A.getTime(),j6=new Date(1900,2,1,0,0,0);function wA(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=j6&&(r+=24*60*60*1e3),(r-(L6+(e.getTimezoneOffset()-_A.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function av(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function U6(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function V6(e){var t=e<0?12:11,r=av(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function B6(e){var t=av(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function mu(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=V6(e):t===10?r=e.toFixed(10).substr(0,12):r=B6(e),av(U6(r.toUpperCase()))}function eo(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):mu(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Yn(14,wA(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function W6(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function $6(e,t,r,n){var s="",a=0,i=0,o=r.y,l,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,c=t.length;break;case 3:return lm[r.m-1][1];case 5:return lm[r.m-1][0];default:return lm[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,c=t.length;break;case 3:return uw[r.q][0];default:return uw[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?fs(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=fs(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var f=c>0?fs(l,c):"";return f}function qa(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var EA=/%/g;function z6(e,t,r){var n=t.replace(EA,""),s=t.length-n.length;return ua(e,n,r*Math.pow(10,2*s))+Wt("%",s)}function H6(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ua(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function TA(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+TA(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,f){return l+c+f.substr(0,(s+a)%s)+"."+f.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var kA=/# (\?+)( ?)\/( ?)(\d+)/;function G6(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?Wt(" ",e[1].length+1+e[4].length):sv(i,e[1].length)+e[2]+"/"+e[3]+fs(o,e[4].length))}function K6(e,t,r){return r+(t===0?"":""+t)+Wt(" ",e[1].length+2+e[4].length)}var SA=/^#*0*\.([0#]+)/,AA=/\).*[0#]/,IA=/\(###\) ###\\?-####/;function Yr(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function hw(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function dw(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function q6(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Y6(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function jn(e,t,r){if(e.charCodeAt(0)===40&&!t.match(AA)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?jn("n",n,r):"("+jn("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return H6(e,t,r);if(t.indexOf("%")!==-1)return z6(e,t,r);if(t.indexOf("E")!==-1)return TA(t,r);if(t.charCodeAt(0)===36)return"$"+jn(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+ko(l,t.length);if(t.match(/^[#?]+$/))return s=ko(r,0),s==="0"&&(s=""),s.length>t.length?s:Yr(t.substr(0,t.length-s.length))+s;if(a=t.match(kA))return G6(a,l,c);if(t.match(/^#+0+$/))return c+ko(l,t.length-t.indexOf("0"));if(a=t.match(SA))return s=hw(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Yr(a[1])).replace(/\.$/,"."+Yr(a[1])).replace(/\.(\d*)$/,function(x,g){return"."+g+Wt("0",Yr(a[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+hw(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+qa(ko(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+jn(e,t,-r):qa(""+(Math.floor(r)+q6(r,a[1].length)))+"."+fs(dw(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return jn(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=el(jn(e,t.replace(/[\\-]/g,""),r)),i=0,el(el(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(IA))return s=jn(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=hd(l,Math.pow(10,i)-1,!1),s=""+c,f=ua("n",a[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+a[2]+"/"+a[3],f=ud(o[2],i),f.length<a[4].length&&(f=Yr(a[4].substr(a[4].length-f.length))+f),s+=f,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=hd(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?sv(o[1],i)+a[2]+"/"+a[3]+ud(o[2],i):Wt(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=ko(r,0),t.length<=s.length?s:Yr(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var d=t.indexOf(".")-i,m=t.length-s.length-d;return Yr(t.substr(0,d)+s+t.substr(t.length-m))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=dw(r,a[1].length),r<0?"-"+jn(e,t,-r):qa(Y6(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?fs(0,3-x.length):"")+x})+"."+fs(i,a[1].length);switch(t){case"###,##0.00":return jn(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=qa(ko(l,0));return p!=="0"?c+p:"";case"###,###.00":return jn(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return jn(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function X6(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return ua(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Q6(e,t,r){var n=t.replace(EA,""),s=t.length-n.length;return ua(e,n,r*Math.pow(10,2*s))+Wt("%",s)}function NA(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+NA(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,f){return l+c+f.substr(0,(s+a)%s)+"."+f.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function As(e,t,r){if(e.charCodeAt(0)===40&&!t.match(AA)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?As("n",n,r):"("+As("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return X6(e,t,r);if(t.indexOf("%")!==-1)return Q6(e,t,r);if(t.indexOf("E")!==-1)return NA(t,r);if(t.charCodeAt(0)===36)return"$"+As(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+fs(l,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Yr(t.substr(0,t.length-s.length))+s;if(a=t.match(kA))return K6(a,l,c);if(t.match(/^#+0+$/))return c+fs(l,t.length-t.indexOf("0"));if(a=t.match(SA))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Yr(a[1])).replace(/\.$/,"."+Yr(a[1])),s=s.replace(/\.(\d*)$/,function(x,g){return"."+g+Wt("0",Yr(a[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+qa(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+As(e,t,-r):qa(""+r)+"."+Wt("0",a[1].length);if(a=t.match(/^#,#*,#0/))return As(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=el(As(e,t.replace(/[\\-]/g,""),r)),i=0,el(el(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(IA))return s=As(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=hd(l,Math.pow(10,i)-1,!1),s=""+c,f=ua("n",a[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+a[2]+"/"+a[3],f=ud(o[2],i),f.length<a[4].length&&(f=Yr(a[4].substr(a[4].length-f.length))+f),s+=f,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=hd(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?sv(o[1],i)+a[2]+"/"+a[3]+ud(o[2],i):Wt(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Yr(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var d=t.indexOf(".")-i,m=t.length-s.length-d;return Yr(t.substr(0,d)+s+t.substr(t.length-m))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+As(e,t,-r):qa(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?fs(0,3-x.length):"")+x})+"."+fs(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=qa(""+l);return p!=="0"?c+p:"";default:if(t.match(/\.[0#?]*$/))return As(e,t.slice(0,t.lastIndexOf(".")),r)+Yr(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ua(e,t,r){return(r|0)===r?As(e,t,r):jn(e,t,r)}function J6(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var CA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function bl(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":fd(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(CA))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Z6(e,t,r,n){for(var s=[],a="",i=0,o="",l="t",c,f,d,m="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!fd(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(d=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(d);s[s.length]={t:"t",v:a},++i;break;case"\\":var p=e.charAt(++i),x=p==="("||p===")"?p:"t";s[s.length]={t:x,v:p},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(c==null&&(c=Mi(t,r,e.charAt(i+1)==="2"),c==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=Mi(t,r),c==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(c==null&&(c=Mi(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",m="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",i+=5,m="h"):e.substr(i,5).toUpperCase()==="/"?(c!=null&&(g.v=c.H>=12?"":""),g.t="T",i+=5,m="h"):(g.t="t",++i),c==null&&g.t==="T")return"";s[s.length]=g,l=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(CA)){if(c==null&&(c=Mi(t,r),c==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",bl(e)||(s[s.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var w=0,k=0,E;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=m,l="h",w<1&&(w=1);break;case"s":(E=s[i].v.match(/\.0+$/))&&(k=Math.max(k,E[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&s[i].v.match(/[Hh]/)&&(w=1),w<2&&s[i].v.match(/[Mm]/)&&(w=2),w<3&&s[i].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var y="",I;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=$6(s[i].t.charCodeAt(0),s[i].v,c,k),s[i].t="t";break;case"n":case"?":for(I=i+1;s[I]!=null&&((o=s[I].t)==="?"||o==="D"||(o===" "||o==="t")&&s[I+1]!=null&&(s[I+1].t==="?"||s[I+1].t==="t"&&s[I+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[I].v==="/"||s[I].v===" "&&s[I+1]!=null&&s[I+1].t=="?"));)s[i].v+=s[I].v,s[I]={v:"",t:";"},++I;y+=s[i].v,i=I-1;break;case"G":s[i].t="t",s[i].v=eo(t,r);break}var O="",F,v;if(y.length>0){y.charCodeAt(0)==40?(F=t<0&&y.charCodeAt(0)===45?-t:t,v=ua("n",y,F)):(F=t<0&&n>1?-t:t,v=ua("n",y,F),F<0&&s[0]&&s[0].t=="t"&&(v=v.substr(1),s[0].v="-"+s[0].v)),I=v.length-1;var T=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){T=i;break}var S=s.length;if(T===s.length&&v.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(I>=s[i].v.length-1?(I-=s[i].v.length,s[i].v=v.substr(I+1,s[i].v.length)):I<0?s[i].v="":(s[i].v=v.substr(0,I+1),I=-1),s[i].t="t",S=i);I>=0&&S<s.length&&(s[S].v=v.substr(0,I+1)+s[S].v)}else if(T!==s.length&&v.indexOf("E")===-1){for(I=v.indexOf(".")-1,i=T;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(f=s[i].v.indexOf(".")>-1&&i===T?s[i].v.indexOf(".")-1:s[i].v.length-1,O=s[i].v.substr(f+1);f>=0;--f)I>=0&&(s[i].v.charAt(f)==="0"||s[i].v.charAt(f)==="#")&&(O=v.charAt(I--)+O);s[i].v=O,s[i].t="t",S=i}for(I>=0&&S<s.length&&(s[S].v=v.substr(0,I+1)+s[S].v),I=v.indexOf(".")+1,i=T;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==T)){for(f=s[i].v.indexOf(".")>-1&&i===T?s[i].v.indexOf(".")+1:0,O=s[i].v.substr(0,f);f<s[i].v.length;++f)I<v.length&&(O+=v.charAt(I++));s[i].v=O,s[i].t="t",S=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(F=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=ua(s[i].t,s[i].v,F),s[i].t="t");var C="";for(i=0;i!==s.length;++i)s[i]!=null&&(C+=s[i].v);return C}var mw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pw(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function ej(e,t){var r=J6(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(mw),o=r[1].match(mw);return pw(t,i)?[n,r[0]]:pw(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Yn(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:ze)[e],n==null&&(n=r.table&&r.table[fw[e]]||ze[fw[e]]),n==null&&(n=M6[e]||"General");break}if(fd(n,0))return eo(t,r);t instanceof Date&&(t=wA(t,r.date1904));var s=ej(n,t);if(fd(s[1]))return eo(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Z6(s[1],t,r,s[0])}function Wi(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ze[r]==null){t<0&&(t=r);continue}if(ze[r]==e){t=r;break}}t<0&&(t=391)}return ze[t]=e,t}function bA(){ze=O6()}var tj={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},RA=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rj(e){var t=typeof e=="number"?ze[e]:e;return t=t.replace(RA,"(\\d+)"),new RegExp("^"+t+"$")}function nj(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(RA)||[]).forEach(function(d,m){var p=parseInt(r[m+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":a=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var f=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&a==-1?f:c+"T"+f}var sj=function(){var e={};e.version="1.2.0";function t(){for(var v=0,T=new Array(256),S=0;S!=256;++S)v=S,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,T[S]=v;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(v){var T=0,S=0,C=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)P[C]=v[C];for(C=0;C!=256;++C)for(S=v[C],T=256+C;T<4096;T+=256)S=P[T]=S>>>8^v[S&255];var b=[];for(C=1;C!=16;++C)b[C-1]=typeof Int32Array<"u"?P.subarray(C*256,C*256+256):P.slice(C*256,C*256+256);return b}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],c=s[4],f=s[5],d=s[6],m=s[7],p=s[8],x=s[9],g=s[10],w=s[11],k=s[12],E=s[13],y=s[14];function I(v,T){for(var S=T^-1,C=0,P=v.length;C<P;)S=S>>>8^r[(S^v.charCodeAt(C++))&255];return~S}function O(v,T){for(var S=T^-1,C=v.length-15,P=0;P<C;)S=y[v[P++]^S&255]^E[v[P++]^S>>8&255]^k[v[P++]^S>>16&255]^w[v[P++]^S>>>24]^g[v[P++]]^x[v[P++]]^p[v[P++]]^m[v[P++]]^d[v[P++]]^f[v[P++]]^c[v[P++]]^l[v[P++]]^o[v[P++]]^i[v[P++]]^a[v[P++]]^r[v[P++]];for(C+=15;P<C;)S=S>>>8^r[(S^v[P++])&255];return~S}function F(v,T){for(var S=T^-1,C=0,P=v.length,b=0,R=0;C<P;)b=v.charCodeAt(C++),b<128?S=S>>>8^r[(S^b)&255]:b<2048?(S=S>>>8^r[(S^(192|b>>6&31))&255],S=S>>>8^r[(S^(128|b&63))&255]):b>=55296&&b<57344?(b=(b&1023)+64,R=v.charCodeAt(C++)&1023,S=S>>>8^r[(S^(240|b>>8&7))&255],S=S>>>8^r[(S^(128|b>>2&63))&255],S=S>>>8^r[(S^(128|R>>6&15|(b&3)<<4))&255],S=S>>>8^r[(S^(128|R&63))&255]):(S=S>>>8^r[(S^(224|b>>12&15))&255],S=S>>>8^r[(S^(128|b>>6&63))&255],S=S>>>8^r[(S^(128|b&63))&255]);return~S}return e.table=r,e.bstr=I,e.buf=O,e.str=F,e}(),st=function(){var t={};t.version="1.2.1";function r(N,W){for(var D=N.split("/"),M=W.split("/"),L=0,V=0,J=Math.min(D.length,M.length);L<J;++L){if(V=D[L].length-M[L].length)return V;if(D[L]!=M[L])return D[L]<M[L]?-1:1}return D.length-M.length}function n(N){if(N.charAt(N.length-1)=="/")return N.slice(0,-1).indexOf("/")===-1?N:n(N.slice(0,-1));var W=N.lastIndexOf("/");return W===-1?N:N.slice(0,W+1)}function s(N){if(N.charAt(N.length-1)=="/")return s(N.slice(0,-1));var W=N.lastIndexOf("/");return W===-1?N:N.slice(W+1)}function a(N,W){typeof W=="string"&&(W=new Date(W));var D=W.getHours();D=D<<6|W.getMinutes(),D=D<<5|W.getSeconds()>>>1,N.write_shift(2,D);var M=W.getFullYear()-1980;M=M<<4|W.getMonth()+1,M=M<<5|W.getDate(),N.write_shift(2,M)}function i(N){var W=N.read_shift(2)&65535,D=N.read_shift(2)&65535,M=new Date,L=D&31;D>>>=5;var V=D&15;D>>>=4,M.setMilliseconds(0),M.setFullYear(D+1980),M.setMonth(V-1),M.setDate(L);var J=W&31;W>>>=5;var ie=W&63;return W>>>=6,M.setHours(W),M.setMinutes(ie),M.setSeconds(J<<1),M}function o(N){Er(N,0);for(var W={},D=0;N.l<=N.length-4;){var M=N.read_shift(2),L=N.read_shift(2),V=N.l+L,J={};switch(M){case 21589:D=N.read_shift(1),D&1&&(J.mtime=N.read_shift(4)),L>5&&(D&2&&(J.atime=N.read_shift(4)),D&4&&(J.ctime=N.read_shift(4))),J.mtime&&(J.mt=new Date(J.mtime*1e3));break}N.l=V,W[M]=J}return W}var l;function c(){return l||(l={})}function f(N,W){if(N[0]==80&&N[1]==75)return Ia(N,W);if((N[0]|32)==109&&(N[1]|32)==105)return vo(N,W);if(N.length<512)throw new Error("CFB file size "+N.length+" < 512");var D=3,M=512,L=0,V=0,J=0,ie=0,se=0,ne=[],te=N.slice(0,512);Er(te,0);var me=d(te);switch(D=me[0],D){case 3:M=512;break;case 4:M=4096;break;case 0:if(me[1]==0)return Ia(N,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+D)}M!==512&&(te=N.slice(0,M),Er(te,28));var Te=N.slice(0,M);m(te,D);var Ne=te.read_shift(4,"i");if(D===3&&Ne!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ne);te.l+=4,J=te.read_shift(4,"i"),te.l+=4,te.chk("00100000","Mini Stream Cutoff Size: "),ie=te.read_shift(4,"i"),L=te.read_shift(4,"i"),se=te.read_shift(4,"i"),V=te.read_shift(4,"i");for(var ve=-1,ke=0;ke<109&&(ve=te.read_shift(4,"i"),!(ve<0));++ke)ne[ke]=ve;var Oe=p(N,M);w(se,V,Oe,M,ne);var it=E(Oe,J,ne,M);it[J].name="!Directory",L>0&&ie!==R&&(it[ie].name="!MiniFAT"),it[ne[0]].name="!FAT",it.fat_addrs=ne,it.ssz=M;var Ye={},mt=[],on=[],Ge=[];y(J,it,Oe,mt,L,Ye,on,ie),x(on,Ge,mt),mt.shift();var ht={FileIndex:on,FullPaths:Ge};return W&&W.raw&&(ht.raw={header:Te,sectors:Oe}),ht}function d(N){if(N[N.l]==80&&N[N.l+1]==75)return[0,0];N.chk(ae,"Header Signature: "),N.l+=16;var W=N.read_shift(2,"u");return[N.read_shift(2,"u"),W]}function m(N,W){var D=9;switch(N.l+=2,D=N.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+D);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+D);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+D)}N.chk("0600","Mini Sector Shift: "),N.chk("000000000000","Reserved: ")}function p(N,W){for(var D=Math.ceil(N.length/W)-1,M=[],L=1;L<D;++L)M[L-1]=N.slice(L*W,(L+1)*W);return M[D-1]=N.slice(D*W),M}function x(N,W,D){for(var M=0,L=0,V=0,J=0,ie=0,se=D.length,ne=[],te=[];M<se;++M)ne[M]=te[M]=M,W[M]=D[M];for(;ie<te.length;++ie)M=te[ie],L=N[M].L,V=N[M].R,J=N[M].C,ne[M]===M&&(L!==-1&&ne[L]!==L&&(ne[M]=ne[L]),V!==-1&&ne[V]!==V&&(ne[M]=ne[V])),J!==-1&&(ne[J]=M),L!==-1&&M!=ne[M]&&(ne[L]=ne[M],te.lastIndexOf(L)<ie&&te.push(L)),V!==-1&&M!=ne[M]&&(ne[V]=ne[M],te.lastIndexOf(V)<ie&&te.push(V));for(M=1;M<se;++M)ne[M]===M&&(V!==-1&&ne[V]!==V?ne[M]=ne[V]:L!==-1&&ne[L]!==L&&(ne[M]=ne[L]));for(M=1;M<se;++M)if(N[M].type!==0){if(ie=M,ie!=ne[ie])do ie=ne[ie],W[M]=W[ie]+"/"+W[M];while(ie!==0&&ne[ie]!==-1&&ie!=ne[ie]);ne[M]=-1}for(W[0]+="/",M=1;M<se;++M)N[M].type!==2&&(W[M]+="/")}function g(N,W,D){for(var M=N.start,L=N.size,V=[],J=M;D&&L>0&&J>=0;)V.push(W.slice(J*b,J*b+b)),L-=b,J=Ci(D,J*4);return V.length===0?ar(0):Wa(V).slice(0,N.size)}function w(N,W,D,M,L){var V=R;if(N===R){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(N!==-1){var J=D[N],ie=(M>>>2)-1;if(!J)return;for(var se=0;se<ie&&(V=Ci(J,se*4))!==R;++se)L.push(V);w(Ci(J,M-4),W-1,D,M,L)}}function k(N,W,D,M,L){var V=[],J=[];L||(L=[]);var ie=M-1,se=0,ne=0;for(se=W;se>=0;){L[se]=!0,V[V.length]=se,J.push(N[se]);var te=D[Math.floor(se*4/M)];if(ne=se*4&ie,M<4+ne)throw new Error("FAT boundary crossed: "+se+" 4 "+M);if(!N[te])break;se=Ci(N[te],ne)}return{nodes:V,data:Sw([J])}}function E(N,W,D,M){var L=N.length,V=[],J=[],ie=[],se=[],ne=M-1,te=0,me=0,Te=0,Ne=0;for(te=0;te<L;++te)if(ie=[],Te=te+W,Te>=L&&(Te-=L),!J[Te]){se=[];var ve=[];for(me=Te;me>=0;){ve[me]=!0,J[me]=!0,ie[ie.length]=me,se.push(N[me]);var ke=D[Math.floor(me*4/M)];if(Ne=me*4&ne,M<4+Ne)throw new Error("FAT boundary crossed: "+me+" 4 "+M);if(!N[ke]||(me=Ci(N[ke],Ne),ve[me]))break}V[Te]={nodes:ie,data:Sw([se])}}return V}function y(N,W,D,M,L,V,J,ie){for(var se=0,ne=M.length?2:0,te=W[N].data,me=0,Te=0,Ne;me<te.length;me+=128){var ve=te.slice(me,me+128);Er(ve,64),Te=ve.read_shift(2),Ne=uv(ve,0,Te-ne),M.push(Ne);var ke={name:Ne,type:ve.read_shift(1),color:ve.read_shift(1),L:ve.read_shift(4,"i"),R:ve.read_shift(4,"i"),C:ve.read_shift(4,"i"),clsid:ve.read_shift(16),state:ve.read_shift(4,"i"),start:0,size:0},Oe=ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2);Oe!==0&&(ke.ct=I(ve,ve.l-8));var it=ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2);it!==0&&(ke.mt=I(ve,ve.l-8)),ke.start=ve.read_shift(4,"i"),ke.size=ve.read_shift(4,"i"),ke.size<0&&ke.start<0&&(ke.size=ke.type=0,ke.start=R,ke.name=""),ke.type===5?(se=ke.start,L>0&&se!==R&&(W[se].name="!StreamData")):ke.size>=4096?(ke.storage="fat",W[ke.start]===void 0&&(W[ke.start]=k(D,ke.start,W.fat_addrs,W.ssz)),W[ke.start].name=ke.name,ke.content=W[ke.start].data.slice(0,ke.size)):(ke.storage="minifat",ke.size<0?ke.size=0:se!==R&&ke.start!==R&&W[se]&&(ke.content=g(ke,W[se].data,(W[ie]||{}).data))),ke.content&&Er(ke.content,0),V[Ne]=ke,J.push(ke)}}function I(N,W){return new Date((kn(N,W+4)/1e7*Math.pow(2,32)+kn(N,W)/1e7-11644473600)*1e3)}function O(N,W){return c(),f(l.readFileSync(N),W)}function F(N,W){var D=W&&W.type;switch(D||et&&Buffer.isBuffer(N)&&(D="buffer"),D||"base64"){case"file":return O(N,W);case"base64":return f(ls(Rn(N)),W);case"binary":return f(ls(N),W)}return f(N,W)}function v(N,W){var D=W||{},M=D.root||"Root Entry";if(N.FullPaths||(N.FullPaths=[]),N.FileIndex||(N.FileIndex=[]),N.FullPaths.length!==N.FileIndex.length)throw new Error("inconsistent CFB structure");N.FullPaths.length===0&&(N.FullPaths[0]=M+"/",N.FileIndex[0]={name:M,type:5}),D.CLSID&&(N.FileIndex[0].clsid=D.CLSID),T(N)}function T(N){var W="Sh33tJ5";if(!st.find(N,"/"+W)){var D=ar(4);D[0]=55,D[1]=D[3]=50,D[2]=54,N.FileIndex.push({name:W,type:2,content:D,size:4,L:69,R:69,C:69}),N.FullPaths.push(N.FullPaths[0]+W),S(N)}}function S(N,W){v(N);for(var D=!1,M=!1,L=N.FullPaths.length-1;L>=0;--L){var V=N.FileIndex[L];switch(V.type){case 0:M?D=!0:(N.FileIndex.pop(),N.FullPaths.pop());break;case 1:case 2:case 5:M=!0,isNaN(V.R*V.L*V.C)&&(D=!0),V.R>-1&&V.L>-1&&V.R==V.L&&(D=!0);break;default:D=!0;break}}if(!(!D&&!W)){var J=new Date(1987,1,19),ie=0,se=Object.create?Object.create(null):{},ne=[];for(L=0;L<N.FullPaths.length;++L)se[N.FullPaths[L]]=!0,N.FileIndex[L].type!==0&&ne.push([N.FullPaths[L],N.FileIndex[L]]);for(L=0;L<ne.length;++L){var te=n(ne[L][0]);M=se[te],M||(ne.push([te,{name:s(te).replace("/",""),type:1,clsid:fe,ct:J,mt:J,content:null}]),se[te]=!0)}for(ne.sort(function(Ne,ve){return r(Ne[0],ve[0])}),N.FullPaths=[],N.FileIndex=[],L=0;L<ne.length;++L)N.FullPaths[L]=ne[L][0],N.FileIndex[L]=ne[L][1];for(L=0;L<ne.length;++L){var me=N.FileIndex[L],Te=N.FullPaths[L];if(me.name=s(Te).replace("/",""),me.L=me.R=me.C=-(me.color=1),me.size=me.content?me.content.length:0,me.start=0,me.clsid=me.clsid||fe,L===0)me.C=ne.length>1?1:-1,me.size=0,me.type=5;else if(Te.slice(-1)=="/"){for(ie=L+1;ie<ne.length&&n(N.FullPaths[ie])!=Te;++ie);for(me.C=ie>=ne.length?-1:ie,ie=L+1;ie<ne.length&&n(N.FullPaths[ie])!=n(Te);++ie);me.R=ie>=ne.length?-1:ie,me.type=1}else n(N.FullPaths[L+1]||"")==n(Te)&&(me.R=L+1),me.type=2}}}function C(N,W){var D=W||{};if(D.fileType=="mad")return sr(N,D);switch(S(N),D.fileType){case"zip":return Ks(N,D)}var M=function(Ne){for(var ve=0,ke=0,Oe=0;Oe<Ne.FileIndex.length;++Oe){var it=Ne.FileIndex[Oe];if(it.content){var Ye=it.content.length;Ye>0&&(Ye<4096?ve+=Ye+63>>6:ke+=Ye+511>>9)}}for(var mt=Ne.FullPaths.length+3>>2,on=ve+7>>3,Ge=ve+127>>7,ht=on+ke+mt+Ge,vr=ht+127>>7,Mn=vr<=109?0:Math.ceil((vr-109)/127);ht+vr+Mn+127>>7>vr;)Mn=++vr<=109?0:Math.ceil((vr-109)/127);var rt=[1,Mn,vr,Ge,mt,ke,ve,0];return Ne.FileIndex[0].size=ve<<6,rt[7]=(Ne.FileIndex[0].start=rt[0]+rt[1]+rt[2]+rt[3]+rt[4]+rt[5])+(rt[6]+7>>3),rt}(N),L=ar(M[7]<<9),V=0,J=0;{for(V=0;V<8;++V)L.write_shift(1,ee[V]);for(V=0;V<8;++V)L.write_shift(2,0);for(L.write_shift(2,62),L.write_shift(2,3),L.write_shift(2,65534),L.write_shift(2,9),L.write_shift(2,6),V=0;V<3;++V)L.write_shift(2,0);for(L.write_shift(4,0),L.write_shift(4,M[2]),L.write_shift(4,M[0]+M[1]+M[2]+M[3]-1),L.write_shift(4,0),L.write_shift(4,4096),L.write_shift(4,M[3]?M[0]+M[1]+M[2]-1:R),L.write_shift(4,M[3]),L.write_shift(-4,M[1]?M[0]-1:R),L.write_shift(4,M[1]),V=0;V<109;++V)L.write_shift(-4,V<M[2]?M[1]+V:-1)}if(M[1])for(J=0;J<M[1];++J){for(;V<236+J*127;++V)L.write_shift(-4,V<M[2]?M[1]+V:-1);L.write_shift(-4,J===M[1]-1?R:J+1)}var ie=function(Ne){for(J+=Ne;V<J-1;++V)L.write_shift(-4,V+1);Ne&&(++V,L.write_shift(-4,R))};for(J=V=0,J+=M[1];V<J;++V)L.write_shift(-4,ue.DIFSECT);for(J+=M[2];V<J;++V)L.write_shift(-4,ue.FATSECT);ie(M[3]),ie(M[4]);for(var se=0,ne=0,te=N.FileIndex[0];se<N.FileIndex.length;++se)te=N.FileIndex[se],te.content&&(ne=te.content.length,!(ne<4096)&&(te.start=J,ie(ne+511>>9)));for(ie(M[6]+7>>3);L.l&511;)L.write_shift(-4,ue.ENDOFCHAIN);for(J=V=0,se=0;se<N.FileIndex.length;++se)te=N.FileIndex[se],te.content&&(ne=te.content.length,!(!ne||ne>=4096)&&(te.start=J,ie(ne+63>>6)));for(;L.l&511;)L.write_shift(-4,ue.ENDOFCHAIN);for(V=0;V<M[4]<<2;++V){var me=N.FullPaths[V];if(!me||me.length===0){for(se=0;se<17;++se)L.write_shift(4,0);for(se=0;se<3;++se)L.write_shift(4,-1);for(se=0;se<12;++se)L.write_shift(4,0);continue}te=N.FileIndex[V],V===0&&(te.start=te.size?te.start-1:R);var Te=V===0&&D.root||te.name;if(ne=2*(Te.length+1),L.write_shift(64,Te,"utf16le"),L.write_shift(2,ne),L.write_shift(1,te.type),L.write_shift(1,te.color),L.write_shift(-4,te.L),L.write_shift(-4,te.R),L.write_shift(-4,te.C),te.clsid)L.write_shift(16,te.clsid,"hex");else for(se=0;se<4;++se)L.write_shift(4,0);L.write_shift(4,te.state||0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,0),L.write_shift(4,te.start),L.write_shift(4,te.size),L.write_shift(4,0)}for(V=1;V<N.FileIndex.length;++V)if(te=N.FileIndex[V],te.size>=4096)if(L.l=te.start+1<<9,et&&Buffer.isBuffer(te.content))te.content.copy(L,L.l,0,te.size),L.l+=te.size+511&-512;else{for(se=0;se<te.size;++se)L.write_shift(1,te.content[se]);for(;se&511;++se)L.write_shift(1,0)}for(V=1;V<N.FileIndex.length;++V)if(te=N.FileIndex[V],te.size>0&&te.size<4096)if(et&&Buffer.isBuffer(te.content))te.content.copy(L,L.l,0,te.size),L.l+=te.size+63&-64;else{for(se=0;se<te.size;++se)L.write_shift(1,te.content[se]);for(;se&63;++se)L.write_shift(1,0)}if(et)L.l=L.length;else for(;L.l<L.length;)L.write_shift(1,0);return L}function P(N,W){var D=N.FullPaths.map(function(se){return se.toUpperCase()}),M=D.map(function(se){var ne=se.split("/");return ne[ne.length-(se.slice(-1)=="/"?2:1)]}),L=!1;W.charCodeAt(0)===47?(L=!0,W=D[0].slice(0,-1)+W):L=W.indexOf("/")!==-1;var V=W.toUpperCase(),J=L===!0?D.indexOf(V):M.indexOf(V);if(J!==-1)return N.FileIndex[J];var ie=!V.match(uc);for(V=V.replace(en,""),ie&&(V=V.replace(uc,"!")),J=0;J<D.length;++J)if((ie?D[J].replace(uc,"!"):D[J]).replace(en,"")==V||(ie?M[J].replace(uc,"!"):M[J]).replace(en,"")==V)return N.FileIndex[J];return null}var b=64,R=-2,ae="d0cf11e0a1b11ae1",ee=[208,207,17,224,161,177,26,225],fe="00000000000000000000000000000000",ue={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:ae,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:fe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function q(N,W,D){c();var M=C(N,D);l.writeFileSync(W,M)}function G(N){for(var W=new Array(N.length),D=0;D<N.length;++D)W[D]=String.fromCharCode(N[D]);return W.join("")}function Z(N,W){var D=C(N,W);switch(W&&W.type||"buffer"){case"file":return c(),l.writeFileSync(W.filename,D),D;case"binary":return typeof D=="string"?D:G(D);case"base64":return ow(typeof D=="string"?D:G(D));case"buffer":if(et)return Buffer.isBuffer(D)?D:co(D);case"array":return typeof D=="string"?ls(D):D}return D}var ce;function j(N){try{var W=N.InflateRaw,D=new W;if(D._processChunk(new Uint8Array([3,0]),D._finishFlushFlag),D.bytesRead)ce=N;else throw new Error("zlib does not expose bytesRead")}catch(M){console.error("cannot use native zlib: "+(M.message||M))}}function Y(N,W){if(!ce)return Gs(N,W);var D=ce.InflateRaw,M=new D,L=M._processChunk(N.slice(N.l),M._finishFlushFlag);return N.l+=M.bytesRead,L}function K(N){return ce?ce.deflateRawSync(N):Ve(N)}var B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ee(N){var W=(N<<1|N<<11)&139536|(N<<5|N<<15)&558144;return(W>>16|W>>8|W)&255}for(var _e=typeof Uint8Array<"u",ge=_e?new Uint8Array(256):[],De=0;De<256;++De)ge[De]=Ee(De);function H(N,W){var D=ge[N&255];return W<=8?D>>>8-W:(D=D<<8|ge[N>>8&255],W<=16?D>>>16-W:(D=D<<8|ge[N>>16&255],D>>>24-W))}function tt(N,W){var D=W&7,M=W>>>3;return(N[M]|(D<=6?0:N[M+1]<<8))>>>D&3}function He(N,W){var D=W&7,M=W>>>3;return(N[M]|(D<=5?0:N[M+1]<<8))>>>D&7}function Je(N,W){var D=W&7,M=W>>>3;return(N[M]|(D<=4?0:N[M+1]<<8))>>>D&15}function Fe(N,W){var D=W&7,M=W>>>3;return(N[M]|(D<=3?0:N[M+1]<<8))>>>D&31}function Se(N,W){var D=W&7,M=W>>>3;return(N[M]|(D<=1?0:N[M+1]<<8))>>>D&127}function vt(N,W,D){var M=W&7,L=W>>>3,V=(1<<D)-1,J=N[L]>>>M;return D<8-M||(J|=N[L+1]<<8-M,D<16-M)||(J|=N[L+2]<<16-M,D<24-M)||(J|=N[L+3]<<24-M),J&V}function Yt(N,W,D){var M=W&7,L=W>>>3;return M<=5?N[L]|=(D&7)<<M:(N[L]|=D<<M&255,N[L+1]=(D&7)>>8-M),W+3}function fr(N,W,D){var M=W&7,L=W>>>3;return D=(D&1)<<M,N[L]|=D,W+1}function sn(N,W,D){var M=W&7,L=W>>>3;return D<<=M,N[L]|=D&255,D>>>=8,N[L+1]=D,W+8}function zs(N,W,D){var M=W&7,L=W>>>3;return D<<=M,N[L]|=D&255,D>>>=8,N[L+1]=D&255,N[L+2]=D>>>8,W+16}function an(N,W){var D=N.length,M=2*D>W?2*D:W+5,L=0;if(D>=W)return N;if(et){var V=lw(M);if(N.copy)N.copy(V);else for(;L<N.length;++L)V[L]=N[L];return V}else if(_e){var J=new Uint8Array(M);if(J.set)J.set(N);else for(;L<D;++L)J[L]=N[L];return J}return N.length=M,N}function St(N){for(var W=new Array(N),D=0;D<N;++D)W[D]=0;return W}function hr(N,W,D){var M=1,L=0,V=0,J=0,ie=0,se=N.length,ne=_e?new Uint16Array(32):St(32);for(V=0;V<32;++V)ne[V]=0;for(V=se;V<D;++V)N[V]=0;se=N.length;var te=_e?new Uint16Array(se):St(se);for(V=0;V<se;++V)ne[L=N[V]]++,M<L&&(M=L),te[V]=0;for(ne[0]=0,V=1;V<=M;++V)ne[V+16]=ie=ie+ne[V-1]<<1;for(V=0;V<se;++V)ie=N[V],ie!=0&&(te[V]=ne[ie+16]++);var me=0;for(V=0;V<se;++V)if(me=N[V],me!=0)for(ie=H(te[V],M)>>M-me,J=(1<<M+4-me)-1;J>=0;--J)W[ie|J<<me]=me&15|V<<4;return M}var yt=_e?new Uint16Array(512):St(512),At=_e?new Uint16Array(32):St(32);if(!_e){for(var dt=0;dt<512;++dt)yt[dt]=0;for(dt=0;dt<32;++dt)At[dt]=0}(function(){for(var N=[],W=0;W<32;W++)N.push(5);hr(N,At,32);var D=[];for(W=0;W<=143;W++)D.push(8);for(;W<=255;W++)D.push(9);for(;W<=279;W++)D.push(7);for(;W<=287;W++)D.push(8);hr(D,yt,288)})();var Ot=function(){for(var W=_e?new Uint8Array(32768):[],D=0,M=0;D<de.length-1;++D)for(;M<de[D+1];++M)W[M]=D;for(;M<32768;++M)W[M]=29;var L=_e?new Uint8Array(259):[];for(D=0,M=0;D<Q.length-1;++D)for(;M<Q[D+1];++M)L[M]=D;function V(ie,se){for(var ne=0;ne<ie.length;){var te=Math.min(65535,ie.length-ne),me=ne+te==ie.length;for(se.write_shift(1,+me),se.write_shift(2,te),se.write_shift(2,~te&65535);te-- >0;)se[se.l++]=ie[ne++]}return se.l}function J(ie,se){for(var ne=0,te=0,me=_e?new Uint16Array(32768):[];te<ie.length;){var Te=Math.min(65535,ie.length-te);if(Te<10){for(ne=Yt(se,ne,+(te+Te==ie.length)),ne&7&&(ne+=8-(ne&7)),se.l=ne/8|0,se.write_shift(2,Te),se.write_shift(2,~Te&65535);Te-- >0;)se[se.l++]=ie[te++];ne=se.l*8;continue}ne=Yt(se,ne,+(te+Te==ie.length)+2);for(var Ne=0;Te-- >0;){var ve=ie[te];Ne=(Ne<<5^ve)&32767;var ke=-1,Oe=0;if((ke=me[Ne])&&(ke|=te&-32768,ke>te&&(ke-=32768),ke<te))for(;ie[ke+Oe]==ie[te+Oe]&&Oe<250;)++Oe;if(Oe>2){ve=L[Oe],ve<=22?ne=sn(se,ne,ge[ve+1]>>1)-1:(sn(se,ne,3),ne+=5,sn(se,ne,ge[ve-23]>>5),ne+=3);var it=ve<8?0:ve-4>>2;it>0&&(zs(se,ne,Oe-Q[ve]),ne+=it),ve=W[te-ke],ne=sn(se,ne,ge[ve]>>3),ne-=3;var Ye=ve<4?0:ve-2>>1;Ye>0&&(zs(se,ne,te-ke-de[ve]),ne+=Ye);for(var mt=0;mt<Oe;++mt)me[Ne]=te&32767,Ne=(Ne<<5^ie[te])&32767,++te;Te-=Oe-1}else ve<=143?ve=ve+48:ne=fr(se,ne,1),ne=sn(se,ne,ge[ve]),me[Ne]=te&32767,++te}ne=sn(se,ne,0)-1}return se.l=(ne+7)/8|0,se.l}return function(se,ne){return se.length<8?V(se,ne):J(se,ne)}}();function Ve(N){var W=ar(50+Math.floor(N.length*1.1)),D=Ot(N,W);return W.slice(0,D)}var _t=_e?new Uint16Array(32768):St(32768),Xt=_e?new Uint16Array(32768):St(32768),ft=_e?new Uint16Array(128):St(128),_n=1,Hs=1;function go(N,W){var D=Fe(N,W)+257;W+=5;var M=Fe(N,W)+1;W+=5;var L=Je(N,W)+4;W+=4;for(var V=0,J=_e?new Uint8Array(19):St(19),ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=1,ne=_e?new Uint8Array(8):St(8),te=_e?new Uint8Array(8):St(8),me=J.length,Te=0;Te<L;++Te)J[B[Te]]=V=He(N,W),se<V&&(se=V),ne[V]++,W+=3;var Ne=0;for(ne[0]=0,Te=1;Te<=se;++Te)te[Te]=Ne=Ne+ne[Te-1]<<1;for(Te=0;Te<me;++Te)(Ne=J[Te])!=0&&(ie[Te]=te[Ne]++);var ve=0;for(Te=0;Te<me;++Te)if(ve=J[Te],ve!=0){Ne=ge[ie[Te]]>>8-ve;for(var ke=(1<<7-ve)-1;ke>=0;--ke)ft[Ne|ke<<ve]=ve&7|Te<<3}var Oe=[];for(se=1;Oe.length<D+M;)switch(Ne=ft[Se(N,W)],W+=Ne&7,Ne>>>=3){case 16:for(V=3+tt(N,W),W+=2,Ne=Oe[Oe.length-1];V-- >0;)Oe.push(Ne);break;case 17:for(V=3+He(N,W),W+=3;V-- >0;)Oe.push(0);break;case 18:for(V=11+Se(N,W),W+=7;V-- >0;)Oe.push(0);break;default:Oe.push(Ne),se<Ne&&(se=Ne);break}var it=Oe.slice(0,D),Ye=Oe.slice(D);for(Te=D;Te<286;++Te)it[Te]=0;for(Te=M;Te<30;++Te)Ye[Te]=0;return _n=hr(it,_t,286),Hs=hr(Ye,Xt,30),W}function Dl(N,W){if(N[0]==3&&!(N[1]&3))return[mi(W),2];for(var D=0,M=0,L=lw(W||1<<18),V=0,J=L.length>>>0,ie=0,se=0;!(M&1);){if(M=He(N,D),D+=3,M>>>1)M>>1==1?(ie=9,se=5):(D=go(N,D),ie=_n,se=Hs);else{D&7&&(D+=8-(D&7));var ne=N[D>>>3]|N[(D>>>3)+1]<<8;if(D+=32,ne>0)for(!W&&J<V+ne&&(L=an(L,V+ne),J=L.length);ne-- >0;)L[V++]=N[D>>>3],D+=8;continue}for(;;){!W&&J<V+32767&&(L=an(L,V+32767),J=L.length);var te=vt(N,D,ie),me=M>>>1==1?yt[te]:_t[te];if(D+=me&15,me>>>=4,!(me>>>8&255))L[V++]=me;else{if(me==256)break;me-=257;var Te=me<8?0:me-4>>2;Te>5&&(Te=0);var Ne=V+Q[me];Te>0&&(Ne+=vt(N,D,Te),D+=Te),te=vt(N,D,se),me=M>>>1==1?At[te]:Xt[te],D+=me&15,me>>>=4;var ve=me<4?0:me-2>>1,ke=de[me];for(ve>0&&(ke+=vt(N,D,ve),D+=ve),!W&&J<Ne&&(L=an(L,Ne+100),J=L.length);V<Ne;)L[V]=L[V-ke],++V}}}return W?[L,D+7>>>3]:[L.slice(0,V),D+7>>>3]}function Gs(N,W){var D=N.slice(N.l||0),M=Dl(D,W);return N.l+=M[1],M[0]}function ws(N,W){if(N)typeof console<"u"&&console.error(W);else throw new Error(W)}function Ia(N,W){var D=N;Er(D,0);var M=[],L=[],V={FileIndex:M,FullPaths:L};v(V,{root:W.root});for(var J=D.length-4;(D[J]!=80||D[J+1]!=75||D[J+2]!=5||D[J+3]!=6)&&J>=0;)--J;D.l=J+4,D.l+=4;var ie=D.read_shift(2);D.l+=6;var se=D.read_shift(4);for(D.l=se,J=0;J<ie;++J){D.l+=20;var ne=D.read_shift(4),te=D.read_shift(4),me=D.read_shift(2),Te=D.read_shift(2),Ne=D.read_shift(2);D.l+=8;var ve=D.read_shift(4),ke=o(D.slice(D.l+me,D.l+me+Te));D.l+=me+Te+Ne;var Oe=D.l;D.l=ve+4,Qn(D,ne,te,V,ke),D.l=Oe}return V}function Qn(N,W,D,M,L){N.l+=2;var V=N.read_shift(2),J=N.read_shift(2),ie=i(N);if(V&8257)throw new Error("Unsupported ZIP encryption");for(var se=N.read_shift(4),ne=N.read_shift(4),te=N.read_shift(4),me=N.read_shift(2),Te=N.read_shift(2),Ne="",ve=0;ve<me;++ve)Ne+=String.fromCharCode(N[N.l++]);if(Te){var ke=o(N.slice(N.l,N.l+Te));(ke[21589]||{}).mt&&(ie=ke[21589].mt),((L||{})[21589]||{}).mt&&(ie=L[21589].mt)}N.l+=Te;var Oe=N.slice(N.l,N.l+ne);switch(J){case 8:Oe=Y(N,te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+J)}var it=!1;V&8&&(se=N.read_shift(4),se==134695760&&(se=N.read_shift(4),it=!0),ne=N.read_shift(4),te=N.read_shift(4)),ne!=W&&ws(it,"Bad compressed size: "+W+" != "+ne),te!=D&&ws(it,"Bad uncompressed size: "+D+" != "+te),re(M,Ne,Oe,{unsafe:!0,mt:ie})}function Ks(N,W){var D=W||{},M=[],L=[],V=ar(1),J=D.compression?8:0,ie=0,se=0,ne=0,te=0,me=0,Te=N.FullPaths[0],Ne=Te,ve=N.FileIndex[0],ke=[],Oe=0;for(se=1;se<N.FullPaths.length;++se)if(Ne=N.FullPaths[se].slice(Te.length),ve=N.FileIndex[se],!(!ve.size||!ve.content||Ne=="Sh33tJ5")){var it=te,Ye=ar(Ne.length);for(ne=0;ne<Ne.length;++ne)Ye.write_shift(1,Ne.charCodeAt(ne)&127);Ye=Ye.slice(0,Ye.l),ke[me]=sj.buf(ve.content,0);var mt=ve.content;J==8&&(mt=K(mt)),V=ar(30),V.write_shift(4,67324752),V.write_shift(2,20),V.write_shift(2,ie),V.write_shift(2,J),ve.mt?a(V,ve.mt):V.write_shift(4,0),V.write_shift(-4,ke[me]),V.write_shift(4,mt.length),V.write_shift(4,ve.content.length),V.write_shift(2,Ye.length),V.write_shift(2,0),te+=V.length,M.push(V),te+=Ye.length,M.push(Ye),te+=mt.length,M.push(mt),V=ar(46),V.write_shift(4,33639248),V.write_shift(2,0),V.write_shift(2,20),V.write_shift(2,ie),V.write_shift(2,J),V.write_shift(4,0),V.write_shift(-4,ke[me]),V.write_shift(4,mt.length),V.write_shift(4,ve.content.length),V.write_shift(2,Ye.length),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(4,0),V.write_shift(4,it),Oe+=V.l,L.push(V),Oe+=Ye.length,L.push(Ye),++me}return V=ar(22),V.write_shift(4,101010256),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(2,me),V.write_shift(2,me),V.write_shift(4,Oe),V.write_shift(4,te),V.write_shift(2,0),Wa([Wa(M),Wa(L),V])}var Es={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Fn(N,W){if(N.ctype)return N.ctype;var D=N.name||"",M=D.match(/\.([^\.]+)$/);return M&&Es[M[1]]||W&&(M=(D=W).match(/[\.\\]([^\.\\])+$/),M&&Es[M[1]])?Es[M[1]]:"application/octet-stream"}function xo(N){for(var W=ow(N),D=[],M=0;M<W.length;M+=76)D.push(W.slice(M,M+76));return D.join(`\r
`)+`\r
`}function qs(N){var W=N.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ne){var te=ne.charCodeAt(0).toString(16).toUpperCase();return"="+(te.length==1?"0"+te:te)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var D=[],M=W.split(`\r
`),L=0;L<M.length;++L){var V=M[L];if(V.length==0){D.push("");continue}for(var J=0;J<V.length;){var ie=76,se=V.slice(J,J+ie);se.charAt(ie-1)=="="?ie--:se.charAt(ie-2)=="="?ie-=2:se.charAt(ie-3)=="="&&(ie-=3),se=V.slice(J,J+ie),J+=ie,J<V.length&&(se+="="),D.push(se)}}return D.join(`\r
`)}function Ys(N){for(var W=[],D=0;D<N.length;++D){for(var M=N[D];D<=N.length&&M.charAt(M.length-1)=="=";)M=M.slice(0,M.length-1)+N[++D];W.push(M)}for(var L=0;L<W.length;++L)W[L]=W[L].replace(/[=][0-9A-Fa-f]{2}/g,function(V){return String.fromCharCode(parseInt(V.slice(1),16))});return ls(W.join(`\r
`))}function On(N,W,D){for(var M="",L="",V="",J,ie=0;ie<10;++ie){var se=W[ie];if(!se||se.match(/^\s*$/))break;var ne=se.match(/^(.*?):\s*([^\s].*)$/);if(ne)switch(ne[1].toLowerCase()){case"content-location":M=ne[2].trim();break;case"content-type":V=ne[2].trim();break;case"content-transfer-encoding":L=ne[2].trim();break}}switch(++ie,L.toLowerCase()){case"base64":J=ls(Rn(W.slice(ie).join("")));break;case"quoted-printable":J=Ys(W.slice(ie));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+L)}var te=re(N,M.slice(D.length),J,{unsafe:!0});V&&(te.ctype=V)}function vo(N,W){if(G(N.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var D=W&&W.root||"",M=(et&&Buffer.isBuffer(N)?N.toString("binary"):G(N)).split(`\r
`),L=0,V="";for(L=0;L<M.length;++L)if(V=M[L],!!/^Content-Location:/i.test(V)&&(V=V.slice(V.indexOf("file")),D||(D=V.slice(0,V.lastIndexOf("/")+1)),V.slice(0,D.length)!=D))for(;D.length>0&&(D=D.slice(0,D.length-1),D=D.slice(0,D.lastIndexOf("/")+1),V.slice(0,D.length)!=D););var J=(M[1]||"").match(/boundary="(.*?)"/);if(!J)throw new Error("MAD cannot find boundary");var ie="--"+(J[1]||""),se=[],ne=[],te={FileIndex:se,FullPaths:ne};v(te);var me,Te=0;for(L=0;L<M.length;++L){var Ne=M[L];Ne!==ie&&Ne!==ie+"--"||(Te++&&On(te,M.slice(me,L),D),me=L)}return te}function sr(N,W){var D=W||{},M=D.boundary||"SheetJS";M="------="+M;for(var L=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+M.slice(2)+'"',"","",""],V=N.FullPaths[0],J=V,ie=N.FileIndex[0],se=1;se<N.FullPaths.length;++se)if(J=N.FullPaths[se].slice(V.length),ie=N.FileIndex[se],!(!ie.size||!ie.content||J=="Sh33tJ5")){J=J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Oe){return"_x"+Oe.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Oe){return"_u"+Oe.charCodeAt(0).toString(16)+"_"});for(var ne=ie.content,te=et&&Buffer.isBuffer(ne)?ne.toString("binary"):G(ne),me=0,Te=Math.min(1024,te.length),Ne=0,ve=0;ve<=Te;++ve)(Ne=te.charCodeAt(ve))>=32&&Ne<128&&++me;var ke=me>=Te*4/5;L.push(M),L.push("Content-Location: "+(D.root||"file:///C:/SheetJS/")+J),L.push("Content-Transfer-Encoding: "+(ke?"quoted-printable":"base64")),L.push("Content-Type: "+Fn(ie,J)),L.push(""),L.push(ke?qs(te):xo(te))}return L.push(M+`--\r
`),L.join(`\r
`)}function X(N){var W={};return v(W,N),W}function re(N,W,D,M){var L=M&&M.unsafe;L||v(N);var V=!L&&st.find(N,W);if(!V){var J=N.FullPaths[0];W.slice(0,J.length)==J?J=W:(J.slice(-1)!="/"&&(J+="/"),J=(J+W).replace("//","/")),V={name:s(W),type:2},N.FileIndex.push(V),N.FullPaths.push(J),L||st.utils.cfb_gc(N)}return V.content=D,V.size=D?D.length:0,M&&(M.CLSID&&(V.clsid=M.CLSID),M.mt&&(V.mt=M.mt),M.ct&&(V.ct=M.ct)),V}function le(N,W){v(N);var D=st.find(N,W);if(D){for(var M=0;M<N.FileIndex.length;++M)if(N.FileIndex[M]==D)return N.FileIndex.splice(M,1),N.FullPaths.splice(M,1),!0}return!1}function xe(N,W,D){v(N);var M=st.find(N,W);if(M){for(var L=0;L<N.FileIndex.length;++L)if(N.FileIndex[L]==M)return N.FileIndex[L].name=s(D),N.FullPaths[L]=D,!0}return!1}function Ie(N){S(N,!0)}return t.find=P,t.read=F,t.parse=f,t.write=Z,t.writeFile=q,t.utils={cfb_new:X,cfb_add:re,cfb_del:le,cfb_mov:xe,cfb_gc:Ie,ReadShift:Nc,CheckField:ZA,prep_blob:Er,bconcat:Wa,use_zlib:j,_deflateRaw:Ve,_inflateRaw:Gs,consts:ue},t}();function aj(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Us(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function iv(e){for(var t=[],r=Us(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var dd=new Date(1899,11,30,0,0,0);function tn(e,t){var r=e.getTime(),n=dd.getTime()+(e.getTimezoneOffset()-dd.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var PA=new Date,ij=dd.getTime()+(PA.getTimezoneOffset()-dd.getTimezoneOffset())*6e4,gw=PA.getTimezoneOffset();function h0(e){var t=new Date;return t.setTime(e*24*60*60*1e3+ij),t.getTimezoneOffset()!==gw&&t.setTime(t.getTime()+(t.getTimezoneOffset()-gw)*6e4),t}function oj(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var xw=new Date("2017-02-19T19:06:09.000Z"),DA=isNaN(xw.getFullYear())?new Date("2/19/17"):xw,lj=DA.getFullYear()==2017;function xr(e,t){var r=new Date(e);if(lj)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(DA.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function to(e,t){if(et&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return hc(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return hc(yA(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return hc(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return hc(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Ar(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ar(e[r]));return t}function Wt(e,t){for(var r="";r.length<t;)r+=e;return r}function ps(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var cj=["january","february","march","april","may","june","july","august","september","october","november","december"];function _l(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&cj.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var uj=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function FA(e){return e?e.content&&e.type?to(e.content,!0):e.data?cc(e.data):e.asNodeBuffer&&et?cc(e.asNodeBuffer().toString("binary")):e.asBinary?cc(e.asBinary()):e._data&&e._data.getContent?cc(to(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function OA(e){if(!e)return null;if(e.data)return aw(e.data);if(e.asNodeBuffer&&et)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?aw(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function fj(e){return e&&e.name.slice(-4)===".bin"?OA(e):FA(e)}function Un(e,t){for(var r=e.FullPaths||Us(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function ov(e,t){var r=Un(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Zt(e,t,r){if(!r)return fj(ov(e,t));if(!t)return null;try{return Zt(e,t)}catch{return null}}function Sn(e,t,r){if(!r)return FA(ov(e,t));if(!t)return null;try{return Sn(e,t)}catch{return null}}function hj(e,t,r){return OA(ov(e,t))}function vw(e){for(var t=e.FullPaths||Us(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function dj(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return et?n=co(r):n=P6(r),st.utils.cfb_add(e,t,n)}st.utils.cfb_add(e,t,r)}else e.file(t,r)}function MA(e,t){switch(t.type){case"base64":return st.read(e,{type:"base64"});case"binary":return st.read(e,{type:"binary"});case"buffer":case"array":return st.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function fc(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var LA=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,mj=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,yw=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,pj=/<[^>]*>/g,Kr=LA.match(yw)?yw:pj,gj=/<\w*:/,xj=/<(\/?)\w+:/;function Le(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(mj),o=0,l="",c=0,f="",d="",m=1;if(i)for(c=0;c!=i.length;++c){for(d=i[c],a=0;a!=d.length&&d.charCodeAt(a)!==61;++a);for(f=d.slice(0,a).trim();d.charCodeAt(a+1)==32;)++a;for(m=(s=d.charCodeAt(a+1))==34||s==39?1:0,l=d.slice(a+1+m,d.length-m),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=l,n[f.toLowerCase()]=l;else{var p=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(n[p]&&f.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function Ws(e){return e.replace(xj,"<$1")}var jA={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},vj=iv(jA),lt=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,l){return jA[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}}(),yj=/[&<>'"]/g,_j=/[\u0000-\u001f]/g;function lv(e){var t=e+"";return t.replace(yj,function(r){return vj[r]}).replace(/\n/g,"<br/>").replace(_j,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var _w=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Dt(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function cm(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function ww(e){var t=mi(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function Ew(e){return co(e,"binary").toString("utf8")}var jf="foo bar baz",kt=et&&(Ew(jf)==cm(jf)&&Ew||ww(jf)==cm(jf)&&ww)||cm,hc=et?function(e){return co(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},pu=function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),UA=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),wj=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Ej=/<\/?(?:vt:)?variant>/g,Tj=/<(?:vt:)([^>]*)>([\s\S]*)</;function Tw(e,t){var r=Le(e),n=e.match(wj(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Ej,"").match(Tj);i&&s.push({v:kt(i[2]),t:i[1]})}),s}var kj=/(^\s|\s$|\n)/;function Sj(e){return Us(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Aj(e,t,r){return"<"+e+(r!=null?Sj(r):"")+(t!=null?(t.match(kj)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function cv(e){if(et&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return kt(uo(nv(e)));throw new Error("Bad input format: expected Buffer or string")}var gu=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ij={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Nj=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Cj(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function bj(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var kw=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},Sw=et?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:co(t)})):kw(e)}:kw,Aw=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(ia(e,s)));return n.join("").replace(en,"")},uv=et?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(en,""):Aw(e,t,r)}:Aw,Iw=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},VA=et?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Iw(e,t,r)}:Iw,Nw=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(No(e,s)));return n.join("")},qu=et?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):Nw(t,r,n)}:Nw,BA=function(e,t){var r=kn(e,t);return r>0?qu(e,t+4,t+4+r-1):""},WA=BA,$A=function(e,t){var r=kn(e,t);return r>0?qu(e,t+4,t+4+r-1):""},zA=$A,HA=function(e,t){var r=2*kn(e,t);return r>0?qu(e,t+4,t+4+r-1):""},GA=HA,KA=function(t,r){var n=kn(t,r);return n>0?uv(t,r+4,r+4+n):""},qA=KA,YA=function(e,t){var r=kn(e,t);return r>0?qu(e,t+4,t+4+r):""},XA=YA,QA=function(e,t){return Cj(e,t)},md=QA,JA=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};et&&(WA=function(t,r){if(!Buffer.isBuffer(t))return BA(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},zA=function(t,r){if(!Buffer.isBuffer(t))return $A(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},GA=function(t,r){if(!Buffer.isBuffer(t))return HA(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},qA=function(t,r){if(!Buffer.isBuffer(t))return KA(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},XA=function(t,r){if(!Buffer.isBuffer(t))return YA(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},md=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):QA(t,r)},JA=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var No=function(e,t){return e[t]},ia=function(e,t){return e[t+1]*256+e[t]},Rj=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},kn=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Ci=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Pj=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Nc(e,t){var r="",n,s,a=[],i,o,l,c;switch(t){case"dbcs":if(c=this.l,et&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(ia(this,c)),c+=2;e*=2;break;case"utf8":r=qu(this,this.l,this.l+e);break;case"utf16le":e*=2,r=uv(this,this.l,this.l+e);break;case"wstr":return Nc.call(this,e,"dbcs");case"lpstr-ansi":r=WA(this,this.l),e=4+kn(this,this.l);break;case"lpstr-cp":r=zA(this,this.l),e=4+kn(this,this.l);break;case"lpwstr":r=GA(this,this.l),e=4+2*kn(this,this.l);break;case"lpp4":e=4+kn(this,this.l),r=qA(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+kn(this,this.l),r=XA(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=No(this,this.l+e++))!==0;)a.push(Lf(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=ia(this,this.l+e))!==0;)a.push(Lf(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=No(this,c),this.l=c+1,o=Nc.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Lf(ia(this,c))),c+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=No(this,c),this.l=c+1,o=Nc.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Lf(No(this,c))),c+=1}r=a.join("");break;default:switch(e){case 1:return n=No(this,this.l),this.l++,n;case 2:return n=(t==="i"?Rj:ia)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Ci:Pj)(this,this.l),this.l+=4,n):(s=kn(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=md(this,this.l):s=md([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=VA(this,this.l,e);break}}return this.l+=e,r}var Dj=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Fj=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Oj=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Mj(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Oj(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Dj(this,t,this.l);break;case 8:if(n=8,r==="f"){bj(this,t,this.l);break}case 16:break;case-4:n=4,Fj(this,t,this.l);break}return this.l+=n,this}function ZA(e,t){var r=VA(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Er(e,t){e.l=t,e.read_shift=Nc,e.chk=ZA,e.write_shift=Mj}function Gr(e,t){e.l+=t}function ar(e){var t=mi(e);return Er(t,0),t}function Aa(e,t,r){if(e){var n,s,a;Er(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=_d[o]||_d[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;l=e.l+a;var f=c.f&&c.f(e,a,r);if(e.l=l,t(f,c,o))return}}}function zp(){var e=[],t=et?256:2048,r=function(c){var f=ar(c);return Er(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,t)))},i=function(){return s(),Wa(e)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Cc(e,t,r){var n=Ar(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Cw(e,t,r){var n=Ar(e);return n.s=Cc(n.s,t.s,r),n.e=Cc(n.e,t.s,r),n}function bc(e,t){if(e.cRel&&e.c<0)for(e=Ar(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ar(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=We(e);return!e.cRel&&e.cRel!=null&&(r=Uj(r)),!e.rRel&&e.rRel!=null&&(r=Lj(r)),r}function um(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+lr(e.s.c)+":"+(e.e.cRel?"":"$")+lr(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ir(e.s.r)+":"+(e.e.rRel?"":"$")+Ir(e.e.r):bc(e.s,t.biff)+":"+bc(e.e,t.biff)}function fv(e){return parseInt(jj(e),10)-1}function Ir(e){return""+(e+1)}function Lj(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function jj(e){return e.replace(/\$(\d+)$/,"$1")}function hv(e){for(var t=Vj(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function lr(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Uj(e){return e.replace(/^([A-Z])/,"$$$1")}function Vj(e){return e.replace(/^\$([A-Z])/,"$1")}function Bj(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Qr(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function We(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Rl(e){var t=e.indexOf(":");return t==-1?{s:Qr(e),e:Qr(e)}:{s:Qr(e.slice(0,t)),e:Qr(e.slice(t+1))}}function at(e,t){return typeof t>"u"||typeof t=="number"?at(e.s,e.e):(typeof e!="string"&&(e=We(e)),typeof t!="string"&&(t=We(t)),e==t?e:e+":"+t)}function Ht(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function bw(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Yn(e.z,r?tn(t):t)}catch{}try{return e.w=Yn((e.XF||{}).numFmtId||(r?14:0),r?tn(t):t)}catch{return""+t}}function Ta(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?mo[e.v]||e.v:t==null?bw(e,e.v):bw(e,t))}function wi(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function eI(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Qr(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var f=Ht(a["!ref"]);c.s.c=f.s.c,c.s.r=f.s.r,c.e.c=Math.max(c.e.c,f.e.c),c.e.r=Math.max(c.e.r,f.e.r),i==-1&&(c.e.r=i=f.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[d].length;++m)if(!(typeof t[d][m]>"u")){var p={v:t[d][m]},x=i+d,g=o+m;if(c.s.r>x&&(c.s.r=x),c.s.c>g&&(c.s.c=g),c.e.r<x&&(c.e.r=x),c.e.c<g&&(c.e.c=g),t[d][m]&&typeof t[d][m]=="object"&&!Array.isArray(t[d][m])&&!(t[d][m]instanceof Date))p=t[d][m];else if(Array.isArray(p.v)&&(p.f=t[d][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||ze[14],n.cellDates?(p.t="d",p.w=Yn(p.z,tn(p.v))):(p.t="n",p.v=tn(p.v),p.w=Yn(p.z,p.v))):p.t="s";if(s)a[x]||(a[x]=[]),a[x][g]&&a[x][g].z&&(p.z=a[x][g].z),a[x][g]=p;else{var w=We({c:g,r:x});a[w]&&a[w].z&&(p.z=a[w].z),a[w]=p}}}return c.s.c<1e7&&(a["!ref"]=at(c)),a}function Pl(e,t){return eI(null,e,t)}function Wj(e){return e.read_shift(4,"i")}function $r(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function $j(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function dv(e,t){var r=e.l,n=e.read_shift(1),s=$r(e),a=[],i={t:s,h:s};if(n&1){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push($j(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}var zj=dv;function Xn(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function fo(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Hj=$r;function mv(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var Gj=$r,Hp=mv;function pv(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?md([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Ci(t,0)>>2;return r?s/100:s}function tI(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var ho=tI;function Vr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Kj(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var c=$i[s];c&&(t.rgb=vu(c));break;case 2:t.rgb=vu([i,o,l]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function qj(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function rI(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Yj(e){return rI(e,1)}function Xj(e){return rI(e,2)}var gv=2,cn=3,Uf=11,Rw=12,pd=19,Vf=64,Qj=65,Jj=71,Zj=4108,e8=4126,mr=80,nI=81,t8=[mr,nI],r8={1:{n:"CodePage",t:gv},2:{n:"Category",t:mr},3:{n:"PresentationFormat",t:mr},4:{n:"ByteCount",t:cn},5:{n:"LineCount",t:cn},6:{n:"ParagraphCount",t:cn},7:{n:"SlideCount",t:cn},8:{n:"NoteCount",t:cn},9:{n:"HiddenCount",t:cn},10:{n:"MultimediaClipCount",t:cn},11:{n:"ScaleCrop",t:Uf},12:{n:"HeadingPairs",t:Zj},13:{n:"TitlesOfParts",t:e8},14:{n:"Manager",t:mr},15:{n:"Company",t:mr},16:{n:"LinksUpToDate",t:Uf},17:{n:"CharacterCount",t:cn},19:{n:"SharedDoc",t:Uf},22:{n:"HyperlinksChanged",t:Uf},23:{n:"AppVersion",t:cn,p:"version"},24:{n:"DigSig",t:Qj},26:{n:"ContentType",t:mr},27:{n:"ContentStatus",t:mr},28:{n:"Language",t:mr},29:{n:"Version",t:mr},255:{},2147483648:{n:"Locale",t:pd},2147483651:{n:"Behavior",t:pd},1919054434:{}},n8={1:{n:"CodePage",t:gv},2:{n:"Title",t:mr},3:{n:"Subject",t:mr},4:{n:"Author",t:mr},5:{n:"Keywords",t:mr},6:{n:"Comments",t:mr},7:{n:"Template",t:mr},8:{n:"LastAuthor",t:mr},9:{n:"RevNumber",t:mr},10:{n:"EditTime",t:Vf},11:{n:"LastPrinted",t:Vf},12:{n:"CreatedDate",t:Vf},13:{n:"ModifiedDate",t:Vf},14:{n:"PageCount",t:cn},15:{n:"WordCount",t:cn},16:{n:"CharCount",t:cn},17:{n:"Thumbnail",t:Jj},18:{n:"Application",t:mr},19:{n:"DocSecurity",t:cn},255:{},2147483648:{n:"Locale",t:pd},2147483651:{n:"Behavior",t:pd},1919054434:{}},Pw={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},s8=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function a8(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var i8=a8([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),$i=Ar(i8),mo={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sI={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Dw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function o8(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function l8(e){var t=o8();if(!e||!e.match)return t;var r={};if((e.match(Kr)||[]).forEach(function(n){var s=Le(n);switch(s[0].replace(gj,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Dw[s.ContentType]]!==void 0&&t[Dw[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Ij.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var Bo={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Gp(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Rc(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Kr)||[]).forEach(function(s){var a=Le(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:fc(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}var c8="application/vnd.oasis.opendocument.spreadsheet";function u8(e,t){for(var r=cv(e),n,s;n=gu.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Le(n[0],!1),s.path=="/"&&s.type!==c8)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var Pc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],f8=function(){for(var e=new Array(Pc.length),t=0;t<Pc.length;++t){var r=Pc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function aI(e){var t={};e=kt(e);for(var r=0;r<Pc.length;++r){var n=Pc[r],s=e.match(f8[r]);s!=null&&s.length>0&&(t[n[1]]=lt(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=xr(t[n[1]]))}return t}var h8=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function iI(e,t,r,n){var s=[];if(typeof e=="string")s=Tw(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(f){return{v:f}}));var i=typeof t=="string"?Tw(t,n).map(function(f){return f.v}):t,o=0,l=0;if(i.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function d8(e,t,r){var n={};return t||(t={}),e=kt(e),h8.forEach(function(s){var a=(e.match(pu(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=lt(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&iI(n.HeadingPairs,n.TitlesOfParts,t,r),t}var m8=/<[^>]+>[^<]*/g;function p8(e,t){var r={},n="",s=e.match(m8);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Le(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=lt(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),c=l[0].slice(4),f=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=lt(f);break;case"bool":r[n]=Dt(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=xr(f);break;case"cy":case"error":r[n]=lt(f);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,c,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}var g8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},fm;function x8(e,t,r){fm||(fm=iv(g8)),t=fm[t]||t,e[t]=r}function xv(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function oI(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function lI(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function cI(e,t,r){return t===31?lI(e):oI(e,t,r)}function Kp(e,t,r){return cI(e,t,r===!1?0:4)}function v8(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return cI(e,t,0)}function y8(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(en,""),e.l-s&2&&(e.l+=2)}return r}function _8(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(en,"");return r}function w8(e){var t=e.l,r=gd(e,nI);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=gd(e,cn);return[r,n]}function E8(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(w8(e));return r}function Fw(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(en,"").replace(uc,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function uI(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function T8(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function gd(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==Rw&&n!==t&&t8.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===Rw?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return oI(e,n,4).replace(en,"");case 31:return lI(e);case 64:return xv(e);case 65:return uI(e);case 71:return T8(e);case 80:return Kp(e,n,!a.raw).replace(en,"");case 81:return v8(e,n).replace(en,"");case 4108:return E8(e);case 4126:case 4127:return n==4127?y8(e):_8(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function Ow(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,l=-1,c={};for(i=0;i!=s;++i){var f=e.read_shift(4),d=e.read_shift(4);a[i]=[f,d+r]}a.sort(function(E,y){return E[1]-y[1]});var m={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var p=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],p=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],p=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(p=!1,e.l=a[i][1]),p)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(m[x.n]=gd(e,x.t,{raw:!0}),x.p==="version"&&(m[x.n]=String(m[x.n]>>16)+"."+("0000"+String(m[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(m[x.n]){case 0:m[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:us(o=m[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[x.n])}}else if(a[i][0]===1){if(o=m.CodePage=gd(e,gv),us(o),l!==-1){var g=e.l;e.l=a[l][1],c=Fw(e,o),e.l=g}}else if(a[i][0]===0){if(o===0){l=i,e.l=a[i+1][1];continue}c=Fw(e,o)}else{var w=c[a[i][0]],k;switch(e[e.l]){case 65:e.l+=4,k=uI(e);break;case 30:e.l+=4,k=Kp(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,k=Kp(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,k=e.read_shift(4,"i");break;case 19:e.l+=4,k=e.read_shift(4);break;case 5:e.l+=4,k=e.read_shift(8,"f");break;case 11:e.l+=4,k=Gt(e,4);break;case 64:e.l+=4,k=xr(xv(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[w]=k}}return e.l=r+n,m}function Mw(e,t,r){var n=e.content;if(!n)return{};Er(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),f=n.read_shift(16);if(f!==st.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var d=Ow(n,t),m={SystemIdentifier:c};for(var p in d)m[p]=d[p];if(m.FMTID=a,s===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=Ow(n,null)}catch{}for(p in x)m[p]=x[p];return m.FMTID=[a,i],m}function Da(e,t){return e.read_shift(t),null}function k8(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Gt(e,t){return e.read_shift(t)===1}function er(e){return e.read_shift(2,"u")}function fI(e,t){return k8(e,t,er)}function S8(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Yu(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function A8(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,c);return s&&(e.l+=4*i),n&&(e.l+=o),l.t=f,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function ro(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Xu(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):ro(e,n,r)}function po(e,t,r){if(r.biff>5)return Xu(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function I8(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function N8(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(en,"");return n&&(e.l+=24),s}function C8(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(en,"");return r+i}function b8(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return N8(e);case"0303000000000000c000000000000046":return C8(e);default:throw new Error("Unsupported Moniker "+r)}}function Bf(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(en,""):"";return r}function R8(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,l,c="",f,d;s&16&&(a=Bf(e,r-e.l)),s&128&&(i=Bf(e,r-e.l)),(s&257)===257&&(o=Bf(e,r-e.l)),(s&257)===1&&(l=b8(e,r-e.l)),s&8&&(c=Bf(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(d=xv(e)),e.l=r;var m=i||o||l||"";m&&c&&(m+="#"+c),m||(m="#"+c),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return f&&(p.guid=f),d&&(p.time=d),a&&(p.Tooltip=a),p}function hI(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function dI(e,t){var r=hI(e);return r[3]=0,r}function $s(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function P8(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function D8(e,t,r){return t===0?"":po(e,t,r)}function F8(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function mI(e){var t=e.read_shift(2),r=pv(e);return[t,r]}function O8(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=Yu(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function d0(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function pI(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var M8=pI;function gI(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function L8(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function j8(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Or(e){e.l+=2,e.l+=e.read_shift(2)}var U8={0:Or,4:Or,5:Or,6:Or,7:j8,8:Or,9:Or,10:Or,11:Or,12:Or,13:L8,14:Or,15:Or,16:Or,17:Or,18:Or,19:Or,20:Or,21:gI};function V8(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(U8[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Wf(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function B8(e,t){return t===0||e.read_shift(2),1200}function W8(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=po(e,0,r);return e.read_shift(t+n-e.l),s}function $8(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function z8(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=Yu(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function H8(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(A8(e));return a.Count=n,a.Unique=s,a}function G8(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function K8(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function q8(e){var t=P8(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Y8(e){return e.read_shift(2),e.read_shift(4)}function Lw(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function X8(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:c}}function Q8(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function J8(){}function Z8(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Yu(e,0,r),n}function e5(e){var t=$s(e);return t.isst=e.read_shift(4),t}function t5(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=$s(e);r.biff==2&&e.l++;var a=Xu(e,n-e.l,r);return s.val=a,s}function r5(e,t,r){var n=e.read_shift(2),s=po(e,0,r);return[n,s]}var n5=po;function jw(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function s5(e){var t=e.read_shift(2),r=e.read_shift(2),n=mI(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function a5(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(mI(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function i5(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function o5(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=s8[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function l5(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=o5(e,t,n.fStyle,r),n}function c5(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Uw(e,t,r){var n=$s(e);(r.biff==2||t==9)&&++e.l;var s=S8(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function u5(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=$s(e),s=Vr(e);return n.val=s,n}var Vw=D8;function f5(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=ro(e,a),o=[];n>e.l;)o.push(Xu(e));return[a,s,i,o]}function Bw(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=O8(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var h5=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Ww(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=ro(e,i,r);s&32&&(c=h5[c.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var d=n==e.l||o===0||!(f>0)?[]:KV(e,f,r,o);return{chKey:a,Name:c,itab:l,rgce:d}}function xI(e,t,r){if(r.biff<8)return d5(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(F8(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function d5(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Yu(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function m5(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=ro(e,n,r),i=ro(e,s,r);return[a,i]}function p5(e,t,r){var n=pI(e);e.l++;var s=e.read_shift(1);return t-=8,[qV(e,t,r),s,n]}function $w(e,t,r){var n=M8(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,HV(e,t,r)]}function g5(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function x5(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=po(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function v5(e,t,r){return x5(e,t,r)}function y5(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(d0(e));return r}function _5(e,t,r){if(r&&r.biff<8)return E5(e,t,r);var n=gI(e),s=V8(e,t-22,n[1]);return{cmo:n,ft:s}}var w5={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function E5(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((w5[n]||Gr)(e,t,r)),{cmo:[s,n,a],ft:i}}function T5(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=I8(e,6,r);var o=e.read_shift(2);e.read_shift(2),er(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var f=e[e.l],d=ro(e,e.lens[c+1]-e.lens[c]-1);if(s+=d,s.length>=(f?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function k5(e,t){var r=d0(e);e.l+=16;var n=R8(e,t-24);return[r,n]}function S5(e,t){e.read_shift(2);var r=d0(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(en,""),[r,n]}function A5(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=Pw[r]||r,r=e.read_shift(2),t[1]=Pw[r]||r,t}function I5(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(dI(e));return r}function N5(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(dI(e));return r}function C5(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function vI(e,t,r){if(!r.cellStyles)return Gr(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var c={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function b5(e,t){var r={};return t<32||(e.l+=16,r.header=Vr(e),r.footer=Vr(e),e.l+=2),r}function R5(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}var P5=$s,D5=fI,F5=Xu;function O5(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function M5(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=$s(e);++e.l;var s=po(e,t-7,r);return n.t="str",n.val=s,n}function L5(e){var t=$s(e);++e.l;var r=Vr(e);return t.t="n",t.val=r,t}function j5(e){var t=$s(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function U5(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function V5(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function B5(e,t,r){var n=e.l+t,s=$s(e),a=e.read_shift(2),i=ro(e,a,r);return e.l=n,s.t="str",s.val=i,s}var W5=[2,3,48,49,131,139,140,245],zw=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=iv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],f=mi(1);switch(l.type){case"base64":f=ls(Rn(o));break;case"binary":f=ls(o);break;case"buffer":case"array":f=o;break}Er(f,0);var d=f.read_shift(1),m=!!(d&136),p=!1,x=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var g=0,w=521;d==2&&(g=f.read_shift(2)),f.l+=3,d!=2&&(g=f.read_shift(4)),g>1048576&&(g=1e6),d!=2&&(w=f.read_shift(2));var k=f.read_shift(2),E=l.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(E=e[f[f.l]]),f.l+=1,f.l+=2),x&&(f.l+=36);for(var y=[],I={},O=Math.min(f.length,d==2?521:w-10-(p?264:0)),F=x?32:11;f.l<O&&f[f.l]!=13;)switch(I={},I.name=du.utils.decode(E,f.slice(f.l,f.l+F)).replace(/[\u0000\r\n].*$/g,""),f.l+=F,I.type=String.fromCharCode(f.read_shift(1)),d!=2&&!x&&(I.offset=f.read_shift(4)),I.len=f.read_shift(1),d==2&&(I.offset=f.read_shift(2)),I.dec=f.read_shift(1),I.name.length&&y.push(I),d!=2&&(f.l+=x?13:14),I.type){case"B":(!p||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(f[f.l]!==13&&(f.l=w-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=w;var v=0,T=0;for(c[0]=[],T=0;T!=y.length;++T)c[0][T]=y[T].name;for(;g-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,c[++v]=[],T=0,T=0;T!=y.length;++T){var S=f.slice(f.l,f.l+y[T].len);f.l+=y[T].len,Er(S,0);var C=du.utils.decode(E,S);switch(y[T].type){case"C":C.trim().length&&(c[v][T]=C.replace(/\s+$/,""));break;case"D":C.length===8?c[v][T]=new Date(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8)):c[v][T]=C;break;case"F":c[v][T]=parseFloat(C.trim());break;case"+":case"I":c[v][T]=x?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":c[v][T]=!0;break;case"N":case"F":c[v][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[v][T]="##MEMO##"+(x?parseInt(C.trim(),10):S.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(c[v][T]=+C||0);break;case"@":c[v][T]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":c[v][T]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":c[v][T]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[v][T]=-S.read_shift(-8,"f");break;case"B":if(p&&y[T].len==8){c[v][T]=S.read_shift(8,"f");break}case"G":case"P":S.l+=y[T].len;break;case"0":if(y[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[T].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=y,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var f=Pl(r(o,c),c);return f["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,f}function s(o,l){try{return wi(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var c=l||{};if(+c.codepage>=0&&us(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var f=zp(),d=Zp(o,{header:1,raw:!0,cellDates:!0}),m=d[0],p=d.slice(1),x=o["!cols"]||[],g=0,w=0,k=0,E=1;for(g=0;g<m.length;++g){if(((x[g]||{}).DBF||{}).name){m[g]=x[g].DBF.name,++k;continue}if(m[g]!=null){if(++k,typeof m[g]=="number"&&(m[g]=m[g].toString(10)),typeof m[g]!="string")throw new Error("DBF Invalid column name "+m[g]+" |"+typeof m[g]+"|");if(m.indexOf(m[g])!==g){for(w=0;w<1024;++w)if(m.indexOf(m[g]+"_"+w)==-1){m[g]+="_"+w;break}}}}var y=Ht(o["!ref"]),I=[],O=[],F=[];for(g=0;g<=y.e.c-y.s.c;++g){var v="",T="",S=0,C=[];for(w=0;w<p.length;++w)p[w][g]!=null&&C.push(p[w][g]);if(C.length==0||m[g]==null){I[g]="?";continue}for(w=0;w<C.length;++w){switch(typeof C[w]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=C[w]instanceof Date?"D":"C";break;default:T="C"}S=Math.max(S,String(C[w]).length),v=v&&v!=T?"C":T}S>250&&(S=250),T=((x[g]||{}).DBF||{}).type,T=="C"&&x[g].DBF.len>S&&(S=x[g].DBF.len),v=="B"&&T=="N"&&(v="N",F[g]=x[g].DBF.dec,S=x[g].DBF.len),O[g]=v=="C"||T=="N"?S:a[v]||0,E+=O[g],I[g]=v}var P=f.next(32);for(P.write_shift(4,318902576),P.write_shift(4,p.length),P.write_shift(2,296+32*k),P.write_shift(2,E),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[xA]||3)<<8),g=0,w=0;g<m.length;++g)if(m[g]!=null){var b=f.next(32),R=(m[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);b.write_shift(1,R,"sbcs"),b.write_shift(1,I[g]=="?"?"C":I[g],"sbcs"),b.write_shift(4,w),b.write_shift(1,O[g]||a[I[g]]||0),b.write_shift(1,F[g]||0),b.write_shift(1,2),b.write_shift(4,0),b.write_shift(1,0),b.write_shift(4,0),b.write_shift(4,0),w+=O[g]||a[I[g]]||0}var ae=f.next(264);for(ae.write_shift(4,13),g=0;g<65;++g)ae.write_shift(4,0);for(g=0;g<p.length;++g){var ee=f.next(E);for(ee.write_shift(1,0),w=0;w<m.length;++w)if(m[w]!=null)switch(I[w]){case"L":ee.write_shift(1,p[g][w]==null?63:p[g][w]?84:70);break;case"B":ee.write_shift(8,p[g][w]||0,"f");break;case"N":var fe="0";for(typeof p[g][w]=="number"&&(fe=p[g][w].toFixed(F[w]||0)),k=0;k<O[w]-fe.length;++k)ee.write_shift(1,32);ee.write_shift(1,fe,"sbcs");break;case"D":p[g][w]?(ee.write_shift(4,("0000"+p[g][w].getFullYear()).slice(-4),"sbcs"),ee.write_shift(2,("00"+(p[g][w].getMonth()+1)).slice(-2),"sbcs"),ee.write_shift(2,("00"+p[g][w].getDate()).slice(-2),"sbcs")):ee.write_shift(8,"00000000","sbcs");break;case"C":var ue=String(p[g][w]!=null?p[g][w]:"").slice(0,O[w]);for(ee.write_shift(1,ue,"sbcs"),k=0;k<O[w]-ue.length;++k)ee.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}}(),$5=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Us(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var x=e[p];return typeof x=="number"?iw(x):x},n=function(m,p,x){var g=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return g==59?m:iw(g)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return a(Rn(m),p);case"binary":return a(m,p);case"buffer":return a(et&&Buffer.isBuffer(m)?m.toString("binary"):uo(m),p);case"array":return a(to(m),p)}throw new Error("Unrecognized type "+p.type)}function a(m,p){var x=m.split(/[\n\r]+/),g=-1,w=-1,k=0,E=0,y=[],I=[],O=null,F={},v=[],T=[],S=[],C=0,P;for(+p.codepage>=0&&us(+p.codepage);k!==x.length;++k){C=0;var b=x[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),R=b.replace(/;;/g,"\0").split(";").map(function(B){return B.replace(/\u0000/g,";")}),ae=R[0],ee;if(b.length>0)switch(ae){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&I.push(b.slice(3).replace(/;;/g,";"));break;case"C":var fe=!1,ue=!1,q=!1,G=!1,Z=-1,ce=-1;for(E=1;E<R.length;++E)switch(R[E].charAt(0)){case"A":break;case"X":w=parseInt(R[E].slice(1))-1,ue=!0;break;case"Y":for(g=parseInt(R[E].slice(1))-1,ue||(w=0),P=y.length;P<=g;++P)y[P]=[];break;case"K":ee=R[E].slice(1),ee.charAt(0)==='"'?ee=ee.slice(1,ee.length-1):ee==="TRUE"?ee=!0:ee==="FALSE"?ee=!1:isNaN(ps(ee))?isNaN(_l(ee).getDate())||(ee=xr(ee)):(ee=ps(ee),O!==null&&bl(O)&&(ee=h0(ee))),fe=!0;break;case"E":G=!0;var j=tl(R[E].slice(1),{r:g,c:w});y[g][w]=[y[g][w],j];break;case"S":q=!0,y[g][w]=[y[g][w],"S5S"];break;case"G":break;case"R":Z=parseInt(R[E].slice(1))-1;break;case"C":ce=parseInt(R[E].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+b)}if(fe&&(y[g][w]&&y[g][w].length==2?y[g][w][0]=ee:y[g][w]=ee,O=null),q){if(G)throw new Error("SYLK shared formula cannot have own formula");var Y=Z>-1&&y[Z][ce];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");y[g][w][1]=NI(Y[1],{r:g-Z,c:w-ce})}break;case"F":var K=0;for(E=1;E<R.length;++E)switch(R[E].charAt(0)){case"X":w=parseInt(R[E].slice(1))-1,++K;break;case"Y":for(g=parseInt(R[E].slice(1))-1,P=y.length;P<=g;++P)y[P]=[];break;case"M":C=parseInt(R[E].slice(1))/20;break;case"F":break;case"G":break;case"P":O=I[parseInt(R[E].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=R[E].slice(1).split(" "),P=parseInt(S[0],10);P<=parseInt(S[1],10);++P)C=parseInt(S[2],10),T[P-1]=C===0?{hidden:!0}:{wch:C},wl(T[P-1]);break;case"C":w=parseInt(R[E].slice(1))-1,T[w]||(T[w]={});break;case"R":g=parseInt(R[E].slice(1))-1,v[g]||(v[g]={}),C>0?(v[g].hpt=C,v[g].hpx=yu(C)):C===0&&(v[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+b)}K<1&&(O=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+b)}}return v.length>0&&(F["!rows"]=v),T.length>0&&(F["!cols"]=T),p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),[y,F]}function i(m,p){var x=s(m,p),g=x[0],w=x[1],k=Pl(g,p);return Us(w).forEach(function(E){k[E]=w[E]}),k}function o(m,p){return wi(i(m,p),p)}function l(m,p,x,g){var w="C;Y"+(x+1)+";X"+(g+1)+";K";switch(m.t){case"n":w+=m.v||0,m.f&&!m.F&&(w+=";E"+CU(m.f,{r:x,c:g}));break;case"b":w+=m.v?"TRUE":"FALSE";break;case"e":w+=m.w||m.v;break;case"d":w+='"'+(m.w||m.v)+'"';break;case"s":w+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function c(m,p){p.forEach(function(x,g){var w="F;W"+(g+1)+" "+(g+1)+" ";x.hidden?w+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=vd(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=yd(x.wpx)),typeof x.wch=="number"&&(w+=Math.round(x.wch))),w.charAt(w.length-1)!=" "&&m.push(w)})}function f(m,p){p.forEach(function(x,g){var w="F;";x.hidden?w+="M0;":x.hpt?w+="M"+20*x.hpt+";":x.hpx&&(w+="M"+20*SI(x.hpx)+";"),w.length>2&&m.push(w+"R"+(g+1))})}function d(m,p){var x=["ID;PWXL;N;E"],g=[],w=Ht(m["!ref"]),k,E=Array.isArray(m),y=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),m["!cols"]&&c(x,m["!cols"]),m["!rows"]&&f(x,m["!rows"]),x.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var I=w.s.r;I<=w.e.r;++I)for(var O=w.s.c;O<=w.e.c;++O){var F=We({r:I,c:O});k=E?(m[I]||[])[O]:m[F],!(!k||k.v==null&&(!k.f||k.F))&&g.push(l(k,m,I,O))}return x.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:o,to_sheet:i,from_sheet:d}}(),z5=function(){function e(a,i){switch(i.type){case"base64":return t(Rn(a),i);case"binary":return t(a,i);case"buffer":return t(et&&Buffer.isBuffer(a)?a.toString("binary"):uo(a),i);case"array":return t(to(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),l=-1,c=-1,f=0,d=[];f!==o.length;++f){if(o[f].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var m=o[f].trim().split(","),p=m[0],x=m[1];++f;for(var g=o[f]||"";(g.match(/["]/g)||[]).length&1&&f<o.length-1;)g+=`
`+o[++f];switch(g=g.trim(),+p){case-1:if(g==="BOT"){d[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?d[l][c]=!0:g==="FALSE"?d[l][c]=!1:isNaN(ps(x))?isNaN(_l(x).getDate())?d[l][c]=x:d[l][c]=xr(x):d[l][c]=ps(x),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),d[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return i&&i.sheetRows&&(d=d.slice(0,i.sheetRows)),d}function r(a,i){return Pl(e(a,i),i)}function n(a,i){return wi(r(a,i),i)}var s=function(){var a=function(l,c,f,d,m){l.push(c),l.push(f+","+d),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,c,f,d){l.push(c+","+f),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],f=Ht(l["!ref"]),d,m=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,f.e.r-f.s.r+1,""),a(c,"TUPLES",0,f.e.c-f.s.c+1,""),a(c,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){i(c,-1,0,"BOT");for(var x=f.s.c;x<=f.e.c;++x){var g=We({r:p,c:x});if(d=m?(l[p]||[])[x]:l[g],!d){i(c,1,0,"");continue}switch(d.t){case"n":var w=d.w;!w&&d.v!=null&&(w=d.v),w==null?d.f&&!d.F?i(c,1,0,"="+d.f):i(c,1,0,""):i(c,0,w,"V");break;case"b":i(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":i(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Yn(d.z||ze[14],tn(xr(d.v)))),i(c,0,d.w,"V");break;default:i(c,1,0,"")}}}i(c,-1,0,"EOD");var k=`\r
`,E=c.join(k);return E}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),H5=function(){function e(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,m){for(var p=d.split(`
`),x=-1,g=-1,w=0,k=[];w!==p.length;++w){var E=p[w].trim().split(":");if(E[0]==="cell"){var y=Qr(E[1]);if(k.length<=y.r)for(x=k.length;x<=y.r;++x)k[x]||(k[x]=[]);switch(x=y.r,g=y.c,E[2]){case"t":k[x][g]=e(E[3]);break;case"v":k[x][g]=+E[3];break;case"vtf":var I=E[E.length-1];case"vtc":switch(E[3]){case"nl":k[x][g]=!!+E[4];break;default:k[x][g]=+E[4];break}E[2]=="vtf"&&(k[x][g]=[k[x][g],I])}}}return m&&m.sheetRows&&(k=k.slice(0,m.sheetRows)),k}function n(d,m){return Pl(r(d,m),m)}function s(d,m){return wi(n(d,m),m)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var m=[],p=[],x,g="",w=Rl(d["!ref"]),k=Array.isArray(d),E=w.s.r;E<=w.e.r;++E)for(var y=w.s.c;y<=w.e.c;++y)if(g=We({r:E,c:y}),x=k?(d[E]||[])[y]:d[g],!(!x||x.v==null||x.t==="z")){switch(p=["cell",g,"t"],x.t){case"s":case"str":p.push(t(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=t(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var I=tn(xr(x.v));p[2]="vtc",p[3]="nd",p[4]=""+I,p[5]=x.w||Yn(x.z||ze[14],I);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(d){return[a,i,o,i,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}}(),xu=function(){function e(f,d,m,p,x){x.raw?d[m][p]=f:f===""||(f==="TRUE"?d[m][p]=!0:f==="FALSE"?d[m][p]=!1:isNaN(ps(f))?isNaN(_l(f).getDate())?d[m][p]=f:d[m][p]=xr(f):d[m][p]=ps(f))}function t(f,d){var m=d||{},p=[];if(!f||f.length===0)return p;for(var x=f.split(/[\r\n]/),g=x.length-1;g>=0&&x[g].length===0;)--g;for(var w=10,k=0,E=0;E<=g;++E)k=x[E].indexOf(" "),k==-1?k=x[E].length:k++,w=Math.max(w,k);for(E=0;E<=g;++E){p[E]=[];var y=0;for(e(x[E].slice(0,w).trim(),p,E,y,m),y=1;y<=(x[E].length-w)/10+1;++y)e(x[E].slice(w+(y-1)*10,w+y*10).trim(),p,E,y,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var d={},m=!1,p=0,x=0;p<f.length;++p)(x=f.charCodeAt(p))==34?m=!m:!m&&x in r&&(d[x]=(d[x]||0)+1);x=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p]);if(!x.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p])}return x.sort(function(g,w){return g[0]-w[0]||n[g[1]]-n[w[1]]}),r[x.pop()[1]]||44}function a(f,d){var m=d||{},p="",x=m.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=s(f.slice(0,1024)):m&&m.FS?p=m.FS:p=s(f.slice(0,1024));var w=0,k=0,E=0,y=0,I=0,O=p.charCodeAt(0),F=!1,v=0,T=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var S=m.dateNF!=null?rj(m.dateNF):null;function C(){var P=f.slice(y,I),b={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)b.t="z";else if(m.raw)b.t="s",b.v=P;else if(P.trim().length===0)b.t="s",b.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(b.t="s",b.v=P.slice(2,-1).replace(/""/g,'"')):RU(P)?(b.t="n",b.f=P.slice(1)):(b.t="s",b.v=P);else if(P=="TRUE")b.t="b",b.v=!0;else if(P=="FALSE")b.t="b",b.v=!1;else if(!isNaN(E=ps(P)))b.t="n",m.cellText!==!1&&(b.w=P),b.v=E;else if(!isNaN(_l(P).getDate())||S&&P.match(S)){b.z=m.dateNF||ze[14];var R=0;S&&P.match(S)&&(P=nj(P,m.dateNF,P.match(S)||[]),R=1),m.cellDates?(b.t="d",b.v=xr(P,R)):(b.t="n",b.v=tn(xr(P,R))),m.cellText!==!1&&(b.w=Yn(b.z,b.v instanceof Date?tn(b.v):b.v)),m.cellNF||delete b.z}else b.t="s",b.v=P;if(b.t=="z"||(m.dense?(x[w]||(x[w]=[]),x[w][k]=b):x[We({c:k,r:w})]=b),y=I+1,T=f.charCodeAt(y),g.e.c<k&&(g.e.c=k),g.e.r<w&&(g.e.r=w),v==O)++k;else if(k=0,++w,m.sheetRows&&m.sheetRows<=w)return!0}e:for(;I<f.length;++I)switch(v=f.charCodeAt(I)){case 34:T===34&&(F=!F);break;case O:case 10:case 13:if(!F&&C())break e;break}return I-y>0&&C(),x["!ref"]=at(g),x}function i(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?a(f,d):Pl(t(f,d),d)}function o(f,d){var m="",p=d.type=="string"?[0,0,0,0]:Sv(f,d);switch(d.type){case"base64":m=Rn(f);break;case"binary":m=f;break;case"buffer":d.codepage==65001?m=f.toString("utf8"):d.codepage&&typeof du<"u"||(m=et&&Buffer.isBuffer(f)?f.toString("binary"):uo(f));break;case"array":m=to(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=kt(m.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?m=kt(m):d.type=="binary"&&typeof du<"u",m.slice(0,19)=="socialcalc:version:"?H5.to_sheet(d.type=="string"?m:kt(m),d):i(m,d)}function l(f,d){return wi(o(f,d),d)}function c(f){for(var d=[],m=Ht(f["!ref"]),p,x=Array.isArray(f),g=m.s.r;g<=m.e.r;++g){for(var w=[],k=m.s.c;k<=m.e.c;++k){var E=We({r:g,c:k});if(p=x?(f[g]||[])[k]:f[E],!p||p.v==null){w.push("          ");continue}for(var y=(p.w||(Ta(p),p.w)||"").slice(0,10);y.length<10;)y+=" ";w.push(y+(k===0?" ":""))}d.push(w.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function G5(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=$5.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return xu.to_workbook(e,t)}}var Dc=function(){function e(j,Y,K){if(j){Er(j,j.l||0);for(var B=K.Enum||Z;j.l<j.length;){var Q=j.read_shift(2),de=B[Q]||B[65535],Ee=j.read_shift(2),_e=j.l+Ee,ge=de.f&&de.f(j,Ee,K);if(j.l=_e,Y(ge,de,Q))return}}}function t(j,Y){switch(Y.type){case"base64":return r(ls(Rn(j)),Y);case"binary":return r(ls(j),Y);case"buffer":case"array":return r(j,Y)}throw"Unsupported type "+Y.type}function r(j,Y){if(!j)return j;var K=Y||{},B=K.dense?[]:{},Q="Sheet1",de="",Ee=0,_e={},ge=[],De=[],H={s:{r:0,c:0},e:{r:0,c:0}},tt=K.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)K.Enum=Z,e(j,function(Se,vt,Yt){switch(Yt){case 0:K.vers=Se,Se>=4096&&(K.qpro=!0);break;case 6:H=Se;break;case 204:Se&&(de=Se);break;case 222:de=Se;break;case 15:case 51:K.qpro||(Se[1].v=Se[1].v.slice(1));case 13:case 14:case 16:Yt==14&&(Se[2]&112)==112&&(Se[2]&15)>1&&(Se[2]&15)<15&&(Se[1].z=K.dateNF||ze[14],K.cellDates&&(Se[1].t="d",Se[1].v=h0(Se[1].v))),K.qpro&&Se[3]>Ee&&(B["!ref"]=at(H),_e[Q]=B,ge.push(Q),B=K.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},Ee=Se[3],Q=de||"Sheet"+(Ee+1),de="");var fr=K.dense?(B[Se[0].r]||[])[Se[0].c]:B[We(Se[0])];if(fr){fr.t=Se[1].t,fr.v=Se[1].v,Se[1].z!=null&&(fr.z=Se[1].z),Se[1].f!=null&&(fr.f=Se[1].f);break}K.dense?(B[Se[0].r]||(B[Se[0].r]=[]),B[Se[0].r][Se[0].c]=Se[1]):B[We(Se[0])]=Se[1];break}},K);else if(j[2]==26||j[2]==14)K.Enum=ce,j[2]==14&&(K.qpro=!0,j.l=0),e(j,function(Se,vt,Yt){switch(Yt){case 204:Q=Se;break;case 22:Se[1].v=Se[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Se[3]>Ee&&(B["!ref"]=at(H),_e[Q]=B,ge.push(Q),B=K.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},Ee=Se[3],Q="Sheet"+(Ee+1)),tt>0&&Se[0].r>=tt)break;K.dense?(B[Se[0].r]||(B[Se[0].r]=[]),B[Se[0].r][Se[0].c]=Se[1]):B[We(Se[0])]=Se[1],H.e.c<Se[0].c&&(H.e.c=Se[0].c),H.e.r<Se[0].r&&(H.e.r=Se[0].r);break;case 27:Se[14e3]&&(De[Se[14e3][0]]=Se[14e3][1]);break;case 1537:De[Se[0]]=Se[1],Se[0]==Ee&&(Q=Se[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(B["!ref"]=at(H),_e[de||Q]=B,ge.push(de||Q),!De.length)return{SheetNames:ge,Sheets:_e};for(var He={},Je=[],Fe=0;Fe<De.length;++Fe)_e[ge[Fe]]?(Je.push(De[Fe]||ge[Fe]),He[De[Fe]]=_e[De[Fe]]||_e[ge[Fe]]):(Je.push(De[Fe]),He[De[Fe]]={"!ref":"A1"});return{SheetNames:Je,Sheets:He}}function n(j,Y){var K=Y||{};if(+K.codepage>=0&&us(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var B=zp(),Q=Ht(j["!ref"]),de=Array.isArray(j),Ee=[];ts(B,0,a(1030)),ts(B,6,l(Q));for(var _e=Math.min(Q.e.r,8191),ge=Q.s.r;ge<=_e;++ge)for(var De=Ir(ge),H=Q.s.c;H<=Q.e.c;++H){ge===Q.s.r&&(Ee[H]=lr(H));var tt=Ee[H]+De,He=de?(j[ge]||[])[H]:j[tt];if(!(!He||He.t=="z"))if(He.t=="n")(He.v|0)==He.v&&He.v>=-32768&&He.v<=32767?ts(B,13,p(ge,H,He.v)):ts(B,14,g(ge,H,He.v));else{var Je=Ta(He);ts(B,15,d(ge,H,Je.slice(0,239)))}}return ts(B,1),B.end()}function s(j,Y){var K=Y||{};if(+K.codepage>=0&&us(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var B=zp();ts(B,0,i(j));for(var Q=0,de=0;Q<j.SheetNames.length;++Q)(j.Sheets[j.SheetNames[Q]]||{})["!ref"]&&ts(B,27,G(j.SheetNames[Q],de++));var Ee=0;for(Q=0;Q<j.SheetNames.length;++Q){var _e=j.Sheets[j.SheetNames[Q]];if(!(!_e||!_e["!ref"])){for(var ge=Ht(_e["!ref"]),De=Array.isArray(_e),H=[],tt=Math.min(ge.e.r,8191),He=ge.s.r;He<=tt;++He)for(var Je=Ir(He),Fe=ge.s.c;Fe<=ge.e.c;++Fe){He===ge.s.r&&(H[Fe]=lr(Fe));var Se=H[Fe]+Je,vt=De?(_e[He]||[])[Fe]:_e[Se];if(!(!vt||vt.t=="z"))if(vt.t=="n")ts(B,23,C(He,Fe,Ee,vt.v));else{var Yt=Ta(vt);ts(B,22,v(He,Fe,Ee,Yt.slice(0,239)))}}++Ee}}return ts(B,1),B.end()}function a(j){var Y=ar(2);return Y.write_shift(2,j),Y}function i(j){var Y=ar(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var K=0,B=0,Q=0,de=0;de<j.SheetNames.length;++de){var Ee=j.SheetNames[de],_e=j.Sheets[Ee];if(!(!_e||!_e["!ref"])){++Q;var ge=Rl(_e["!ref"]);K<ge.e.r&&(K=ge.e.r),B<ge.e.c&&(B=ge.e.c)}}return K>8191&&(K=8191),Y.write_shift(2,K),Y.write_shift(1,Q),Y.write_shift(1,B),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(j,Y,K){var B={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&K.qpro?(B.s.c=j.read_shift(1),j.l++,B.s.r=j.read_shift(2),B.e.c=j.read_shift(1),j.l++,B.e.r=j.read_shift(2),B):(B.s.c=j.read_shift(2),B.s.r=j.read_shift(2),Y==12&&K.qpro&&(j.l+=2),B.e.c=j.read_shift(2),B.e.r=j.read_shift(2),Y==12&&K.qpro&&(j.l+=2),B.s.c==65535&&(B.s.c=B.e.c=B.s.r=B.e.r=0),B)}function l(j){var Y=ar(8);return Y.write_shift(2,j.s.c),Y.write_shift(2,j.s.r),Y.write_shift(2,j.e.c),Y.write_shift(2,j.e.r),Y}function c(j,Y,K){var B=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(B[0].c=j.read_shift(1),B[3]=j.read_shift(1),B[0].r=j.read_shift(2),j.l+=2):(B[2]=j.read_shift(1),B[0].c=j.read_shift(2),B[0].r=j.read_shift(2)),B}function f(j,Y,K){var B=j.l+Y,Q=c(j,Y,K);if(Q[1].t="s",K.vers==20768){j.l++;var de=j.read_shift(1);return Q[1].v=j.read_shift(de,"utf8"),Q}return K.qpro&&j.l++,Q[1].v=j.read_shift(B-j.l,"cstr"),Q}function d(j,Y,K){var B=ar(7+K.length);B.write_shift(1,255),B.write_shift(2,Y),B.write_shift(2,j),B.write_shift(1,39);for(var Q=0;Q<B.length;++Q){var de=K.charCodeAt(Q);B.write_shift(1,de>=128?95:de)}return B.write_shift(1,0),B}function m(j,Y,K){var B=c(j,Y,K);return B[1].v=j.read_shift(2,"i"),B}function p(j,Y,K){var B=ar(7);return B.write_shift(1,255),B.write_shift(2,Y),B.write_shift(2,j),B.write_shift(2,K,"i"),B}function x(j,Y,K){var B=c(j,Y,K);return B[1].v=j.read_shift(8,"f"),B}function g(j,Y,K){var B=ar(13);return B.write_shift(1,255),B.write_shift(2,Y),B.write_shift(2,j),B.write_shift(8,K,"f"),B}function w(j,Y,K){var B=j.l+Y,Q=c(j,Y,K);if(Q[1].v=j.read_shift(8,"f"),K.qpro)j.l=B;else{var de=j.read_shift(2);I(j.slice(j.l,j.l+de),Q),j.l+=de}return Q}function k(j,Y,K){var B=Y&32768;return Y&=-32769,Y=(B?j:0)+(Y>=8192?Y-16384:Y),(B?"":"$")+(K?lr(Y):Ir(Y))}var E={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(j,Y){Er(j,0);for(var K=[],B=0,Q="",de="",Ee="",_e="";j.l<j.length;){var ge=j[j.l++];switch(ge){case 0:K.push(j.read_shift(8,"f"));break;case 1:de=k(Y[0].c,j.read_shift(2),!0),Q=k(Y[0].r,j.read_shift(2),!1),K.push(de+Q);break;case 2:{var De=k(Y[0].c,j.read_shift(2),!0),H=k(Y[0].r,j.read_shift(2),!1);de=k(Y[0].c,j.read_shift(2),!0),Q=k(Y[0].r,j.read_shift(2),!1),K.push(De+H+":"+de+Q)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(j.read_shift(2));break;case 6:{for(var tt="";ge=j[j.l++];)tt+=String.fromCharCode(ge);K.push('"'+tt.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:_e=K.pop(),Ee=K.pop(),K.push(["AND","OR"][ge-20]+"("+Ee+","+_e+")");break;default:if(ge<32&&y[ge])_e=K.pop(),Ee=K.pop(),K.push(Ee+y[ge]+_e);else if(E[ge]){if(B=E[ge][1],B==69&&(B=j[j.l++]),B>K.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+K.join("|")+"|");return}var He=K.slice(-B);K.length-=B,K.push(E[ge][0]+"("+He.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}K.length==1?Y[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function O(j){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=j.read_shift(2),Y[3]=j[j.l++],Y[0].c=j[j.l++],Y}function F(j,Y){var K=O(j);return K[1].t="s",K[1].v=j.read_shift(Y-4,"cstr"),K}function v(j,Y,K,B){var Q=ar(6+B.length);Q.write_shift(2,j),Q.write_shift(1,K),Q.write_shift(1,Y),Q.write_shift(1,39);for(var de=0;de<B.length;++de){var Ee=B.charCodeAt(de);Q.write_shift(1,Ee>=128?95:Ee)}return Q.write_shift(1,0),Q}function T(j,Y){var K=O(j);K[1].v=j.read_shift(2);var B=K[1].v>>1;if(K[1].v&1)switch(B&7){case 0:B=(B>>3)*5e3;break;case 1:B=(B>>3)*500;break;case 2:B=(B>>3)/20;break;case 3:B=(B>>3)/200;break;case 4:B=(B>>3)/2e3;break;case 5:B=(B>>3)/2e4;break;case 6:B=(B>>3)/16;break;case 7:B=(B>>3)/64;break}return K[1].v=B,K}function S(j,Y){var K=O(j),B=j.read_shift(4),Q=j.read_shift(4),de=j.read_shift(2);if(de==65535)return B===0&&Q===3221225472?(K[1].t="e",K[1].v=15):B===0&&Q===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var Ee=de&32768;return de=(de&32767)-16446,K[1].v=(1-Ee*2)*(Q*Math.pow(2,de+32)+B*Math.pow(2,de)),K}function C(j,Y,K,B){var Q=ar(14);if(Q.write_shift(2,j),Q.write_shift(1,K),Q.write_shift(1,Y),B==0)return Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(2,65535),Q;var de=0,Ee=0,_e=0,ge=0;return B<0&&(de=1,B=-B),Ee=Math.log2(B)|0,B/=Math.pow(2,Ee-31),ge=B>>>0,ge&2147483648||(B/=2,++Ee,ge=B>>>0),B-=ge,ge|=2147483648,ge>>>=0,B*=Math.pow(2,32),_e=B>>>0,Q.write_shift(4,_e),Q.write_shift(4,ge),Ee+=16383+(de?32768:0),Q.write_shift(2,Ee),Q}function P(j,Y){var K=S(j);return j.l+=Y-14,K}function b(j,Y){var K=O(j),B=j.read_shift(4);return K[1].v=B>>6,K}function R(j,Y){var K=O(j),B=j.read_shift(8,"f");return K[1].v=B,K}function ae(j,Y){var K=R(j);return j.l+=Y-10,K}function ee(j,Y){return j[j.l+Y-1]==0?j.read_shift(Y,"cstr"):""}function fe(j,Y){var K=j[j.l++];K>Y-1&&(K=Y-1);for(var B="";B.length<K;)B+=String.fromCharCode(j[j.l++]);return B}function ue(j,Y,K){if(!(!K.qpro||Y<21)){var B=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var Q=j.read_shift(Y-21,"cstr");return[B,Q]}}function q(j,Y){for(var K={},B=j.l+Y;j.l<B;){var Q=j.read_shift(2);if(Q==14e3){for(K[Q]=[0,""],K[Q][0]=j.read_shift(2);j[j.l];)K[Q][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return K}function G(j,Y){var K=ar(5+j.length);K.write_shift(2,14e3),K.write_shift(2,Y);for(var B=0;B<j.length;++B){var Q=j.charCodeAt(B);K[K.l++]=Q>127?95:Q}return K[K.l++]=0,K}var Z={0:{n:"BOF",f:er},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:x},15:{n:"LABEL",f},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ee},222:{n:"SHEETNAMELP",f:fe},65535:{n:""}},ce={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:b},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:ae},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ee},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ue},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}();function K5(e){var t={},r=e.match(Kr),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=Le(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=tv[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var q5=function(){var e=pu("t"),t=pu("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:lt(i[1])},l=a.match(t);return l&&(o.s=K5(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),Y5=function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),X5=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Q5=/<(?:\w+:)?r>/,J5=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function vv(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=lt(kt(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=kt(e),r&&(n.h=lv(n.t))):e.match(Q5)&&(n.r=kt(e),n.t=lt(kt((e.replace(J5,"").match(X5)||[]).join("").replace(Kr,""))),r&&(n.h=Y5(q5(n.r)))),n):{t:""}}var Z5=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,e9=/<(?:\w+:)?(?:si|sstItem)>/g,t9=/<\/(?:\w+:)?(?:si|sstItem)>/;function r9(e,t){var r=[],n="";if(!e)return r;var s=e.match(Z5);if(s){n=s[2].replace(e9,"").split(t9);for(var a=0;a!=n.length;++a){var i=vv(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=Le(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function n9(e){return[e.read_shift(4),e.read_shift(4)]}function s9(e,t){var r=[],n=!1;return Aa(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function yI(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function fa(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function a9(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=fa(e,4),t.U=fa(e,4),t.W=fa(e,4),t}function i9(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function o9(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(i9(e));return t}function l9(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function c9(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=fa(e,4),t.U=fa(e,4),t.W=fa(e,4),t}function u9(e){var t=c9(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function _I(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function wI(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function f9(e){var t=fa(e);switch(t.Minor){case 2:return[t.Minor,h9(e)];case 3:return[t.Minor,d9()];case 4:return[t.Minor,m9(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function h9(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=_I(e,r),s=wI(e,e.length-e.l);return{t:"Std",h:n,v:s}}function d9(){throw new Error("File is password-protected: ECMA-376 Extensible")}function m9(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Kr,function(a){var i=Le(a);switch(Ws(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function p9(e,t){var r={},n=r.EncryptionVersionInfo=fa(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=_I(e,s),t-=s,r.EncryptionVerifier=wI(e,t),r}function g9(e){var t={},r=t.EncryptionVersionInfo=fa(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function x9(e){var t=0,r,n=yI(e),s=n.length+1,a,i,o,l,c;for(r=mi(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=t&16384?1:0,l=t<<1&32767,c=o|l,t=c^i;return t^52811}var EI=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],l=104,c=i.length-1;c>=0;--c)for(var f=i[c],d=0;d!=7;++d)f&64&&(o^=r[l]),f*=2,--l;return o};return function(i){for(var o=yI(i),l=a(o),c=o.length,f=mi(16),d=0;d!=16;++d)f[d]=0;var m,p,x;for((c&1)===1&&(m=l>>8,f[c]=s(e[0],m),--c,m=l&255,p=o[o.length-1],f[c]=s(p,m));c>0;)--c,m=l>>8,f[c]=s(o[c],m),--c,m=l&255,f[c]=s(o[c],m);for(c=15,x=15-o.length;x>0;)m=l>>8,f[c]=s(e[x],m),--c,--x,m=l&255,f[c]=s(o[c],m),--c,--x;return f}}(),v9=function(e,t,r,n,s){s||(s=t),n||(n=EI(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},y9=function(e){var t=0,r=EI(e);return function(n){var s=v9("",n,t,r);return t=s[1],s[0]}};function _9(e,t,r,n){var s={key:er(e),verificationBytes:er(e)};return r.password&&(s.verifier=x9(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=y9(r.password)),s}function w9(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=g9(e):n.Data=p9(e,t),n}function E9(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?w9(e,t-2,n):_9(e,r.biff>=8?t:t-2,r,n),n}var T9=function(){function e(s,a){switch(a.type){case"base64":return t(Rn(s),a);case"binary":return t(s,a);case"buffer":return t(et&&Buffer.isBuffer(s)?s.toString("binary"):uo(s),a);case"array":return t(to(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,d){Array.isArray(o)&&(o[d]=[]);for(var m=/\\\w+\b/g,p=0,x,g=-1;x=m.exec(f);){switch(x[0]){case"\\cell":var w=f.slice(p,m.lastIndex-x[0].length);if(w[0]==" "&&(w=w.slice(1)),++g,w.length){var k={v:w,t:"s"};Array.isArray(o)?o[d][g]=k:o[We({r:d,c:g})]=k}break}p=m.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=at(c),o}function r(s,a){return wi(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Ht(s["!ref"]),o,l=Array.isArray(s),c=i.s.r;c<=i.e.r;++c){a.push("\\trowd\\trautofit1");for(var f=i.s.c;f<=i.e.c;++f)a.push("\\cellx"+(f+1));for(a.push("\\pard\\intbl"),f=i.s.c;f<=i.e.c;++f){var d=We({r:c,c:f});o=l?(s[c]||[])[f]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(Ta(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function k9(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function vu(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function S9(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,l=0,c=s+a;switch(l=i/(c>1?2-c:c),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,c/2]}function A9(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var c=0;c!=3;++c)i[c]=Math.round(i[c]*255);return i}function xd(e,t){if(t===0)return e;var r=S9(k9(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),vu(A9(r))}var TI=6,I9=15,N9=1,Xr=TI;function vd(e){return Math.floor((e+Math.round(128/Xr)/256)*Xr)}function yd(e){return Math.floor((e-5)/Xr*100+.5)/100}function qp(e){return Math.round((e*Xr+5)/Xr*256)/256}function hm(e){return qp(yd(vd(e)))}function yv(e){var t=Math.abs(e-hm(e)),r=Xr;if(t>.005)for(Xr=N9;Xr<I9;++Xr)Math.abs(e-hm(e))<=t&&(t=Math.abs(e-hm(e)),r=Xr);Xr=r}function wl(e){e.width?(e.wpx=vd(e.width),e.wch=yd(e.wpx),e.MDW=Xr):e.wpx?(e.wch=yd(e.wpx),e.width=qp(e.wch),e.MDW=Xr):typeof e.wch=="number"&&(e.width=qp(e.wch),e.wpx=vd(e.width),e.MDW=Xr),e.customWidth&&delete e.customWidth}var C9=96,kI=C9;function SI(e){return e*96/kI}function yu(e){return e*kI/96}var b9={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function R9(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(Kr)||[]).forEach(function(i){var o=Le(i);switch(Ws(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Dt(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Dt(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function P9(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(Kr)||[]).forEach(function(i){var o=Le(i);switch(Ws(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function D9(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(Kr)||[]).forEach(function(i){var o=Le(i);switch(Ws(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=kt(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Dt(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Dt(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Dt(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Dt(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Dt(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Dt(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Dt(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=tv[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Dt(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=$i[s.color.index];s.color.index==81&&(l=$i[1]),l||(l=$i[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=xd(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function F9(e,t,r){t.NumberFmt=[];for(var n=Us(ze),s=0;s<n.length;++s)t.NumberFmt[n[s]]=ze[n[s]];var a=e[0].match(Kr);if(a)for(s=0;s<a.length;++s){var i=Le(a[s]);switch(Ws(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=lt(kt(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Wi(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}var $f=["numFmtId","fillId","fontId","borderId","xfId"],zf=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function O9(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Kr)||[]).forEach(function(a){var i=Le(a),o=0;switch(Ws(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<$f.length;++o)n[$f[o]]&&(n[$f[o]]=parseInt(n[$f[o]],10));for(o=0;o<zf.length;++o)n[zf[o]]&&(n[zf[o]]=Dt(n[zf[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Dt(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}var M9=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(t))&&F9(d,f,c),(d=o.match(s))&&D9(d,f,l,c),(d=o.match(n))&&P9(d,f,l,c),(d=o.match(a))&&R9(d,f,l,c),(d=o.match(r))&&O9(d,f,c),f}}();function L9(e,t){var r=e.read_shift(2),n=$r(e);return[r,n]}function j9(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=qj(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=Kj(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=$r(e),n}var U9=Gr;function V9(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}var B9=Gr;function W9(e,t,r){var n={};n.NumberFmt=[];for(var s in ze)n.NumberFmt[s]=ze[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return Aa(e,function(l,c,f){switch(f){case 44:n.NumberFmt[l[0]]=l[1],Wi(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=xd(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(f),i=!0;break;case 38:a.pop(),i=!1;break;default:if(c.T>0)a.push(f);else if(c.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}var $9=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function z9(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Kr)||[]).forEach(function(s){var a=Le(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[$9.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function H9(){}function G9(){}var K9=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,q9=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Y9=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function X9(e,t,r){t.themeElements={};var n;[["clrScheme",K9,z9],["fontScheme",q9,H9],["fmtScheme",Y9,G9]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Q9=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function AI(e,t){(!e||e.length===0)&&(e=J9());var r,n={};if(!(r=e.match(Q9)))throw new Error("themeElements not found in theme");return X9(r[0],n,t),n.raw=e,n}function J9(e,t){var r=[LA];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Z9(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=MA(a,{type:"array"})}catch{return}var o=Sn(i,"theme/theme/theme1.xml",!0);if(o)return AI(o,r)}}function eU(e){return e.read_shift(4)}function tU(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=rU(e,4);break;case 2:t.xclrValue=hI(e);break;case 3:t.xclrValue=eU(e);break;case 4:e.l+=4;break}return e.l+=8,t}function rU(e,t){return Gr(e,t)}function nU(e,t){return Gr(e,t)}function sU(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=tU(e);break;case 6:n[1]=nU(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function aU(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(sU(e,r-e.l));return{ixfe:n,ext:a}}function iU(e,t){t.forEach(function(r){switch(r[0]){}})}function oU(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:$r(e)}}function lU(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function cU(e){return e.l+=4,e.read_shift(4)!=0}function uU(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return Aa(e,function(l,c,f){switch(f){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(f),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!c.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function fU(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(Kr,function(o){var l=Le(o);switch(Ws(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(i=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function hU(e){var t=[];if(!e)return t;var r=1;return(e.match(Kr)||[]).forEach(function(n){var s=Le(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function dU(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=We(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function mU(e,t,r){var n=[];return Aa(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function pU(e,t,r,n){if(!e)return e;var s=n||{},a=!1;Aa(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function gU(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function Hw(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=Qr(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var l=Ht(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=at(l);c!==e["!ref"]&&(e["!ref"]=c)}a.c||(a.c=[]);var f={a:i.author,t:i.t,r:i.r,T:r};i.h&&(f.h=i.h);for(var d=a.c.length-1;d>=0;--d){if(!r&&a.c[d].T)return;r&&!a.c[d].T&&a.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(f.a==n[d].id){f.a=n[d].name||f.a;break}}a.c.push(f)})}function xU(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Le(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},f=Qr(l.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var d=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!d&&!!d[1]&&vv(d[1])||{r:"",t:"",h:""};c.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),c.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=m.h),n.push(c)}}}}),n}function vU(e,t){var r=[],n=!1,s={},a=0;return e.replace(Kr,function(o,l){var c=Le(o);switch(Ws(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function yU(e,t){var r=[],n=!1;return e.replace(Kr,function(a){var i=Le(a);switch(Ws(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function _U(e){var t={};t.iauthor=e.read_shift(4);var r=ho(e);return t.rfx=r.s,t.ref=We(r.s),e.l+=16,t}var wU=$r;function EU(e,t){var r=[],n=[],s={},a=!1;return Aa(e,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var TU="application/vnd.ms-office.vbaProject";function kU(e){var t=st.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");st.utils.cfb_add(t,s,e.FileIndex[n].content)}}),st.write(t)}function SU(){return{"!type":"dialog"}}function AU(){return{"!type":"dialog"}}function IU(){return{"!type":"macro"}}function NU(){return{"!type":"macro"}}var tl=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,f=i.length>0?parseInt(i,10)|0:0;return o?f+=t.c:--f,l?c+=t.r:--c,s+(o?"":"$")+lr(f)+(l?"":"$")+Ir(c)}return function(s,a){return t=a,s.replace(e,r)}}(),II=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,CU=function(){return function(t,r){return t.replace(II,function(n,s,a,i,o,l){var c=hv(i)-(a?0:r.c),f=fv(l)-(o?0:r.r),d=f==0?"":o?f+1:"["+f+"]",m=c==0?"":a?c+1:"["+c+"]";return s+"R"+d+"C"+m})}}();function NI(e,t){return e.replace(II,function(r,n,s,a,i,o){return n+(s=="$"?s+a:lr(hv(a)+t.c))+(i=="$"?i+o:Ir(fv(o)+t.r))})}function bU(e,t,r){var n=Rl(t),s=n.s,a=Qr(r),i={r:a.r-s.r,c:a.c-s.c};return NI(e,i)}function RU(e){return e.length!=1}function Gw(e){return e.replace(/_xlfn\./g,"")}function Qt(e){e.l+=1}function pi(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function CI(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return bI(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=pi(e),o=pi(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function bI(e){var t=pi(e),r=pi(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function PU(e,t,r){if(r.biff<8)return bI(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=pi(e),i=pi(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function RI(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return DU(e);var n=e.read_shift(r&&r.biff==12?4:2),s=pi(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function DU(e){var t=pi(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function FU(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function OU(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return MU(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function MU(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function LU(e,t,r){var n=(e[e.l++]&96)>>5,s=CI(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function jU(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=CI(e,a,r);return[n,s,i]}function UU(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function VU(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function BU(e,t,r){var n=(e[e.l++]&96)>>5,s=PU(e,t-1,r);return[n,s]}function WU(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Kw(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function $U(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function zU(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function HU(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function GU(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function KU(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function PI(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function qU(e){return e.read_shift(2),PI(e)}function YU(e){return e.read_shift(2),PI(e)}function XU(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=RI(e,0,r);return[n,s]}function QU(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=OU(e,0,r);return[n,s]}function JU(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=RI(e,0,r);return[n,s,a]}function ZU(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[e7[s],OI[s],n]}function eV(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:tV(e);return[s,(a[0]===0?OI:ZV)[a[1]]]}function tV(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function rV(e,t,r){e.l+=r&&r.biff==2?3:4}function nV(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function sV(e){return e.l++,mo[e.read_shift(1)]}function aV(e){return e.l++,e.read_shift(2)}function iV(e){return e.l++,e.read_shift(1)!==0}function oV(e){return e.l++,Vr(e)}function lV(e,t,r){return e.l++,Yu(e,t-1,r)}function cV(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Gt(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=mo[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Vr(e);break;case 2:r[1]=po(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uV(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?ho:d0)(e));return s}function fV(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=cV(e,r.biff);return i}function hV(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function dV(e,t,r){if(r.biff==5)return mV(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function mV(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function pV(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function gV(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function xV(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function vV(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var yV=Gr,_V=Gr,wV=Gr;function Qu(e,t,r){return e.l+=2,[FU(e)]}function _v(e){return e.l+=6,[]}var EV=Qu,TV=_v,kV=_v,SV=Qu;function DI(e){return e.l+=2,[er(e),e.read_shift(2)&1]}var AV=Qu,IV=DI,NV=_v,CV=Qu,bV=Qu,RV=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function PV(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=RV[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function DV(e){return e.l+=2,[e.read_shift(4)]}function FV(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function OV(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function MV(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function LV(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function jV(e){return e.l+=4,[0,0]}var qw={1:{n:"PtgExp",f:nV},2:{n:"PtgTbl",f:wV},3:{n:"PtgAdd",f:Qt},4:{n:"PtgSub",f:Qt},5:{n:"PtgMul",f:Qt},6:{n:"PtgDiv",f:Qt},7:{n:"PtgPower",f:Qt},8:{n:"PtgConcat",f:Qt},9:{n:"PtgLt",f:Qt},10:{n:"PtgLe",f:Qt},11:{n:"PtgEq",f:Qt},12:{n:"PtgGe",f:Qt},13:{n:"PtgGt",f:Qt},14:{n:"PtgNe",f:Qt},15:{n:"PtgIsect",f:Qt},16:{n:"PtgUnion",f:Qt},17:{n:"PtgRange",f:Qt},18:{n:"PtgUplus",f:Qt},19:{n:"PtgUminus",f:Qt},20:{n:"PtgPercent",f:Qt},21:{n:"PtgParen",f:Qt},22:{n:"PtgMissArg",f:Qt},23:{n:"PtgStr",f:lV},26:{n:"PtgSheet",f:FV},27:{n:"PtgEndSheet",f:OV},28:{n:"PtgErr",f:sV},29:{n:"PtgBool",f:iV},30:{n:"PtgInt",f:aV},31:{n:"PtgNum",f:oV},32:{n:"PtgArray",f:WU},33:{n:"PtgFunc",f:ZU},34:{n:"PtgFuncVar",f:eV},35:{n:"PtgName",f:hV},36:{n:"PtgRef",f:XU},37:{n:"PtgArea",f:LU},38:{n:"PtgMemArea",f:pV},39:{n:"PtgMemErr",f:yV},40:{n:"PtgMemNoMem",f:_V},41:{n:"PtgMemFunc",f:gV},42:{n:"PtgRefErr",f:xV},43:{n:"PtgAreaErr",f:UU},44:{n:"PtgRefN",f:QU},45:{n:"PtgAreaN",f:BU},46:{n:"PtgMemAreaN",f:MV},47:{n:"PtgMemNoMemN",f:LV},57:{n:"PtgNameX",f:dV},58:{n:"PtgRef3d",f:JU},59:{n:"PtgArea3d",f:jU},60:{n:"PtgRefErr3d",f:vV},61:{n:"PtgAreaErr3d",f:VU},255:{}},UV={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},VV={1:{n:"PtgElfLel",f:DI},2:{n:"PtgElfRw",f:CV},3:{n:"PtgElfCol",f:EV},6:{n:"PtgElfRwV",f:bV},7:{n:"PtgElfColV",f:SV},10:{n:"PtgElfRadical",f:AV},11:{n:"PtgElfRadicalS",f:NV},13:{n:"PtgElfColS",f:TV},15:{n:"PtgElfColSV",f:kV},16:{n:"PtgElfRadicalLel",f:IV},25:{n:"PtgList",f:PV},29:{n:"PtgSxName",f:DV},255:{}},BV={0:{n:"PtgAttrNoop",f:jV},1:{n:"PtgAttrSemi",f:KU},2:{n:"PtgAttrIf",f:HU},4:{n:"PtgAttrChoose",f:$U},8:{n:"PtgAttrGoto",f:zU},16:{n:"PtgAttrSum",f:rV},32:{n:"PtgAttrBaxcel",f:Kw},33:{n:"PtgAttrBaxcel",f:Kw},64:{n:"PtgAttrSpace",f:qU},65:{n:"PtgAttrSpaceSemi",f:YU},128:{n:"PtgAttrIfError",f:GU},255:{}};function Ju(e,t,r,n){if(n.biff<8)return Gr(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=fV(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=uV(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(Gr(e,t)),a}function Zu(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=qw[a]||qw[UV[a]],(a===24||a===25)&&(s=(a===24?VV:BV)[e[e.l+1]]),!s||!s.f?Gr(e,t):i.push([s.n,s.f(e,t,r)]);return i}function WV(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var $V={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zV(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function FI(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Yw(e,t,r){var n=FI(e,t,r);return n=="#REF"?n:zV(n,r)}function Lr(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,c,f,d=0,m=0,p,x="";if(!e[0]||!e[0][0])return"";for(var g=-1,w="",k=0,E=e[0].length;k<E;++k){var y=e[0][k];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(e[0][g][1][0]){case 0:w=Wt(" ",e[0][g][1][1]);break;case 1:w=Wt("\r",e[0][g][1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}c=c+w,g=-1}o.push(c+$V[y[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Cc(y[1][1],i,s),o.push(bc(f,a));break;case"PtgRefN":f=r?Cc(y[1][1],r,s):y[1][1],o.push(bc(f,a));break;case"PtgRef3d":d=y[1][1],f=Cc(y[1][2],i,s),x=Yw(n,d,s),o.push(x+"!"+bc(f,a));break;case"PtgFunc":case"PtgFuncVar":var I=y[1][0],O=y[1][1];I||(I=0),I&=127;var F=I==0?[]:o.slice(-I);o.length-=I,O==="User"&&(O=F.shift()),o.push(O+"("+F.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":p=Cw(y[1][1],r?{s:r}:i,s),o.push(um(p,s));break;case"PtgArea":p=Cw(y[1][1],i,s),o.push(um(p,s));break;case"PtgArea3d":d=y[1][1],p=y[1][2],x=Yw(n,d,s),o.push(x+"!"+um(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=y[1][2];var v=(n.names||[])[m-1]||(n[0]||[])[m],T=v?v.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),o.push(T);break;case"PtgNameX":var S=y[1][1];m=y[1][2];var C;if(s.biff<=5)S<0&&(S=-S),n[S]&&(C=n[S][m]);else{var P="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][m]&&n[S][m].itab>0&&(P=n.SheetNames[n[S][m].itab-1]+"!"):P=n.SheetNames[m-1]+"!"),n[S]&&n[S][m])P+=n[S][m].Name;else if(n[0]&&n[0][m])P+=n[0][m].Name;else{var b=(FI(n,S,s)||"").split(";;");b[m-1]?P=b[m-1]:P+="SH33TJSERRX"}o.push(P);break}C||(C={Name:"SH33TJSERRY"}),o.push(C.Name);break;case"PtgParen":var R="(",ae=")";if(g>=0){switch(w="",e[0][g][1][0]){case 2:R=Wt(" ",e[0][g][1][1])+R;break;case 3:R=Wt("\r",e[0][g][1][1])+R;break;case 4:ae=Wt(" ",e[0][g][1][1])+ae;break;case 5:ae=Wt("\r",e[0][g][1][1])+ae;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}o.push(R+o.pop()+ae);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:y[1][1],r:y[1][0]};var ee={c:r.c,r:r.r};if(n.sharedf[We(f)]){var fe=n.sharedf[We(f)];o.push(Lr(fe,i,ee,n,s))}else{var ue=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(f.c<c[0].s.c||f.c>c[0].e.c)&&!(f.r<c[0].s.r||f.r>c[0].e.r)){o.push(Lr(c[1],i,ee,n,s)),ue=!0;break}ue||o.push(y[1])}break;case"PtgArray":o.push("{"+WV(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&q.indexOf(e[0][k][0])==-1){y=e[0][g];var G=!0;switch(y[1][0]){case 4:G=!1;case 0:w=Wt(" ",y[1][1]);break;case 5:G=!1;case 1:w=Wt("\r",y[1][1]);break;default:if(w="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((G?w:"")+o.pop()+(G?"":w)),g=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function HV(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],Gr(e,t-2)];var o=Zu(e,i,r);return t!==i+s&&(a=Ju(e,t-i-s,o,r)),e.l=n,[o,a]}function GV(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],Gr(e,t-2)];var o=Zu(e,i,r);return t!==i+s&&(a=Ju(e,t-i-s,o,r)),e.l=n,[o,a]}function KV(e,t,r,n){var s=e.l+t,a=Zu(e,n,r),i;return s!==e.l&&(i=Ju(e,s-e.l,a,r)),[a,i]}function qV(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=Zu(e,a,r);return a==65535?[[],Gr(e,t-2)]:(t!==a+2&&(s=Ju(e,n-a-2,i,r)),[i,s])}function YV(e){var t;if(ia(e,e.l+6)!==65535)return[Vr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function dm(e,t,r){var n=e.l+t,s=$s(e);r.biff==2&&++e.l;var a=YV(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=GV(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function m0(e,t,r){var n=e.read_shift(4),s=Zu(e,n,r),a=e.read_shift(4),i=a>0?Ju(e,a,s,r):null;return[s,i]}var XV=m0,p0=m0,QV=m0,JV=m0,ZV={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},OI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},e7={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Xw(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function mm(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Fc={},rl={};function Oc(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function MI(e,t,r,n,s,a){try{n.cellNF&&(e.z=ze[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=xr(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(ze[t]==null&&Wi(tj[t]||"General",t),e.t==="e")e.w=e.w||mo[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mu(e.v);else if(e.t==="d"){var i=tn(e.v);(i|0)===i?e.w=i.toString(10):e.w=mu(i)}else{if(e.v===void 0)return"";e.w=eo(e.v,rl)}else e.t==="d"?e.w=Yn(t,tn(e.v),rl):e.w=Yn(t,e.v,rl)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=xd(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=xd(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function t7(e,t){var r=Ht(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=at(r))}var r7=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,n7=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,s7=/<(?:\w:)?hyperlink [^>]*>/mg,a7=/"(\w*:\w*)"/,i7=/<(?:\w:)?col\b[^>]*[\/]?>/g,o7=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,l7=/<(?:\w:)?pageMargins[^>]*\/>/g,LI=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,c7=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,u7=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function f7(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",f="",d=e.match(n7);d?(c=e.slice(0,d.index),f=e.slice(d.index+d[0].length)):c=f=e;var m=c.match(LI);m?wv(m[0],o,s,r):(m=c.match(c7))&&h7(m[0],m[1]||"",o,s,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var x=c.slice(p,p+50).match(a7);x&&t7(o,x[1])}var g=c.match(u7);g&&g[1]&&v7(g[1],s);var w=[];if(t.cellStyles){var k=c.match(i7);k&&p7(w,k)}d&&y7(d[1],o,t,l,a,i);var E=f.match(o7);E&&(o["!autofilter"]=g7(E[0]));var y=[],I=f.match(r7);if(I)for(p=0;p!=I.length;++p)y[p]=Ht(I[p].slice(I[p].indexOf('"')+1));var O=f.match(s7);O&&d7(o,O,n);var F=f.match(l7);if(F&&(o["!margins"]=m7(Le(F[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=at(l)),t.sheetRows>0&&o["!ref"]){var v=Ht(o["!ref"]);t.sheetRows<=+v.e.r&&(v.e.r=t.sheetRows-1,v.e.r>l.e.r&&(v.e.r=l.e.r),v.e.r<v.s.r&&(v.s.r=v.e.r),v.e.c>l.e.c&&(v.e.c=l.e.c),v.e.c<v.s.c&&(v.s.c=v.e.c),o["!fullref"]=o["!ref"],o["!ref"]=at(v))}return w.length>0&&(o["!cols"]=w),y.length>0&&(o["!merges"]=y),o}function wv(e,t,r,n){var s=Le(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=lt(kt(s.codeName)))}function h7(e,t,r,n,s){wv(e.slice(0,e.indexOf(">")),r,n,s)}function d7(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=Le(kt(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+lt(a.location))):(a.Target="#"+lt(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Ht(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var f=We({c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=a)}}}function m7(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function p7(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Le(t[n],!0);s.hidden&&(s.hidden=Dt(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,yv(s.width)),wl(s);a<=i;)e[a++]=Ar(s)}}function g7(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var x7=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function v7(e,t){t.Views||(t.Views=[{}]),(e.match(x7)||[]).forEach(function(r,n){var s=Le(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Dt(s.rightToLeft)&&(t.Views[n].RTL=!0)})}var y7=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=pu("v"),i=pu("f");return function(l,c,f,d,m,p){for(var x=0,g="",w=[],k=[],E=0,y=0,I=0,O="",F,v,T=0,S=0,C,P,b=0,R=0,ae=Array.isArray(p.CellXf),ee,fe=[],ue=[],q=Array.isArray(c),G=[],Z={},ce=!1,j=!!f.sheetStubs,Y=l.split(t),K=0,B=Y.length;K!=B;++K){g=Y[K].trim();var Q=g.length;if(Q!==0){var de=0;e:for(x=0;x<Q;++x)switch(g[x]){case">":if(g[x-1]!="/"){++x;break e}if(f&&f.cellStyles){if(v=Le(g.slice(de,x),!0),T=v.r!=null?parseInt(v.r,10):T+1,S=-1,f.sheetRows&&f.sheetRows<T)continue;Z={},ce=!1,v.ht&&(ce=!0,Z.hpt=parseFloat(v.ht),Z.hpx=yu(Z.hpt)),v.hidden=="1"&&(ce=!0,Z.hidden=!0),v.outlineLevel!=null&&(ce=!0,Z.level=+v.outlineLevel),ce&&(G[T-1]=Z)}break;case"<":de=x;break}if(de>=x)break;if(v=Le(g.slice(de,x),!0),T=v.r!=null?parseInt(v.r,10):T+1,S=-1,!(f.sheetRows&&f.sheetRows<T)){d.s.r>T-1&&(d.s.r=T-1),d.e.r<T-1&&(d.e.r=T-1),f&&f.cellStyles&&(Z={},ce=!1,v.ht&&(ce=!0,Z.hpt=parseFloat(v.ht),Z.hpx=yu(Z.hpt)),v.hidden=="1"&&(ce=!0,Z.hidden=!0),v.outlineLevel!=null&&(ce=!0,Z.level=+v.outlineLevel),ce&&(G[T-1]=Z)),w=g.slice(x).split(e);for(var Ee=0;Ee!=w.length&&w[Ee].trim().charAt(0)=="<";++Ee);for(w=w.slice(Ee),x=0;x!=w.length;++x)if(g=w[x].trim(),g.length!==0){if(k=g.match(r),E=x,y=0,I=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,k!=null&&k.length===2){for(E=0,O=k[1],y=0;y!=O.length&&!((I=O.charCodeAt(y)-64)<1||I>26);++y)E=26*E+I;--E,S=E}else++S;for(y=0;y!=g.length&&g.charCodeAt(y)!==62;++y);if(++y,v=Le(g.slice(0,y),!0),v.r||(v.r=We({r:T-1,c:S})),O=g.slice(y),F={t:""},(k=O.match(a))!=null&&k[1]!==""&&(F.v=lt(k[1])),f.cellFormula){if((k=O.match(i))!=null&&k[1]!==""){if(F.f=lt(kt(k[1])).replace(/\r\n/g,`
`),f.xlfn||(F.f=Gw(F.f)),k[0].indexOf('t="array"')>-1)F.F=(O.match(s)||[])[1],F.F.indexOf(":")>-1&&fe.push([Ht(F.F),F.F]);else if(k[0].indexOf('t="shared"')>-1){P=Le(k[0]);var _e=lt(kt(k[1]));f.xlfn||(_e=Gw(_e)),ue[parseInt(P.si,10)]=[P,_e,v.r]}}else(k=O.match(/<f[^>]*\/>/))&&(P=Le(k[0]),ue[P.si]&&(F.f=bU(ue[P.si][1],ue[P.si][2],v.r)));var ge=Qr(v.r);for(y=0;y<fe.length;++y)ge.r>=fe[y][0].s.r&&ge.r<=fe[y][0].e.r&&ge.c>=fe[y][0].s.c&&ge.c<=fe[y][0].e.c&&(F.F=fe[y][1])}if(v.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(j)F.t="z";else continue;else F.t=v.t||"n";switch(d.s.c>S&&(d.s.c=S),d.e.c<S&&(d.e.c=S),F.t){case"n":if(F.v==""||F.v==null){if(!j)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!j)continue;F.t="z"}else C=Fc[parseInt(F.v,10)],F.v=C.t,F.r=C.r,f.cellHTML&&(F.h=C.h);break;case"str":F.t="s",F.v=F.v!=null?kt(F.v):"",f.cellHTML&&(F.h=lv(F.v));break;case"inlineStr":k=O.match(n),F.t="s",k!=null&&(C=vv(k[1]))?(F.v=C.t,f.cellHTML&&(F.h=C.h)):F.v="";break;case"b":F.v=Dt(F.v);break;case"d":f.cellDates?F.v=xr(F.v,1):(F.v=tn(xr(F.v,1)),F.t="n");break;case"e":(!f||f.cellText!==!1)&&(F.w=F.v),F.v=sI[F.v];break}if(b=R=0,ee=null,ae&&v.s!==void 0&&(ee=p.CellXf[v.s],ee!=null&&(ee.numFmtId!=null&&(b=ee.numFmtId),f.cellStyles&&ee.fillId!=null&&(R=ee.fillId))),MI(F,b,R,f,m,p),f.cellDates&&ae&&F.t=="n"&&bl(ze[b])&&(F.t="d",F.v=h0(F.v)),v.cm&&f.xlmeta){var De=(f.xlmeta.Cell||[])[+v.cm-1];De&&De.type=="XLDAPR"&&(F.D=!0)}if(q){var H=Qr(v.r);c[H.r]||(c[H.r]=[]),c[H.r][H.c]=F}else c[v.r]=F}}}}G.length>0&&(c["!rows"]=G)}}();function _7(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}var w7=ho;function E7(){}function T7(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Hj(e),r}function k7(e){var t=Xn(e);return[t]}function S7(e){var t=fo(e);return[t]}function A7(e){var t=Xn(e),r=e.read_shift(1);return[t,r,"b"]}function I7(e){var t=fo(e),r=e.read_shift(1);return[t,r,"b"]}function N7(e){var t=Xn(e),r=e.read_shift(1);return[t,r,"e"]}function C7(e){var t=fo(e),r=e.read_shift(1);return[t,r,"e"]}function b7(e){var t=Xn(e),r=e.read_shift(4);return[t,r,"s"]}function R7(e){var t=fo(e),r=e.read_shift(4);return[t,r,"s"]}function P7(e){var t=Xn(e),r=Vr(e);return[t,r,"n"]}function jI(e){var t=fo(e),r=Vr(e);return[t,r,"n"]}function D7(e){var t=Xn(e),r=pv(e);return[t,r,"n"]}function F7(e){var t=fo(e),r=pv(e);return[t,r,"n"]}function O7(e){var t=Xn(e),r=dv(e);return[t,r,"is"]}function M7(e){var t=Xn(e),r=$r(e);return[t,r,"str"]}function L7(e){var t=fo(e),r=$r(e);return[t,r,"str"]}function j7(e,t,r){var n=e.l+t,s=Xn(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=p0(e,n-e.l,r);i[3]=Lr(o,null,s,r.supbooks,r)}else e.l=n;return i}function U7(e,t,r){var n=e.l+t,s=Xn(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=p0(e,n-e.l,r);i[3]=Lr(o,null,s,r.supbooks,r)}else e.l=n;return i}function V7(e,t,r){var n=e.l+t,s=Xn(e);s.r=r["!row"];var a=Vr(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=p0(e,n-e.l,r);i[3]=Lr(o,null,s,r.supbooks,r)}else e.l=n;return i}function B7(e,t,r){var n=e.l+t,s=Xn(e);s.r=r["!row"];var a=$r(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=p0(e,n-e.l,r);i[3]=Lr(o,null,s,r.supbooks,r)}else e.l=n;return i}var W7=ho;function $7(e,t){var r=e.l+t,n=ho(e),s=mv(e),a=$r(e),i=$r(e),o=$r(e);e.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function z7(){}function H7(e,t,r){var n=e.l+t,s=tI(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=XV(e,n-e.l,r);i[1]=o}else e.l=n;return i}function G7(e,t,r){var n=e.l+t,s=ho(e),a=[s];if(r.cellFormula){var i=JV(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}var K7=["left","right","top","bottom","header","footer"];function q7(e){var t={};return K7.forEach(function(r){t[r]=Vr(e)}),t}function Y7(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function X7(){}function Q7(){}function J7(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,m=!1,p,x,g,w,k,E,y,I,O,F=[];o.biff=12,o["!row"]=0;var v=0,T=!1,S=[],C={},P=o.supbooks||s.supbooks||[[]];if(P.sharedf=C,P.arrayf=S,P.SheetNames=s.SheetNames||s.Sheets.map(function(q){return q.name}),!o.supbooks&&(o.supbooks=P,s.Names))for(var b=0;b<s.Names.length;++b)P[0][b+1]=s.Names[b];var R=[],ae=[],ee=!1;_d[16]={n:"BrtShortReal",f:jI};var fe;if(Aa(e,function(G,Z,ce){if(!m)switch(ce){case 148:c=G;break;case 0:p=G,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),I=Ir(w=p.r),o["!row"]=p.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=yu(G.hpt)),ae[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:G[2]},G[2]){case"n":x.v=G[1];break;case"s":y=Fc[G[1]],x.v=y.t,x.r=y.r;break;case"b":x.v=!!G[1];break;case"e":x.v=G[1],o.cellText!==!1&&(x.w=mo[x.v]);break;case"str":x.t="s",x.v=G[1];break;case"is":x.t="s",x.v=G[1].t;break}if((g=i.CellXf[G[0].iStyleRef])&&MI(x,g.numFmtId,null,o,a,i),k=G[0].c==-1?k+1:G[0].c,o.dense?(l[w]||(l[w]=[]),l[w][k]=x):l[lr(k)+I]=x,o.cellFormula){for(T=!1,v=0;v<S.length;++v){var j=S[v];p.r>=j[0].s.r&&p.r<=j[0].e.r&&k>=j[0].s.c&&k<=j[0].e.c&&(x.F=at(j[0]),T=!0)}!T&&G.length>3&&(x.f=G[3])}if(f.s.r>p.r&&(f.s.r=p.r),f.s.c>k&&(f.s.c=k),f.e.r<p.r&&(f.e.r=p.r),f.e.c<k&&(f.e.c=k),o.cellDates&&g&&x.t=="n"&&bl(ze[g.numFmtId])){var Y=Mi(x.v);Y&&(x.t="d",x.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}fe&&(fe.type=="XLDAPR"&&(x.D=!0),fe=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;x={t:"z",v:void 0},k=G[0].c==-1?k+1:G[0].c,o.dense?(l[w]||(l[w]=[]),l[w][k]=x):l[lr(k)+I]=x,f.s.r>p.r&&(f.s.r=p.r),f.s.c>k&&(f.s.c=k),f.e.r<p.r&&(f.e.r=p.r),f.e.c<k&&(f.e.c=k),fe&&(fe.type=="XLDAPR"&&(x.D=!0),fe=void 0);break;case 176:F.push(G);break;case 49:fe=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var K=n["!id"][G.relId];for(K?(G.Target=K.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=K):G.relId==""&&(G.Target="#"+G.loc),w=G.rfx.s.r;w<=G.rfx.e.r;++w)for(k=G.rfx.s.c;k<=G.rfx.e.c;++k)o.dense?(l[w]||(l[w]=[]),l[w][k]||(l[w][k]={t:"z",v:void 0}),l[w][k].l=G):(E=We({c:k,r:w}),l[E]||(l[E]={t:"z",v:void 0}),l[E].l=G);break;case 426:if(!o.cellFormula)break;S.push(G),O=o.dense?l[w][k]:l[lr(k)+I],O.f=Lr(G[1],f,{r:p.r,c:k},P,o),O.F=at(G[0]);break;case 427:if(!o.cellFormula)break;C[We(G[0].s)]=G[1],O=o.dense?l[w][k]:l[lr(k)+I],O.f=Lr(G[1],f,{r:p.r,c:k},P,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)R[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},ee||(ee=!0,yv(G.w/256)),wl(R[G.e+1]);break;case 161:l["!autofilter"]={ref:at(G)};break;case 476:l["!margins"]=G;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),G.name&&(s.Sheets[r].CodeName=G.name),(G.above||G.left)&&(l["!outline"]={above:G.above,left:G.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),G.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!Z.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+ce.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(f.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=at(c||f)),o.sheetRows&&l["!ref"]){var ue=Ht(l["!ref"]);o.sheetRows<=+ue.e.r&&(ue.e.r=o.sheetRows-1,ue.e.r>f.e.r&&(ue.e.r=f.e.r),ue.e.r<ue.s.r&&(ue.s.r=ue.e.r),ue.e.c>f.e.c&&(ue.e.c=f.e.c),ue.e.c<ue.s.c&&(ue.s.c=ue.e.c),l["!fullref"]=l["!ref"],l["!ref"]=at(ue))}return F.length>0&&(l["!merges"]=F),R.length>0&&(l["!cols"]=R),ae.length>0&&(l["!rows"]=ae),l}function Z7(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=lt((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function eB(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var m=Z7(d);f.s.r=f.s.c=0,f.e.c=o,c=lr(o),m[0].forEach(function(p,x){i[c+Ir(x)]={t:"n",v:p,z:m[1]},l=x}),f.e.r<l&&(f.e.r=l),++o}),o>0&&(i["!ref"]=at(f)),i}function tB(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(LI);return o&&wv(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function rB(e,t){e.l+=10;var r=$r(e);return{name:r}}function nB(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Aa(e,function(l,c,f){switch(f){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var UI=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],sB=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],aB=[],iB=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Qw(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Dt(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function Jw(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Dt(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function VI(e){Jw(e.WBProps,UI),Jw(e.CalcPr,iB),Qw(e.WBView,sB),Qw(e.Sheets,aB),rl.date1904=Dt(e.WBProps.date1904)}var oB="][*?/\\".split("");function lB(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return oB.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var cB=/<\w+:workbook/;function uB(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(Kr,function(l,c){var f=Le(l);switch(Ws(f[0])){case"<?xml":break;case"<workbook":l.match(cB)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":UI.forEach(function(d){if(f[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=Dt(f[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(f[d[0]],10);break;default:r.WBProps[d[0]]=f[d[0]]}}),f.codeName&&(r.WBProps.CodeName=kt(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=lt(kt(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=kt(f.name),f.comment&&(a.Comment=f.comment),f.localSheetId&&(a.Sheet=+f.localSheetId),Dt(f.hidden||"0")&&(a.Hidden=!0),i=c+l.length;break;case"</definedName>":a.Ref=lt(kt(e.slice(i,c))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return l}),Nj.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return VI(r),r}function fB(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Hp(e),r.name=$r(e),r}function hB(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?$r(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function dB(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function mB(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=Gj(e),i=QV(e,0,r),o=mv(e);e.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function pB(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],_d[16]={n:"BrtFRTArchID$",f:dB},Aa(e,function(l,c,f){switch(f){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=Lr(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([f,l]):i[0]=[f,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),VI(r),r.Names=a,r.supbooks=i,r}function gB(e,t,r){return t.slice(-4)===".bin"?pB(e,r):uB(e,r)}function xB(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?J7(e,n,r,s,a,i,o):f7(e,n,r,s,a,i,o)}function vB(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?nB(e,n,r,s,a):tB(e,n,r,s,a)}function yB(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?IU():NU()}function _B(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?SU():AU()}function wB(e,t,r,n){return t.slice(-4)===".bin"?W9(e,r,n):M9(e,r,n)}function EB(e,t,r){return AI(e,r)}function TB(e,t,r){return t.slice(-4)===".bin"?s9(e,r):r9(e,r)}function kB(e,t,r){return t.slice(-4)===".bin"?EU(e,r):xU(e,r)}function SB(e,t,r){return t.slice(-4)===".bin"?mU(e):hU(e)}function AB(e,t,r,n){return r.slice(-4)===".bin"?pU(e,t,r,n):void 0}function IB(e,t,r){return t.slice(-4)===".bin"?uU(e,t,r):fU(e,t,r)}var BI=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,WI=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function es(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(BI),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(WI),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function NB(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(BI),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(WI),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var Mc;function CB(e,t){var r=Mc[e]||lt(e);return r==="General"?eo(t):Yn(r,t)}function bB(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Dt(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=xr(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[lt(t)]=s}function RB(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||mo[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mu(e.v):e.w=eo(e.v):e.w=CB(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=Mc[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&bl(n)){var s=Mi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function PB(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=b9[n.Pattern]||n.Pattern)}e[t.ID]=t}function DB(e,t,r,n,s,a,i,o,l,c){var f="General",d=n.StyleID,m={};c=c||{};var p=[],x=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&i&&(d=i.StyleID);a[d]!==void 0&&(a[d].nf&&(f=a[d].nf),a[d].Interior&&p.push(a[d].Interior),!!a[d].Parent);)d=a[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Dt(e);break;case"String":n.t="s",n.r=_w(lt(e)),n.v=e.indexOf("<")>-1?lt(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(xr(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=lt(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=sI[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=_w(t||e));break}if(RB(n,f,c),c.cellFormula!==!1)if(n.Formula){var g=lt(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=tl(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=tl("RC:RC",s):n.ArrayRange&&(n.F=tl(n.ArrayRange,s),l.push([Ht(n.F),n.F]))}else for(x=0;x<l.length;++x)s.r>=l[x][0].s.r&&s.r<=l[x][0].e.r&&s.c>=l[x][0].s.c&&s.c<=l[x][0].e.c&&(n.F=l[x][1]);c.cellStyles&&(p.forEach(function(w){!m.patternType&&w.patternType&&(m.patternType=w.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function FB(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function pm(e,t){var r=t||{};bA();var n=cc(cv(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=kt(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=Ar(r);return i.type="string",xu.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(vt){s.indexOf("<"+vt)>=0&&(a=!0)}),a)return $B(n,r);Mc={"General Number":"General","General Date":ze[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ze[15],"Short Date":ze[14],"Long Time":ze[19],"Medium Time":ze[18],"Short Time":ze[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ze[2],Standard:ze[4],Percent:ze[10],Scientific:ze[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,f={},d=[],m=r.dense?[]:{},p="",x={},g={},w=es('<Data ss:Type="String">'),k=0,E=0,y=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},O={},F={},v="",T=0,S=[],C={},P={},b=0,R=[],ae=[],ee={},fe=[],ue,q=!1,G=[],Z=[],ce={},j=0,Y=0,K={Sheets:[],WBProps:{date1904:!1}},B={};gu.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Q="";o=gu.exec(n);)switch(o[3]=(Q=o[3]).toLowerCase()){case"data":if(Q=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?DB(n.slice(k,o.index),v,w,l[l.length-1][0]=="comment"?ee:x,{c:E,r:y},O,fe[E],g,G,r):(v="",w=es(o[0]),k=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ae.length>0&&(x.c=ae),(!r.sheetRows||r.sheetRows>y)&&x.v!==void 0&&(r.dense?(m[y]||(m[y]=[]),m[y][E]=x):m[lr(E)+Ir(y)]=x),x.HRef&&(x.l={Target:lt(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(j=E+(parseInt(x.MergeAcross,10)|0),Y=y+(parseInt(x.MergeDown,10)|0),S.push({s:{c:E,r:y},e:{c:j,r:Y}})),!r.sheetStubs)x.MergeAcross?E=j+1:++E;else if(x.MergeAcross||x.MergeDown){for(var de=E;de<=j;++de)for(var Ee=y;Ee<=Y;++Ee)(de>E||Ee>y)&&(r.dense?(m[Ee]||(m[Ee]=[]),m[Ee][de]={t:"z"}):m[lr(de)+Ir(Ee)]={t:"z"});E=j+1}else++E;else x=NB(o[0]),x.Index&&(E=+x.Index-1),E<I.s.c&&(I.s.c=E),E>I.e.c&&(I.e.c=E),o[0].slice(-2)==="/>"&&++E,ae=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(y<I.s.r&&(I.s.r=y),y>I.e.r&&(I.e.r=y),o[0].slice(-2)==="/>"&&(g=es(o[0]),g.Index&&(y=+g.Index-1)),E=0,++y):(g=es(o[0]),g.Index&&(y=+g.Index-1),ce={},(g.AutoFitHeight=="0"||g.Height)&&(ce.hpx=parseInt(g.Height,10),ce.hpt=SI(ce.hpx),Z[y]=ce),g.Hidden=="1"&&(ce.hidden=!0,Z[y]=ce));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(p),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(m["!ref"]=at(I),r.sheetRows&&r.sheetRows<=I.e.r&&(m["!fullref"]=m["!ref"],I.e.r=r.sheetRows-1,m["!ref"]=at(I))),S.length&&(m["!merges"]=S),fe.length>0&&(m["!cols"]=fe),Z.length>0&&(m["!rows"]=Z),f[p]=m}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=E=0,l.push([o[3],!1]),c=es(o[0]),p=lt(c.Name),m=r.dense?[]:{},S=[],G=[],Z=[],B={name:p,Hidden:0},K.Sheets.push(B);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),fe=[],q=!1}break;case"style":o[1]==="/"?PB(O,F,r):F=es(o[0]);break;case"numberformat":F.nf=lt(es(o[0]).Format||"General"),Mc[F.nf]&&(F.nf=Mc[F.nf]);for(var _e=0;_e!=392&&ze[_e]!=F.nf;++_e);if(_e==392){for(_e=57;_e!=392;++_e)if(ze[_e]==null){Wi(F.nf,_e);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ue=es(o[0]),ue.Hidden&&(ue.hidden=!0,delete ue.Hidden),ue.Width&&(ue.wpx=parseInt(ue.Width,10)),!q&&ue.wpx>10){q=!0,Xr=TI;for(var ge=0;ge<fe.length;++ge)fe[ge]&&wl(fe[ge])}q&&wl(ue),fe[ue.Index-1||fe.length]=ue;for(var De=0;De<+ue.Span;++De)fe[fe.length]=Ar(ue);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var H=Le(o[0]),tt={Name:H.Name,Ref:tl(H.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(tt.Sheet=K.Sheets.length-1),K.Names.push(tt);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?v+=n.slice(T,o.index):T=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=es(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?x8(C,Q,n.slice(b,o.index)):b=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));FB(ee),ae.push(ee)}else l.push([o[3],!1]),c=es(o[0]),ee={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var He=es(o[0]);m["!autofilter"]={ref:tl(He.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return sE(n,r);var Je=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Je=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Je=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Je=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Je=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(b,o.index)){case"SheetHidden":B.Hidden=1;break;case"SheetVeryHidden":B.Hidden=2;break}else b=o.index+o[0].length;break;case"header":m["!margins"]||Oc(m["!margins"]={},"xlml"),isNaN(+Le(o[0]).Margin)||(m["!margins"].header=+Le(o[0]).Margin);break;case"footer":m["!margins"]||Oc(m["!margins"]={},"xlml"),isNaN(+Le(o[0]).Margin)||(m["!margins"].footer=+Le(o[0]).Margin);break;case"pagemargins":var Fe=Le(o[0]);m["!margins"]||Oc(m["!margins"]={},"xlml"),isNaN(+Fe.Top)||(m["!margins"].top=+Fe.Top),isNaN(+Fe.Left)||(m["!margins"].left=+Fe.Left),isNaN(+Fe.Right)||(m["!margins"].right=+Fe.Right),isNaN(+Fe.Bottom)||(m["!margins"].bottom=+Fe.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Je=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Je=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Je=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Je=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Je=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Je=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Je=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Je=!1}break;case"smarttags":break;default:Je=!1;break}if(Je||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?bB(P,Q,R,n.slice(b,o.index)):(R=o,b=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Se={};return!r.bookSheets&&!r.bookProps&&(Se.Sheets=f),Se.SheetNames=d,Se.Workbook=K,Se.SSF=Ar(ze),Se.Props=C,Se.Custprops=P,Se}function Yp(e,t){switch(kv(t=t||{}),t.type||"base64"){case"base64":return pm(Rn(e),t);case"binary":case"buffer":case"file":return pm(e,t);case"array":return pm(uo(e),t)}}function OB(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Yj(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Xj(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var MB=[60,1084,2066,2165,2175];function LB(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=ia(r,r.l),c=Xp[l],f=0;c!=null&&MB.indexOf(l)>-1;)a=ia(r,r.l+2),f=r.l+4,l==2066?f+=4:(l==2165||l==2175)&&(f+=12),o=r.slice(f,r.l+4+a),i.push(o),r.l+=4+a,c=Xp[l=ia(r,r.l)];var d=Wa(i);Er(d,0);var m=0;d.lens=[];for(var p=0;p<i.length;++p)d.lens.push(m),m+=i[p].length;if(d.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+d.length+" < "+n;return t.f(d,d.length,s)}function Ss(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ze[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||mo[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mu(e.v):e.w=eo(e.v):e.w=Yn(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&bl(ze[n]||String(n))){var s=Mi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Hf(e,t,r){return{v:e,ixfe:t,t:r}}function jB(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,l=[],c="",f={},d,m="",p,x,g,w,k={},E=[],y,I,O=[],F=[],v={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},S=function(Ve){return Ve<8?$i[Ve]:Ve<64&&F[Ve-8]||$i[Ve]},C=function(Ve,_t,Xt){var ft=_t.XF.data;if(!(!ft||!ft.patternType||!Xt||!Xt.cellStyles)){_t.s={},_t.s.patternType=ft.patternType;var _n;(_n=vu(S(ft.icvFore)))&&(_t.s.fgColor={rgb:_n}),(_n=vu(S(ft.icvBack)))&&(_t.s.bgColor={rgb:_n})}},P=function(Ve,_t,Xt){if(!(ce>1)&&!(Xt.sheetRows&&Ve.r>=Xt.sheetRows)){if(Xt.cellStyles&&_t.XF&&_t.XF.data&&C(Ve,_t,Xt),delete _t.ixfe,delete _t.XF,d=Ve,m=We(Ve),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Ve.r<i.s.r&&(i.s.r=Ve.r),Ve.c<i.s.c&&(i.s.c=Ve.c),Ve.r+1>i.e.r&&(i.e.r=Ve.r+1),Ve.c+1>i.e.c&&(i.e.c=Ve.c+1),Xt.cellFormula&&_t.f){for(var ft=0;ft<E.length;++ft)if(!(E[ft][0].s.c>Ve.c||E[ft][0].s.r>Ve.r)&&!(E[ft][0].e.c<Ve.c||E[ft][0].e.r<Ve.r)){_t.F=at(E[ft][0]),(E[ft][0].s.c!=Ve.c||E[ft][0].s.r!=Ve.r)&&delete _t.f,_t.f&&(_t.f=""+Lr(E[ft][1],i,Ve,G,b));break}}Xt.dense?(s[Ve.r]||(s[Ve.r]=[]),s[Ve.r][Ve.c]=_t):s[m]=_t}},b={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:E,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(b.password=t.password);var R,ae=[],ee=[],fe=[],ue=[],q=!1,G=[];G.SheetNames=b.snames,G.sharedf=b.sharedf,G.arrayf=b.arrayf,G.names=[],G.XTI=[];var Z=0,ce=0,j=0,Y=[],K=[],B;b.codepage=1200,us(1200);for(var Q=!1;e.l<e.length-1;){var de=e.l,Ee=e.read_shift(2);if(Ee===0&&Z===10)break;var _e=e.l===e.length?0:e.read_shift(2),ge=Xp[Ee];if(ge&&ge.f){if(t.bookSheets&&Z===133&&Ee!==133)break;if(Z=Ee,ge.r===2||ge.r==12){var De=e.read_shift(2);if(_e-=2,!b.enc&&De!==Ee&&((De&255)<<8|De>>8)!==Ee)throw new Error("rt mismatch: "+De+"!="+Ee);ge.r==12&&(e.l+=10,_e-=10)}var H={};if(Ee===10?H=ge.f(e,_e,b):H=LB(Ee,ge,e,_e,b),ce==0&&[9,521,1033,2057].indexOf(Z)===-1)continue;switch(Ee){case 34:r.opts.Date1904=v.WBProps.date1904=H;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(b.enc||(e.l=0),b.enc=H,!t.password)throw new Error("File is password-protected");if(H.valid==null)throw new Error("Encryption scheme unsupported");if(!H.valid)throw new Error("Password is incorrect");break;case 92:b.lastuser=H;break;case 66:var tt=Number(H);switch(tt){case 21010:tt=1200;break;case 32768:tt=1e4;break;case 32769:tt=1252;break}us(b.codepage=tt),Q=!0;break;case 317:b.rrtabid=H;break;case 25:b.winlocked=H;break;case 439:r.opts.RefreshAll=H;break;case 12:r.opts.CalcCount=H;break;case 16:r.opts.CalcDelta=H;break;case 17:r.opts.CalcIter=H;break;case 13:r.opts.CalcMode=H;break;case 14:r.opts.CalcPrecision=H;break;case 95:r.opts.CalcSaveRecalc=H;break;case 15:b.CalcRefMode=H;break;case 2211:r.opts.FullCalc=H;break;case 129:H.fDialog&&(s["!type"]="dialog"),H.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),H.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:O.push(H);break;case 430:G.push([H]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(H);break;case 24:case 536:B={Name:H.Name,Ref:Lr(H.rgce,i,null,G,b)},H.itab>0&&(B.Sheet=H.itab-1),G.names.push(B),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(H),H.Name=="_xlnm._FilterDatabase"&&H.itab>0&&H.rgce&&H.rgce[0]&&H.rgce[0][0]&&H.rgce[0][0][0]=="PtgArea3d"&&(K[H.itab-1]={ref:at(H.rgce[0][0][1][2])});break;case 22:b.ExternCount=H;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(H),G.XTI=G.XTI.concat(H);break;case 2196:if(b.biff<8)break;B!=null&&(B.Comment=H[1]);break;case 18:s["!protect"]=H;break;case 19:H!==0&&b.WTF&&console.error("Password verifier: "+H);break;case 133:a[H.pos]=H,b.snames.push(H.name);break;case 10:{if(--ce)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=at(i),t.sheetRows&&t.sheetRows<=i.e.r){var He=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=at(i),i.e.r=He}i.e.r++,i.e.c++}ae.length>0&&(s["!merges"]=ae),ee.length>0&&(s["!objects"]=ee),fe.length>0&&(s["!cols"]=fe),ue.length>0&&(s["!rows"]=ue),v.Sheets.push(T)}c===""?f=s:n[c]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(b.biff===8&&(b.biff={9:2,521:3,1033:4}[Ee]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[H.BIFFVer]||8),b.biffguess=H.BIFFVer==0,H.BIFFVer==0&&H.dt==4096&&(b.biff=5,Q=!0,us(b.codepage=28591)),b.biff==8&&H.BIFFVer==0&&H.dt==16&&(b.biff=2),ce++)break;if(s=t.dense?[]:{},b.biff<8&&!Q&&(Q=!0,us(b.codepage=t.codepage||1252)),b.biff<5||H.BIFFVer==0&&H.dt==4096){c===""&&(c="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Je={pos:e.l-_e,name:c};a[Je.pos]=Je,b.snames.push(c)}else c=(a[de]||{name:""}).name;H.dt==32&&(s["!type"]="chart"),H.dt==64&&(s["!type"]="macro"),ae=[],ee=[],b.arrayf=E=[],fe=[],ue=[],q=!1,T={Hidden:(a[de]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[H.r]||[])[H.c]:s[We({c:H.c,r:H.r})])&&++H.c,y={ixfe:H.ixfe,XF:O[H.ixfe]||{},v:H.val,t:"n"},j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:H.c,r:H.r},y,t);break;case 5:case 517:y={ixfe:H.ixfe,XF:O[H.ixfe],v:H.val,t:H.t},j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:H.c,r:H.r},y,t);break;case 638:y={ixfe:H.ixfe,XF:O[H.ixfe],v:H.rknum,t:"n"},j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:H.c,r:H.r},y,t);break;case 189:for(var Fe=H.c;Fe<=H.C;++Fe){var Se=H.rkrec[Fe-H.c][0];y={ixfe:Se,XF:O[Se],v:H.rkrec[Fe-H.c][1],t:"n"},j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:Fe,r:H.r},y,t)}break;case 6:case 518:case 1030:{if(H.val=="String"){o=H;break}if(y=Hf(H.val,H.cell.ixfe,H.tt),y.XF=O[y.ixfe],t.cellFormula){var vt=H.formula;if(vt&&vt[0]&&vt[0][0]&&vt[0][0][0]=="PtgExp"){var Yt=vt[0][0][1][0],fr=vt[0][0][1][1],sn=We({r:Yt,c:fr});k[sn]?y.f=""+Lr(H.formula,i,H.cell,G,b):y.F=((t.dense?(s[Yt]||[])[fr]:s[sn])||{}).F}else y.f=""+Lr(H.formula,i,H.cell,G,b)}j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P(H.cell,y,t),o=H}break;case 7:case 519:if(o)o.val=H,y=Hf(H,o.cell.ixfe,"s"),y.XF=O[y.ixfe],t.cellFormula&&(y.f=""+Lr(o.formula,i,o.cell,G,b)),j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P(o.cell,y,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{E.push(H);var zs=We(H[0].s);if(p=t.dense?(s[H[0].s.r]||[])[H[0].s.c]:s[zs],t.cellFormula&&p){if(!o||!zs||!p)break;p.f=""+Lr(H[1],i,H[0],G,b),p.F=at(H[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!o)break;k[We(o.cell)]=H[0],p=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[We(o.cell)],(p||{}).f=""+Lr(H[0],i,d,G,b)}}break;case 253:y=Hf(l[H.isst].t,H.ixfe,"s"),l[H.isst].h&&(y.h=l[H.isst].h),y.XF=O[y.ixfe],j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:H.c,r:H.r},y,t);break;case 513:t.sheetStubs&&(y={ixfe:H.ixfe,XF:O[H.ixfe],t:"z"},j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:H.c,r:H.r},y,t));break;case 190:if(t.sheetStubs)for(var an=H.c;an<=H.C;++an){var St=H.ixfe[an-H.c];y={ixfe:St,XF:O[St],t:"z"},j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:an,r:H.r},y,t)}break;case 214:case 516:case 4:y=Hf(H.val,H.ixfe,"s"),y.XF=O[y.ixfe],j>0&&(y.z=Y[y.ixfe>>8&63]),Ss(y,t,r.opts.Date1904),P({c:H.c,r:H.r},y,t);break;case 0:case 512:ce===1&&(i=H);break;case 252:l=H;break;case 1054:if(b.biff==4){Y[j++]=H[1];for(var hr=0;hr<j+163&&ze[hr]!=H[1];++hr);hr>=163&&Wi(H[1],j+163)}else Wi(H[1],H[0]);break;case 30:{Y[j++]=H;for(var yt=0;yt<j+163&&ze[yt]!=H;++yt);yt>=163&&Wi(H,j+163)}break;case 229:ae=ae.concat(H);break;case 93:ee[H.cmo[0]]=b.lastobj=H;break;case 438:b.lastobj.TxO=H;break;case 127:b.lastobj.ImData=H;break;case 440:for(w=H[0].s.r;w<=H[0].e.r;++w)for(g=H[0].s.c;g<=H[0].e.c;++g)p=t.dense?(s[w]||[])[g]:s[We({c:g,r:w})],p&&(p.l=H[1]);break;case 2048:for(w=H[0].s.r;w<=H[0].e.r;++w)for(g=H[0].s.c;g<=H[0].e.c;++g)p=t.dense?(s[w]||[])[g]:s[We({c:g,r:w})],p&&p.l&&(p.l.Tooltip=H[1]);break;case 28:{if(b.biff<=5&&b.biff>=2)break;p=t.dense?(s[H[0].r]||[])[H[0].c]:s[We(H[0])];var At=ee[H[2]];p||(t.dense?(s[H[0].r]||(s[H[0].r]=[]),p=s[H[0].r][H[0].c]={t:"z"}):p=s[We(H[0])]={t:"z"},i.e.r=Math.max(i.e.r,H[0].r),i.s.r=Math.min(i.s.r,H[0].r),i.e.c=Math.max(i.e.c,H[0].c),i.s.c=Math.min(i.s.c,H[0].c)),p.c||(p.c=[]),x={a:H[1],t:At.TxO.t},p.c.push(x)}break;case 2173:iU(O[H.ixfe],H.ext);break;case 125:{if(!b.cellStyles)break;for(;H.e>=H.s;)fe[H.e--]={width:H.w/256,level:H.level||0,hidden:!!(H.flags&1)},q||(q=!0,yv(H.w/256)),wl(fe[H.e+1])}break;case 520:{var dt={};H.level!=null&&(ue[H.r]=dt,dt.level=H.level),H.hidden&&(ue[H.r]=dt,dt.hidden=!0),H.hpt&&(ue[H.r]=dt,dt.hpt=H.hpt,dt.hpx=yu(H.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Oc(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ee]]=H;break;case 161:s["!margins"]||Oc(s["!margins"]={}),s["!margins"].header=H.header,s["!margins"].footer=H.footer;break;case 574:H.RTL&&(v.Views[0].RTL=!0);break;case 146:F=H;break;case 2198:R=H;break;case 140:I=H;break;case 442:c?T.CodeName=H||T.name:v.WBProps.CodeName=H||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+Ee.toString(16)),e.l+=_e}return r.SheetNames=Us(a).sort(function(Ot,Ve){return Number(Ot)-Number(Ve)}).map(function(Ot){return a[Ot].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&K.forEach(function(Ot,Ve){r.Sheets[r.SheetNames[Ve]]["!autofilter"]=Ot}),r.Strings=l,r.SSF=Ar(ze),b.enc&&(r.Encryption=b.enc),R&&(r.Themes=R),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),G.names.length>0&&(v.Names=G.names),r.Workbook=v,r}var Zw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function UB(e,t,r){var n=st.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=Mw(n,r8,Zw.DSI);for(var a in s)t[a]=s[a]}catch(c){if(r.WTF)throw c}var i=st.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=Mw(i,n8,Zw.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(iI(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function $I(e,t){t||(t={}),kv(t),vA(),t.codepage&&rv(t.codepage);var r,n;if(e.FullPaths){if(st.find(e,"/encryption"))throw new Error("File is password-protected");r=st.find(e,"!CompObj"),n=st.find(e,"/Workbook")||st.find(e,"/Book")}else{switch(t.type){case"base64":e=ls(Rn(e));break;case"binary":e=ls(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Er(e,0),n={content:e}}var s,a;if(r&&OB(r),t.bookProps&&!t.bookSheets)s={};else{var i=et?"buffer":"array";if(n&&n.content)s=jB(n.content,t);else if((a=st.find(e,"PerfectOffice_MAIN"))&&a.content)s=Dc.to_workbook(a.content,(t.type=i,t));else if((a=st.find(e,"NativeContent_MAIN"))&&a.content)s=Dc.to_workbook(a.content,(t.type=i,t));else throw(a=st.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&st.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=kU(e))}var o={};return e.FullPaths&&UB(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}var _d={0:{f:_7},1:{f:k7},2:{f:D7},3:{f:N7},4:{f:A7},5:{f:P7},6:{f:M7},7:{f:b7},8:{f:B7},9:{f:V7},10:{f:j7},11:{f:U7},12:{f:S7},13:{f:F7},14:{f:C7},15:{f:I7},16:{f:jI},17:{f:L7},18:{f:R7},19:{f:dv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mB},40:{},42:{},43:{f:j9},44:{f:L9},45:{f:U9},46:{f:B9},47:{f:V9},48:{},49:{f:Wj},50:{},51:{f:lU},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:vI},62:{f:O7},63:{f:dU},64:{f:X7},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Gr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Y7},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:T7},148:{f:w7,p:16},151:{f:z7},152:{},153:{f:hB},154:{},155:{},156:{f:fB},157:{},158:{},159:{T:1,f:n9},160:{T:-1},161:{T:1,f:ho},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:W7},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:oU},336:{T:-1},337:{f:cU,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Hp},357:{},358:{},359:{},360:{T:1},361:{},362:{f:xI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:H7},427:{f:G7},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:q7},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:E7},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:$7},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Hp},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:wU},633:{T:1},634:{T:-1},635:{T:1,f:_U},636:{T:-1},637:{f:zj},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:rB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Q7},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Xp={6:{f:dm},10:{f:Da},12:{f:er},13:{f:er},14:{f:Gt},15:{f:Gt},16:{f:Vr},17:{f:Gt},18:{f:Gt},19:{f:er},20:{f:Vw},21:{f:Vw},23:{f:xI},24:{f:Ww},25:{f:Gt},26:{},27:{},28:{f:v5},29:{},34:{f:Gt},35:{f:Bw},38:{f:Vr},39:{f:Vr},40:{f:Vr},41:{f:Vr},42:{f:Gt},43:{f:Gt},47:{f:E9},49:{f:Z8},51:{f:er},60:{},61:{f:X8},64:{f:Gt},65:{f:J8},66:{f:er},77:{},80:{},81:{},82:{},85:{f:er},89:{},90:{},91:{},92:{f:W8},93:{f:_5},94:{},95:{f:Gt},96:{},97:{},99:{f:Gt},125:{f:vI},128:{f:c5},129:{f:$8},130:{f:er},131:{f:Gt},132:{f:Gt},133:{f:z8},134:{},140:{f:A5},141:{f:er},144:{},146:{f:N5},151:{},152:{},153:{},154:{},155:{},156:{f:er},157:{},158:{},160:{f:D5},161:{f:b5},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:a5},190:{f:i5},193:{f:Da},197:{},198:{},199:{},200:{},201:{},202:{f:Gt},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:er},220:{},221:{f:Gt},222:{},224:{f:l5},225:{f:B8},226:{f:Da},227:{},229:{f:y5},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:H8},253:{f:e5},255:{f:G8},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:fI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Gt},353:{f:Da},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:f5},431:{f:Gt},432:{},433:{},434:{},437:{},438:{f:T5},439:{f:Gt},440:{f:k5},441:{},442:{f:Xu},443:{},444:{f:er},445:{},446:{},448:{f:Da},449:{f:Y8,r:2},450:{f:Da},512:{f:jw},513:{f:P5},515:{f:u5},516:{f:t5},517:{f:Uw},519:{f:F5},520:{f:K8},523:{},545:{f:$w},549:{f:Lw},566:{},574:{f:Q8},638:{f:s5},659:{},1048:{},1054:{f:r5},1084:{},1212:{f:p5},2048:{f:S5},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Wf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Da},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:C5,r:12},2173:{f:aU,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Gt,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:m5,r:12},2197:{},2198:{f:Z9,r:12},2199:{},2200:{},2201:{},2202:{f:g5,r:12},2203:{f:Da},2204:{},2205:{},2206:{},2207:{},2211:{f:q8},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:er},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:R5},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:I5},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:jw},1:{},2:{f:j5},3:{f:L5},4:{f:M5},5:{f:Uw},7:{f:U5},8:{},9:{f:Wf},11:{},22:{f:er},30:{f:n5},31:{},32:{},33:{f:$w},36:{},37:{f:Lw},50:{f:V5},62:{},52:{},67:{},68:{f:er},69:{},86:{},126:{},127:{f:O5},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:B5},223:{},234:{},354:{},421:{},518:{f:dm},521:{f:Wf},536:{f:Ww},547:{f:Bw},561:{},579:{},1030:{f:dm},1033:{f:Wf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ts(e,t,r,n){var s=t;if(!isNaN(s)){var a=(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&JA(r)&&e.push(r)}}function eE(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,l=uj(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,f=0,d=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var g=l[i].trim(),w=g.slice(0,3).toLowerCase();if(w=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}f=0;continue}if(!(w!="<td"&&w!="<th")){var k=g.split(/<\/t[dh]>/i);for(o=0;o<k.length;++o){var E=k[o].trim();if(E.match(/<t[dh]/i)){for(var y=E,I=0;y.charAt(0)=="<"&&(I=y.indexOf(">"))>-1;)y=y.slice(I+1);for(var O=0;O<x.length;++O){var F=x[O];F.s.c==f&&F.s.r<c&&c<=F.e.r&&(f=F.e.c+1,O=-1)}var v=Le(E.slice(0,E.indexOf(">")));m=v.colspan?+v.colspan:1,((d=+v.rowspan)>1||m>1)&&x.push({s:{r:c,c:f},e:{r:c+(d||1)-1,c:f+m-1}});var T=v.t||v["data-t"]||"";if(!y.length){f+=m;continue}if(y=UA(y),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>f&&(p.s.c=f),p.e.c<f&&(p.e.c=f),!y.length){f+=m;continue}var S={t:"s",v:y};r.raw||!y.trim().length||T=="s"||(y==="TRUE"?S={t:"b",v:!0}:y==="FALSE"?S={t:"b",v:!1}:isNaN(ps(y))?isNaN(_l(y).getDate())||(S={t:"d",v:xr(y)},r.cellDates||(S={t:"n",v:tn(S.v)}),S.z=r.dateNF||ze[14]):S={t:"n",v:ps(y)}),r.dense?(n[c]||(n[c]=[]),n[c][f]=S):n[We({r:c,c:f})]=S,f+=m}}}}return n["!ref"]=at(p),x.length&&(n["!merges"]=x),n}function VB(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>i)&&!(s[c].e.r<r||s[c].e.c<i)){if(s[c].s.r<r||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var f=We({r,c:i}),d=n.dense?(e[r]||[])[i]:e[f],m=d&&d.v!=null&&(d.h||lv(d.w||(Ta(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+d.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+f,a.push(Aj("td",m,p))}}var x="<tr>";return x+a.join("")+"</tr>"}var BB='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',WB="</body></html>";function $B(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return wi(eE(r[0],t),t);var n=Av();return r.forEach(function(s,a){Iv(n,eE(s,t),"Sheet"+(a+1))}),n}function zB(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function HB(e,t){var r=t||{},n=r.header!=null?r.header:BB,s=r.footer!=null?r.footer:WB,a=[n],i=Rl(e["!ref"]);r.dense=Array.isArray(e),a.push(zB(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(VB(e,i,o,r));return a.push("</table>"+s),a.join("")}function zI(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Qr(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var f=Rl(e["!ref"]);c.s.r=Math.min(c.s.r,f.s.r),c.s.c=Math.min(c.s.c,f.s.c),c.e.r=Math.max(c.e.r,f.e.r),c.e.c=Math.max(c.e.c,f.e.c),s==-1&&(c.e.r=s=f.e.r+1)}var d=[],m=0,p=e["!rows"]||(e["!rows"]=[]),x=0,g=0,w=0,k=0,E=0,y=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&g<l;++x){var I=o[x];if(tE(I)){if(n.display)continue;p[g]={hidden:!0}}var O=I.children;for(w=k=0;w<O.length;++w){var F=O[w];if(!(n.display&&tE(F))){var v=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):UA(F.innerHTML),T=F.getAttribute("data-z")||F.getAttribute("z");for(m=0;m<d.length;++m){var S=d[m];S.s.c==k+a&&S.s.r<g+s&&g+s<=S.e.r&&(k=S.e.c+1-a,m=-1)}y=+F.getAttribute("colspan")||1,((E=+F.getAttribute("rowspan")||1)>1||y>1)&&d.push({s:{r:g+s,c:k+a},e:{r:g+s+(E||1)-1,c:k+a+(y||1)-1}});var C={t:"s",v},P=F.getAttribute("data-t")||F.getAttribute("t")||"";v!=null&&(v.length==0?C.t=P||"z":n.raw||v.trim().length==0||P=="s"||(v==="TRUE"?C={t:"b",v:!0}:v==="FALSE"?C={t:"b",v:!1}:isNaN(ps(v))?isNaN(_l(v).getDate())||(C={t:"d",v:xr(v)},n.cellDates||(C={t:"n",v:tn(C.v)}),C.z=n.dateNF||ze[14]):C={t:"n",v:ps(v)})),C.z===void 0&&T!=null&&(C.z=T);var b="",R=F.getElementsByTagName("A");if(R&&R.length)for(var ae=0;ae<R.length&&!(R[ae].hasAttribute("href")&&(b=R[ae].getAttribute("href"),b.charAt(0)!="#"));++ae);b&&b.charAt(0)!="#"&&(C.l={Target:b}),n.dense?(e[g+s]||(e[g+s]=[]),e[g+s][k+a]=C):e[We({c:k+a,r:g+s})]=C,c.e.c<k+a&&(c.e.c=k+a),k+=y}}++g}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,g-1+s),e["!ref"]=at(c),g>=l&&(e["!fullref"]=at((c.e.r=o.length-x+g-1+s,c))),e}function HI(e,t){var r=t||{},n=r.dense?[]:{};return zI(n,e,t)}function GB(e,t){return wi(HI(e,t),t)}function tE(e){var t="",r=KB(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function KB(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function qB(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=lt(t.replace(/<[^>]*>/g,""));return[r]}var rE={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function GI(e,t){var r=t||{},n=cv(e),s=[],a,i,o={name:""},l="",c=0,f,d,m={},p=[],x=r.dense?[]:{},g,w,k={value:""},E="",y=0,I=[],O=-1,F=-1,v={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,S={},C=[],P={},b=0,R=0,ae=[],ee=1,fe=1,ue=[],q={Names:[]},G={},Z=["",""],ce=[],j={},Y="",K=0,B=!1,Q=!1,de=0;for(gu.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=gu.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(v.e.c>=v.s.c&&v.e.r>=v.s.r?x["!ref"]=at(v):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=v.e.r&&(x["!fullref"]=x["!ref"],v.e.r=r.sheetRows-1,x["!ref"]=at(v)),C.length&&(x["!merges"]=C),ae.length&&(x["!rows"]=ae),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),p.push(f.name),m[f.name]=x,Q=!1):g[0].charAt(g[0].length-2)!=="/"&&(f=Le(g[0],!1),O=F=-1,v.s.r=v.s.c=1e7,v.e.r=v.e.c=0,x=r.dense?[]:{},C=[],ae=[],Q=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"":if(g[1]==="/"){O+=ee,ee=1;break}if(d=Le(g[0],!1),d.?O=d.-1:O==-1&&(O=0),ee=+d["number-rows-repeated"]||1,ee<10)for(de=0;de<ee;++de)T>0&&(ae[O+de]={level:T});F=-1;break;case"covered-table-cell":g[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(x[O]||(x[O]=[]),x[O][F]={t:"z"}):x[We({r:O,c:F})]={t:"z"}),E="",I=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++F,k=Le(g[0],!1),fe=parseInt(k["number-columns-repeated"]||"1",10),w={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(w.f=Xw(lt(k.formula))),(k.||k["value-type"])=="string"&&(w.t="s",w.v=lt(k["string-value"]||""),r.dense?(x[O]||(x[O]=[]),x[O][F]=w):x[We({r:O,c:F})]=w),F+=fe-1;else if(g[1]!=="/"){++F,E="",y=0,I=[],fe=1;var Ee=ee?O+ee-1:O;if(F>v.e.c&&(v.e.c=F),F<v.s.c&&(v.s.c=F),O<v.s.r&&(v.s.r=O),Ee>v.e.r&&(v.e.r=Ee),k=Le(g[0],!1),ce=[],j={},w={t:k.||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=lt(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(b=parseInt(k["number-matrix-rows-spanned"],10)||0,R=parseInt(k["number-matrix-columns-spanned"],10)||0,P={s:{r:O,c:F},e:{r:O+b-1,c:F+R-1}},w.F=at(P),ue.push([P,w.F])),k.formula)w.f=Xw(k.formula);else for(de=0;de<ue.length;++de)O>=ue[de][0].s.r&&O<=ue[de][0].e.r&&F>=ue[de][0].s.c&&F<=ue[de][0].e.c&&(w.F=ue[de][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(b=parseInt(k["number-rows-spanned"],10)||0,R=parseInt(k["number-columns-spanned"],10)||0,P={s:{r:O,c:F},e:{r:O+b-1,c:F+R-1}},C.push(P)),k["number-columns-repeated"]&&(fe=parseInt(k["number-columns-repeated"],10)),w.t){case"boolean":w.t="b",w.v=Dt(k["boolean-value"]);break;case"float":w.t="n",w.v=parseFloat(k.value);break;case"percentage":w.t="n",w.v=parseFloat(k.value);break;case"currency":w.t="n",w.v=parseFloat(k.value);break;case"date":w.t="d",w.v=xr(k["date-value"]),r.cellDates||(w.t="n",w.v=tn(w.v)),w.z="m/d/yy";break;case"time":w.t="n",w.v=oj(k["time-value"])/86400,r.cellDates&&(w.t="d",w.v=h0(w.v)),w.z="HH:MM:SS";break;case"number":w.t="n",w.v=parseFloat(k.);break;default:if(w.t==="string"||w.t==="text"||!w.t)w.t="s",k["string-value"]!=null&&(E=lt(k["string-value"]),I=[]);else throw new Error("Unsupported value type "+w.t)}}else{if(B=!1,w.t==="s"&&(w.v=E||"",I.length&&(w.R=I),B=y==0),G.Target&&(w.l=G),ce.length>0&&(w.c=ce,ce=[]),E&&r.cellText!==!1&&(w.w=E),B&&(w.t="z",delete w.v),(!B||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=O))for(var _e=0;_e<ee;++_e){if(fe=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(x[O+_e]||(x[O+_e]=[]),x[O+_e][F]=_e==0?w:Ar(w);--fe>0;)x[O+_e][F+fe]=Ar(w);else for(x[We({r:O+_e,c:F})]=w;--fe>0;)x[We({r:O+_e,c:F+fe})]=Ar(w);v.e.c<=F&&(v.e.c=F)}fe=parseInt(k["number-columns-repeated"]||"1",10),F+=fe-1,fe=0,w={},E="",I=[]}G={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((a=s.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((a=s.pop())[0]!==g[3])throw"Bad state: "+a;j.t=E,I.length&&(j.R=I),j.a=Y,ce.push(j)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);Y="",K=0,E="",y=0,I=[];break;case"creator":g[1]==="/"?Y=n.slice(K,g.index):K=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((a=s.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);E="",y=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(S[o.name]=l,(a=s.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=Le(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Le(g[0],!1),l+=rE[g[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Le(g[0],!1),l+=rE[g[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,g.index);break}else c=g.index+g[0].length;break;case"named-range":i=Le(g[0],!1),Z=mm(i["cell-range-address"]);var ge={Name:i.name,Ref:Z[0]+"!"+Z[1]};Q&&(ge.Sheet=p.length),q.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!k||!k["string-value"])){var De=qB(n.slice(y,g.index));E=(E.length>0?E+`
`:"")+De[0]}else Le(g[0],!1),y=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{Z=mm(Le(g[0])["target-range-address"]),m[Z[0]]["!autofilter"]={ref:Z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(G=Le(g[0],!1),!G.href)break;G.Target=lt(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(Z=mm(G.Target.slice(1)),G.Target="#"+Z[0]+"!"+Z[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var H={Sheets:m,SheetNames:p,Workbook:q};return r.bookSheets&&delete H.Sheets,H}function nE(e,t){t=t||{},Un(e,"META-INF/manifest.xml")&&u8(Zt(e,"META-INF/manifest.xml"),t);var r=Sn(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=GI(kt(r),t);return Un(e,"meta.xml")&&(n.Props=aI(Zt(e,"meta.xml"))),n}function sE(e,t){return GI(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ev(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Qp(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):kt(uo(e))}function Jp(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function aE(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function YB(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function _u(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ur(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Br(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=_u(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=_u(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:a};t[s]==null?t[s]=[c]:t[s].push(c)}return t}function Tv(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function XB(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=_u(e,n),a=Br(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:ur(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Br(o.data),c=ur(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=a[3])!=null&&t[0]&&(i.merge=ur(a[3][0].data)>>>0>0),r.push(i)}return r}function QB(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=_u(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,c=0;if(a==1?(c=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Jp(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var f=Jp(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function JB(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(QB(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Jp(t)}function ZB(e,t,r,n){var s=Ev(e),a=s.getUint32(4,!0),i=(n>1?12:8)+aE(a&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,f=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=aE(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(c=s.getFloat64(i,!0),i+=8),a&64&&(f.setTime(f.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var d;switch(e[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t[l]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:t[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return d}function eW(e,t,r){var n=Ev(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,c=NaN,f=new Date(2001,0,1);s&1&&(l=YB(e,a),a+=16),s&2&&(c=n.getFloat64(a,!0),a+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var d;switch(e[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:t[o]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(i>-1)d={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return d}function tW(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return ZB(e,t,r,e[0]);case 5:return eW(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function oi(e){var t=Br(e);return _u(t[1][0].data)}function iE(e,t){var r=Br(t.data),n=ur(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=Br(i.data),l=ur(o[1][0].data)>>>0;switch(n){case 1:a[l]=Qp(o[3][0].data);break;case 8:{var c=e[oi(o[9][0].data)][0],f=Br(c.data),d=e[oi(f[1][0].data)][0],m=ur(d.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Br(d.data);a[l]=p[3].map(function(x){return Qp(x.data)}).join("")}break}}),a}function rW(e,t){var r,n,s,a,i,o,l,c,f,d,m,p,x,g,w=Br(e),k=ur(w[1][0].data)>>>0,E=ur(w[2][0].data)>>>0,y=((n=(r=w[8])==null?void 0:r[0])==null?void 0:n.data)&&ur(w[8][0].data)>0||!1,I,O;if((a=(s=w[7])==null?void 0:s[0])!=null&&a.data&&t!=0)I=(o=(i=w[7])==null?void 0:i[0])==null?void 0:o.data,O=(c=(l=w[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(f=w[4])==null?void 0:f[0])!=null&&d.data&&t!=1)I=(p=(m=w[4])==null?void 0:m[0])==null?void 0:p.data,O=(g=(x=w[3])==null?void 0:x[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var F=y?4:1,v=Ev(I),T=[],S=0;S<I.length/2;++S){var C=v.getUint16(S*2,!0);C<65535&&T.push([S,C])}if(T.length!=E)throw"Expected ".concat(E," cells, found ").concat(T.length);var P=[];for(S=0;S<T.length-1;++S)P[T[S][0]]=O.subarray(T[S][1]*F,T[S+1][1]*F);return T.length>=1&&(P[T[T.length-1][0]]=O.subarray(T[T.length-1][1]*F)),{R:k,cells:P}}function nW(e,t){var r,n=Br(t.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?ur(n[7][0].data)>>>0>0?1:0:-1,a=Tv(n[5],function(i){return rW(i,s)});return{nrows:ur(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,c){if(i[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));i[o.R][c]=l}),i},[])}}function sW(e,t,r){var n,s=Br(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ur(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ur(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=at(a);var i=Br(s[4][0].data),o=iE(e,e[oi(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?iE(e,e[oi(i[17][0].data)][0]):[],c=Br(i[3][0].data),f=0;c[1].forEach(function(d){var m=Br(d.data),p=e[oi(m[2][0].data)][0],x=ur(p.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var g=nW(e,p);g.data.forEach(function(w,k){w.forEach(function(E,y){var I=We({r:f+k,c:y}),O=tW(E,o,l);O&&(r[I]=O)})}),f+=g.nrows})}function aW(e,t){var r=Br(t.data),n={"!ref":"A1"},s=e[oi(r[2][0].data)],a=ur(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return sW(e,s[0],n),n}function iW(e,t){var r,n=Br(t.data),s={name:(r=n[1])!=null&&r[0]?Qp(n[1][0].data):"",sheets:[]},a=Tv(n[2],oi);return a.forEach(function(i){e[i].forEach(function(o){var l=ur(o.meta[1][0].data);l==6e3&&s.sheets.push(aW(e,o))})}),s}function oW(e,t){var r=Av(),n=Br(t.data),s=Tv(n[1],oi);if(s.forEach(function(a){e[a].forEach(function(i){var o=ur(i.meta[1][0].data);if(o==2){var l=iW(e,i);l.sheets.forEach(function(c,f){Iv(r,c,f==0?l.name:l.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function gm(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=JB(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var f;try{f=XB(c)}catch(d){return console.log("## "+(d.message||d))}f.forEach(function(d){a[d.id]=d.messages,i.push(d.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a==null?void 0:a[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ur(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(c){var f=ur(c.meta[1][0].data)>>>0;if(f==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return oW(a,o)}function lW(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function kv(e){lW([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function cW(e){return Bo.WS.indexOf(e)>-1?"sheet":e==Bo.CS?"chart":e==Bo.DS?"dialog":e==Bo.MS?"macro":e&&e.length?e:"sheet"}function uW(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,cW(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function fW(e,t,r,n,s,a,i,o,l,c,f,d){try{a[n]=Rc(Sn(e,r,!0),t);var m=Zt(e,t),p;switch(o){case"sheet":p=xB(m,t,s,l,a[n],c,f,d);break;case"chart":if(p=vB(m,t,s,l,a[n],c,f,d),!p||!p["!drawel"])break;var x=fc(p["!drawel"].Target,t),g=Gp(x),w=gU(Sn(e,x,!0),Rc(Sn(e,g,!0),x)),k=fc(w,x),E=Gp(k);p=eB(Sn(e,k,!0),k,l,Rc(Sn(e,E,!0),k),c,p);break;case"macro":p=yB(m,t,s,l,a[n],c,f,d);break;case"dialog":p=_B(m,t,s,l,a[n],c,f,d);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var y=[];a&&a[n]&&Us(a[n]).forEach(function(I){var O="";if(a[n][I].Type==Bo.CMNT){O=fc(a[n][I].Target,t);var F=kB(Zt(e,O,!0),O,l);if(!F||!F.length)return;Hw(p,F,!1)}a[n][I].Type==Bo.TCMNT&&(O=fc(a[n][I].Target,t),y=y.concat(vU(Zt(e,O,!0),l)))}),y&&y.length&&Hw(p,y,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function Ln(e){return e.charAt(0)=="/"?e.slice(1):e}function hW(e,t){if(bA(),t=t||{},kv(t),Un(e,"META-INF/manifest.xml")||Un(e,"objectdata.xml"))return nE(e,t);if(Un(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof gm<"u"){if(e.FileIndex)return gm(e);var r=st.utils.cfb_new();return vw(e).forEach(function(ae){dj(r,ae,hj(e,ae))}),gm(r)}throw new Error("Unsupported NUMBERS file")}if(!Un(e,"[Content_Types].xml"))throw Un(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Un(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=vw(e),s=l8(Sn(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Zt(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Zt(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(Fc=[],s.sst)try{Fc=TB(Zt(e,Ln(s.sst)),s.sst,t)}catch(ae){if(t.WTF)throw ae}t.cellStyles&&s.themes.length&&(l=EB(Sn(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(c=wB(Zt(e,Ln(s.style)),s.style,l,t))}s.links.map(function(ae){try{var ee=Rc(Sn(e,Gp(Ln(ae))),ae);return AB(Zt(e,Ln(ae)),ee,ae,t)}catch{}});var f=gB(Zt(e,Ln(s.workbooks[0])),s.workbooks[0],t),d={},m="";s.coreprops.length&&(m=Zt(e,Ln(s.coreprops[0]),!0),m&&(d=aI(m)),s.extprops.length!==0&&(m=Zt(e,Ln(s.extprops[0]),!0),m&&d8(m,d,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=Sn(e,Ln(s.custprops[0]),!0),m&&(p=p8(m,t)));var x={};if((t.bookSheets||t.bookProps)&&(f.Sheets?i=f.Sheets.map(function(ee){return ee.name}):d.Worksheets&&d.SheetNames.length>0&&(i=d.SheetNames),t.bookProps&&(x.Props=d,x.Custprops=p),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var g={};t.bookDeps&&s.calcchain&&(g=SB(Zt(e,Ln(s.calcchain)),s.calcchain));var w=0,k={},E,y;{var I=f.Sheets;d.Worksheets=I.length,d.SheetNames=[];for(var O=0;O!=I.length;++O)d.SheetNames[O]=I[O].name}var F=a?"bin":"xml",v=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,v+1)+"_rels/"+s.workbooks[0].slice(v+1)+".rels").replace(/^\//,"");Un(e,T)||(T="xl/_rels/workbook."+F+".rels");var S=Rc(Sn(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=IB(Zt(e,Ln(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=yU(Zt(e,Ln(s.people[0])),t)),S&&(S=uW(S,f.Sheets));var C=Zt(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(w=0;w!=d.Worksheets;++w){var P="sheet";if(S&&S[w]?(E="xl/"+S[w][1].replace(/[\/]?xl\//,""),Un(e,E)||(E=S[w][1]),Un(e,E)||(E=T.replace(/_rels\/.*$/,"")+S[w][1]),P=S[w][2]):(E="xl/worksheets/sheet"+(w+1-C)+"."+F,E=E.replace(/sheet0\./,"sheet.")),y=E.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(w!=t.sheets)continue e;break;case"string":if(d.SheetNames[w].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var b=!1,R=0;R!=t.sheets.length;++R)typeof t.sheets[R]=="number"&&t.sheets[R]==w&&(b=1),typeof t.sheets[R]=="string"&&t.sheets[R].toLowerCase()==d.SheetNames[w].toLowerCase()&&(b=1);if(!b)continue e}}fW(e,E,y,d.SheetNames[w],w,k,i,P,t,f,l,c)}return x={Directory:s,Workbook:f,Props:d,Custprops:p,Deps:g,Sheets:i,SheetNames:d.SheetNames,Strings:Fc,Styles:c,Themes:l,SSF:Ar(ze)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(ae,ee){ae=ae.replace(/^Root Entry[\/]/,""),x.keys.push(ae),x.files[ae]=e.FileIndex[ee]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=Zt(e,Ln(s.vba[0]),!0):s.defaults&&s.defaults.bin===TU&&(x.vbaraw=Zt(e,"xl/vbaProject.bin",!0))),x}function dW(e,t){var r=t||{},n="Workbook",s=st.find(e,n);try{if(n="/!DataSpaces/Version",s=st.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(a9(s.content),n="/!DataSpaces/DataSpaceMap",s=st.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=o9(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=st.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=l9(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=st.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);u9(s.content)}catch{}if(n="/EncryptionInfo",s=st.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=f9(s.content);if(n="/EncryptedPackage",s=st.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Sv(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Rn(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function mW(e,t){return st.find(e,"EncryptedPackage")?dW(e,t):$I(e,t)}function pW(e,t){var r,n=e,s=t||{};return s.type||(s.type=et&&Buffer.isBuffer(e)?"buffer":"base64"),r=MA(n,s),hW(r,s)}function KI(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Yp(e.slice(r),t);default:break e}return xu.to_workbook(e,t)}function gW(e,t){var r="",n=Sv(e,t);switch(t.type){case"base64":r=Rn(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=to(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=kt(r)),t.type="binary",KI(r,t)}function xW(e,t){var r=e;return t.type=="base64"&&(r=Rn(r)),r=du.utils.decode(1200,r.slice(2),"str"),t.type="binary",KI(r,t)}function vW(e){return e.match(/[^\x00-\x7F]/)?hc(e):e}function xm(e,t,r,n){return n?(r.type="string",xu.to_workbook(e,r)):xu.to_workbook(t,r)}function wd(e,t){vA();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return wd(new Uint8Array(e),(r=Ar(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),rl={},r.dateNF&&(rl.dateNF=r.dateNF),r.type||(r.type=et&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=et?"buffer":"binary",n=aj(e),typeof Uint8Array<"u"&&!et&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=vW(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ar(r),r.type="array",wd(nv(n),r)}switch((s=Sv(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return mW(st.read(n,r),r);break;case 9:if(s[1]<=8)return $I(n,r);break;case 60:return Yp(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return G5(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return z5.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?pW(n,r):xm(e,n,r,a);case 239:return s[3]===60?Yp(n,r):xm(e,n,r,a);case 255:if(s[1]===254)return xW(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Dc.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Dc.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return zw.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return T9.to_workbook(n,r);break;case 10:case 13:case 32:return gW(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return W5.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?zw.to_workbook(n,r):xm(e,n,r,a)}function yW(e,t,r,n,s,a,i,o){var l=Ir(r),c=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var x=i?e[r][p]:e[n[p]+l];if(x===void 0||x.t===void 0){if(c===void 0)continue;a[p]!=null&&(m[a[p]]=c);continue}var g=x.v;switch(x.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[p]!=null){if(g==null)if(x.t=="e"&&g===null)m[a[p]]=null;else if(c!==void 0)m[a[p]]=c;else if(f&&g===null)m[a[p]]=null;else continue;else m[a[p]]=f&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?g:Ta(x,g,o);g!=null&&(d=!1)}}return{row:m,isempty:d}}function Zp(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},f=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof f){case"string":l=Ht(f);break;case"number":l=Ht(e["!ref"]),l.s.r=f;break;default:l=f}n>0&&(s=0);var d=Ir(l.s.r),m=[],p=[],x=0,g=0,w=Array.isArray(e),k=l.s.r,E=0,y={};w&&!e[k]&&(e[k]=[]);var I=c.skipHidden&&e["!cols"]||[],O=c.skipHidden&&e["!rows"]||[];for(E=l.s.c;E<=l.e.c;++E)if(!(I[E]||{}).hidden)switch(m[E]=lr(E),r=w?e[k][E]:e[m[E]+d],n){case 1:a[E]=E-l.s.c;break;case 2:a[E]=m[E];break;case 3:a[E]=c.header[E-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=Ta(r,null,c),g=y[i]||0,!g)y[i]=1;else{do o=i+"_"+g++;while(y[o]);y[i]=g,y[o]=1}a[E]=o}for(k=l.s.r+s;k<=l.e.r;++k)if(!(O[k]||{}).hidden){var F=yW(e,l,k,m,n,a,w,c);(F.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[x++]=F.row)}return p.length=x,p}var oE=/"/g;function _W(e,t,r,n,s,a,i,o){for(var l=!0,c=[],f="",d=Ir(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=o.dense?(e[r]||[])[m]:e[n[m]+d];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(o.rawNumbers&&p.t=="n"?p.v:Ta(p,null,o));for(var x=0,g=0;x!==f.length;++x)if((g=f.charCodeAt(x))===s||g===a||g===34||o.forceQuotes){f='"'+f.replace(oE,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(oE,'""')+'"')):f="";c.push(f)}return o.blankrows===!1&&l?null:c.join(i)}function qI(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ht(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),f="",d=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(m[x]||{}).hidden||(d[x]=lr(x));for(var g=0,w=s.s.r;w<=s.e.r;++w)(p[w]||{}).hidden||(f=_W(e,s,w,d,i,l,a,n),f!=null&&(n.strip&&(f=f.replace(c,"")),(f||n.blankrows!==!1)&&r.push((g++?o:"")+f)));return delete n.dense,r.join("")}function wW(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=qI(e,t);return r}function EW(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ht(e["!ref"]),a="",i=[],o,l=[],c=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=lr(o);for(var f=s.s.r;f<=s.e.r;++f)for(a=Ir(f),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=c?(e[f]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function YI(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Qr(n.origin):n.origin;i=l.r,o=l.c}var c,f={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var d=Ht(a["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),i==-1&&(i=d.e.r+1,f.e.r=i+t.length-1+s)}else i==-1&&(i=0,f.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(g,w){Us(g).forEach(function(k){(p=m.indexOf(k))==-1&&(m[p=m.length]=k);var E=g[k],y="z",I="",O=We({c:o+p,r:i+w+s});c=wu(a,O),E&&typeof E=="object"&&!(E instanceof Date)?a[O]=E:(typeof E=="number"?y="n":typeof E=="boolean"?y="b":typeof E=="string"?y="s":E instanceof Date?(y="d",n.cellDates||(y="n",E=tn(E)),I=n.dateNF||ze[14]):E===null&&n.nullError&&(y="e",E=0),c?(c.t=y,c.v=E,delete c.w,delete c.R,I&&(c.z=I)):a[O]=c={t:y,v:E},I&&(c.z=I))})}),f.e.c=Math.max(f.e.c,o+m.length-1);var x=Ir(i);if(s)for(p=0;p<m.length;++p)a[lr(p+o)+x]={t:"s",v:m[p]};return a["!ref"]=at(f),a}function TW(e,t){return YI(null,e,t)}function wu(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Qr(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?wu(e,We(t)):wu(e,We({r:t,c:r||0}))}function kW(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Av(){return{SheetNames:[],Sheets:{}}}function Iv(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(lB(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function SW(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=kW(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function AW(e,t){return e.z=t,e}function XI(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function IW(e,t,r){return XI(e,"#"+t,r)}function NW(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function CW(e,t,r,n){for(var s=typeof t!="string"?t:Ht(t),a=typeof t=="string"?t:at(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=wu(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return e}var QI={encode_col:lr,encode_row:Ir,encode_cell:We,encode_range:at,decode_col:hv,decode_row:fv,split_cell:Bj,decode_cell:Qr,decode_range:Rl,format_cell:Ta,sheet_add_aoa:eI,sheet_add_json:YI,sheet_add_dom:zI,aoa_to_sheet:Pl,json_to_sheet:TW,table_to_sheet:HI,table_to_book:GB,sheet_to_csv:qI,sheet_to_txt:wW,sheet_to_json:Zp,sheet_to_html:HB,sheet_to_formulae:EW,sheet_to_row_object_array:Zp,sheet_get_cell:wu,book_new:Av,book_append_sheet:Iv,book_set_sheet_visibility:SW,cell_set_number_format:AW,cell_set_hyperlink:XI,cell_set_internal_link:IW,cell_add_comment:NW,sheet_set_array_formula:CW,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const bW=({omdbApiKey:e,userId:t,onDone:r})=>{const[n,s]=U.useState(null),[a,i]=U.useState([]),[o,l]=U.useState([]),[c,f]=U.useState("upload"),[d,m]=U.useState(0),[p,x]=U.useState(null),[g,w]=U.useState(0),[k,E]=U.useState(!1),[y,I]=U.useState(null),[O,F]=U.useState([]),[v,T]=U.useState(null),S=o.filter(ee=>ee.selected&&ee.tmdbMatch).length,C=ee=>{var q;const fe=(q=ee.target.files)==null?void 0:q[0];if(!fe)return;s(fe);const ue=new FileReader;ue.onload=G=>{var K;const Z=wd((K=G.target)==null?void 0:K.result,{type:"binary"}),ce=Z.Sheets[Z.SheetNames[0]],Y=QI.sheet_to_json(ce).map(B=>({title:B.title||B.Title||B.name||B.Name||"",imdbId:B.imdb||B.IMDB||B.Imdb||B.imdbId||B.imdbID||"",releaseDate:B.year||B.Year||B.releaseDate||B.ReleaseDate||B.release_date||"",watched:B.watched||B.Watched||!1,rating:B.rating||B.Rating||null,review:B.review||B.Review||B.notes||B.Notes||""})).filter(B=>B.title);i(Y)},ue.readAsBinaryString(fe)},P=async()=>{if(!a.length||!e){T("Missing data or OMDb key");return}try{E(!0),T(null),l([]),m(0),x(null);const ee=[],fe=Rt(Me,"movies");for(let ue=0;ue<a.length;ue++){const q=a[ue];x(q.title||null);try{let G=null;if(q.imdbId)G=await ii(q.imdbId,e);else{const Z=`${q.title} ${q.releaseDate||""}`.trim();let ce=Z||q.title,j=[];try{j=await Bi(ce,e)}catch{j=[]}if(!j.length&&Z&&q.title&&Z!==q.title){ce=q.title;try{j=await Bi(ce,e)}catch{j=[]}}if(!j.length){ee.push({excelData:q,tmdbMatch:null,confidence:0,status:"unmatched",userMovieExists:!1,selected:!1});continue}G=await ii(j[0].imdbID,e)}if(!G)ee.push({excelData:q,tmdbMatch:null,confidence:0,status:"unmatched",userMovieExists:!1,selected:!1});else{const Z=cd(q,G),ce=await $t(Cn(fe,Zr("imdbId","==",G.imdbID)));let j,Y=!1;ce.empty||(j=ce.docs[0].id,Y=!!await ld(t,j)),ee.push({excelData:q,tmdbMatch:G,confidence:Z,status:Y?"duplicate":Z>=70?"matched":"manual",userMovieExists:Y,movieId:j,selected:!Y})}}catch{ee.push({excelData:q,tmdbMatch:null,confidence:0,status:"unmatched",userMovieExists:!1,selected:!1})}m(Math.round((ue+1)/a.length*100))}l(ee),f("review")}finally{E(!1),x(null)}},b=async(ee,fe)=>{try{E(!0);const ue=o[ee],q=fe||ue.excelData.title,G=await Bi(q,e);I(ee),F(G)}finally{E(!1)}},R=async ee=>{if(y!=null){E(!0);try{const fe=await ii(ee.imdbID,e),ue=cd(o[y].excelData,fe),q=Rt(Me,"movies"),G=await $t(Cn(q,Zr("imdbId","==",fe.imdbID)));let Z,ce=!1;G.empty||(Z=G.docs[0].id,ce=!!await ld(t,Z)),l(j=>{const Y=[...j],K=Y[y];return Y[y]={...K,tmdbMatch:fe,confidence:ue,status:ce?"duplicate":"matched",userMovieExists:ce,movieId:Z,selected:!ce},Y}),I(null),F([])}finally{E(!1)}}},ae=async()=>{const ee=o.filter(ue=>ue.selected&&ue.tmdbMatch);if(!ee.length)return;f("import"),w(0);const fe=Rt(Me,"movies");for(let ue=0;ue<ee.length;ue++){const q=ee[ue];try{let G=q.movieId;G||(G=(await zu(fe,{...hu(q.tmdbMatch),addedAt:new Date,updatedAt:new Date})).id),await Gu(t,G,{userId:t,movieId:G,watched:q.excelData.watched||!1,rating:q.excelData.rating||null,review:q.excelData.review||"",favorite:!1})}catch{}w(Math.round((ue+1)/ee.length*100))}r==null||r()};return u.jsxs("div",{className:"space-y-6",children:[c==="upload"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"file",accept:".xlsx,.xls",className:"file-input file-input-bordered w-full",onChange:C}),!!a.length&&u.jsxs("div",{className:"text-sm opacity-80",children:[a.length," rows detected"]}),u.jsx("button",{className:"btn btn-primary",onClick:P,disabled:!e||!a.length||k,children:k?u.jsx("span",{className:"loading loading-spinner loading-sm"}):"Scan & Match"}),k&&!!d&&d<100&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"text-sm",children:["Scanning ",d,"%"]}),u.jsx("progress",{className:"progress w-full",value:d,max:100}),p&&u.jsxs("div",{className:"text-xs opacity-70 truncate",children:["Current: ",p]})]})]}),c==="review"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{className:"font-bold",children:"Review Matches"}),u.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>f("upload"),children:"Back"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"table table-zebra w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{children:"Excel"}),u.jsx("th",{children:"Match"}),u.jsx("th",{children:"Confidence"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Action"})]})}),u.jsx("tbody",{children:o.map((ee,fe)=>u.jsxs("tr",{className:ee.userMovieExists?"bg-warning bg-opacity-20":"",children:[u.jsx("td",{children:u.jsx("input",{type:"checkbox",className:"checkbox",checked:ee.selected,disabled:!ee.tmdbMatch,onChange:()=>{const ue=[...o];ue[fe].selected=!ue[fe].selected,l(ue)}})}),u.jsxs("td",{children:[u.jsx("div",{className:"font-semibold",children:ee.excelData.title}),u.jsx("div",{className:"text-xs opacity-70",children:ee.excelData.releaseDate||"-"})]}),u.jsx("td",{children:ee.tmdbMatch?u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-18",children:dn(ee.tmdbMatch)?u.jsx("img",{src:dn(ee.tmdbMatch),className:"object-cover"}):u.jsx("div",{className:"w-full h-full bg-base-200"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold",children:ee.tmdbMatch.Title}),u.jsx("div",{className:"text-xs opacity-70",children:ee.tmdbMatch.Year})]})]}):u.jsx("span",{className:"text-error",children:"No match"})}),u.jsx("td",{children:ee.tmdbMatch?u.jsxs("div",{className:"flex items-center",children:[u.jsx("progress",{className:`progress ${ee.confidence>=70?"progress-success":ee.confidence>=40?"progress-warning":"progress-error"}`,value:ee.confidence,max:100}),u.jsxs("span",{className:"ml-2",children:[ee.confidence,"%"]})]}):"-"}),u.jsxs("td",{children:[ee.status==="matched"&&u.jsx("div",{className:"badge badge-success",children:"Matched"}),ee.status==="unmatched"&&u.jsx("div",{className:"badge badge-error",children:"Unmatched"}),ee.status==="duplicate"&&u.jsx("div",{className:"badge badge-warning",children:"Duplicate"}),ee.status==="manual"&&u.jsx("div",{className:"badge badge-info",children:"Manual"})]}),u.jsx("td",{children:u.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>b(fe),children:u.jsx("i",{className:"fas fa-search"})})})]},fe))})]})}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{className:"btn btn-primary",onClick:ae,disabled:!S||k,children:["Import ",S," Movies"]})}),!!d&&d<100&&u.jsx("div",{children:u.jsx("progress",{className:"progress w-full",value:d,max:100})})]}),c==="import"&&u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"font-bold",children:"Importing"}),u.jsx("progress",{className:"progress w-full",value:g,max:100})]}),y!==null&&u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60",children:u.jsxs("div",{className:"bg-base-100 rounded-box shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden p-6",children:[u.jsxs("h3",{className:"font-bold text-lg mb-4",children:["Manual match: ",o[y].excelData.title]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-6",children:[u.jsx("input",{type:"text",className:"input input-bordered flex-1",placeholder:"Search for a movie...",defaultValue:o[y].excelData.title,onKeyDown:ee=>ee.key==="Enter"&&b(y,ee.target.value)}),u.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:()=>{var ee;return b(y,(ee=document.querySelector("[data-manual-search-input]"))==null?void 0:ee.value)},disabled:k,children:k?u.jsx("span",{className:"loading loading-spinner loading-sm"}):u.jsx("i",{className:"fas fa-search"})})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:O.map(ee=>u.jsxs("div",{className:"card bg-base-100 shadow cursor-pointer",onClick:()=>R(ee),children:[u.jsx("figure",{children:dn(ee)?u.jsx("img",{src:dn(ee)}):u.jsx("div",{className:"h-48 w-full bg-base-200"})}),u.jsxs("div",{className:"card-body p-3",children:[u.jsx("div",{className:"text-sm font-semibold",children:ee.Title}),u.jsx("div",{className:"text-xs opacity-70",children:ee.Year})]})]},ee.imdbID))}),u.jsx("div",{className:"flex justify-end mt-6",children:u.jsx("button",{className:"btn",onClick:()=>{I(null),F([])},children:"Close"})})]})}),v&&u.jsx("div",{className:"alert alert-error",children:v})]})},RW=({selected:e,showDetails:t,loading:r,onToggleDetails:n,onAdd:s,onClose:a})=>{var i,o,l,c,f;return e?u.jsx("dialog",{className:"modal modal-open",children:u.jsxs("div",{className:"modal-box bg-xmas-card",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("div",{className:"w-24 shrink-0",children:dn(e)?u.jsx("img",{src:dn(e),alt:e.title,className:"w-full rounded-lg"}):u.jsx("div",{className:"w-full h-36 bg-base-200 flex items-center justify-center rounded-lg",children:u.jsx("i",{className:"fas fa-film text-2xl opacity-50"})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-xl font-bold mb-1",children:e.title}),u.jsx("p",{className:"text-sm opacity-80 mb-1",children:(i=e.release_date)==null?void 0:i.slice(0,4)}),!t&&e.runtime&&u.jsxs("p",{className:"text-sm opacity-80 mb-1",children:["Runtime: ",e.runtime," min"]}),t&&u.jsxs("div",{className:"mt-3 space-y-2 text-sm opacity-90 max-h-48 overflow-auto pr-1",children:[e.overview&&u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold mb-1",children:"Overview"}),u.jsx("p",{children:e.overview})]}),e.runtime&&u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Runtime:"})," ",e.runtime," min"]}),e.genres&&e.genres.length>0&&u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Genres:"})," ",e.genres.map(d=>typeof d=="string"?d:d.name).join(", ")]}),(((l=(o=e.credits)==null?void 0:o.cast)==null?void 0:l.length)||((c=e.cast)==null?void 0:c.length))&&u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Top cast:"})," ",((f=e.credits)!=null&&f.cast&&e.credits.cast.length>0?e.credits.cast.map(d=>d.name):e.cast).slice(0,5).join(", ")]})]})]})]}),u.jsx("div",{className:"mt-4 space-y-3",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsx("div",{children:(e.overview||e.runtime||e.genres||e.credits||e.cast)&&u.jsxs("button",{type:"button",className:"btn btn-outline btn-sm sm:btn-md gap-2",onClick:n,disabled:r,children:[u.jsx("i",{className:"fas fa-info-circle"}),t?"Hide details":"View details"]})}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsxs("button",{className:"btn btn-primary btn-sm sm:btn-md",onClick:s,disabled:r,children:[r?u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}):u.jsx("i",{className:"fas fa-plus mr-2"}),"Add Movie"]}),u.jsx("button",{className:"btn btn-outline btn-sm sm:btn-md",onClick:a,disabled:r,children:"Cancel"})]})]})}),u.jsx("form",{method:"dialog",className:"modal-backdrop",onClick:a,children:u.jsx("button",{children:"close"})})]})}):null},PW=()=>{const{currentUser:e,userProfile:t}=yn(),[r,n]=U.useState(!1),[s,a]=U.useState(""),[i,o]=U.useState(""),[l,c]=U.useState(""),[f,d]=U.useState(""),[m,p]=U.useState(""),[x,g]=U.useState(!1),[w,k]=U.useState(null),[E,y]=U.useState(null);U.useEffect(()=>{i&&!l&&c(`https://www.themoviedb.org/movie/${i}`)},[i,l]);const I=()=>{a(""),o(""),c(""),d(""),p(""),k(null)},O=()=>{if(k(null),y(null),!e){k("Please sign in to request a movie.");return}n(!0)},F=()=>{x||(n(!1),I())},v=async T=>{if(T.preventDefault(),!e){k("You must be signed in to submit a request.");return}if(!s.trim()){k("Please enter a movie title.");return}try{g(!0),k(null),await zu(Rt(Me,"Requests"),{title:s.trim(),tmdbId:i?Number(i):null,tmdbUrl:l.trim()||null,year:f.trim()||null,notes:m.trim()||null,userId:e.uid,userDisplayName:(t==null?void 0:t.displayName)||e.displayName||null,status:"pending",createdAt:new Date}),y("Request submitted! Thank you."),I(),n(!1)}catch(S){console.error("Failed to submit movie request:",S),k((S==null?void 0:S.message)||"Failed to submit request. Please try again.")}finally{g(!1)}};return u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",className:"btn btn-outline btn-sm sm:btn-md mb-4",onClick:O,children:[u.jsx("i",{className:"fas fa-gift mr-2"}),"Request a movie"]}),w&&!r&&u.jsxs("div",{className:"alert alert-warning mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),u.jsx("span",{children:w})]}),E&&!r&&u.jsxs("div",{className:"alert alert-success mb-4",children:[u.jsx("i",{className:"fas fa-check-circle mr-2"}),u.jsx("span",{children:E})]}),r&&u.jsx("dialog",{className:"modal modal-open",children:u.jsxs("div",{className:"modal-box bg-xmas-card max-w-lg",children:[u.jsx("h2",{className:"font-christmas text-2xl mb-2 text-xmas-gold",children:"Request a Movie"}),u.jsx("p",{className:"text-sm mb-4 opacity-80",children:"Can't find a movie in the catalogue? Tell us about it so we can add it."}),w&&u.jsxs("div",{className:"alert alert-error mb-3",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:w})]}),u.jsxs("form",{className:"space-y-3",onSubmit:v,children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Movie title *"})}),u.jsx("input",{type:"text",className:"input input-bordered w-full",value:s,onChange:T=>a(T.target.value),required:!0,disabled:x,placeholder:"e.g. The Grinch"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"TMDB ID (optional)"})}),u.jsx("input",{type:"number",className:"input input-bordered w-full",value:i,onChange:T=>o(T.target.value),disabled:x,placeholder:"e.g. 8871"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Release year (optional)"})}),u.jsx("input",{type:"number",className:"input input-bordered w-full",value:f,onChange:T=>d(T.target.value),disabled:x,placeholder:"e.g. 2000"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"TMDB URL (optional)"})}),u.jsx("input",{type:"url",className:"input input-bordered w-full",value:l,onChange:T=>c(T.target.value),disabled:x,placeholder:"https://www.themoviedb.org/movie/..."}),u.jsx("p",{className:"text-xs opacity-70 mt-1",children:"If you provide a TMDB ID, the URL will be auto-filled. You can also paste a URL directly."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"Anything else that helps? (optional)"})}),u.jsx("textarea",{className:"textarea textarea-bordered w-full",rows:3,value:m,onChange:T=>p(T.target.value),disabled:x,placeholder:"Actors, streaming service, or where you heard about it."})]}),u.jsxs("div",{className:"modal-action flex justify-end gap-2",children:[u.jsx("button",{type:"button",className:"btn btn-ghost",onClick:F,disabled:x,children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:x,children:[x&&u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Submit request"]})]})]}),u.jsx("form",{method:"dialog",className:"modal-backdrop",onClick:F,children:u.jsx("button",{children:"close"})})]})})]})},DW=()=>{const{currentUser:e,userProfile:t}=yn(),{isAdmin:r}=Hu(),[n,s]=U.useState(""),[a,i]=U.useState("local"),[o,l]=U.useState(null),[c,f]=U.useState(!1),[d,m]=U.useState(!1),[p,x]=U.useState(null),[g,w]=U.useState([]);U.useEffect(()=>{r&&(t!=null&&t.omdbApiKey)?s(t.omdbApiKey):s("")},[t,r]),U.useEffect(()=>{(async()=>{if(!e){w([]);return}try{const{userMovies:F}=await Ku(e.uid);w(Object.keys(F))}catch(F){console.error("Error loading user movies for import page:",F)}})()},[e]);const k=O=>{x(null),f(!1),l(O)},E=async O=>{if(!r){x({type:"error",text:"Only admins can import directly from OMDb."});return}if(!n){x({type:"error",text:"OMDb key required to fetch details."});return}try{m(!0),x(null),f(!1);const F=await ii(O.imdbID,n);l(F)}catch(F){x({type:"error",text:(F==null?void 0:F.message)??"Failed to fetch details"})}finally{m(!1)}},y=async()=>{if(!(!e||!o))try{m(!0),x(null);const O=Rt(Me,"movies");let F;if(o.firestoreId)F=o.firestoreId;else{const v=o.imdbID||o.imdbId;if(!v){x({type:"error",text:"Cannot add movie: missing IMDb id."}),m(!1);return}const T=await $t(Cn(O,Zr("imdbId","==",v)));if(T.empty){if(!r){x({type:"error",text:"Only admins can add new catalogue movies."}),m(!1);return}F=(await zu(O,{...hu(o),addedAt:new Date,updatedAt:new Date})).id}else F=T.docs[0].id}await Gu(e.uid,F,{userId:e.uid,movieId:F,watched:!1,favorite:!1}),w(v=>v.includes(F)?v:[...v,F]),hA(),x({type:"success",text:"Added to your collection!"}),f(!1),l(null)}catch(O){x({type:"error",text:(O==null?void 0:O.message)??"Failed to add movie"})}finally{m(!1)}},I=()=>{d||l(null)};return u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("div",{className:"mb-4",children:u.jsxs(Ke,{to:"/movies",className:"btn btn-primary btn-sm sm:btn-md",children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Movies"]})}),u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line mb-6",children:"Add Movies"}),p&&u.jsxs("div",{className:`alert ${p.type==="error"?"alert-error":"alert-success"} mb-4`,children:[u.jsx("i",{className:`fas ${p.type==="error"?"fa-exclamation-circle":"fa-check-circle"} mr-2`}),u.jsx("span",{children:p.text})]}),u.jsx("div",{className:"mb-4",children:u.jsx(PW,{})}),r&&u.jsxs("div",{className:"tabs tabs-boxed mb-6",children:[u.jsxs("button",{className:`tab ${a==="local"?"tab-active":""}`,onClick:()=>i("local"),children:[u.jsx("i",{className:"fas fa-database mr-2"}),"Local"]}),u.jsxs("button",{className:`tab ${a==="tmdb"?"tab-active":""}`,onClick:()=>i("tmdb"),children:[u.jsx("i",{className:"fas fa-search mr-2"}),"OMDb"]}),u.jsxs("button",{className:`tab ${a==="excel"?"tab-active":""}`,onClick:()=>i("excel"),children:[u.jsx("i",{className:"fas fa-file-excel mr-2"}),"Excel"]})]}),a==="local"&&u.jsx("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg",children:u.jsx(A6,{onSelect:k,userMovieIds:g})}),a==="tmdb"&&r&&u.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg",children:[!n&&u.jsxs("div",{className:"alert alert-warning mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),u.jsx("span",{children:"Set your OMDb API key in Profile to search OMDb."})]}),u.jsx(N6,{omdbApiKey:n,onSelect:E})]}),a==="excel"&&r&&u.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg",children:[!n&&u.jsxs("div",{className:"alert alert-warning mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),u.jsx("span",{children:"OMDb key required for matching."})]}),e?u.jsx(bW,{omdbApiKey:n,userId:e.uid,onDone:()=>i("local")}):u.jsx("div",{className:"alert alert-info",children:"Log in to import from Excel."})]}),o&&u.jsx(RW,{selected:o,showDetails:c,loading:d,onToggleDetails:()=>f(O=>!O),onAdd:y,onClose:I})]})},FW=()=>{var w,k;const{currentUser:e}=yn(),[t,r]=U.useState([]),[n,s]=U.useState({}),[a,i]=U.useState(!0),[o,l]=U.useState(null),[c,f]=U.useState(null),[d,m]=U.useState(!1),[p,x]=U.useState(!1);U.useEffect(()=>{(async()=>{if(e)try{i(!0);const{userMovies:y,movies:I}=await Ku(e.uid);s(y),r(I)}catch(y){console.error("Error fetching movies:",y),l("Failed to load movies")}finally{i(!1)}})()},[e]);const g=()=>{if(t.length===0)return;x(!0),f(null);const E=t.filter(F=>{const v=n[F.id];return d||!v||!v.watched});if(E.length===0){l("No eligible movies found. Try including watched movies."),x(!1);return}let y=0;const I=25,O=setInterval(()=>{const F=Math.floor(Math.random()*E.length);f(E[F]),y++,y>=I&&(clearInterval(O),x(!1))},100)};return a?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("div",{className:"mb-4",children:u.jsxs(Ke,{to:"/movies",className:"btn btn-primary btn-sm sm:btn-md",children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Movies"]})}),u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line mb-6",children:"Christmas Movie Picker"}),o&&u.jsxs("div",{className:"alert alert-error mb-6",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:o})]}),t.length===0?u.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[u.jsx("h3",{className:"text-xl mb-4",children:"No movies in your collection"}),u.jsx("p",{className:"mb-4",children:"Add some Christmas movies to use the random movie picker!"}),u.jsxs(Ke,{to:"/import",className:"btn btn-primary",children:[u.jsx("i",{className:"fas fa-file-import mr-2"})," Import Movies"]})]}):u.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg shadow-lg",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("p",{className:"mb-4",children:"Can't decide what Christmas movie to watch? Let us pick one for you!"}),u.jsx("div",{className:"form-control mb-6",children:u.jsxs("label",{className:"label cursor-pointer justify-center",children:[u.jsx("span",{className:"label-text mr-2",children:"Include watched movies"}),u.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:d,onChange:()=>m(!d)})]})}),u.jsx("button",{className:"btn btn-primary btn-lg",onClick:g,disabled:p,children:p?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading loading-spinner loading-md mr-2"}),"Picking a movie..."]}):u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-random mr-2"}),"Pick a Random Movie"]})})]}),c&&u.jsx("div",{className:"mt-8 flex flex-col items-center",children:u.jsx("div",{className:"w-full max-w-md",children:u.jsxs("div",{className:"card bg-base-100 shadow-xl overflow-hidden",children:[u.jsxs("figure",{className:"relative",children:[c.posterUrl?u.jsx("img",{src:c.posterUrl,alt:c.title,className:"w-full object-contain",style:{aspectRatio:"2/3",maxHeight:"500px"},loading:"lazy"}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3",maxHeight:"500px"},children:u.jsx("i",{className:"fas fa-film text-6xl text-gray-500"})}),((w=n[c.id])==null?void 0:w.watched)&&u.jsx("div",{className:"absolute top-4 left-4 badge badge-lg badge-success",children:"Already Watched"}),((k=n[c.id])==null?void 0:k.rating)&&u.jsxs("div",{className:"absolute top-4 right-4 badge badge-lg badge-warning",children:[u.jsx("i",{className:"fas fa-star mr-1"}),n[c.id].rating,"/10"]})]}),u.jsxs("div",{className:"card-body",children:[u.jsx("h2",{className:"card-title text-2xl font-christmas",children:c.title}),u.jsx("p",{className:"text-gray-400",children:c.releaseDate&&os(c.releaseDate)}),u.jsxs("div",{className:"card-actions justify-end mt-4",children:[u.jsx(Ke,{to:ev(c.title,c.id),className:"btn btn-primary",children:"View Details"}),u.jsx("button",{className:"btn btn-outline",onClick:g,disabled:p,children:"Pick Another"})]})]})]})})})]})]})},OW=(e,t)=>{const r=["Title","TMDB ID","Release Year","Watched","Watched Date","Rating","Review","Favorite","Date Added"].join(","),n=e.map(s=>{const a=t[s.id];if(!a)return null;const i=s.releaseDate?s.releaseDate.substring(0,4):"",o=a.watchedDate?eg(a.watchedDate):"",l=a.addedAt?eg(a.addedAt):"",c=lE(s.title),f=a.review?lE(a.review):"";return[c,s.imdbId||"",i,a.watched?"Yes":"No",o,a.rating!==null&&a.rating!==void 0?a.rating:"",f,a.favorite?"Yes":"No",l].join(",")}).filter(Boolean);return[r,...n].join(`
`)},eg=e=>{if(!(e instanceof Date))try{e&&typeof e.toDate=="function"?e=e.toDate():e=new Date(e)}catch{return""}return e.toISOString().split("T")[0]},lE=e=>e?e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e:"",MW=(e,t,r)=>{const n=document.createElement("a"),s=new Blob([e],{type:r});n.href=URL.createObjectURL(s),n.download=t,n.click(),URL.revokeObjectURL(n.href)},LW=async(e,t,r)=>{const n=OW(e,t),s=`${r.replace(/\s+/g,"_")}_christmas_movies_${eg(new Date)}.csv`;MW(n,s,"text/csv;charset=utf-8;")},jW=async()=>{const e=Rt(Me,"movies"),t=await $t(e);let r=0;const n=t.size;for(const s of t.docs){const a=s.data();if(a.sortTitle)continue;const i=mA(a.title);i!==a.title&&(await Ls(Et(Me,"movies",s.id),{sortTitle:i,updatedAt:new Date}),r++)}return{updated:r,total:n}},UW=()=>{const{currentUser:e}=yn(),[t,r]=U.useState([]),[n,s]=U.useState(!1),[a,i]=U.useState(null),[o,l]=U.useState(null),[c,f]=U.useState(new Set);U.useEffect(()=>{(async()=>{if(e){s(!0),i(null);try{const g=Cn(Rt(Me,"Requests"),Zr("userId","==",e.uid)),k=(await $t(g)).docs.map(E=>{const y=E.data();return{id:E.id,title:y.title,year:y.year??null,status:y.status,tmdbId:y.tmdbId??null,createdAt:y.createdAt,updatedAt:y.updatedAt}});if(r(k),e&&k.length>0){const E=[];for(const y of k){if(y.status!=="fulfilled"||!y.tmdbId)continue;const I=Rt(Me,"movies"),O=Cn(I,Zr("tmdbId","==",y.tmdbId)),F=await $t(O);if(F.empty)continue;const T=F.docs[0].id,S=Et(Me,`users/${e.uid}/movies`,T);(await vn(S)).exists()&&E.push(y.id)}E.length>0&&f(new Set(E))}}catch(g){console.error("Error loading your movie requests:",g),i(g.message||"Failed to load your movie requests")}finally{s(!1)}}})()},[e]);const d=x=>{if(!x)return"";const g=x!=null&&x.toDate?x.toDate():x;try{return new Date(g).toLocaleString()}catch{return""}},m=x=>x==="fulfilled"?"badge badge-success":x==="dismissed"?"badge badge-ghost":"badge badge-warning",p=async x=>{if(e){if(!x.tmdbId){i("This request does not have a TMDB ID to match a movie.");return}try{i(null),l(x.id);const g=Rt(Me,"movies"),w=Cn(g,Zr("tmdbId","==",x.tmdbId)),k=await $t(w);if(k.empty){i("Could not find this movie in the catalogue yet.");return}const y=k.docs[0].id;await Gu(e.uid,y,{userId:e.uid,movieId:y,watched:!1,favorite:!1}),f(I=>new Set(I).add(x.id))}catch(g){console.error("Failed to add movie to your collection:",g),i(g.message||"Failed to add movie to your collection")}finally{l(null)}}};return u.jsxs("div",{className:"mt-8",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"My Movie Requests"}),u.jsx("p",{className:"text-sm opacity-80 mb-4",children:"These are movies you've asked to be added to the catalogue."}),n&&u.jsx("div",{className:"flex justify-center py-4",children:u.jsx("span",{className:"loading loading-spinner loading-md"})}),a&&u.jsxs("div",{className:"alert alert-error mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:a})]}),!n&&!a&&t.length===0&&u.jsx("p",{className:"text-sm opacity-80",children:"You haven't requested any movies yet."}),!n&&!a&&t.length>0&&u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"table table-zebra table-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Title"}),u.jsx("th",{children:"Year"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Last Updated"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:t.map(x=>u.jsxs("tr",{children:[u.jsx("td",{children:x.title}),u.jsx("td",{children:x.year||"-"}),u.jsx("td",{children:u.jsx("span",{className:m(x.status),children:x.status})}),u.jsx("td",{className:"text-xs",children:d(x.updatedAt||x.createdAt)}),u.jsx("td",{children:x.status==="fulfilled"&&x.tmdbId&&(c.has(x.id)?u.jsx("span",{className:"badge badge-success text-xs",children:"In collection"}):u.jsxs("button",{className:"btn btn-xs btn-primary",onClick:()=>p(x),disabled:o===x.id,children:[o===x.id&&u.jsx("span",{className:"loading loading-spinner loading-xs mr-1"}),"Add to my movies"]}))})]},x.id))})]})})]})},VW=()=>{const{currentUser:e,userProfile:t,signOut:r}=yn(),{isAdmin:n}=Hu(),[s,a]=U.useState(!1),[i,o]=U.useState(""),[l,c]=U.useState(""),[f,d]=U.useState(!1),[m,p]=U.useState(!1),[x,g]=U.useState(!1),[w,k]=U.useState(!1),[E,y]=U.useState(null),[I,O]=U.useState(null),[F,v]=U.useState({totalMovies:0,watchedMovies:0,unwatchedMovies:0,averageRating:0,favoriteMovies:0});U.useEffect(()=>{t!=null&&t.omdbApiKey&&o(t.omdbApiKey),t!=null&&t.fanartApiKey&&c(t.fanartApiKey),(async()=>{if(e)try{const R=await dA(e.uid),ae=R.length,ee=R.filter(Z=>Z.watched).length,fe=ae-ee,ue=R.filter(Z=>Z.favorite).length,q=R.filter(Z=>Z.rating!==void 0&&Z.rating!==null),G=q.length>0?q.reduce((Z,ce)=>Z+(ce.rating||0),0)/q.length:0;v({totalMovies:ae,watchedMovies:ee,unwatchedMovies:fe,averageRating:G,favoriteMovies:ue})}catch(R){console.error("Error fetching user stats:",R)}})()},[e,t]);const T=async()=>{if(e)try{p(!0),y(null);const b=Et(Me,"users",e.uid);await Ls(b,{omdbApiKey:i}),O("OMDb API key saved successfully!"),setTimeout(()=>{O(null)},3e3)}catch(b){console.error("Error saving API key:",b),y(b.message||"Failed to save API key")}finally{p(!1)}},S=async()=>{if(e)try{p(!0),y(null);const b=Et(Me,"users",e.uid);await Ls(b,{fanartApiKey:l||null}),O("fanart.tv API key saved successfully!"),setTimeout(()=>{O(null)},3e3)}catch(b){console.error("Error saving fanart.tv API key:",b),y(b.message||"Failed to save fanart.tv API key")}finally{p(!1)}},C=async()=>{try{await r()}catch(b){console.error("Error signing out:",b)}},P=async()=>{if(e)try{g(!0),y(null);const{userMovies:b,movies:R}=await Ku(e.uid);await LW(R,b,t.displayName||"User"),O("Movies exported successfully!"),setTimeout(()=>{O(null)},3e3)}catch(b){console.error("Error exporting movies:",b),y(b.message||"Failed to export movies")}finally{g(!1)}};return!e||!t?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line mb-6",children:"Your Profile"}),E&&u.jsxs("div",{className:"alert alert-error mb-6",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:E})]}),I&&u.jsxs("div",{className:"alert alert-success mb-6",children:[u.jsx("i",{className:"fas fa-check-circle mr-2"}),u.jsx("span",{children:I})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx("div",{className:"md:col-span-1",children:u.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[t.photoURL?u.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-24 h-24 rounded-full mb-4"}):u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 flex items-center justify-center mb-4",children:u.jsx("i",{className:"fas fa-user text-4xl text-gray-400"})}),u.jsx("h2",{className:"text-xl font-bold",children:t.displayName})]}),u.jsx("div",{className:"divider"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"Your Stats"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsxs("li",{className:"flex justify-between",children:[u.jsx("span",{children:"Total Movies:"}),u.jsx("span",{className:"font-bold",children:F.totalMovies})]}),u.jsxs("li",{className:"flex justify-between",children:[u.jsx("span",{children:"Watched:"}),u.jsx("span",{className:"font-bold",children:F.watchedMovies})]}),u.jsxs("li",{className:"flex justify-between",children:[u.jsx("span",{children:"Unwatched:"}),u.jsx("span",{className:"font-bold",children:F.unwatchedMovies})]}),u.jsxs("li",{className:"flex justify-between",children:[u.jsx("span",{children:"Favorites:"}),u.jsx("span",{className:"font-bold",children:F.favoriteMovies})]}),u.jsxs("li",{className:"flex justify-between",children:[u.jsx("span",{children:"Average Rating:"}),u.jsxs("span",{className:"font-bold",children:[F.averageRating.toFixed(1),"/10"]})]})]})]}),u.jsx("div",{className:"divider"}),u.jsxs("div",{className:"mt-6 space-y-3",children:[u.jsxs("button",{className:"btn btn-outline btn-primary w-full",onClick:P,disabled:x||F.totalMovies===0,children:[x?u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}):u.jsx("i",{className:"fas fa-file-export mr-2"}),"Export Movie Data"]}),u.jsxs("button",{className:"btn btn-outline btn-error w-full",onClick:C,children:[u.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),"Sign Out"]})]})]})}),u.jsx("div",{className:"md:col-span-2",children:u.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Artwork Settings"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"fanart.tv API Key"}),u.jsx("p",{className:"mb-4",children:"If you have a fanart.tv account, you can add your personal API key here to fetch alternative posters for movies in your collection."}),u.jsxs("div",{className:"form-control",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"API Key"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch",children:[u.jsx("input",{type:f?"text":"password",className:"input input-bordered flex-1 h-12 text-lg",value:l,onChange:b=>c(b.target.value),placeholder:"Enter your fanart.tv API key",style:{letterSpacing:f?"normal":"3px"}}),u.jsx("button",{type:"button",className:"btn btn-ghost w-12",onClick:()=>d(b=>!b),children:u.jsx("i",{className:`fas ${f?"fa-eye-slash":"fa-eye"}`})}),u.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:S,disabled:m,children:m?u.jsx("span",{className:"loading loading-spinner loading-sm"}):u.jsx("i",{className:"fas fa-save"})})]})]})]})]}),n&&u.jsxs(u.Fragment,{children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Settings"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"OMDb API Key"}),u.jsx("p",{className:"mb-4",children:"Your OMDb API key is used to fetch movies and other details from the Open Movie Database."}),u.jsxs("div",{className:"form-control",children:[u.jsx("label",{className:"label",children:u.jsx("span",{className:"label-text",children:"API Key"})}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch",children:[u.jsx("input",{type:s?"text":"password",className:"input input-bordered flex-1 h-12 text-lg",value:i,onChange:b=>o(b.target.value),placeholder:"Enter your OMDb API key",style:{letterSpacing:s?"normal":"3px"}}),u.jsx("button",{type:"button",className:"btn btn-ghost w-12",onClick:()=>a(b=>!b),children:u.jsx("i",{className:`fas ${s?"fa-eye-slash":"fa-eye"}`})}),u.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:T,disabled:m,children:m?u.jsx("span",{className:"loading loading-spinner loading-sm"}):u.jsx("i",{className:"fas fa-save"})})]})]})]}),u.jsx("div",{className:"divider"})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"Quick Links"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs(Ke,{to:"/movies",className:"btn btn-outline btn-sm",children:[u.jsx("i",{className:"fas fa-film mr-2"}),"My Movies"]}),u.jsxs(Ke,{to:"/import",className:"btn btn-outline btn-sm",children:[u.jsx("i",{className:"fas fa-file-import mr-2"}),"Add Movies"]}),u.jsxs(Ke,{to:"/random",className:"btn btn-outline btn-sm",children:[u.jsx("i",{className:"fas fa-random mr-2"}),"Random Movie Picker"]}),u.jsxs(Ke,{to:"/achievements",className:"btn btn-outline btn-sm",children:[u.jsx("i",{className:"fas fa-trophy mr-2"}),"Achievements"]})]})]}),u.jsx(UW,{}),n&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"divider"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"Admin Tools"}),u.jsxs(Ke,{to:"/admin",className:"btn btn-primary btn-sm",children:[u.jsx("i",{className:"fas fa-tools mr-2"}),"Open Admin Dashboard"]})]})]})]})})]})]})},BW=({item:e})=>{const[t,r]=Tu.useState(!1);return u.jsxs("div",{className:"rounded-lg p-4 shadow-lg border transition-transform bg-xmas-card "+(e.unlocked?"border-xmas-gold hover:scale-[1.02]":"border-gray-700 opacity-70"),children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx("div",{className:"relative mr-3 w-16 h-16 rounded-full overflow-hidden border border-xmas-gold/60 bg-gray-800 flex items-center justify-center",children:t?u.jsx("span",{className:"text-3xl",children:e.icon}):u.jsx("img",{src:`/achievements/${e.id}.png`,alt:e.name,className:"w-full h-full object-cover",loading:"lazy",onError:()=>r(!0)})}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[e.name,e.unlocked&&u.jsx("span",{className:"badge badge-success badge-sm",children:"Unlocked"})]}),e.unlocked&&e.unlockedAt&&u.jsxs("p",{className:"text-xs text-xmas-text/70 mt-1",children:["Unlocked on"," ",e.unlockedAt.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})]})]})]}),u.jsx("p",{className:"text-sm text-xmas-text mb-3",children:e.unlocked?e.description:e.hint}),!e.unlocked&&u.jsx("p",{className:"text-xs text-xmas-text/60 italic",children:"Locked  keep watching to reveal this badge."})]})},WW=()=>{const{currentUser:e}=yn(),[t,r]=U.useState(!0),[n,s]=U.useState([]);return U.useEffect(()=>{(async()=>{if(e)try{r(!0),await mh(e.uid);const i=Rt(Me,`users/${e.uid}/achievements`),o=await $t(i),l=new Map;o.forEach(f=>{const d=f.data();let m=null;d.unlockedAt instanceof Date?m=d.unlockedAt:d.unlockedAt&&typeof d.unlockedAt.toDate=="function"&&(m=d.unlockedAt.toDate()),l.set(f.id,{unlockedAt:m,seen:d.seen})});const c=Zo.map(f=>{const d=l.get(f.id);return{id:f.id,name:f.name,description:f.description,hint:f.hint,icon:f.icon,unlocked:!!d,unlockedAt:(d==null?void 0:d.unlockedAt)??null}}).sort((f,d)=>{if(f.unlocked!==d.unlocked)return f.unlocked?-1:1;if(f.unlocked&&d.unlocked){const m=f.unlockedAt?f.unlockedAt.getTime():0,p=d.unlockedAt?d.unlockedAt.getTime():0;if(m!==p)return m-p}return f.name.localeCompare(d.name)});s(c)}finally{r(!1)}})()},[e]),e?t?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:u.jsxs("div",{children:[u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line mb-2",children:"Achievements"}),u.jsx("p",{className:"text-sm text-xmas-text/80",children:"Unlock festive badges as you watch, rate and explore your Christmas movies."})]})}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6",children:n.map(a=>u.jsx(BW,{item:a},a.id))})]}):u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})})},$W=()=>{const{slug:e}=Vd(),[t,r]=U.useState(null),[n,s]=U.useState([]),[a,i]=U.useState({}),[o,l]=U.useState(null),[c,f]=U.useState(!0),[d,m]=U.useState(null);if(U.useEffect(()=>{(async()=>{if(e)try{f(!0),m(null);const w=Rt(Me,"publicProfiles"),k=Cn(w,Zr("publicWatchlistSlug","==",e),Zr("isPublicWatchlist","==",!0)),E=await $t(k);if(E.empty){m("This watchlist isn't public (or no longer exists)."),f(!1);return}const y=E.docs[0],I={id:y.id,...y.data()};r(I);const O=I.userId,{userMovies:F,movies:v}=await Ku(O),T=v.filter(R=>{const ae=F[R.id];return ae&&ae.watched}).sort((R,ae)=>{const ee=F[R.id],fe=F[ae.id],ue=(ee==null?void 0:ee.rating)??0,q=(fe==null?void 0:fe.rating)??0;return q!==ue?q-ue:R.title.localeCompare(ae.title)}),S={};T.forEach(R=>{S[R.id]=F[R.id]});const C=T.map(R=>S[R.id]).filter(R=>R&&R.rating!=null),P=C.length>0?C.reduce((R,ae)=>R+(ae.rating||0),0)/C.length:0,b=T.filter(R=>{var ae;return(ae=S[R.id])==null?void 0:ae.favorite}).length;s(T),i(S),l({totalWatched:T.length,averageRating:P,favoriteMovies:b})}catch(w){console.error("Error loading public watchlist:",w),m("This watchlist isn't public (or no longer exists).")}finally{f(!1)}})()},[e]),U.useEffect(()=>{if(!(typeof document>"u"))if(t){const g=t.publicWatchlistName||`${t.displayName}'s Xmas Watchlist`;document.title=`${g}  Christmas Movies`}else document.title="Christmas Movies"},[t]),c)return u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})});if(d||!t)return u.jsx("div",{className:"container mx-auto px-4 py-16",children:u.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center max-w-xl mx-auto",children:[u.jsx("h1",{className:"font-christmas text-3xl text-xmas-line mb-4",children:"Watchlist Not Available"}),u.jsx("p",{className:"mb-4",children:d||"This watchlist isn't public (or no longer exists)."}),u.jsxs(Ke,{to:"/",className:"btn btn-primary",children:[u.jsx("i",{className:"fas fa-home mr-2"}),"Go to Home"]})]})});const p=t.publicWatchlistName||`${t.displayName}'s Xmas Watchlist`,x=t.publicWatchlistTagline;return u.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-6 sm:py-10",children:[u.jsxs("header",{className:"mb-6 sm:mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[t.photoURL?u.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-2 border-xmas-gold shadow-lg"}):u.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gray-700 flex items-center justify-center border-2 border-xmas-gold shadow-lg",children:u.jsx("i",{className:"fas fa-user text-2xl text-gray-300"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-christmas text-2xl sm:text-3xl md:text-4xl text-xmas-line mb-1",children:p}),x&&u.jsx("p",{className:"text-sm sm:text-base text-xmas-mute",children:x})]})]}),o&&u.jsxs("div",{className:"bg-xmas-card px-4 py-3 rounded-lg shadow-md flex flex-wrap gap-4 text-sm sm:text-base",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute",children:"Watched"}),u.jsx("div",{className:"font-bold text-lg",children:o.totalWatched})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute",children:"Average Rating"}),u.jsxs("div",{className:"font-bold text-lg",children:[o.averageRating.toFixed(1),"/10"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute",children:"Favorites"}),u.jsx("div",{className:"font-bold text-lg",children:o.favoriteMovies})]})]})]}),n.length===0?u.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center max-w-xl mx-auto",children:[u.jsx("h2",{className:"text-xl mb-3",children:"No watched movies yet"}),u.jsx("p",{className:"text-sm text-xmas-mute",children:"As soon as they start marking movies as watched, they'll show up here."})]}):u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 sm:gap-3",children:n.map(g=>{const w=a[g.id];return u.jsx(Ke,{to:`/u/${e}/m/${uA(g.title)}?id=${g.id}`,className:"block transition-transform hover:scale-[1.02] hover:shadow-xl",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-xmas-card shadow-md h-full flex flex-col",children:[u.jsxs("div",{className:"relative",children:[g.posterUrl?u.jsx("img",{src:g.posterUrl,alt:g.title,className:"w-full h-auto object-cover",style:{aspectRatio:"2/3"},loading:"lazy"}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3"},children:u.jsx("i",{className:"fas fa-film text-2xl text-gray-500"})}),w&&w.watched&&u.jsx("div",{className:"absolute top-1 right-1 bg-primary rounded-full p-1 shadow-md",children:u.jsx("i",{className:"fas fa-check text-xs text-white"})}),w&&w.favorite&&u.jsx("div",{className:"absolute top-1 left-1 text-yellow-400 drop-shadow-md",children:u.jsx("i",{className:"fas fa-star text-sm"})})]}),u.jsxs("div",{className:"p-1 sm:p-2 flex-grow flex flex-col",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium line-clamp-2",children:g.title}),u.jsxs("div",{className:"flex justify-between items-center mt-1",children:[u.jsx("p",{className:"text-xs text-gray-400",children:g.releaseDate&&os(g.releaseDate)}),w&&w.rating!=null&&u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-yellow-400 mr-0.5",children:u.jsx("i",{className:"fas fa-star text-xs"})}),u.jsx("span",{className:"text-xs",children:w.rating})]})]})]})]})},g.id)})})]})},Nv="https://api.watchmode.com/v1",cE=["GB","US","CA"],uE="GB",zW=24*60*60*1e3,Cv="jg4HbDMFz2bE6i1YPoqDMFqo5Rmh6AEqP9mqqQdO";let vm=null;async function bv(e){const t=await fetch(e);if(!t.ok)throw new Error(`Watchmode API error ${t.status}`);return await t.json()}async function HW(e){var t;try{const r=e.releaseDate?new Date(e.releaseDate).getFullYear():void 0,n=new URLSearchParams({apiKey:Cv,search_field:"name",search_value:e.title}),s=`${Nv}/search/?${n.toString()}`,a=await bv(s);if(!((t=a.title_results)!=null&&t.length))return null;if(r){const i=a.title_results.find(o=>o.year===r);if(i)return i.id}return a.title_results[0].id}catch(r){return console.error("Watchmode name search failed",r),null}}async function GW(e){const t=new URLSearchParams({apiKey:Cv,regions:cE.join(",")}),r=`${Nv}/title/${e}/sources/?${t.toString()}`,n=await bv(r),s=new Set(cE.map(a=>a.toUpperCase()));return n.filter(a=>s.has((a.region||"").toUpperCase())&&!!a.name)}async function KW(){if(vm)return vm;try{const e=`${Nv}/sources/?apiKey=${Cv}`,t=await bv(e),r={};for(const n of t)r[n.id]=n;return vm=r,r}catch(e){return console.error("Failed to load Watchmode source metadata",e),null}}async function qW(e){var o;if(!(e!=null&&e.id))return null;const t=Et(Rt(Me,"watchmodeSources"),e.id);try{const l=await vn(t);if(l.exists()){const c=l.data(),f=(o=c.updatedAt)!=null&&o.toDate?c.updatedAt.toDate():new Date(c.updatedAt),d=Date.now()-f.getTime()<zW,m=Array.isArray(c.sources)&&c.sources.length>0;if(d&&m)return{movieId:e.id,region:c.region||uE,watchmodeTitleId:c.watchmodeTitleId??void 0,sources:c.sources||[],updatedAt:f,errorCode:c.errorCode??null}}}catch(l){console.error("Error reading Watchmode cache",l)}const r=await HW(e);let n=[],s=null;if(r)try{n=await GW(r)}catch(l){console.error("Error fetching Watchmode sources",l),s="sources_fetch_failed"}else s="title_not_found";const a=n.map(({ios_url:l,android_url:c,...f})=>f),i={movieId:e.id,region:uE,watchmodeTitleId:r||null,sources:a,updatedAt:new Date,errorCode:s};try{await qn(t,i,{merge:!0})}catch(l){console.error("Error updating Watchmode cache",l)}return{movieId:i.movieId,region:i.region,watchmodeTitleId:r||void 0,sources:a,updatedAt:i.updatedAt,errorCode:s}}function YW(e){const[t,r]=U.useState({loading:!1,error:null,data:null});return U.useEffect(()=>{let n=!1;return(async()=>{if(!e){r({loading:!1,error:null,data:null});return}r(a=>({...a,loading:!0,error:null}));try{const a=await qW(e);if(n)return;r({loading:!1,error:null,data:a})}catch(a){if(console.error("useWatchmodeSources error",a),n)return;r({loading:!1,error:"Failed to load streaming info",data:null})}})(),()=>{n=!0}},[e==null?void 0:e.id]),t}const XW=({movie:e})=>{const{loading:t,error:r,data:n}=YW(e),[s,a]=U.useState(null),[i,o]=U.useState(!1);if(U.useEffect(()=>{let p=!1;return(async()=>{const g=await KW();p||a(g)})(),()=>{p=!0}},[]),!e)return null;if(t&&!n)return u.jsx("div",{className:"mt-6 text-sm text-xmas-mute",children:"Looking up where to watch"});if(r)return null;const l=(n==null?void 0:n.sources)||[],c=["GB","US","CA"],f={};for(const p of l){const x=(p.region||"").toUpperCase();f[x]||(f[x]=[]),f[x].push(p)}const d=p=>{const x=new Map;for(const g of p)x.has(g.name)||x.set(g.name,g);return Array.from(x.values())},m=()=>u.jsx("div",{className:"grid gap-4 sm:gap-5 md:grid-cols-3",children:c.map(p=>{const x=f[p];if(!x||!x.length)return null;const g=x.filter(y=>y.type==="sub"||y.type==="subscription"),w=x.filter(y=>y.type==="buy"||y.type==="rent"||y.type==="purchase"||y.type==="buy/rent"),k=x.filter(y=>y.type==="free");if(!g.length&&!w.length&&!k.length)return null;const E=p==="GB"?"UK":p;return u.jsxs("div",{className:"bg-black/10 rounded-md p-3 sm:p-4 flex flex-col gap-3",children:[u.jsx("h3",{className:"text-sm font-semibold mb-1",children:E}),k.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute mb-1",children:"Free"}),u.jsx("div",{className:"flex flex-wrap gap-3",children:d(k).map(y=>{const I=s?s[y.source_id]:void 0;return I!=null&&I.logo_100px?u.jsx("a",{href:y.web_url||void 0,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-lg overflow-hidden bg-white/5 hover:bg-white/10 transition-colors",children:u.jsx("img",{src:I.logo_100px,alt:y.name,className:"h-10 w-10 sm:h-12 sm:w-12 object-contain",loading:"lazy"})},y.name+y.web_url):null})})]}),g.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute mb-1",children:"Streaming"}),u.jsx("div",{className:"flex flex-wrap gap-3",children:d(g).map(y=>{const I=s?s[y.source_id]:void 0;return I!=null&&I.logo_100px?u.jsx("a",{href:y.web_url||void 0,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-lg overflow-hidden bg-white/5 hover:bg-white/10 transition-colors",children:u.jsx("img",{src:I.logo_100px,alt:y.name,className:"h-10 w-10 sm:h-12 sm:w-12 object-contain",loading:"lazy"})},y.name+y.web_url):null})})]}),w.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute mb-1",children:"Buy / Rent"}),u.jsx("div",{className:"flex flex-wrap gap-3",children:d(w).map(y=>{const I=s?s[y.source_id]:void 0;return I!=null&&I.logo_100px?u.jsx("a",{href:y.web_url||void 0,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-lg overflow-hidden bg-white/5 hover:bg-white/10 transition-colors",children:u.jsx("img",{src:I.logo_100px,alt:y.name,className:"h-10 w-10 sm:h-12 sm:w-12 object-contain",loading:"lazy"})},y.name+y.web_url):null})})]})]},p)})});return l.length?u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"divider"}),u.jsxs("div",{className:"bg-xmas-card/40 border border-xmas-gold/40 rounded-lg overflow-hidden",children:[u.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left px-4 py-3 sm:px-5 sm:py-4 bg-xmas-card/60 hover:bg-xmas-card transition-colors cursor-pointer",onClick:()=>o(p=>!p),children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("i",{className:"fas fa-tv text-xmas-gold"}),u.jsx("h2",{className:"text-lg sm:text-xl font-bold flex-1",children:"Where to watch"})]}),u.jsx("span",{className:`ml-3 text-sm text-xmas-mute transition-transform duration-200 ${i?"rotate-180":"rotate-0"}`,children:u.jsx("i",{className:"fas fa-chevron-down"})})]}),i&&u.jsxs("div",{className:"px-4 py-3 sm:px-5 sm:py-5",children:[u.jsx("p",{className:"text-xs text-xmas-mute mb-4",children:"Powered by Watchmode. Availability can change, so please double-check on the provider's site."}),m()]})]})]}):u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"divider"}),u.jsxs("div",{className:"bg-xmas-card/40 border border-xmas-gold/40 rounded-lg overflow-hidden",children:[u.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left px-4 py-3 sm:px-5 sm:py-4 bg-xmas-card/60 hover:bg-xmas-card transition-colors cursor-pointer",onClick:()=>o(p=>!p),children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("i",{className:"fas fa-tv text-xmas-gold"}),u.jsx("h2",{className:"text-lg sm:text-xl font-bold flex-1",children:"Where to watch"})]}),u.jsx("span",{className:`ml-3 text-sm text-xmas-mute transition-transform duration-200 ${i?"rotate-180":"rotate-0"}`,children:u.jsx("i",{className:"fas fa-chevron-down"})})]}),i&&u.jsxs("div",{className:"px-4 py-3 sm:px-5 sm:py-5 text-xs text-xmas-mute",children:[u.jsx("p",{className:"mb-2",children:"Powered by Watchmode. Availability can change, so please double-check on the provider's site."}),u.jsx("p",{children:"We couldn't find any current streaming options via Watchmode for this title."})]})]})]})},QW=()=>{const{slug:e}=Vd(),[t]=A4(),r=ys(),[n,s]=U.useState(null),[a,i]=U.useState(null),[o,l]=U.useState(null),[c,f]=U.useState(!0),[d,m]=U.useState(null);if(U.useEffect(()=>{(async()=>{const w=t.get("id");if(!(!e||!w))try{f(!0),m(null);const k=Rt(Me,"publicProfiles"),E=Cn(k,Zr("publicWatchlistSlug","==",e),Zr("isPublicWatchlist","==",!0)),y=await $t(E);if(y.empty){m("This watchlist isn't public (or no longer exists)."),f(!1);return}const I=y.docs[0],O={id:I.id,...I.data()};s(O);const F=O.userId,v=Et(Me,"movies",w),T=await vn(v);if(!T.exists()){m("Movie not found"),f(!1);return}const S={id:T.id,...T.data()};i(S);const C=Et(Me,"users",F,"movies",w),P=await vn(C);P.exists()?l({id:P.id,...P.data()}):l(null)}catch(k){console.error("Error loading public movie",k),m("Failed to load this movie.")}finally{f(!1)}})()},[e,t]),U.useEffect(()=>{if(!(typeof document>"u"))if(a&&n){const g=n.publicWatchlistName||`${n.displayName}'s Xmas Watchlist`;document.title=`${a.title}  ${g}`}else document.title="Christmas Movies"},[a,n]),c)return u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})});if(d||!n||!a)return u.jsx("div",{className:"container mx-auto px-4 py-16",children:u.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center max-w-xl mx-auto",children:[u.jsx("h1",{className:"font-christmas text-3xl text-xmas-line mb-4",children:"Movie Not Available"}),u.jsx("p",{className:"mb-4",children:d||"This movie could not be found for this watchlist."}),e&&u.jsxs("button",{className:"btn btn-primary",onClick:()=>r(`/u/${e}`),children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Watchlist"]})]})});const p=n.publicWatchlistName||`${n.displayName}'s Xmas Watchlist`,x=o!=null&&o.watched?"Watched":"Not watched yet";return u.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-6 sm:py-10",children:[u.jsx("div",{className:"mb-4 flex flex-wrap justify-between items-center gap-2",children:u.jsxs("div",{className:"flex items-center gap-3",children:[n.photoURL?u.jsx("img",{src:n.photoURL,alt:n.displayName,className:"w-10 h-10 rounded-full border border-xmas-gold"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center border border-xmas-gold",children:u.jsx("i",{className:"fas fa-user text-sm text-gray-300"})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("div",{className:"font-semibold mb-1",children:p}),u.jsxs("button",{className:"btn btn-primary btn-sm px-4 py-2 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30 flex items-center gap-2",onClick:()=>r(`/u/${e}`),children:[u.jsx("i",{className:"fas fa-arrow-left"}),u.jsx("span",{children:"Back to watchlist"})]})]})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"md:col-span-1",children:[u.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:a.posterUrl?u.jsx("img",{src:a.posterUrl,alt:a.title,className:"w-full object-contain",style:{aspectRatio:"2/3"}}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3"},children:u.jsx("i",{className:"fas fa-film text-6xl text-gray-500"})})}),o&&u.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs uppercase tracking-wide text-xmas-mute",children:"Status"}),u.jsx("span",{className:"font-semibold",children:x})]}),o.rating!=null&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs uppercase tracking-wide text-xmas-mute",children:"Rating"}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-yellow-400",children:u.jsx("i",{className:"fas fa-star"})}),u.jsxs("span",{className:"font-semibold",children:[o.rating,"/10"]})]})]}),o.watchedDate&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs uppercase tracking-wide text-xmas-mute",children:"Watched on"}),u.jsx("span",{className:"font-semibold",children:(()=>{var w;const g=(w=o.watchedDate)!=null&&w.toDate?o.watchedDate.toDate():new Date(o.watchedDate);return isNaN(g.getTime())?"":g.toLocaleDateString()})()})]}),o.vibeTags&&o.vibeTags.length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-xmas-mute mb-1",children:"Vibe review"}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:o.vibeTags.map(g=>u.jsx("span",{className:"badge badge-sm bg-xmas-gold bg-opacity-20 text-[0.7rem] border-xmas-gold",children:g},g))})]})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line mb-2",children:a.title}),a.releaseDate&&u.jsx("p",{className:"text-lg text-gray-400 mb-4",children:new Date(a.releaseDate).getFullYear()}),a.genres&&a.genres.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.genres.map(g=>u.jsx("span",{className:"badge badge-outline",children:g},g))}),a.runtime&&u.jsxs("p",{className:"mb-4",children:[u.jsx("i",{className:"fas fa-clock mr-2 text-xmas-gold"}),Math.floor(a.runtime/60),"h ",a.runtime%60,"m"]}),a.overview&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Overview"}),u.jsx("p",{className:"text-gray-300",children:a.overview})]}),a.directors&&a.directors.length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Director",a.directors.length>1?"s":""]}),u.jsx("p",{children:a.directors.join(", ")})]}),a.cast&&a.cast.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Cast"}),u.jsx("p",{className:"flex flex-wrap gap-1",children:a.cast.slice(0,10).map((g,w)=>u.jsxs(Tu.Fragment,{children:[u.jsx("span",{children:g}),w<Math.min(a.cast.length,10)-1&&u.jsx("span",{children:","})]},g))})]}),o&&o.review&&u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"divider"}),u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Their Thoughts"}),u.jsx("p",{className:"whitespace-pre-line text-gray-200 text-sm sm:text-base",children:o.review})]}),u.jsx(XW,{movie:a})]})]})]})},JW=7*24*60*60*1e3,ZW=async(e,t,r)=>{if(t.fanartPosters&&t.lastFanartFetchAt){const n=t.lastFanartFetchAt instanceof Date?t.lastFanartFetchAt:new Date(t.lastFanartFetchAt.seconds*1e3);if(Date.now()-n.getTime()<JW)return t.fanartPosters.map(s=>({url:s}))}if(!r||!t.imdbId)return(t.fanartPosters||[]).map(n=>({url:n}));try{const s=await QL(e6,"fanartProxy")({imdbId:t.imdbId,tmdbId:t.tmdbId,apiKey:r}),a=Array.isArray(s.data.posters)?s.data.posters:[],i=Array.from(new Set(a.filter(o=>typeof o=="string"&&o)));try{const o=Et(Me,"movies",e);await Ls(o,{fanartPosters:i,lastFanartFetchAt:new Date})}catch(o){console.error("Failed to cache fanart posters on movie doc",o)}return i.map(o=>({url:o}))}catch(n){return console.error("fanartProxy callable failed",n),(t.fanartPosters||[]).map(s=>({url:s}))}},e$=()=>{const{movieId:e}=Vd(),t=vs(),r=ys(),{currentUser:n,userProfile:s}=yn(),a=fA(t.search),[i,o]=U.useState(null),[l,c]=U.useState(null),[f,d]=U.useState(""),[m,p]=U.useState([]),[x,g]=U.useState(!0),[w,k]=U.useState(!1),[E,y]=U.useState(null);U.useEffect(()=>{if(!n||!a)return;(async()=>{try{g(!0);const F=await vn(Et(Me,"movies",a));if(!F.exists()){y("Movie not found"),g(!1);return}const v={id:F.id,...F.data()};o(v);const T=await ld(n.uid,a);if(T?(c(T),d(T.posterUrlOverride||v.posterUrl||"")):d(v.posterUrl||""),v.imdbId&&(s!=null&&s.fanartApiKey))try{const S=await ZW(a,v,s.fanartApiKey);p(S)}catch(S){console.error("Error loading fanart posters:",S)}}catch(F){console.error("Error loading movie/poster data:",F),y("Failed to load movie data")}finally{g(!1)}})()},[n,a,s]);const I=async()=>{if(!(!n||!a||!i))try{k(!0),y(null);const O={userId:n.uid,movieId:a,posterUrlOverride:f.trim()||null},F=await Gu(n.uid,a,O);c(F),r(`/movies/${e}${t.search}`)}catch(O){console.error("Failed to save poster override:",O),y((O==null?void 0:O.message)||"Failed to save poster")}finally{k(!1)}};return x?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[u.jsxs(Ke,{to:`/movies/${e}${t.search}`,className:"btn btn-primary btn-sm",children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Movie"]}),u.jsxs("h1",{className:"font-christmas text-2xl md:text-3xl text-xmas-line ml-2",children:["Edit Poster 	for ",i.title]})]}),E&&u.jsxs("div",{className:"alert alert-error mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:E})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx("div",{children:u.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:f?u.jsx("img",{src:f,alt:i.title,className:"w-full object-contain",style:{aspectRatio:"2/3"}}):u.jsx("div",{className:"w-full flex items-center justify-center bg-gray-800",style:{aspectRatio:"2/3"},children:u.jsx("i",{className:"fas fa-film text-6xl text-gray-500"})})})}),u.jsx("div",{className:"md:col-span-2",children:u.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Choose a Poster from fanart.tv"}),!(s!=null&&s.fanartApiKey)&&u.jsx("p",{className:"text-sm text-warning mb-2",children:"Add your fanart.tv API key on your Profile page to see alternative posters."}),(s==null?void 0:s.fanartApiKey)&&m.length===0&&u.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"No posters were returned from fanart.tv for this movie. The default poster will be used."}),m.length>0&&u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(O=>u.jsxs("button",{type:"button",className:`relative rounded-lg overflow-hidden border-2 transition-transform hover:scale-105 ${f===O.url?"border-primary":"border-transparent"}`,onClick:()=>d(O.url),children:[u.jsx("img",{src:O.url,alt:i.title,className:"w-full h-full object-cover",style:{aspectRatio:"2/3"}}),f===O.url&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:u.jsx("i",{className:"fas fa-check text-2xl text-primary-content"})})]},O.url))}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsxs("button",{className:"btn btn-primary",onClick:I,disabled:w||!f,children:[w?u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}):u.jsx("i",{className:"fas fa-save mr-2"}),"Save Poster"]}),u.jsx("button",{className:"btn btn-outline",type:"button",onClick:()=>d(i.posterUrl||""),children:"Reset to default"})]})]})})]})]}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("div",{className:"alert alert-error mb-4",children:u.jsx("span",{children:"Movie not found"})}),u.jsxs(Ke,{to:"/movies",className:"btn btn-primary btn-sm",children:[u.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back to Movies"]})]})},t$=()=>{const e=ys(),{isAdmin:t,loading:r,currentUser:n}=Hu(),[s,a]=U.useState(!1),[i,o]=U.useState(null),l=!1;U.useEffect(()=>{t&&!r&&e("/admin")},[t,r,e]);const c=async()=>{o(null),a(!0);try{await Pk(Ic,ZL)}catch(f){console.error("Login error:",f),f.code==="auth/popup-closed-by-user"?o("Sign-in popup was closed. Please try again."):f.code==="auth/cancelled-popup-request"?o("Another popup is already open. Please try again."):f.code==="auth/unauthorized-domain"?(console.error("Unauthorized domain error:",window.location.hostname),o("This domain is not authorized for OAuth operations. Please add "+window.location.hostname+" to your Firebase authorized domains list in the Firebase console under Authentication > Sign-in method > Authorized domains.")):o("Failed to sign in. Please try again."),a(!1)}};return r?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsx("div",{className:"container mx-auto px-4 py-12",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"font-christmas text-4xl text-xmas-line mb-2",children:"Admin Login"}),u.jsx("p",{className:"text-xmas-mute",children:"Sign in to manage the Christmas Quiz"})]}),u.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[l,n&&u.jsxs("div",{className:"bg-info bg-opacity-10 border-l-4 border-info p-4 mb-6 rounded",children:[u.jsx("p",{className:"text-info font-bold mb-2",children:"User Authenticated"}),u.jsxs("p",{className:"text-info text-sm mb-1",children:["Email: ",n.email]}),u.jsxs("p",{className:"text-info text-sm mb-2",children:["UID: ",n.uid]}),u.jsxs("p",{className:"text-info text-sm",children:["To grant admin access, create a document in the ",u.jsx("code",{className:"bg-base-300 px-1 py-0.5 rounded",children:"admins"})," collection with this UID as the document ID."]}),l]}),i&&u.jsx("div",{className:"bg-error bg-opacity-10 border-l-4 border-error p-4 mb-6 rounded",children:u.jsx("p",{className:"text-error",children:i})}),u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("p",{className:"mb-4",children:"Sign in with your Google account to access the admin panel."}),u.jsx("p",{className:"text-sm text-xmas-mute mb-6",children:"Only authorized administrators will be granted access."}),u.jsx("button",{onClick:c,className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:s,children:s?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading loading-spinner loading-sm"}),"Signing in..."]}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[u.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
                      s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20\r
                      s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),u.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039\r
                      l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),u.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
                      c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),u.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
                      c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),"Sign in with Google"]})})]})]}),u.jsx("div",{className:"text-center mt-6",children:u.jsx("button",{onClick:()=>e("/"),className:"btn btn-link text-xmas-mute",children:"Back to Home"})})]})})};async function r$(e,t){const r=await ii(e,t),n=Rt(Me,"movies"),s=Cn(n,Zr("imdbId","==",r.imdbID)),a=await $t(s),i={...hu(r),updatedAt:new Date};if(a.empty){const o={...i,addedAt:new Date};return{movieId:(await zu(n,o)).id,action:"created"}}else{const o=a.docs[0].id;return await qn(Et(Me,"movies",o),i,{merge:!0}),{movieId:o,action:"updated"}}}const n$=e=>new Promise(t=>setTimeout(t,e));async function s$(e,t,r,n=200){let s=0,a=0,i=0,o=0;const l=[];for(let c=0;c<e.length;c++){const f=e[c];try{if(!f){i++,r==null||r(c+1,e.length,"skipped");continue}const{movieId:d,action:m}=await r$(f,t);l.push(d),m==="created"?s++:a++,r==null||r(c+1,e.length,m),n>0&&await n$(n)}catch(d){console.error("Catalogue upsert error for IMDb",f,d),o++,r==null||r(c+1,e.length,"error")}}return{totalRequested:e.length,created:s,updated:a,skipped:i,errors:o,movieIds:l}}const a$=({omdbApiKey:e,onDone:t})=>{const[r,n]=U.useState(null),[s,a]=U.useState([]),[i,o]=U.useState([]),[l,c]=U.useState("upload"),[f,d]=U.useState(0),[m,p]=U.useState(null),[x,g]=U.useState(0),[w,k]=U.useState(!1),[E,y]=U.useState(null),[I,O]=U.useState([]),[F,v]=U.useState(null),T=i.filter(ae=>ae.selected&&ae.tmdbMatch).length,S=ae=>{var ue;const ee=(ue=ae.target.files)==null?void 0:ue[0];if(!ee)return;n(ee);const fe=new FileReader;fe.onload=q=>{var Y;const G=wd((Y=q.target)==null?void 0:Y.result,{type:"binary"}),Z=G.Sheets[G.SheetNames[0]],j=QI.sheet_to_json(Z).map(K=>({title:K.title||K.Title||K.name||K.Name||"",imdbId:K.imdb||K.IMDB||K.Imdb||K.imdbId||K.imdbID||"",releaseDate:K.year||K.Year||K.releaseDate||K.ReleaseDate||K.release_date||"",watched:K.watched||K.Watched||!1,rating:K.rating||K.Rating||null,review:K.review||K.Review||K.notes||K.Notes||""})).filter(K=>K.title);a(j)},fe.readAsBinaryString(ee)},C=async()=>{if(!s.length||!e){v("Missing data or OMDb key");return}try{k(!0),v(null),o([]),d(0),p(null);const ae=[],ee=Rt(Me,"movies");for(let fe=0;fe<s.length;fe++){const ue=s[fe];p(ue.title||null);try{let q=null;if(ue.imdbId)q=await ii(ue.imdbId,e);else{const G=`${ue.title} ${ue.releaseDate||""}`.trim();let Z=G||ue.title,ce=[];try{ce=await Bi(Z,e)}catch{ce=[]}if(!ce.length&&G&&ue.title&&G!==ue.title){Z=ue.title;try{ce=await Bi(Z,e)}catch{ce=[]}}if(!ce.length){ae.push({excelData:ue,tmdbMatch:null,confidence:0,status:"unmatched",movieId:void 0,selected:!1});continue}q=await ii(ce[0].imdbID,e)}if(!q)ae.push({excelData:ue,tmdbMatch:null,confidence:0,status:"unmatched",movieId:void 0,selected:!1});else{const G=cd(ue,q),Z=await $t(Cn(ee,Zr("imdbId","==",q.imdbID)));let ce,j="matched";Z.empty?G<70&&(j="manual"):(ce=Z.docs[0].id,j=G>=70?"duplicate":"manual"),ae.push({excelData:ue,tmdbMatch:q,confidence:G,status:j,movieId:ce,selected:!0})}}catch{ae.push({excelData:ue,tmdbMatch:null,confidence:0,status:"unmatched",movieId:void 0,selected:!1})}d(Math.round((fe+1)/s.length*100))}o(ae),c("review")}finally{k(!1),p(null)}},P=async(ae,ee)=>{try{k(!0);const fe=i[ae],ue=ee||fe.excelData.title,q=await Bi(ue,e);y(ae),O(q)}finally{k(!1)}},b=async ae=>{if(E!=null){k(!0);try{const ee=await ii(ae.imdbID,e),fe=cd(i[E].excelData,ee),ue=Rt(Me,"movies"),q=await $t(Cn(ue,Zr("imdbId","==",ee.imdbID)));let G,Z="matched";q.empty?fe<70&&(Z="manual"):(G=q.docs[0].id,Z=fe>=70?"duplicate":"manual"),o(ce=>{const j=[...ce];return j[E]={excelData:ce[E].excelData,tmdbMatch:ee,confidence:fe,status:Z,movieId:G,selected:!0},j}),y(null),O([])}finally{k(!1)}}},R=async()=>{const ae=i.filter(fe=>fe.selected&&fe.tmdbMatch);if(!ae.length)return;c("import"),g(0);const ee=Rt(Me,"movies");for(let fe=0;fe<ae.length;fe++){const ue=ae[fe];try{const q=ue.tmdbMatch,G=await $t(Cn(ee,Zr("imdbId","==",q.imdbID)));if(G.empty)await zu(ee,{...hu(q),addedAt:new Date,updatedAt:new Date});else{const Z=G.docs[0].id;await qn(Et(Me,"movies",Z),{...hu(q),updatedAt:new Date},{merge:!0})}}catch{}g(Math.round((fe+1)/ae.length*100))}t==null||t()};return u.jsxs("div",{className:"space-y-6",children:[l==="upload"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"file",accept:".xlsx,.xls",className:"file-input file-input-bordered w-full",onChange:S}),!!s.length&&u.jsxs("div",{className:"text-sm opacity-80",children:[s.length," rows detected"]}),u.jsx("button",{className:"btn btn-primary",onClick:C,disabled:!e||!s.length||w,children:w?u.jsx("span",{className:"loading loading-spinner loading-sm"}):"Scan & Match to Catalogue"}),w&&!!f&&f<100&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"text-sm",children:["Scanning ",f,"%"]}),u.jsx("progress",{className:"progress w-full",value:f,max:100}),m&&u.jsxs("div",{className:"text-xs opacity-70 truncate",children:["Current: ",m]})]})]}),l==="review"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{className:"font-bold",children:"Review Catalogue Matches"}),u.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>c("upload"),children:"Back"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"table table-zebra w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{children:"Excel"}),u.jsx("th",{children:"Match"}),u.jsx("th",{children:"Confidence"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Action"})]})}),u.jsx("tbody",{children:i.map((ae,ee)=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("input",{type:"checkbox",className:"checkbox",checked:ae.selected,disabled:!ae.tmdbMatch,onChange:()=>{const fe=[...i];fe[ee].selected=!fe[ee].selected,o(fe)}})}),u.jsxs("td",{children:[u.jsx("div",{className:"font-semibold",children:ae.excelData.title}),u.jsx("div",{className:"text-xs opacity-70",children:ae.excelData.releaseDate||"-"})]}),u.jsx("td",{children:ae.tmdbMatch?u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-18",children:dn(ae.tmdbMatch)?u.jsx("img",{src:dn(ae.tmdbMatch),className:"object-cover"}):u.jsx("div",{className:"w-full h-full bg-base-200"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold",children:ae.tmdbMatch.Title}),u.jsx("div",{className:"text-xs opacity-70",children:ae.tmdbMatch.Year})]})]}):u.jsx("span",{className:"text-error",children:"No match"})}),u.jsx("td",{children:ae.tmdbMatch?u.jsxs("div",{className:"flex items-center",children:[u.jsx("progress",{className:`progress ${ae.confidence>=70?"progress-success":ae.confidence>=40?"progress-warning":"progress-error"}`,value:ae.confidence,max:100}),u.jsxs("span",{className:"ml-2",children:[ae.confidence,"%"]})]}):"-"}),u.jsxs("td",{children:[ae.status==="matched"&&u.jsx("div",{className:"badge badge-success",children:"New"}),ae.status==="unmatched"&&u.jsx("div",{className:"badge badge-error",children:"Unmatched"}),ae.status==="duplicate"&&u.jsx("div",{className:"badge badge-warning",children:"Existing"}),ae.status==="manual"&&u.jsx("div",{className:"badge badge-info",children:"Manual"})]}),u.jsx("td",{children:u.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>P(ee),children:u.jsx("i",{className:"fas fa-search"})})})]},ee))})]})}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{className:"btn btn-primary",onClick:R,disabled:!T||w,children:["Import ",T," to Catalogue"]})}),!!f&&f<100&&u.jsx("div",{children:u.jsx("progress",{className:"progress w-full",value:f,max:100})})]}),l==="import"&&u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"font-bold",children:"Importing to Catalogue"}),u.jsx("progress",{className:"progress w-full",value:x,max:100})]}),E!==null&&u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60",children:u.jsxs("div",{className:"bg-base-100 rounded-box shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden p-6",children:[u.jsxs("h3",{className:"font-bold text-lg mb-4",children:["Manual match: ",i[E].excelData.title]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-6",children:[u.jsx("input",{type:"text",className:"input input-bordered flex-1",placeholder:"Search for a movie...",defaultValue:i[E].excelData.title,onKeyDown:ae=>ae.key==="Enter"&&P(E,ae.target.value)}),u.jsx("button",{className:"btn btn-primary w-full sm:w-auto",onClick:()=>{var ae;return P(E,(ae=document.querySelector("[data-manual-search-input]"))==null?void 0:ae.value)},disabled:w,children:w?u.jsx("span",{className:"loading loading-spinner loading-sm"}):u.jsx("i",{className:"fas fa-search"})})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:I.map(ae=>u.jsxs("div",{className:"card bg-base-100 shadow cursor-pointer",onClick:()=>b(ae),children:[u.jsx("figure",{children:dn(ae)?u.jsx("img",{src:dn(ae)}):u.jsx("div",{className:"h-48 w-full bg-base-200"})}),u.jsxs("div",{className:"card-body p-3",children:[u.jsx("div",{className:"text-sm font-semibold",children:ae.Title}),u.jsx("div",{className:"text-xs opacity-70",children:ae.Year})]})]},ae.imdbID))}),u.jsx("div",{className:"flex justify-end mt-6",children:u.jsx("button",{className:"btn",onClick:()=>{y(null),O([])},children:"Close"})})]})}),F&&u.jsx("div",{className:"alert alert-error",children:F})]})},i$=()=>{const e=ys(),{isAdmin:t,loading:r}=Hu(),{userProfile:n}=yn(),[s,a]=U.useState(!0),[i,o]=U.useState(null),[l,c]=U.useState(null),[f,d]=U.useState(!1),[m,p]=U.useState({totalMovies:0,moviesWithSortTitle:0}),[x,g]=U.useState([]),[w,k]=U.useState(!1),[E,y]=U.useState(""),[I,O]=U.useState(""),[F,v]=U.useState(!0),[T,S]=U.useState(!1),[C,P]=U.useState(0),[b,R]=U.useState("");U.useEffect(()=>{n!=null&&n.omdbApiKey&&y(n.omdbApiKey)},[n]),U.useEffect(()=>{!r&&!t&&e("/admin/login")},[t,r,e]),U.useEffect(()=>{t&&(async()=>{if(t){a(!0);try{const G=await $t(Rt(Me,"movies")),Z=G.size;let ce=0;G.forEach(j=>{j.data().sortTitle&&ce++}),p({totalMovies:Z,moviesWithSortTitle:ce})}catch(G){console.error("Error fetching movie data:",G),o("Failed to load movie data")}finally{a(!1)}}})()},[t]),U.useEffect(()=>{t&&(async()=>{if(t){k(!0);try{const G=Cn(Rt(Me,"Requests"),Zr("status","==","pending")),ce=(await $t(G)).docs.map(j=>({id:j.id,...j.data()}));g(ce)}catch(G){console.error("Error fetching movie requests:",G),o("Failed to load movie requests")}finally{k(!1)}}})()},[t]);const ae=async()=>{try{d(!0),o(null);const q=await jW();c(`Sort titles updated for ${q.updated} out of ${q.total} movies.`),p(G=>({...G,moviesWithSortTitle:G.moviesWithSortTitle+q.updated})),setTimeout(()=>c(null),5e3)}catch(q){console.error("Error updating sort titles:",q),o(q.message||"Failed to update sort titles")}finally{d(!1)}},ee=async(q,G)=>{try{o(null),await Ls(Et(Me,"Requests",q),{status:G,updatedAt:new Date}),g(Z=>Z.filter(ce=>ce.id!==q)),c(`Request marked as ${G}.`),setTimeout(()=>c(null),4e3)}catch(Z){console.error("Error updating request status:",Z),o(Z.message||"Failed to update request")}},fe=U.useMemo(()=>{const q=I.split(/[\s,]+/).map(G=>G.trim()).filter(Boolean);return Array.from(new Set(q))},[I]),ue=async()=>{if(o(null),c(null),!E){o("OMDb API key required");return}if(fe.length===0){o("Please paste at least one valid IMDb ID");return}try{S(!0),P(0),R(`Starting (0 / ${fe.length})`);const q=await s$(fe,E,(G,Z,ce)=>{const j=Math.round(G/Z*100);P(j),R(`Processed ${G} / ${Z} (${ce})`)},F?300:0);c(`Catalogue updated. Created: ${q.created}, Updated: ${q.updated}, Skipped: ${q.skipped}, Errors: ${q.errors}.`)}catch(q){console.error(q),o((q==null?void 0:q.message)??"Catalogue import failed.")}finally{S(!1)}};return r||s?u.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Admin Dashboard"}),u.jsx("div",{className:"flex gap-2",children:u.jsxs(Ke,{to:"/movies",className:"btn btn-outline",children:[u.jsx("i",{className:"fas fa-film mr-2"})," Movies"]})})]}),i&&u.jsxs("div",{className:"alert alert-error mb-6",children:[u.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),u.jsx("span",{children:i})]}),l&&u.jsxs("div",{className:"alert alert-success mb-6",children:[u.jsx("i",{className:"fas fa-check-circle mr-2"}),u.jsx("span",{children:l})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-christmas mb-4 text-xmas-gold",children:"Movie Administration"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsx("div",{className:"card bg-xmas-card shadow-xl",children:u.jsxs("div",{className:"card-body",children:[u.jsxs("h2",{className:"card-title font-christmas",children:[u.jsx("i",{className:"fas fa-sort-alpha-down text-primary mr-2"})," Sort Title Migration"]}),u.jsx("p",{className:"mb-4",children:'Update all movies to include sort titles (e.g., "The Grinch"  "Grinch") for better alphabetical sorting.'}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"stats bg-base-200 text-base-content",children:[u.jsxs("div",{className:"stat",children:[u.jsx("div",{className:"stat-title",children:"Total Movies"}),u.jsx("div",{className:"stat-value",children:m.totalMovies})]}),u.jsxs("div",{className:"stat",children:[u.jsx("div",{className:"stat-title",children:"With Sort Titles"}),u.jsx("div",{className:"stat-value",children:m.moviesWithSortTitle}),u.jsx("div",{className:"stat-desc",children:m.totalMovies>0?`${Math.round(m.moviesWithSortTitle/m.totalMovies*100)}%`:"0%"})]})]}),u.jsxs("button",{className:"btn btn-primary w-full",onClick:ae,disabled:f||m.moviesWithSortTitle===m.totalMovies,children:[f?u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}):u.jsx("i",{className:"fas fa-sync-alt mr-2"}),m.moviesWithSortTitle===m.totalMovies?"All Movies Updated":"Update Sort Titles"]})]})]})}),u.jsx("div",{className:"card bg-xmas-card shadow-xl",children:u.jsxs("div",{className:"card-body",children:[u.jsxs("h2",{className:"card-title font-christmas",children:[u.jsx("i",{className:"fas fa-database text-primary mr-2"})," Catalogue Builder (IMDb IDs)"]}),u.jsxs("p",{className:"mb-4",children:["Bulk-import titles by IMDb ID into your ",u.jsx("code",{children:"movies"})," catalogue only  no user collections will be updated."]}),u.jsx("label",{className:"label mt-4",children:u.jsx("span",{className:"label-text",children:"IMDb IDs (comma / space / newline separated)"})}),u.jsx("textarea",{className:"textarea textarea-bordered w-full h-40",value:I,onChange:q=>O(q.target.value),placeholder:`e.g. tt0096061, tt0107688
tt0096061
tt0107688`}),u.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[u.jsx("div",{className:"form-control",children:u.jsxs("label",{className:"label cursor-pointer gap-2",children:[u.jsx("span",{className:"label-text",children:"Slow mode (API friendly)"}),u.jsx("input",{type:"checkbox",className:"toggle",checked:F,onChange:q=>v(q.target.checked)})]})}),u.jsx("button",{className:"btn btn-primary ml-auto",onClick:ue,disabled:T||fe.length===0||!E,title:E?void 0:"Add your OMDb API key in Profile > Settings",children:T?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Importing ",fe.length,""]}):u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-file-import mr-2"}),"Import ",fe.length||0," to Catalogue"]})})]}),(T||C>0)&&u.jsxs("div",{className:"mt-4",children:[u.jsx("progress",{className:"progress w-full",value:C,max:100}),u.jsx("div",{className:"text-sm mt-1 opacity-80",children:b})]})]})})]}),u.jsx("div",{className:"card bg-xmas-card shadow-xl overflow-visible no-card-hover",children:u.jsxs("div",{className:"card-body",children:[u.jsxs("h2",{className:"card-title font-christmas",children:[u.jsx("i",{className:"fas fa-file-excel text-primary mr-2"})," Excel Catalogue Import"]}),u.jsxs("p",{className:"mb-4 text-sm opacity-80",children:["Use an Excel file (title / year / optional IMDb id) to populate or refresh the main",u.jsx("code",{className:"mx-1",children:"movies"})," catalogue via OMDb."]}),!E&&u.jsxs("div",{className:"alert alert-warning mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),u.jsx("span",{children:"Add your OMDb API key in Profile to enable Excel catalogue import."})]}),E&&u.jsx(a$,{omdbApiKey:E,onDone:()=>{c("Excel catalogue import completed."),setTimeout(()=>c(null),4e3)}})]})})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-christmas mb-4 text-xmas-gold",children:"Movie Requests"}),u.jsx("div",{className:"card bg-xmas-card shadow-xl",children:u.jsxs("div",{className:"card-body",children:[u.jsxs("h2",{className:"card-title font-christmas flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-gift text-primary"}),"Pending Requests"]}),u.jsx("p",{className:"text-sm opacity-80 mb-4",children:"These are movies users have asked to be added to the catalogue."}),w?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("span",{className:"loading loading-spinner loading-md"})}):x.length===0?u.jsx("p",{className:"text-sm opacity-80",children:"No pending requests right now."}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"table table-zebra table-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Title"}),u.jsx("th",{children:"Year"}),u.jsx("th",{children:"TMDB"}),u.jsx("th",{children:"Requested By"}),u.jsx("th",{children:"Notes"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:x.map(q=>{var Z;const G=(Z=q.createdAt)!=null&&Z.toDate?q.createdAt.toDate():q.createdAt;return u.jsxs("tr",{children:[u.jsxs("td",{children:[u.jsx("div",{className:"font-semibold",children:q.title}),G&&u.jsx("div",{className:"text-xs opacity-70",children:new Date(G).toLocaleString()})]}),u.jsx("td",{children:q.year||"-"}),u.jsxs("td",{children:[q.tmdbId&&u.jsxs("div",{className:"text-xs",children:["ID: ",q.tmdbId]}),q.tmdbUrl&&u.jsx("a",{href:q.tmdbUrl,target:"_blank",rel:"noopener noreferrer",className:"link link-primary text-xs",children:"View TMDB"})]}),u.jsxs("td",{children:[u.jsx("div",{className:"text-sm",children:q.userDisplayName||q.userEmail||q.userId}),q.userEmail&&u.jsx("div",{className:"text-xs opacity-70",children:q.userEmail})]}),u.jsx("td",{className:"max-w-xs whitespace-pre-wrap text-xs",children:q.notes||"-"}),u.jsxs("td",{className:"flex flex-col gap-1",children:[u.jsx("button",{className:"btn btn-xs btn-success",onClick:()=>ee(q.id,"fulfilled"),children:"Fulfilled"}),u.jsx("button",{className:"btn btn-xs btn-ghost",onClick:()=>ee(q.id,"dismissed"),children:"Dismiss"})]})]},q.id)})})]})})]})})]})]})},o$=f4([{element:u.jsx(s6,{}),children:[{path:"/",element:u.jsx(o6,{})},{path:"/login",element:u.jsx(l6,{})},{path:"/u/:slug",element:u.jsx($W,{})},{path:"/u/:slug/m/:movieSlug",element:u.jsx(QW,{})},{element:u.jsx(rw,{}),children:[{path:"/movies",element:u.jsx(m6,{})},{path:"/movies/:movieId",element:u.jsx(S6,{})},{path:"/movies/:movieId/edit-poster",element:u.jsx(e$,{})},{path:"/import",element:u.jsx(DW,{})},{path:"/random",element:u.jsx(FW,{})},{path:"/profile",element:u.jsx(VW,{})},{path:"/achievements",element:u.jsx(WW,{})}]},{path:"/admin/login",element:u.jsx(t$,{})},{path:"/admin",element:u.jsx(rw,{children:u.jsx(i$,{})})}]}]);ym.createRoot(document.getElementById("root")).render(u.jsx(Tu.StrictMode,{children:u.jsx(t6,{children:u.jsx(a6,{children:u.jsx(y4,{router:o$})})})}));

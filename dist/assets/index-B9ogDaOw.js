function f_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function p_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var m_={exports:{}},kc={},g_={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),FT=Symbol.for("react.portal"),BT=Symbol.for("react.fragment"),zT=Symbol.for("react.strict_mode"),$T=Symbol.for("react.profiler"),HT=Symbol.for("react.provider"),WT=Symbol.for("react.context"),qT=Symbol.for("react.forward_ref"),QT=Symbol.for("react.suspense"),KT=Symbol.for("react.memo"),GT=Symbol.for("react.lazy"),vg=Symbol.iterator;function YT(t){return t===null||typeof t!="object"?null:(t=vg&&t[vg]||t["@@iterator"],typeof t=="function"?t:null)}var y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v_=Object.assign,__={};function Co(t,e,n){this.props=t,this.context=e,this.refs=__,this.updater=n||y_}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w_(){}w_.prototype=Co.prototype;function Lf(t,e,n){this.props=t,this.context=e,this.refs=__,this.updater=n||y_}var Mf=Lf.prototype=new w_;Mf.constructor=Lf;v_(Mf,Co.prototype);Mf.isPureReactComponent=!0;var _g=Array.isArray,E_=Object.prototype.hasOwnProperty,Vf={current:null},x_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)E_.call(e,r)&&!x_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:dl,type:t,key:s,ref:o,props:i,_owner:Vf.current}}function XT(t,e){return{$$typeof:dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uf(t){return typeof t=="object"&&t!==null&&t.$$typeof===dl}function JT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wg=/\/+/g;function Td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JT(""+t.key):e.toString(36)}function vu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dl:case FT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Td(o,0):r,_g(i)?(n="",t!=null&&(n=t.replace(wg,"$&/")+"/"),vu(i,e,n,"",function(c){return c})):i!=null&&(Uf(i)&&(i=XT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_g(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Td(s,l);o+=vu(s,e,n,u,i)}else if(u=YT(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Td(s,l++),o+=vu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var r=[],i=0;return vu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ZT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},_u={transition:null},eI={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:_u,ReactCurrentOwner:Vf};function I_(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!Uf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Co;Te.Fragment=BT;Te.Profiler=$T;Te.PureComponent=Lf;Te.StrictMode=zT;Te.Suspense=QT;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eI;Te.act=I_;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)E_.call(e,u)&&!x_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:dl,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:WT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HT,_context:t},t.Consumer=t};Te.createElement=T_;Te.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:qT,render:t}};Te.isValidElement=Uf;Te.lazy=function(t){return{$$typeof:GT,_payload:{_status:-1,_result:t},_init:ZT}};Te.memo=function(t,e){return{$$typeof:KT,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};Te.unstable_act=I_;Te.useCallback=function(t,e){return on.current.useCallback(t,e)};Te.useContext=function(t){return on.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return on.current.useDeferredValue(t)};Te.useEffect=function(t,e){return on.current.useEffect(t,e)};Te.useId=function(){return on.current.useId()};Te.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return on.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};Te.useRef=function(t){return on.current.useRef(t)};Te.useState=function(t){return on.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return on.current.useTransition()};Te.version="18.3.1";g_.exports=Te;var D=g_.exports;const S_=p_(D),tI=f_({__proto__:null,default:S_},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI=D,rI=Symbol.for("react.element"),iI=Symbol.for("react.fragment"),sI=Object.prototype.hasOwnProperty,oI=nI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aI={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sI.call(e,r)&&!aI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rI,type:t,key:s,ref:o,props:i,_owner:oI.current}}kc.Fragment=iI;kc.jsx=R_;kc.jsxs=R_;m_.exports=kc;var d=m_.exports,fh={},A_={exports:{}},Cn={},N_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,re){var oe=z.length;z.push(re);e:for(;0<oe;){var Ee=oe-1>>>1,se=z[Ee];if(0<i(se,re))z[Ee]=re,z[oe]=se,oe=Ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var re=z[0],oe=z.pop();if(oe!==re){z[0]=oe;e:for(var Ee=0,se=z.length,Ie=se>>>1;Ee<Ie;){var lt=2*(Ee+1)-1,$e=z[lt],He=lt+1,Xe=z[He];if(0>i($e,oe))He<se&&0>i(Xe,$e)?(z[Ee]=Xe,z[He]=oe,Ee=He):(z[Ee]=$e,z[lt]=oe,Ee=lt);else if(He<se&&0>i(Xe,oe))z[Ee]=Xe,z[He]=oe,Ee=He;else break e}}return re}function i(z,re){var oe=z.sortIndex-re.sortIndex;return oe!==0?oe:z.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,p=null,g=3,E=!1,R=!1,N=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(z){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=z)r(c),re.sortIndex=re.expirationTime,e(u,re);else break;re=n(c)}}function j(z){if(N=!1,A(z),!R)if(n(u)!==null)R=!0,Ke(U);else{var re=n(c);re!==null&&Le(j,re.startTime-z)}}function U(z,re){R=!1,N&&(N=!1,S(v),v=-1),E=!0;var oe=g;try{for(A(re),p=n(u);p!==null&&(!(p.expirationTime>re)||z&&!C());){var Ee=p.callback;if(typeof Ee=="function"){p.callback=null,g=p.priorityLevel;var se=Ee(p.expirationTime<=re);re=t.unstable_now(),typeof se=="function"?p.callback=se:p===n(u)&&r(u),A(re)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var lt=n(c);lt!==null&&Le(j,lt.startTime-re),Ie=!1}return Ie}finally{p=null,g=oe,E=!1}}var F=!1,y=null,v=-1,I=5,x=-1;function C(){return!(t.unstable_now()-x<I)}function k(){if(y!==null){var z=t.unstable_now();x=z;var re=!0;try{re=y(!0,z)}finally{re?T():(F=!1,y=null)}}else F=!1}var T;if(typeof w=="function")T=function(){w(k)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Oe=le.port2;le.port1.onmessage=k,T=function(){Oe.postMessage(null)}}else T=function(){b(k,0)};function Ke(z){y=z,F||(F=!0,T())}function Le(z,re){v=b(function(){z(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){R||E||(R=!0,Ke(U))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var oe=g;g=re;try{return z()}finally{g=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,re){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var oe=g;g=z;try{return re()}finally{g=oe}},t.unstable_scheduleCallback=function(z,re,oe){var Ee=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ee+oe:Ee):oe=Ee,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=oe+se,z={id:f++,callback:re,priorityLevel:z,startTime:oe,expirationTime:se,sortIndex:-1},oe>Ee?(z.sortIndex=oe,e(c,z),n(u)===null&&z===n(c)&&(N?(S(v),v=-1):N=!0,Le(j,oe-Ee))):(z.sortIndex=se,e(u,z),R||E||(R=!0,Ke(U))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var re=g;return function(){var oe=g;g=re;try{return z.apply(this,arguments)}finally{g=oe}}}})(C_);N_.exports=C_;var lI=N_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI=D,Nn=lI;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P_=new Set,La={};function Ss(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(La[t]=e,t=0;t<e.length;t++)P_.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,cI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eg={},xg={};function dI(t){return ph.call(xg,t)?!0:ph.call(Eg,t)?!1:cI.test(t)?xg[t]=!0:(Eg[t]=!0,!1)}function hI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fI(t,e,n,r){if(e===null||typeof e>"u"||hI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ff=/[\-:]([a-z])/g;function Bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ff,Bf);Bt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ff,Bf);Bt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ff,Bf);Bt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function zf(t,e,n,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fI(e,n,i,r)&&(n=null),r||i===null?dI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=uI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),$s=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),$f=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),k_=Symbol.for("react.provider"),b_=Symbol.for("react.context"),Hf=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),Wf=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),D_=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function Jo(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,Id;function ha(t){if(Id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Id=e&&e[1]||""}return`
`+Id+t}var Sd=!1;function Rd(t,e){if(!t||Sd)return"";Sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Sd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ha(t):""}function pI(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=Rd(t.type,!1),t;case 11:return t=Rd(t.type.render,!1),t;case 1:return t=Rd(t.type,!0),t;default:return""}}function vh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case $s:return"Portal";case mh:return"Profiler";case $f:return"StrictMode";case gh:return"Suspense";case yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b_:return(t.displayName||"Context")+".Consumer";case k_:return(t._context.displayName||"Context")+".Provider";case Hf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wf:return e=t.displayName||null,e!==null?e:vh(t.type)||"Memo";case ai:e=t._payload,t=t._init;try{return vh(t(e))}catch{}}return null}function mI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vh(e);case 8:return e===$f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gI(t){var e=j_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=gI(t))}function O_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ig(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L_(t,e){e=e.checked,e!=null&&zf(t,"checked",e,!1)}function wh(t,e){L_(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eh(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eh(t,e,n){(e!=="number"||Bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(fa(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function M_(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ag(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,U_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yI=["Webkit","ms","Moz","O"];Object.keys(Ea).forEach(function(t){yI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ea[e]=Ea[t]})});function F_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ea.hasOwnProperty(t)&&Ea[t]?(""+e).trim():e+"px"}function B_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var vI=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ih(t,e){if(e){if(vI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=null;function qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ah=null,no=null,ro=null;function Ng(t){if(t=pl(t)){if(typeof Ah!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Lc(e),Ah(t.stateNode,t.type,e))}}function z_(t){no?ro?ro.push(t):ro=[t]:no=t}function $_(){if(no){var t=no,e=ro;if(ro=no=null,Ng(t),e)for(t=0;t<e.length;t++)Ng(e[t])}}function H_(t,e){return t(e)}function W_(){}var Ad=!1;function q_(t,e,n){if(Ad)return t(e,n);Ad=!0;try{return H_(t,e,n)}finally{Ad=!1,(no!==null||ro!==null)&&(W_(),$_())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Nh=!1;if(Vr)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{Nh=!1}function _I(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var xa=!1,zu=null,$u=!1,Ch=null,wI={onError:function(t){xa=!0,zu=t}};function EI(t,e,n,r,i,s,o,l,u){xa=!1,zu=null,_I.apply(wI,arguments)}function xI(t,e,n,r,i,s,o,l,u){if(EI.apply(this,arguments),xa){if(xa){var c=zu;xa=!1,zu=null}else throw Error(W(198));$u||($u=!0,Ch=c)}}function Rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(Rs(t)!==t)throw Error(W(188))}function TI(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cg(i),t;if(s===r)return Cg(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function K_(t){return t=TI(t),t!==null?G_(t):null}function G_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G_(t);if(e!==null)return e;t=t.sibling}return null}var Y_=Nn.unstable_scheduleCallback,Pg=Nn.unstable_cancelCallback,II=Nn.unstable_shouldYield,SI=Nn.unstable_requestPaint,xt=Nn.unstable_now,RI=Nn.unstable_getCurrentPriorityLevel,Qf=Nn.unstable_ImmediatePriority,X_=Nn.unstable_UserBlockingPriority,Hu=Nn.unstable_NormalPriority,AI=Nn.unstable_LowPriority,J_=Nn.unstable_IdlePriority,bc=null,hr=null;function NI(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(bc,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:kI,CI=Math.log,PI=Math.LN2;function kI(t){return t>>>=0,t===0?32:31-(CI(t)/PI|0)|0}var Yl=64,Xl=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=pa(l):(s&=o,s!==0&&(r=pa(s)))}else o=n&~i,o!==0?r=pa(o):s!==0&&(r=pa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function bI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=bI(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z_(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function jI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Kf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Be=0;function ew(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tw,Gf,nw,rw,iw,kh=!1,Jl=[],_i=null,wi=null,Ei=null,Ua=new Map,Fa=new Map,ui=[],OI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(e.pointerId)}}function ea(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&Gf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LI(t,e,n,r,i){switch(e){case"focusin":return _i=ea(_i,t,e,n,r,i),!0;case"dragenter":return wi=ea(wi,t,e,n,r,i),!0;case"mouseover":return Ei=ea(Ei,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ua.set(s,ea(Ua.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fa.set(s,ea(Fa.get(s)||null,t,e,n,r,i)),!0}return!1}function sw(t){var e=ns(t.target);if(e!==null){var n=Rs(e);if(n!==null){if(e=n.tag,e===13){if(e=Q_(n),e!==null){t.blockedOn=e,iw(t.priority,function(){nw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rh=r,n.target.dispatchEvent(r),Rh=null}else return e=pl(n),e!==null&&Gf(e),t.blockedOn=n,!1;e.shift()}return!0}function bg(t,e,n){wu(t)&&n.delete(e)}function MI(){kh=!1,_i!==null&&wu(_i)&&(_i=null),wi!==null&&wu(wi)&&(wi=null),Ei!==null&&wu(Ei)&&(Ei=null),Ua.forEach(bg),Fa.forEach(bg)}function ta(t,e){t.blockedOn===e&&(t.blockedOn=null,kh||(kh=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,MI)))}function Ba(t){function e(i){return ta(i,t)}if(0<Jl.length){ta(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_i!==null&&ta(_i,t),wi!==null&&ta(wi,t),Ei!==null&&ta(Ei,t),Ua.forEach(e),Fa.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)sw(n),n.blockedOn===null&&ui.shift()}var io=Gr.ReactCurrentBatchConfig,qu=!0;function VI(t,e,n,r){var i=Be,s=io.transition;io.transition=null;try{Be=1,Yf(t,e,n,r)}finally{Be=i,io.transition=s}}function UI(t,e,n,r){var i=Be,s=io.transition;io.transition=null;try{Be=4,Yf(t,e,n,r)}finally{Be=i,io.transition=s}}function Yf(t,e,n,r){if(qu){var i=bh(t,e,n,r);if(i===null)Vd(t,e,r,Qu,n),kg(t,r);else if(LI(i,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<OI.indexOf(t)){for(;i!==null;){var s=pl(i);if(s!==null&&tw(s),s=bh(t,e,n,r),s===null&&Vd(t,e,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var Qu=null;function bh(t,e,n,r){if(Qu=null,t=qf(r),t=ns(t),t!==null)if(e=Rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function ow(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RI()){case Qf:return 1;case X_:return 4;case Hu:case AI:return 16;case J_:return 536870912;default:return 16}default:return 16}}var mi=null,Xf=null,Eu=null;function aw(){if(Eu)return Eu;var t,e=Xf,n=e.length,r,i="value"in mi?mi.value:mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Eu=i.slice(t,1<r?1-r:void 0)}function xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function Dg(){return!1}function Pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zl:Dg,this.isPropagationStopped=Dg,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jf=Pn(Po),fl=ht({},Po,{view:0,detail:0}),FI=Pn(fl),Cd,Pd,na,Dc=ht({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(Cd=t.screenX-na.screenX,Pd=t.screenY-na.screenY):Pd=Cd=0,na=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:Pd}}),jg=Pn(Dc),BI=ht({},Dc,{dataTransfer:0}),zI=Pn(BI),$I=ht({},fl,{relatedTarget:0}),kd=Pn($I),HI=ht({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),WI=Pn(HI),qI=ht({},Po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QI=Pn(qI),KI=ht({},Po,{data:0}),Og=Pn(KI),GI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XI[t])?!!e[t]:!1}function Zf(){return JI}var ZI=ht({},fl,{key:function(t){if(t.key){var e=GI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zf,charCode:function(t){return t.type==="keypress"?xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eS=Pn(ZI),tS=ht({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=Pn(tS),nS=ht({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zf}),rS=Pn(nS),iS=ht({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Pn(iS),oS=ht({},Dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aS=Pn(oS),lS=[9,13,27,32],ep=Vr&&"CompositionEvent"in window,Ta=null;Vr&&"documentMode"in document&&(Ta=document.documentMode);var uS=Vr&&"TextEvent"in window&&!Ta,lw=Vr&&(!ep||Ta&&8<Ta&&11>=Ta),Mg=" ",Vg=!1;function uw(t,e){switch(t){case"keyup":return lS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function cS(t,e){switch(t){case"compositionend":return cw(e);case"keypress":return e.which!==32?null:(Vg=!0,Mg);case"textInput":return t=e.data,t===Mg&&Vg?null:t;default:return null}}function dS(t,e){if(Ws)return t==="compositionend"||!ep&&uw(t,e)?(t=aw(),Eu=Xf=mi=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lw&&e.locale!=="ko"?null:e.data;default:return null}}var hS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hS[t.type]:e==="textarea"}function dw(t,e,n,r){z_(r),e=Ku(e,"onChange"),0<e.length&&(n=new Jf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ia=null,za=null;function fS(t){xw(t,0)}function jc(t){var e=Ks(t);if(O_(e))return t}function pS(t,e){if(t==="change")return e}var hw=!1;if(Vr){var bd;if(Vr){var Dd="oninput"in document;if(!Dd){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Dd=typeof Fg.oninput=="function"}bd=Dd}else bd=!1;hw=bd&&(!document.documentMode||9<document.documentMode)}function Bg(){Ia&&(Ia.detachEvent("onpropertychange",fw),za=Ia=null)}function fw(t){if(t.propertyName==="value"&&jc(za)){var e=[];dw(e,za,t,qf(t)),q_(fS,e)}}function mS(t,e,n){t==="focusin"?(Bg(),Ia=e,za=n,Ia.attachEvent("onpropertychange",fw)):t==="focusout"&&Bg()}function gS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jc(za)}function yS(t,e){if(t==="click")return jc(e)}function vS(t,e){if(t==="input"||t==="change")return jc(e)}function _S(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:_S;function $a(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ph.call(e,i)||!tr(t[i],e[i]))return!1}return!0}function zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=zg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zg(n)}}function pw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mw(){for(var t=window,e=Bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bu(t.document)}return e}function tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wS(t){var e=mw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pw(n.ownerDocument.documentElement,n)){if(r!==null&&tp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$g(n,s);var o=$g(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ES=Vr&&"documentMode"in document&&11>=document.documentMode,qs=null,Dh=null,Sa=null,jh=!1;function Hg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jh||qs==null||qs!==Bu(r)||(r=qs,"selectionStart"in r&&tp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sa&&$a(Sa,r)||(Sa=r,r=Ku(Dh,"onSelect"),0<r.length&&(e=new Jf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},jd={},gw={};Vr&&(gw=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Oc(t){if(jd[t])return jd[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gw)return jd[t]=e[n];return t}var yw=Oc("animationend"),vw=Oc("animationiteration"),_w=Oc("animationstart"),ww=Oc("transitionend"),Ew=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){Ew.set(t,e),Ss(e,[t])}for(var Od=0;Od<Wg.length;Od++){var Ld=Wg[Od],xS=Ld.toLowerCase(),TS=Ld[0].toUpperCase()+Ld.slice(1);Mi(xS,"on"+TS)}Mi(yw,"onAnimationEnd");Mi(vw,"onAnimationIteration");Mi(_w,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(ww,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function qg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xI(r,e,void 0,t),t.currentTarget=null}function xw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;qg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;qg(i,l,c),s=u}}}if($u)throw t=Ch,$u=!1,Ch=null,t}function tt(t,e){var n=e[Uh];n===void 0&&(n=e[Uh]=new Set);var r=t+"__bubble";n.has(r)||(Tw(e,t,2,!1),n.add(r))}function Md(t,e,n){var r=0;e&&(r|=4),Tw(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[tu]){t[tu]=!0,P_.forEach(function(n){n!=="selectionchange"&&(IS.has(n)||Md(n,!1,t),Md(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,Md("selectionchange",!1,e))}}function Tw(t,e,n,r){switch(ow(e)){case 1:var i=VI;break;case 4:i=UI;break;default:i=Yf}n=i.bind(null,e,n,t),i=void 0,!Nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ns(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}q_(function(){var c=s,f=qf(n),p=[];e:{var g=Ew.get(t);if(g!==void 0){var E=Jf,R=t;switch(t){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":E=eS;break;case"focusin":R="focus",E=kd;break;case"focusout":R="blur",E=kd;break;case"beforeblur":case"afterblur":E=kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=zI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=rS;break;case yw:case vw:case _w:E=WI;break;case ww:E=sS;break;case"scroll":E=FI;break;case"wheel":E=aS;break;case"copy":case"cut":case"paste":E=QI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Lg}var N=(e&4)!==0,b=!N&&t==="scroll",S=N?g!==null?g+"Capture":null:g;N=[];for(var w=c,A;w!==null;){A=w;var j=A.stateNode;if(A.tag===5&&j!==null&&(A=j,S!==null&&(j=Va(w,S),j!=null&&N.push(Wa(w,j,A)))),b)break;w=w.return}0<N.length&&(g=new E(g,R,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==Rh&&(R=n.relatedTarget||n.fromElement)&&(ns(R)||R[Ur]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(R=n.relatedTarget||n.toElement,E=c,R=R?ns(R):null,R!==null&&(b=Rs(R),R!==b||R.tag!==5&&R.tag!==6)&&(R=null)):(E=null,R=c),E!==R)){if(N=jg,j="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=Lg,j="onPointerLeave",S="onPointerEnter",w="pointer"),b=E==null?g:Ks(E),A=R==null?g:Ks(R),g=new N(j,w+"leave",E,n,f),g.target=b,g.relatedTarget=A,j=null,ns(f)===c&&(N=new N(S,w+"enter",R,n,f),N.target=A,N.relatedTarget=b,j=N),b=j,E&&R)t:{for(N=E,S=R,w=0,A=N;A;A=Vs(A))w++;for(A=0,j=S;j;j=Vs(j))A++;for(;0<w-A;)N=Vs(N),w--;for(;0<A-w;)S=Vs(S),A--;for(;w--;){if(N===S||S!==null&&N===S.alternate)break t;N=Vs(N),S=Vs(S)}N=null}else N=null;E!==null&&Qg(p,g,E,N,!1),R!==null&&b!==null&&Qg(p,b,R,N,!0)}}e:{if(g=c?Ks(c):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var U=pS;else if(Ug(g))if(hw)U=vS;else{U=gS;var F=mS}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=yS);if(U&&(U=U(t,c))){dw(p,U,n,f);break e}F&&F(t,g,c),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Eh(g,"number",g.value)}switch(F=c?Ks(c):window,t){case"focusin":(Ug(F)||F.contentEditable==="true")&&(qs=F,Dh=c,Sa=null);break;case"focusout":Sa=Dh=qs=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Hg(p,n,f);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":Hg(p,n,f)}var y;if(ep)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ws?uw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(lw&&n.locale!=="ko"&&(Ws||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ws&&(y=aw()):(mi=f,Xf="value"in mi?mi.value:mi.textContent,Ws=!0)),F=Ku(c,v),0<F.length&&(v=new Og(v,t,null,n,f),p.push({event:v,listeners:F}),y?v.data=y:(y=cw(n),y!==null&&(v.data=y)))),(y=uS?cS(t,n):dS(t,n))&&(c=Ku(c,"onBeforeInput"),0<c.length&&(f=new Og("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=y))}xw(p,e)})}function Wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Va(t,n),s!=null&&r.unshift(Wa(t,s,i)),s=Va(t,e),s!=null&&r.push(Wa(t,s,i))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Va(n,s),u!=null&&o.unshift(Wa(n,u,l))):i||(u=Va(n,s),u!=null&&o.push(Wa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SS=/\r\n?/g,RS=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(SS,`
`).replace(RS,"")}function nu(t,e,n){if(e=Kg(e),Kg(t)!==e&&n)throw Error(W(425))}function Gu(){}var Oh=null,Lh=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vh=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(CS)}:Vh;function CS(t){setTimeout(function(){throw t})}function Ud(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ba(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ba(e)}function xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ko=Math.random().toString(36).slice(2),cr="__reactFiber$"+ko,qa="__reactProps$"+ko,Ur="__reactContainer$"+ko,Uh="__reactEvents$"+ko,PS="__reactListeners$"+ko,kS="__reactHandles$"+ko;function ns(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yg(t);t!==null;){if(n=t[cr])return n;t=Yg(t)}return e}t=n,n=t.parentNode}return null}function pl(t){return t=t[cr]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Lc(t){return t[qa]||null}var Fh=[],Gs=-1;function Vi(t){return{current:t}}function it(t){0>Gs||(t.current=Fh[Gs],Fh[Gs]=null,Gs--)}function Ye(t,e){Gs++,Fh[Gs]=t.current,t.current=e}var bi={},Jt=Vi(bi),fn=Vi(!1),ps=bi;function fo(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pn(t){return t=t.childContextTypes,t!=null}function Yu(){it(fn),it(Jt)}function Xg(t,e,n){if(Jt.current!==bi)throw Error(W(168));Ye(Jt,e),Ye(fn,n)}function Iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,mI(t)||"Unknown",i));return ht({},n,r)}function Xu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,ps=Jt.current,Ye(Jt,t),Ye(fn,fn.current),!0}function Jg(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=Iw(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,it(fn),it(Jt),Ye(Jt,t)):it(fn),Ye(fn,n)}var Ar=null,Mc=!1,Fd=!1;function Sw(t){Ar===null?Ar=[t]:Ar.push(t)}function bS(t){Mc=!0,Sw(t)}function Ui(){if(!Fd&&Ar!==null){Fd=!0;var t=0,e=Be;try{var n=Ar;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,Mc=!1}catch(i){throw Ar!==null&&(Ar=Ar.slice(t+1)),Y_(Qf,Ui),i}finally{Be=e,Fd=!1}}return null}var Ys=[],Xs=0,Ju=null,Zu=0,Dn=[],jn=0,ms=null,Cr=1,Pr="";function Xi(t,e){Ys[Xs++]=Zu,Ys[Xs++]=Ju,Ju=t,Zu=e}function Rw(t,e,n){Dn[jn++]=Cr,Dn[jn++]=Pr,Dn[jn++]=ms,ms=t;var r=Cr;t=Pr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var s=32-Gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cr=1<<32-Gn(e)+i|n<<i|r,Pr=s+t}else Cr=1<<s|n<<i|r,Pr=t}function np(t){t.return!==null&&(Xi(t,1),Rw(t,1,0))}function rp(t){for(;t===Ju;)Ju=Ys[--Xs],Ys[Xs]=null,Zu=Ys[--Xs],Ys[Xs]=null;for(;t===ms;)ms=Dn[--jn],Dn[jn]=null,Pr=Dn[--jn],Dn[jn]=null,Cr=Dn[--jn],Dn[jn]=null}var An=null,In=null,at=!1,Kn=null;function Aw(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,In=xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,In=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Cr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,In=null,!0):!1;default:return!1}}function Bh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zh(t){if(at){var e=In;if(e){var n=e;if(!Zg(t,e)){if(Bh(t))throw Error(W(418));e=xi(n.nextSibling);var r=An;e&&Zg(t,e)?Aw(r,n):(t.flags=t.flags&-4097|2,at=!1,An=t)}}else{if(Bh(t))throw Error(W(418));t.flags=t.flags&-4097|2,at=!1,An=t}}}function ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function ru(t){if(t!==An)return!1;if(!at)return ey(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=In)){if(Bh(t))throw Nw(),Error(W(418));for(;e;)Aw(t,e),e=xi(e.nextSibling)}if(ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){In=xi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}In=null}}else In=An?xi(t.stateNode.nextSibling):null;return!0}function Nw(){for(var t=In;t;)t=xi(t.nextSibling)}function po(){In=An=null,at=!1}function ip(t){Kn===null?Kn=[t]:Kn.push(t)}var DS=Gr.ReactCurrentBatchConfig;function ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ty(t){var e=t._init;return e(t._payload)}function Cw(t){function e(S,w){if(t){var A=S.deletions;A===null?(S.deletions=[w],S.flags|=16):A.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=Ri(S,w),S.index=0,S.sibling=null,S}function s(S,w,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<w?(S.flags|=2,w):A):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,w,A,j){return w===null||w.tag!==6?(w=Qd(A,S.mode,j),w.return=S,w):(w=i(w,A),w.return=S,w)}function u(S,w,A,j){var U=A.type;return U===Hs?f(S,w,A.props.children,j,A.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===ai&&ty(U)===w.type)?(j=i(w,A.props),j.ref=ra(S,w,A),j.return=S,j):(j=Cu(A.type,A.key,A.props,null,S.mode,j),j.ref=ra(S,w,A),j.return=S,j)}function c(S,w,A,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Kd(A,S.mode,j),w.return=S,w):(w=i(w,A.children||[]),w.return=S,w)}function f(S,w,A,j,U){return w===null||w.tag!==7?(w=us(A,S.mode,j,U),w.return=S,w):(w=i(w,A),w.return=S,w)}function p(S,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qd(""+w,S.mode,A),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:return A=Cu(w.type,w.key,w.props,null,S.mode,A),A.ref=ra(S,null,w),A.return=S,A;case $s:return w=Kd(w,S.mode,A),w.return=S,w;case ai:var j=w._init;return p(S,j(w._payload),A)}if(fa(w)||Jo(w))return w=us(w,S.mode,A,null),w.return=S,w;iu(S,w)}return null}function g(S,w,A,j){var U=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return U!==null?null:l(S,w,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ql:return A.key===U?u(S,w,A,j):null;case $s:return A.key===U?c(S,w,A,j):null;case ai:return U=A._init,g(S,w,U(A._payload),j)}if(fa(A)||Jo(A))return U!==null?null:f(S,w,A,j,null);iu(S,A)}return null}function E(S,w,A,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(A)||null,l(w,S,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ql:return S=S.get(j.key===null?A:j.key)||null,u(w,S,j,U);case $s:return S=S.get(j.key===null?A:j.key)||null,c(w,S,j,U);case ai:var F=j._init;return E(S,w,A,F(j._payload),U)}if(fa(j)||Jo(j))return S=S.get(A)||null,f(w,S,j,U,null);iu(w,j)}return null}function R(S,w,A,j){for(var U=null,F=null,y=w,v=w=0,I=null;y!==null&&v<A.length;v++){y.index>v?(I=y,y=null):I=y.sibling;var x=g(S,y,A[v],j);if(x===null){y===null&&(y=I);break}t&&y&&x.alternate===null&&e(S,y),w=s(x,w,v),F===null?U=x:F.sibling=x,F=x,y=I}if(v===A.length)return n(S,y),at&&Xi(S,v),U;if(y===null){for(;v<A.length;v++)y=p(S,A[v],j),y!==null&&(w=s(y,w,v),F===null?U=y:F.sibling=y,F=y);return at&&Xi(S,v),U}for(y=r(S,y);v<A.length;v++)I=E(y,S,v,A[v],j),I!==null&&(t&&I.alternate!==null&&y.delete(I.key===null?v:I.key),w=s(I,w,v),F===null?U=I:F.sibling=I,F=I);return t&&y.forEach(function(C){return e(S,C)}),at&&Xi(S,v),U}function N(S,w,A,j){var U=Jo(A);if(typeof U!="function")throw Error(W(150));if(A=U.call(A),A==null)throw Error(W(151));for(var F=U=null,y=w,v=w=0,I=null,x=A.next();y!==null&&!x.done;v++,x=A.next()){y.index>v?(I=y,y=null):I=y.sibling;var C=g(S,y,x.value,j);if(C===null){y===null&&(y=I);break}t&&y&&C.alternate===null&&e(S,y),w=s(C,w,v),F===null?U=C:F.sibling=C,F=C,y=I}if(x.done)return n(S,y),at&&Xi(S,v),U;if(y===null){for(;!x.done;v++,x=A.next())x=p(S,x.value,j),x!==null&&(w=s(x,w,v),F===null?U=x:F.sibling=x,F=x);return at&&Xi(S,v),U}for(y=r(S,y);!x.done;v++,x=A.next())x=E(y,S,v,x.value,j),x!==null&&(t&&x.alternate!==null&&y.delete(x.key===null?v:x.key),w=s(x,w,v),F===null?U=x:F.sibling=x,F=x);return t&&y.forEach(function(k){return e(S,k)}),at&&Xi(S,v),U}function b(S,w,A,j){if(typeof A=="object"&&A!==null&&A.type===Hs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ql:e:{for(var U=A.key,F=w;F!==null;){if(F.key===U){if(U=A.type,U===Hs){if(F.tag===7){n(S,F.sibling),w=i(F,A.props.children),w.return=S,S=w;break e}}else if(F.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===ai&&ty(U)===F.type){n(S,F.sibling),w=i(F,A.props),w.ref=ra(S,F,A),w.return=S,S=w;break e}n(S,F);break}else e(S,F);F=F.sibling}A.type===Hs?(w=us(A.props.children,S.mode,j,A.key),w.return=S,S=w):(j=Cu(A.type,A.key,A.props,null,S.mode,j),j.ref=ra(S,w,A),j.return=S,S=j)}return o(S);case $s:e:{for(F=A.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(S,w.sibling),w=i(w,A.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Kd(A,S.mode,j),w.return=S,S=w}return o(S);case ai:return F=A._init,b(S,w,F(A._payload),j)}if(fa(A))return R(S,w,A,j);if(Jo(A))return N(S,w,A,j);iu(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,A),w.return=S,S=w):(n(S,w),w=Qd(A,S.mode,j),w.return=S,S=w),o(S)):n(S,w)}return b}var mo=Cw(!0),Pw=Cw(!1),ec=Vi(null),tc=null,Js=null,sp=null;function op(){sp=Js=tc=null}function ap(t){var e=ec.current;it(ec),t._currentValue=e}function $h(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function so(t,e){tc=t,sp=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(sp!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if(tc===null)throw Error(W(308));Js=t,tc.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var rs=null;function lp(t){rs===null?rs=[t]:rs.push(t)}function kw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,lp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var li=!1;function up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,lp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function Tu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kf(t,n)}}function ny(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nc(t,e,n,r){var i=t.updateQueue;li=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=c=u=null,l=s;do{var g=l.lane,E=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,N=l;switch(g=e,E=n,N.tag){case 1:if(R=N.payload,typeof R=="function"){p=R.call(E,p,g);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=N.payload,g=typeof R=="function"?R.call(E,p,g):R,g==null)break e;p=ht({},p,g);break e;case 2:li=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=E,u=p):f=f.next=E,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=p}}function ry(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var ml={},fr=Vi(ml),Qa=Vi(ml),Ka=Vi(ml);function is(t){if(t===ml)throw Error(W(174));return t}function cp(t,e){switch(Ye(Ka,e),Ye(Qa,t),Ye(fr,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Th(e,t)}it(fr),Ye(fr,e)}function go(){it(fr),it(Qa),it(Ka)}function Dw(t){is(Ka.current);var e=is(fr.current),n=Th(e,t.type);e!==n&&(Ye(Qa,t),Ye(fr,n))}function dp(t){Qa.current===t&&(it(fr),it(Qa))}var ct=Vi(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bd=[];function hp(){for(var t=0;t<Bd.length;t++)Bd[t]._workInProgressVersionPrimary=null;Bd.length=0}var Iu=Gr.ReactCurrentDispatcher,zd=Gr.ReactCurrentBatchConfig,gs=0,dt=null,Nt=null,bt=null,ic=!1,Ra=!1,Ga=0,jS=0;function qt(){throw Error(W(321))}function fp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function pp(t,e,n,r,i,s){if(gs=s,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?VS:US,t=n(r,i),Ra){s=0;do{if(Ra=!1,Ga=0,25<=s)throw Error(W(301));s+=1,bt=Nt=null,e.updateQueue=null,Iu.current=FS,t=n(r,i)}while(Ra)}if(Iu.current=sc,e=Nt!==null&&Nt.next!==null,gs=0,bt=Nt=dt=null,ic=!1,e)throw Error(W(300));return t}function mp(){var t=Ga!==0;return Ga=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?dt.memoizedState=bt=t:bt=bt.next=t,bt}function Un(){if(Nt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=bt===null?dt.memoizedState:bt.next;if(e!==null)bt=e,Nt=t;else{if(t===null)throw Error(W(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},bt===null?dt.memoizedState=bt=t:bt=bt.next=t}return bt}function Ya(t,e){return typeof e=="function"?e(t):e}function $d(t){var e=Un(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Nt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((gs&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,dt.lanes|=f,ys|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,tr(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,dt.lanes|=s,ys|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hd(t){var e=Un(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tr(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function jw(){}function Ow(t,e){var n=dt,r=Un(),i=e(),s=!tr(r.memoizedState,i);if(s&&(r.memoizedState=i,dn=!0),r=r.queue,gp(Vw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,Xa(9,Mw.bind(null,n,r,i,e),void 0,null),Dt===null)throw Error(W(349));gs&30||Lw(n,e,i)}return i}function Lw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mw(t,e,n,r){e.value=n,e.getSnapshot=r,Uw(e)&&Fw(t)}function Vw(t,e,n){return n(function(){Uw(e)&&Fw(t)})}function Uw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function Fw(t){var e=Fr(t,1);e!==null&&Yn(e,t,1,-1)}function iy(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:t},e.queue=t,t=t.dispatch=MS.bind(null,dt,t),[e.memoizedState,t]}function Xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bw(){return Un().memoizedState}function Su(t,e,n,r){var i=ur();dt.flags|=t,i.memoizedState=Xa(1|e,n,void 0,r===void 0?null:r)}function Vc(t,e,n,r){var i=Un();r=r===void 0?null:r;var s=void 0;if(Nt!==null){var o=Nt.memoizedState;if(s=o.destroy,r!==null&&fp(r,o.deps)){i.memoizedState=Xa(e,n,s,r);return}}dt.flags|=t,i.memoizedState=Xa(1|e,n,s,r)}function sy(t,e){return Su(8390656,8,t,e)}function gp(t,e){return Vc(2048,8,t,e)}function zw(t,e){return Vc(4,2,t,e)}function $w(t,e){return Vc(4,4,t,e)}function Hw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ww(t,e,n){return n=n!=null?n.concat([t]):null,Vc(4,4,Hw.bind(null,e,t),n)}function yp(){}function qw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kw(t,e,n){return gs&21?(tr(n,e)||(n=Z_(),dt.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function OS(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=zd.transition;zd.transition={};try{t(!1),e()}finally{Be=n,zd.transition=r}}function Gw(){return Un().memoizedState}function LS(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yw(t))Xw(e,n);else if(n=kw(t,e,n,r),n!==null){var i=sn();Yn(n,t,r,i),Jw(n,e,r)}}function MS(t,e,n){var r=Si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yw(t))Xw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,tr(l,o)){var u=e.interleaved;u===null?(i.next=i,lp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=kw(t,e,i,r),n!==null&&(i=sn(),Yn(n,t,r,i),Jw(n,e,r))}}function Yw(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function Xw(t,e){Ra=ic=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kf(t,n)}}var sc={readContext:Vn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},VS={readContext:Vn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:sy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,Hw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LS.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:iy,useDebugValue:yp,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=iy(!1),e=t[0];return t=OS.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,i=ur();if(at){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Dt===null)throw Error(W(349));gs&30||Lw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sy(Vw.bind(null,r,s,t),[t]),r.flags|=2048,Xa(9,Mw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ur(),e=Dt.identifierPrefix;if(at){var n=Pr,r=Cr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},US={readContext:Vn,useCallback:qw,useContext:Vn,useEffect:gp,useImperativeHandle:Ww,useInsertionEffect:zw,useLayoutEffect:$w,useMemo:Qw,useReducer:$d,useRef:Bw,useState:function(){return $d(Ya)},useDebugValue:yp,useDeferredValue:function(t){var e=Un();return Kw(e,Nt.memoizedState,t)},useTransition:function(){var t=$d(Ya)[0],e=Un().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:Ow,useId:Gw,unstable_isNewReconciler:!1},FS={readContext:Vn,useCallback:qw,useContext:Vn,useEffect:gp,useImperativeHandle:Ww,useInsertionEffect:zw,useLayoutEffect:$w,useMemo:Qw,useReducer:Hd,useRef:Bw,useState:function(){return Hd(Ya)},useDebugValue:yp,useDeferredValue:function(t){var e=Un();return Nt===null?e.memoizedState=t:Kw(e,Nt.memoizedState,t)},useTransition:function(){var t=Hd(Ya)[0],e=Un().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:Ow,useId:Gw,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uc={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Si(t),s=Or(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ti(t,s,i),e!==null&&(Yn(e,t,i,r),Tu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Si(t),s=Or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ti(t,s,i),e!==null&&(Yn(e,t,i,r),Tu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=Si(t),i=Or(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ti(t,i,r),e!==null&&(Yn(e,t,r,n),Tu(e,t,r))}};function oy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$a(n,r)||!$a(i,s):!0}function Zw(t,e,n){var r=!1,i=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=Vn(s):(i=pn(e)?ps:Jt.current,r=e.contextTypes,s=(r=r!=null)?fo(t,i):bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ay(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uc.enqueueReplaceState(e,e.state,null)}function Wh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},up(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vn(s):(s=pn(e)?ps:Jt.current,i.context=fo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Uc.enqueueReplaceState(i,i.state,null),nc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,e){try{var n="",r=e;do n+=pI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BS=typeof WeakMap=="function"?WeakMap:Map;function e0(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ac||(ac=!0,nf=r),qh(t,e)},n}function t0(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ly(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=tR.bind(null,t,e,n),e.then(t,t))}function uy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var zS=Gr.ReactCurrentOwner,dn=!1;function nn(t,e,n,r){e.child=t===null?Pw(e,null,n,r):mo(e,t.child,n,r)}function dy(t,e,n,r,i){n=n.render;var s=e.ref;return so(e,i),r=pp(t,e,n,r,s,i),n=mp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(at&&n&&np(e),e.flags|=1,nn(t,e,r,i),e.child)}function hy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Sp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,n0(t,e,s,r,i)):(t=Cu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(o,r)&&t.ref===e.ref)return Br(t,e,i)}return e.flags|=1,t=Ri(s,r),t.ref=e.ref,t.return=e,e.child=t}function n0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($a(s,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Br(t,e,i)}return Qh(t,e,n,r,i)}function r0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(eo,xn),xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(eo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(eo,xn),xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ye(eo,xn),xn|=r;return nn(t,e,i,n),e.child}function i0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qh(t,e,n,r,i){var s=pn(n)?ps:Jt.current;return s=fo(e,s),so(e,i),n=pp(t,e,n,r,s,i),r=mp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(at&&r&&np(e),e.flags|=1,nn(t,e,n,i),e.child)}function fy(t,e,n,r,i){if(pn(n)){var s=!0;Xu(e)}else s=!1;if(so(e,i),e.stateNode===null)Ru(t,e),Zw(e,n,r),Wh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vn(c):(c=pn(n)?ps:Jt.current,c=fo(e,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ay(e,o,r,c),li=!1;var g=e.memoizedState;o.state=g,nc(e,r,o,i),u=e.memoizedState,l!==r||g!==u||fn.current||li?(typeof f=="function"&&(Hh(e,n,f,r),u=e.memoizedState),(l=li||oy(e,n,l,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,bw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Wn(e.type,l),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vn(u):(u=pn(n)?ps:Jt.current,u=fo(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&ay(e,o,r,u),li=!1,g=e.memoizedState,o.state=g,nc(e,r,o,i);var R=e.memoizedState;l!==p||g!==R||fn.current||li?(typeof E=="function"&&(Hh(e,n,E,r),R=e.memoizedState),(c=li||oy(e,n,c,r,g,R,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Kh(t,e,n,r,s,i)}function Kh(t,e,n,r,i,s){i0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Jg(e,n,!1),Br(t,e,s);r=e.stateNode,zS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mo(e,t.child,null,s),e.child=mo(e,null,l,s)):nn(t,e,l,s),e.memoizedState=r.state,i&&Jg(e,n,!0),e.child}function s0(t){var e=t.stateNode;e.pendingContext?Xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xg(t,e.context,!1),cp(t,e.containerInfo)}function py(t,e,n,r,i){return po(),ip(i),e.flags|=256,nn(t,e,n,r),e.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function o0(t,e,n){var r=e.pendingProps,i=ct.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(ct,i&1),t===null)return zh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zc(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yh(n),e.memoizedState=Gh,t):vp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $S(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ri(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ri(l,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gh,r}return s=t.child,t=s.sibling,r=Ri(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vp(t,e){return e=zc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,r){return r!==null&&ip(r),mo(e,t.child,null,n),t=vp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $S(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(W(422))),su(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zc({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mo(e,t.child,null,o),e.child.memoizedState=Yh(o),e.memoizedState=Gh,s);if(!(e.mode&1))return su(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(W(419)),r=Wd(s,r,void 0),su(t,e,o,r)}if(l=(o&t.childLanes)!==0,dn||l){if(r=Dt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fr(t,i),Yn(r,t,i,-1))}return Ip(),r=Wd(Error(W(421))),su(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,In=xi(i.nextSibling),An=e,at=!0,Kn=null,t!==null&&(Dn[jn++]=Cr,Dn[jn++]=Pr,Dn[jn++]=ms,Cr=t.id,Pr=t.overflow,ms=e),e=vp(e,r.children),e.flags|=4096,e)}function my(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$h(t.return,e,n)}function qd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function a0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nn(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&my(t,n,e);else if(t.tag===19)my(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qd(e,!0,n,null,s);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HS(t,e,n){switch(e.tag){case 3:s0(e),po();break;case 5:Dw(e);break;case 1:pn(e.type)&&Xu(e);break;case 4:cp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(ec,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?o0(t,e,n):(Ye(ct,ct.current&1),t=Br(t,e,n),t!==null?t.sibling:null);Ye(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,r0(t,e,n)}return Br(t,e,n)}var l0,Xh,u0,c0;l0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xh=function(){};u0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,is(fr.current);var s=null;switch(n){case"input":i=_h(t,i),r=_h(t,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=xh(t,i),r=xh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gu)}Ih(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(La.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(La.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&tt("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};c0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ia(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WS(t,e,n){var r=e.pendingProps;switch(rp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return pn(e.type)&&Yu(),Qt(e),null;case 3:return r=e.stateNode,go(),it(fn),it(Jt),hp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(of(Kn),Kn=null))),Xh(t,e),Qt(e),null;case 5:dp(e);var i=is(Ka.current);if(n=e.type,t!==null&&e.stateNode!=null)u0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Qt(e),null}if(t=is(fr.current),ru(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cr]=e,r[qa]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<ma.length;i++)tt(ma[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Ig(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":Rg(r,s),tt("invalid",r)}Ih(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),i=["children",""+l]):La.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":Kl(r),Sg(r,s,!0);break;case"textarea":Kl(r),Ag(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cr]=e,t[qa]=r,l0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sh(n,r),n){case"dialog":tt("cancel",t),tt("close",t),i=r;break;case"iframe":case"object":case"embed":tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ma.length;i++)tt(ma[i],t);i=r;break;case"source":tt("error",t),i=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=r;break;case"details":tt("toggle",t),i=r;break;case"input":Ig(t,r),i=_h(t,r),tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),tt("invalid",t);break;case"textarea":Rg(t,r),i=xh(t,r),tt("invalid",t);break;default:i=r}Ih(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?B_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&U_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ma(t,u):typeof u=="number"&&Ma(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(La.hasOwnProperty(s)?u!=null&&s==="onScroll"&&tt("scroll",t):u!=null&&zf(t,s,u,o))}switch(n){case"input":Kl(t),Sg(t,r,!1);break;case"textarea":Kl(t),Ag(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?to(t,!!r.multiple,s,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)c0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=is(Ka.current),is(fr.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(s=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return Qt(e),null;case 13:if(it(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&In!==null&&e.mode&1&&!(e.flags&128))Nw(),po(),e.flags|=98560,s=!1;else if(s=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[cr]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else Kn!==null&&(of(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Ct===0&&(Ct=3):Ip())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return go(),Xh(t,e),t===null&&Ha(e.stateNode.containerInfo),Qt(e),null;case 10:return ap(e.type._context),Qt(e),null;case 17:return pn(e.type)&&Yu(),Qt(e),null;case 19:if(it(ct),s=e.memoizedState,s===null)return Qt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ia(s,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rc(t),o!==null){for(e.flags|=128,ia(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ct,ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&xt()>vo&&(e.flags|=128,r=!0,ia(s,!1),e.lanes=4194304)}else{if(!r)if(t=rc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!at)return Qt(e),null}else 2*xt()-s.renderingStartTime>vo&&n!==1073741824&&(e.flags|=128,r=!0,ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xt(),e.sibling=null,n=ct.current,Ye(ct,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return Tp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function qS(t,e){switch(rp(e),e.tag){case 1:return pn(e.type)&&Yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return go(),it(fn),it(Jt),hp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dp(e),null;case 13:if(it(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(ct),null;case 4:return go(),null;case 10:return ap(e.type._context),null;case 22:case 23:return Tp(),null;case 24:return null;default:return null}}var ou=!1,Yt=!1,QS=typeof WeakSet=="function"?WeakSet:Set,X=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Jh(t,e,n){try{n()}catch(r){yt(t,e,r)}}var gy=!1;function KS(t,e){if(Oh=qu,t=mw(),tp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,p=t,g=null;t:for(;;){for(var E;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++f===r&&(u=o),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lh={focusedElem:t,selectionRange:n},qu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var N=R.memoizedProps,b=R.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?N:Wn(e.type,N),b);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(j){yt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return R=gy,gy=!1,R}function Aa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jh(e,n,s)}i=i.next}while(i!==r)}}function Fc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d0(t){var e=t.alternate;e!==null&&(t.alternate=null,d0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[qa],delete e[Uh],delete e[PS],delete e[kS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h0(t){return t.tag===5||t.tag===3||t.tag===4}function yy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gu));else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}var Lt=null,qn=!1;function ni(t,e,n){for(n=n.child;n!==null;)f0(t,e,n),n=n.sibling}function f0(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(bc,n)}catch{}switch(n.tag){case 5:Yt||Zs(n,e);case 6:var r=Lt,i=qn;Lt=null,ni(t,e,n),Lt=r,qn=i,Lt!==null&&(qn?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(qn?(t=Lt,n=n.stateNode,t.nodeType===8?Ud(t.parentNode,n):t.nodeType===1&&Ud(t,n),Ba(t)):Ud(Lt,n.stateNode));break;case 4:r=Lt,i=qn,Lt=n.stateNode.containerInfo,qn=!0,ni(t,e,n),Lt=r,qn=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Jh(n,e,o),i=i.next}while(i!==r)}ni(t,e,n);break;case 1:if(!Yt&&(Zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yt(n,e,l)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,ni(t,e,n),Yt=r):ni(t,e,n);break;default:ni(t,e,n)}}function vy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QS),e.forEach(function(r){var i=rR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Lt=l.stateNode,qn=!1;break e;case 3:Lt=l.stateNode.containerInfo,qn=!0;break e;case 4:Lt=l.stateNode.containerInfo,qn=!0;break e}l=l.return}if(Lt===null)throw Error(W(160));f0(s,o,i),Lt=null,qn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){yt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p0(e,t),e=e.sibling}function p0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),lr(t),r&4){try{Aa(3,t,t.return),Fc(3,t)}catch(N){yt(t,t.return,N)}try{Aa(5,t,t.return)}catch(N){yt(t,t.return,N)}}break;case 1:Hn(e,t),lr(t),r&512&&n!==null&&Zs(n,n.return);break;case 5:if(Hn(e,t),lr(t),r&512&&n!==null&&Zs(n,n.return),t.flags&32){var i=t.stateNode;try{Ma(i,"")}catch(N){yt(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&L_(i,s),Sh(l,o);var c=Sh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?B_(i,p):f==="dangerouslySetInnerHTML"?U_(i,p):f==="children"?Ma(i,p):zf(i,f,p,c)}switch(l){case"input":wh(i,s);break;case"textarea":M_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?to(i,!!s.multiple,E,!1):g!==!!s.multiple&&(s.defaultValue!=null?to(i,!!s.multiple,s.defaultValue,!0):to(i,!!s.multiple,s.multiple?[]:"",!1))}i[qa]=s}catch(N){yt(t,t.return,N)}}break;case 6:if(Hn(e,t),lr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){yt(t,t.return,N)}}break;case 3:if(Hn(e,t),lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ba(e.containerInfo)}catch(N){yt(t,t.return,N)}break;case 4:Hn(e,t),lr(t);break;case 13:Hn(e,t),lr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ep=xt())),r&4&&vy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||f,Hn(e,t),Yt=c):Hn(e,t),lr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(X=t,f=t.child;f!==null;){for(p=X=f;X!==null;){switch(g=X,E=g.child,g.tag){case 0:case 11:case 14:case 15:Aa(4,g,g.return);break;case 1:Zs(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(N){yt(r,n,N)}}break;case 5:Zs(g,g.return);break;case 22:if(g.memoizedState!==null){wy(p);continue}}E!==null?(E.return=g,X=E):wy(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=F_("display",o))}catch(N){yt(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(N){yt(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Hn(e,t),lr(t),r&4&&vy(t);break;case 21:break;default:Hn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h0(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ma(i,""),r.flags&=-33);var s=yy(t);tf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=yy(t);ef(t,l,o);break;default:throw Error(W(161))}}catch(u){yt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GS(t,e,n){X=t,m0(t)}function m0(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ou;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Yt;l=ou;var c=Yt;if(ou=o,(Yt=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?Ey(i):u!==null?(u.return=o,X=u):Ey(i);for(;s!==null;)X=s,m0(s),s=s.sibling;X=i,ou=l,Yt=c}_y(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):_y(t)}}function _y(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Fc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ry(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ry(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ba(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Yt||e.flags&512&&Zh(e)}catch(g){yt(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function wy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Ey(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fc(4,e)}catch(u){yt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){yt(e,i,u)}}var s=e.return;try{Zh(e)}catch(u){yt(e,s,u)}break;case 5:var o=e.return;try{Zh(e)}catch(u){yt(e,o,u)}}}catch(u){yt(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var YS=Math.ceil,oc=Gr.ReactCurrentDispatcher,_p=Gr.ReactCurrentOwner,Ln=Gr.ReactCurrentBatchConfig,ke=0,Dt=null,Rt=null,Ut=0,xn=0,eo=Vi(0),Ct=0,Ja=null,ys=0,Bc=0,wp=0,Na=null,un=null,Ep=0,vo=1/0,Rr=null,ac=!1,nf=null,Ii=null,au=!1,gi=null,lc=0,Ca=0,rf=null,Au=-1,Nu=0;function sn(){return ke&6?xt():Au!==-1?Au:Au=xt()}function Si(t){return t.mode&1?ke&2&&Ut!==0?Ut&-Ut:DS.transition!==null?(Nu===0&&(Nu=Z_()),Nu):(t=Be,t!==0||(t=window.event,t=t===void 0?16:ow(t.type)),t):1}function Yn(t,e,n,r){if(50<Ca)throw Ca=0,rf=null,Error(W(185));hl(t,n,r),(!(ke&2)||t!==Dt)&&(t===Dt&&(!(ke&2)&&(Bc|=n),Ct===4&&ci(t,Ut)),mn(t,r),n===1&&ke===0&&!(e.mode&1)&&(vo=xt()+500,Mc&&Ui()))}function mn(t,e){var n=t.callbackNode;DI(t,e);var r=Wu(t,t===Dt?Ut:0);if(r===0)n!==null&&Pg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pg(n),e===1)t.tag===0?bS(xy.bind(null,t)):Sw(xy.bind(null,t)),NS(function(){!(ke&6)&&Ui()}),n=null;else{switch(ew(r)){case 1:n=Qf;break;case 4:n=X_;break;case 16:n=Hu;break;case 536870912:n=J_;break;default:n=Hu}n=T0(n,g0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g0(t,e){if(Au=-1,Nu=0,ke&6)throw Error(W(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Wu(t,t===Dt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uc(t,r);else{e=r;var i=ke;ke|=2;var s=v0();(Dt!==t||Ut!==e)&&(Rr=null,vo=xt()+500,ls(t,e));do try{ZS();break}catch(l){y0(t,l)}while(!0);op(),oc.current=s,ke=i,Rt!==null?e=0:(Dt=null,Ut=0,e=Ct)}if(e!==0){if(e===2&&(i=Ph(t),i!==0&&(r=i,e=sf(t,i))),e===1)throw n=Ja,ls(t,0),ci(t,r),mn(t,xt()),n;if(e===6)ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!XS(i)&&(e=uc(t,r),e===2&&(s=Ph(t),s!==0&&(r=s,e=sf(t,s))),e===1))throw n=Ja,ls(t,0),ci(t,r),mn(t,xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Ji(t,un,Rr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=Ep+500-xt(),10<e)){if(Wu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vh(Ji.bind(null,t,un,Rr),e);break}Ji(t,un,Rr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YS(r/1960))-r,10<r){t.timeoutHandle=Vh(Ji.bind(null,t,un,Rr),r);break}Ji(t,un,Rr);break;case 5:Ji(t,un,Rr);break;default:throw Error(W(329))}}}return mn(t,xt()),t.callbackNode===n?g0.bind(null,t):null}function sf(t,e){var n=Na;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=uc(t,e),t!==2&&(e=un,un=n,e!==null&&of(e)),t}function of(t){un===null?un=t:un.push.apply(un,t)}function XS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~wp,e&=~Bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function xy(t){if(ke&6)throw Error(W(327));oo();var e=Wu(t,0);if(!(e&1))return mn(t,xt()),null;var n=uc(t,e);if(t.tag!==0&&n===2){var r=Ph(t);r!==0&&(e=r,n=sf(t,r))}if(n===1)throw n=Ja,ls(t,0),ci(t,e),mn(t,xt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ji(t,un,Rr),mn(t,xt()),null}function xp(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(vo=xt()+500,Mc&&Ui())}}function vs(t){gi!==null&&gi.tag===0&&!(ke&6)&&oo();var e=ke;ke|=1;var n=Ln.transition,r=Be;try{if(Ln.transition=null,Be=1,t)return t()}finally{Be=r,Ln.transition=n,ke=e,!(ke&6)&&Ui()}}function Tp(){xn=eo.current,it(eo)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AS(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(rp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yu();break;case 3:go(),it(fn),it(Jt),hp();break;case 5:dp(r);break;case 4:go();break;case 13:it(ct);break;case 19:it(ct);break;case 10:ap(r.type._context);break;case 22:case 23:Tp()}n=n.return}if(Dt=t,Rt=t=Ri(t.current,null),Ut=xn=e,Ct=0,Ja=null,wp=Bc=ys=0,un=Na=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rs=null}return t}function y0(t,e){do{var n=Rt;try{if(op(),Iu.current=sc,ic){for(var r=dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ic=!1}if(gs=0,bt=Nt=dt=null,Ra=!1,Ga=0,_p.current=null,n===null||n.return===null){Ct=1,Ja=e,Rt=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Ut,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=uy(o);if(E!==null){E.flags&=-257,cy(E,o,l,s,e),E.mode&1&&ly(s,c,e),e=E,u=c;var R=e.updateQueue;if(R===null){var N=new Set;N.add(u),e.updateQueue=N}else R.add(u);break e}else{if(!(e&1)){ly(s,c,e),Ip();break e}u=Error(W(426))}}else if(at&&l.mode&1){var b=uy(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),cy(b,o,l,s,e),ip(yo(u,l));break e}}s=u=yo(u,l),Ct!==4&&(Ct=2),Na===null?Na=[s]:Na.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=e0(s,u,e);ny(s,S);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ii===null||!Ii.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=t0(s,l,e);ny(s,j);break e}}s=s.return}while(s!==null)}w0(n)}catch(U){e=U,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function v0(){var t=oc.current;return oc.current=sc,t===null?sc:t}function Ip(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Dt===null||!(ys&268435455)&&!(Bc&268435455)||ci(Dt,Ut)}function uc(t,e){var n=ke;ke|=2;var r=v0();(Dt!==t||Ut!==e)&&(Rr=null,ls(t,e));do try{JS();break}catch(i){y0(t,i)}while(!0);if(op(),ke=n,oc.current=r,Rt!==null)throw Error(W(261));return Dt=null,Ut=0,Ct}function JS(){for(;Rt!==null;)_0(Rt)}function ZS(){for(;Rt!==null&&!II();)_0(Rt)}function _0(t){var e=x0(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?w0(t):Rt=e,_p.current=null}function w0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qS(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,Rt=null;return}}else if(n=WS(n,e,xn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Ct===0&&(Ct=5)}function Ji(t,e,n){var r=Be,i=Ln.transition;try{Ln.transition=null,Be=1,eR(t,e,n,r)}finally{Ln.transition=i,Be=r}return null}function eR(t,e,n,r){do oo();while(gi!==null);if(ke&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jI(t,s),t===Dt&&(Rt=Dt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,T0(Hu,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=Be;Be=1;var l=ke;ke|=4,_p.current=null,KS(t,n),p0(n,t),wS(Lh),qu=!!Oh,Lh=Oh=null,t.current=n,GS(n),SI(),ke=l,Be=o,Ln.transition=s}else t.current=n;if(au&&(au=!1,gi=t,lc=i),s=t.pendingLanes,s===0&&(Ii=null),NI(n.stateNode),mn(t,xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ac)throw ac=!1,t=nf,nf=null,t;return lc&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===rf?Ca++:(Ca=0,rf=t):Ca=0,Ui(),null}function oo(){if(gi!==null){var t=ew(lc),e=Ln.transition,n=Be;try{if(Ln.transition=null,Be=16>t?16:t,gi===null)var r=!1;else{if(t=gi,gi=null,lc=0,ke&6)throw Error(W(331));var i=ke;for(ke|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:Aa(8,f,s)}var p=f.child;if(p!==null)p.return=f,X=p;else for(;X!==null;){f=X;var g=f.sibling,E=f.return;if(d0(f),f===c){X=null;break}if(g!==null){g.return=E,X=g;break}X=E}}}var R=s.alternate;if(R!==null){var N=R.child;if(N!==null){R.child=null;do{var b=N.sibling;N.sibling=null,N=b}while(N!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Aa(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,X=S;break e}X=s.return}}var w=t.current;for(X=w;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=w;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fc(9,l)}}catch(U){yt(l,l.return,U)}if(l===o){X=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,X=j;break e}X=l.return}}if(ke=i,Ui(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(bc,t)}catch{}r=!0}return r}finally{Be=n,Ln.transition=e}}return!1}function Ty(t,e,n){e=yo(n,e),e=e0(t,e,1),t=Ti(t,e,1),e=sn(),t!==null&&(hl(t,1,e),mn(t,e))}function yt(t,e,n){if(t.tag===3)Ty(t,t,n);else for(;e!==null;){if(e.tag===3){Ty(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=yo(n,t),t=t0(e,t,1),e=Ti(e,t,1),t=sn(),e!==null&&(hl(e,1,t),mn(e,t));break}}e=e.return}}function tR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Ut&n)===n&&(Ct===4||Ct===3&&(Ut&130023424)===Ut&&500>xt()-Ep?ls(t,0):wp|=n),mn(t,e)}function E0(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=sn();t=Fr(t,e),t!==null&&(hl(t,e,n),mn(t,n))}function nR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E0(t,n)}function rR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),E0(t,n)}var x0;x0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,HS(t,e,n);dn=!!(t.flags&131072)}else dn=!1,at&&e.flags&1048576&&Rw(e,Zu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var i=fo(e,Jt.current);so(e,n),i=pp(null,e,r,t,i,n);var s=mp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(s=!0,Xu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,up(e),i.updater=Uc,e.stateNode=i,i._reactInternals=e,Wh(e,r,t,n),e=Kh(null,e,r,!0,s,n)):(e.tag=0,at&&s&&np(e),nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sR(r),t=Wn(r,t),i){case 0:e=Qh(null,e,r,t,n);break e;case 1:e=fy(null,e,r,t,n);break e;case 11:e=dy(null,e,r,t,n);break e;case 14:e=hy(null,e,r,Wn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Qh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),fy(t,e,r,i,n);case 3:e:{if(s0(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,bw(t,e),nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=yo(Error(W(423)),e),e=py(t,e,r,n,i);break e}else if(r!==i){i=yo(Error(W(424)),e),e=py(t,e,r,n,i);break e}else for(In=xi(e.stateNode.containerInfo.firstChild),An=e,at=!0,Kn=null,n=Pw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(po(),r===i){e=Br(t,e,n);break e}nn(t,e,r,n)}e=e.child}return e;case 5:return Dw(e),t===null&&zh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mh(r,i)?o=null:s!==null&&Mh(r,s)&&(e.flags|=32),i0(t,e),nn(t,e,o,n),e.child;case 6:return t===null&&zh(e),null;case 13:return o0(t,e,n);case 4:return cp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mo(e,null,r,n):nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),dy(t,e,r,i,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(ec,r._currentValue),r._currentValue=o,s!==null)if(tr(s.value,o)){if(s.children===i.children&&!fn.current){e=Br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Or(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),$h(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),$h(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,so(e,n),i=Vn(i),r=r(i),e.flags|=1,nn(t,e,r,n),e.child;case 14:return r=e.type,i=Wn(r,e.pendingProps),i=Wn(r.type,i),hy(t,e,r,i,n);case 15:return n0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Ru(t,e),e.tag=1,pn(r)?(t=!0,Xu(e)):t=!1,so(e,n),Zw(e,r,i),Wh(e,r,i,n),Kh(null,e,r,!0,t,n);case 19:return a0(t,e,n);case 22:return r0(t,e,n)}throw Error(W(156,e.tag))};function T0(t,e){return Y_(t,e)}function iR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new iR(t,e,n,r)}function Sp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sR(t){if(typeof t=="function")return Sp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hf)return 11;if(t===Wf)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Sp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hs:return us(n.children,i,s,e);case $f:o=8,i|=8;break;case mh:return t=On(12,n,e,i|2),t.elementType=mh,t.lanes=s,t;case gh:return t=On(13,n,e,i),t.elementType=gh,t.lanes=s,t;case yh:return t=On(19,n,e,i),t.elementType=yh,t.lanes=s,t;case D_:return zc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k_:o=10;break e;case b_:o=9;break e;case Hf:o=11;break e;case Wf:o=14;break e;case ai:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=On(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function zc(t,e,n,r){return t=On(22,t,r,e),t.elementType=D_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qd(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function Kd(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nd(0),this.expirationTimes=Nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rp(t,e,n,r,i,s,o,l,u){return t=new oR(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=On(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},up(s),t}function aR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function I0(t){if(!t)return bi;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(pn(n))return Iw(t,n,e)}return e}function S0(t,e,n,r,i,s,o,l,u){return t=Rp(n,r,!0,t,i,s,o,l,u),t.context=I0(null),n=t.current,r=sn(),i=Si(n),s=Or(r,i),s.callback=e??null,Ti(n,s,i),t.current.lanes=i,hl(t,i,r),mn(t,r),t}function $c(t,e,n,r){var i=e.current,s=sn(),o=Si(i);return n=I0(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ti(i,e,o),t!==null&&(Yn(t,i,o,s),Tu(t,i,o)),o}function cc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ap(t,e){Iy(t,e),(t=t.alternate)&&Iy(t,e)}function lR(){return null}var R0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Np(t){this._internalRoot=t}Hc.prototype.render=Np.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));$c(t,e,null,null)};Hc.prototype.unmount=Np.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){$c(null,t,null,null)}),e[Ur]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=rw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&sw(t)}};function Cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sy(){}function uR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=cc(o);s.call(c)}}var o=S0(e,r,t,0,null,!1,!1,"",Sy);return t._reactRootContainer=o,t[Ur]=o.current,Ha(t.nodeType===8?t.parentNode:t),vs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=cc(u);l.call(c)}}var u=Rp(t,0,!1,null,null,!1,!1,"",Sy);return t._reactRootContainer=u,t[Ur]=u.current,Ha(t.nodeType===8?t.parentNode:t),vs(function(){$c(e,u,n,r)}),u}function qc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=cc(o);l.call(u)}}$c(e,o,t,i)}else o=uR(n,e,t,i,r);return cc(o)}tw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(Kf(e,n|1),mn(e,xt()),!(ke&6)&&(vo=xt()+500,Ui()))}break;case 13:vs(function(){var r=Fr(t,1);if(r!==null){var i=sn();Yn(r,t,1,i)}}),Ap(t,1)}};Gf=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=sn();Yn(e,t,134217728,n)}Ap(t,134217728)}};nw=function(t){if(t.tag===13){var e=Si(t),n=Fr(t,e);if(n!==null){var r=sn();Yn(n,t,e,r)}Ap(t,e)}};rw=function(){return Be};iw=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Ah=function(t,e,n){switch(e){case"input":if(wh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lc(r);if(!i)throw Error(W(90));O_(r),wh(r,i)}}}break;case"textarea":M_(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};H_=xp;W_=vs;var cR={usingClientEntryPoint:!1,Events:[pl,Ks,Lc,z_,$_,xp]},sa={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dR={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K_(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||lR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{bc=lu.inject(dR),hr=lu}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cR;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(e))throw Error(W(200));return aR(t,e,null,n)};Cn.createRoot=function(t,e){if(!Cp(t))throw Error(W(299));var n=!1,r="",i=R0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rp(t,1,!1,null,null,n,!1,r,i),t[Ur]=e.current,Ha(t.nodeType===8?t.parentNode:t),new Np(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=K_(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return vs(t)};Cn.hydrate=function(t,e,n){if(!Wc(e))throw Error(W(200));return qc(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!Cp(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=R0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=S0(e,null,t,1,n??null,i,!1,s,o),t[Ur]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hc(e)};Cn.render=function(t,e,n){if(!Wc(e))throw Error(W(200));return qc(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Wc(t))throw Error(W(40));return t._reactRootContainer?(vs(function(){qc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};Cn.unstable_batchedUpdates=xp;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return qc(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function A0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A0)}catch(t){console.error(t)}}A0(),A_.exports=Cn;var Pp=A_.exports;const hR=p_(Pp),fR=f_({__proto__:null,default:hR},[Pp]);var Ry=Pp;fh.createRoot=Ry.createRoot,fh.hydrateRoot=Ry.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ot(){return ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)}var St;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(St||(St={}));const Ay="popstate";function pR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Za("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_s(i)}return gR(e,n,null,t)}function we(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _o(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mR(){return Math.random().toString(36).substr(2,8)}function Ny(t,e){return{usr:t.state,key:t.key,idx:e}}function Za(t,e,n,r){return n===void 0&&(n=null),ot({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:n,key:e&&e.key||r||mR()})}function _s(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=St.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(ot({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=St.Pop;let b=f(),S=b==null?null:b-c;c=b,u&&u({action:l,location:N.location,delta:S})}function g(b,S){l=St.Push;let w=Za(N.location,b,S);c=f()+1;let A=Ny(w,c),j=N.createHref(w);try{o.pushState(A,"",j)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(j)}s&&u&&u({action:l,location:N.location,delta:1})}function E(b,S){l=St.Replace;let w=Za(N.location,b,S);c=f();let A=Ny(w,c),j=N.createHref(w);o.replaceState(A,"",j),s&&u&&u({action:l,location:N.location,delta:0})}function R(b){let S=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:_s(b);return w=w.replace(/ $/,"%20"),we(S,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,S)}let N={get action(){return l},get location(){return t(i,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ay,p),u=b,()=>{i.removeEventListener(Ay,p),u=null}},createHref(b){return e(i,b)},createURL:R,encodeLocation(b){let S=R(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:E,go(b){return o.go(b)}};return N}var Fe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fe||(Fe={}));const yR=new Set(["lazy","caseSensitive","path","id","index","children"]);function vR(t){return t.index===!0}function dc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(we(i.index!==!0||!i.children,"Cannot specify children on an index route"),we(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),vR(i)){let u=ot({},i,e(i),{id:l});return r[l]=u,u}else{let u=ot({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=dc(i.children,e,o,r)),u}})}function es(t,e,n){return n===void 0&&(n="/"),Pu(t,e,n,!1)}function Pu(t,e,n,r){let i=typeof e=="string"?Fi(e):e,s=zr(i.pathname||"/",n);if(s==null)return null;let o=N0(t);wR(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=kR(s);l=CR(o[u],c,r)}return l}function _R(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function N0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(we(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Lr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(we(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),N0(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:AR(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of C0(s.path))i(s,o,u)}),e}function C0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=C0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function wR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ER=/^:[\w-]+$/,xR=3,TR=2,IR=1,SR=10,RR=-2,Cy=t=>t==="*";function AR(t,e){let n=t.split("/"),r=n.length;return n.some(Cy)&&(r+=RR),e&&(r+=TR),n.filter(i=>!Cy(i)).reduce((i,s)=>i+(ER.test(s)?xR:s===""?IR:SR),r)}function NR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function CR(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=hc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=hc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Lr([s,p.pathname]),pathnameBase:jR(Lr([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Lr([s,p.pathnameBase]))}return o}function hc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,p)=>{let{paramName:g,isOptional:E}=f;if(g==="*"){let N=l[p]||"";o=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const R=l[p];return E&&!R?c[g]=void 0:c[g]=(R||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function PR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_o(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _o(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fi(t):t;return{pathname:n?n.startsWith("/")?n:DR(n,e):e,search:OR(r),hash:LR(i)}}function DR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kp(t,e){let n=P0(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fi(t):(i=ot({},t),we(!i.pathname||!i.pathname.includes("?"),Gd("?","pathname","search",i)),we(!i.pathname||!i.pathname.includes("#"),Gd("#","pathname","hash",i)),we(!i.search||!i.search.includes("#"),Gd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=bR(i,l),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),jR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class fc{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function el(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k0=["post","put","patch","delete"],MR=new Set(k0),VR=["get",...k0],UR=new Set(VR),FR=new Set([301,302,303,307,308]),BR=new Set([307,308]),Yd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Dp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$R=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),b0="remix-router-transitions";function HR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;we(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let P=t.detectErrorBoundary;i=O=>({hasErrorBoundary:P(O)})}else i=$R;let s={},o=dc(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||KR,f=t.patchRoutesOnNavigation,p=ot({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,E=new Set,R=null,N=null,b=null,S=t.hydrationData!=null,w=es(o,t.history.location,u),A=!1,j=null;if(w==null&&!f){let P=ln(404,{pathname:t.history.location.pathname}),{matches:O,route:M}=Fy(o);w=O,j={[M.id]:P}}w&&!t.hydrationData&&Ki(w,o,t.history.location.pathname).active&&(w=null);let U;if(w)if(w.some(P=>P.route.lazy))U=!1;else if(!w.some(P=>P.route.loader))U=!0;else if(p.v7_partialHydration){let P=t.hydrationData?t.hydrationData.loaderData:null,O=t.hydrationData?t.hydrationData.errors:null;if(O){let M=w.findIndex($=>O[$.route.id]!==void 0);U=w.slice(0,M+1).every($=>!lf($.route,P,O))}else U=w.every(M=>!lf(M.route,P,O))}else U=t.hydrationData!=null;else if(U=!1,w=[],p.v7_partialHydration){let P=Ki(null,o,t.history.location.pathname);P.active&&P.matches&&(A=!0,w=P.matches)}let F,y={historyAction:t.history.action,location:t.history.location,matches:w,initialized:U,navigation:Yd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||j,fetchers:new Map,blockers:new Map},v=St.Pop,I=!1,x,C=!1,k=new Map,T=null,le=!1,Oe=!1,Ke=[],Le=new Set,z=new Map,re=0,oe=-1,Ee=new Map,se=new Set,Ie=new Map,lt=new Map,$e=new Set,He=new Map,Xe=new Map,Fn;function rr(){if(g=t.history.listen(P=>{let{action:O,location:M,delta:$}=P;if(Fn){Fn(),Fn=void 0;return}_o(Xe.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=zo({currentLocation:y.location,nextLocation:M,historyAction:O});if(K&&$!=null){let te=new Promise(ue=>{Fn=ue});t.history.go($*-1),Wi(K,{state:"blocked",location:M,proceed(){Wi(K,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),te.then(()=>t.history.go($))},reset(){let ue=new Map(y.blockers);ue.set(K,oa),qe({blockers:ue})}});return}return xe(O,M)}),n){lA(e,k);let P=()=>uA(e,k);e.addEventListener("pagehide",P),T=()=>e.removeEventListener("pagehide",P)}return y.initialized||xe(St.Pop,y.location,{initialHydration:!0}),F}function yn(){g&&g(),T&&T(),E.clear(),x&&x.abort(),y.fetchers.forEach((P,O)=>ks(O)),y.blockers.forEach((P,O)=>Ds(O))}function ir(P){return E.add(P),()=>E.delete(P)}function qe(P,O){O===void 0&&(O={}),y=ot({},y,P);let M=[],$=[];p.v7_fetcherPersist&&y.fetchers.forEach((K,te)=>{K.state==="idle"&&($e.has(te)?$.push(te):M.push(te))}),$e.forEach(K=>{!y.fetchers.has(K)&&!z.has(K)&&$.push(K)}),[...E].forEach(K=>K(y,{deletedFetchers:$,viewTransitionOpts:O.viewTransitionOpts,flushSync:O.flushSync===!0})),p.v7_fetcherPersist?(M.forEach(K=>y.fetchers.delete(K)),$.forEach(K=>ks(K))):$.forEach(K=>$e.delete(K))}function pe(P,O,M){var $,K;let{flushSync:te}=M===void 0?{}:M,ue=y.actionData!=null&&y.navigation.formMethod!=null&&Qn(y.navigation.formMethod)&&y.navigation.state==="loading"&&(($=P.state)==null?void 0:$._isRedirect)!==!0,Z;O.actionData?Object.keys(O.actionData).length>0?Z=O.actionData:Z=null:ue?Z=y.actionData:Z=null;let J=O.loaderData?Vy(y.loaderData,O.loaderData,O.matches||[],O.errors):y.loaderData,Y=y.blockers;Y.size>0&&(Y=new Map(Y),Y.forEach((ve,Tt)=>Y.set(Tt,oa)));let ne=I===!0||y.navigation.formMethod!=null&&Qn(y.navigation.formMethod)&&((K=P.state)==null?void 0:K._isRedirect)!==!0;l&&(o=l,l=void 0),le||v===St.Pop||(v===St.Push?t.history.push(P,P.state):v===St.Replace&&t.history.replace(P,P.state));let de;if(v===St.Pop){let ve=k.get(y.location.pathname);ve&&ve.has(P.pathname)?de={currentLocation:y.location,nextLocation:P}:k.has(P.pathname)&&(de={currentLocation:P,nextLocation:y.location})}else if(C){let ve=k.get(y.location.pathname);ve?ve.add(P.pathname):(ve=new Set([P.pathname]),k.set(y.location.pathname,ve)),de={currentLocation:y.location,nextLocation:P}}qe(ot({},O,{actionData:Z,loaderData:J,historyAction:v,location:P,initialized:!0,navigation:Yd,revalidation:"idle",restoreScrollPosition:Qi(P,O.matches||y.matches),preventScrollReset:ne,blockers:Y}),{viewTransitionOpts:de,flushSync:te===!0}),v=St.Pop,I=!1,C=!1,le=!1,Oe=!1,Ke=[]}async function _e(P,O){if(typeof P=="number"){t.history.go(P);return}let M=af(y.location,y.matches,u,p.v7_prependBasename,P,p.v7_relativeSplatPath,O==null?void 0:O.fromRouteId,O==null?void 0:O.relative),{path:$,submission:K,error:te}=Py(p.v7_normalizeFormMethod,!1,M,O),ue=y.location,Z=Za(y.location,$,O&&O.state);Z=ot({},Z,t.history.encodeLocation(Z));let J=O&&O.replace!=null?O.replace:void 0,Y=St.Push;J===!0?Y=St.Replace:J===!1||K!=null&&Qn(K.formMethod)&&K.formAction===y.location.pathname+y.location.search&&(Y=St.Replace);let ne=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,de=(O&&O.flushSync)===!0,ve=zo({currentLocation:ue,nextLocation:Z,historyAction:Y});if(ve){Wi(ve,{state:"blocked",location:Z,proceed(){Wi(ve,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),_e(P,O)},reset(){let Tt=new Map(y.blockers);Tt.set(ve,oa),qe({blockers:Tt})}});return}return await xe(Y,Z,{submission:K,pendingError:te,preventScrollReset:ne,replace:O&&O.replace,enableViewTransition:O&&O.viewTransition,flushSync:de})}function ut(){if(Me(),qe({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){xe(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}xe(v||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:C===!0})}}async function xe(P,O,M){x&&x.abort(),x=null,v=P,le=(M&&M.startUninterruptedRevalidation)===!0,bl(y.location,y.matches),I=(M&&M.preventScrollReset)===!0,C=(M&&M.enableViewTransition)===!0;let $=l||o,K=M&&M.overrideNavigation,te=M!=null&&M.initialHydration&&y.matches&&y.matches.length>0&&!A?y.matches:es($,O,u),ue=(M&&M.flushSync)===!0;if(te&&y.initialized&&!Oe&&eA(y.location,O)&&!(M&&M.submission&&Qn(M.submission.formMethod))){pe(O,{matches:te},{flushSync:ue});return}let Z=Ki(te,$,O.pathname);if(Z.active&&Z.matches&&(te=Z.matches),!te){let{error:Ue,notFoundMatches:Ae,route:Ge}=wr(O.pathname);pe(O,{matches:Ae,loaderData:{},errors:{[Ge.id]:Ue}},{flushSync:ue});return}x=new AbortController;let J=Us(t.history,O,x.signal,M&&M.submission),Y;if(M&&M.pendingError)Y=[ts(te).route.id,{type:Fe.error,error:M.pendingError}];else if(M&&M.submission&&Qn(M.submission.formMethod)){let Ue=await Q(J,O,M.submission,te,Z.active,{replace:M.replace,flushSync:ue});if(Ue.shortCircuited)return;if(Ue.pendingActionResult){let[Ae,Ge]=Ue.pendingActionResult;if(Tn(Ge)&&el(Ge.error)&&Ge.error.status===404){x=null,pe(O,{matches:Ue.matches,loaderData:{},errors:{[Ae]:Ge.error}});return}}te=Ue.matches||te,Y=Ue.pendingActionResult,K=Xd(O,M.submission),ue=!1,Z.active=!1,J=Us(t.history,J.url,J.signal)}let{shortCircuited:ne,matches:de,loaderData:ve,errors:Tt}=await ae(J,O,te,Z.active,K,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,ue,Y);ne||(x=null,pe(O,ot({matches:de||te},Uy(Y),{loaderData:ve,errors:Tt})))}async function Q(P,O,M,$,K,te){te===void 0&&(te={}),Me();let ue=oA(O,M);if(qe({navigation:ue},{flushSync:te.flushSync===!0}),K){let Y=await or($,O.pathname,P.signal);if(Y.type==="aborted")return{shortCircuited:!0};if(Y.type==="error"){let ne=ts(Y.partialMatches).route.id;return{matches:Y.partialMatches,pendingActionResult:[ne,{type:Fe.error,error:Y.error}]}}else if(Y.matches)$=Y.matches;else{let{notFoundMatches:ne,error:de,route:ve}=wr(O.pathname);return{matches:ne,pendingActionResult:[ve.id,{type:Fe.error,error:de}]}}}let Z,J=ga($,O);if(!J.route.action&&!J.route.lazy)Z={type:Fe.error,error:ln(405,{method:P.method,pathname:O.pathname,routeId:J.route.id})};else if(Z=(await be("action",y,P,[J],$,null))[J.route.id],P.signal.aborted)return{shortCircuited:!0};if(ss(Z)){let Y;return te&&te.replace!=null?Y=te.replace:Y=Oy(Z.response.headers.get("Location"),new URL(P.url),u)===y.location.pathname+y.location.search,await mt(P,Z,!0,{submission:M,replace:Y}),{shortCircuited:!0}}if(yi(Z))throw ln(400,{type:"defer-action"});if(Tn(Z)){let Y=ts($,J.route.id);return(te&&te.replace)!==!0&&(v=St.Push),{matches:$,pendingActionResult:[Y.route.id,Z]}}return{matches:$,pendingActionResult:[J.route.id,Z]}}async function ae(P,O,M,$,K,te,ue,Z,J,Y,ne){let de=K||Xd(O,te),ve=te||ue||zy(de),Tt=!le&&(!p.v7_partialHydration||!J);if($){if(Tt){let Ze=me(ne);qe(ot({navigation:de},Ze!==void 0?{actionData:Ze}:{}),{flushSync:Y})}let Ce=await or(M,O.pathname,P.signal);if(Ce.type==="aborted")return{shortCircuited:!0};if(Ce.type==="error"){let Ze=ts(Ce.partialMatches).route.id;return{matches:Ce.partialMatches,loaderData:{},errors:{[Ze]:Ce.error}}}else if(Ce.matches)M=Ce.matches;else{let{error:Ze,notFoundMatches:Tr,route:Zr}=wr(O.pathname);return{matches:Tr,loaderData:{},errors:{[Zr.id]:Ze}}}}let Ue=l||o,[Ae,Ge]=by(t.history,y,M,ve,O,p.v7_partialHydration&&J===!0,p.v7_skipActionErrorRevalidation,Oe,Ke,Le,$e,Ie,se,Ue,u,ne);if(qi(Ce=>!(M&&M.some(Ze=>Ze.route.id===Ce))||Ae&&Ae.some(Ze=>Ze.route.id===Ce)),oe=++re,Ae.length===0&&Ge.length===0){let Ce=bs();return pe(O,ot({matches:M,loaderData:{},errors:ne&&Tn(ne[1])?{[ne[0]]:ne[1].error}:null},Uy(ne),Ce?{fetchers:new Map(y.fetchers)}:{}),{flushSync:Y}),{shortCircuited:!0}}if(Tt){let Ce={};if(!$){Ce.navigation=de;let Ze=me(ne);Ze!==void 0&&(Ce.actionData=Ze)}Ge.length>0&&(Ce.fetchers=Je(Ge)),qe(Ce,{flushSync:Y})}Ge.forEach(Ce=>{Bn(Ce.key),Ce.controller&&z.set(Ce.key,Ce.controller)});let Er=()=>Ge.forEach(Ce=>Bn(Ce.key));x&&x.signal.addEventListener("abort",Er);let{loaderResults:Xr,fetcherResults:zn}=await ce(y,M,Ae,Ge,P);if(P.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",Er),Ge.forEach(Ce=>z.delete(Ce.key));let en=uu(Xr);if(en)return await mt(P,en.result,!0,{replace:Z}),{shortCircuited:!0};if(en=uu(zn),en)return se.add(en.key),await mt(P,en.result,!0,{replace:Z}),{shortCircuited:!0};let{loaderData:js,errors:xr}=My(y,M,Xr,ne,Ge,zn,He);He.forEach((Ce,Ze)=>{Ce.subscribe(Tr=>{(Tr||Ce.done)&&He.delete(Ze)})}),p.v7_partialHydration&&J&&y.errors&&(xr=ot({},y.errors,xr));let vn=bs(),bn=kl(oe),Jr=vn||bn||Ge.length>0;return ot({matches:M,loaderData:js,errors:xr},Jr?{fetchers:new Map(y.fetchers)}:{})}function me(P){if(P&&!Tn(P[1]))return{[P[0]]:P[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function Je(P){return P.forEach(O=>{let M=y.fetchers.get(O.key),$=aa(void 0,M?M.data:void 0);y.fetchers.set(O.key,$)}),new Map(y.fetchers)}function Re(P,O,M,$){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Bn(P);let K=($&&$.flushSync)===!0,te=l||o,ue=af(y.location,y.matches,u,p.v7_prependBasename,M,p.v7_relativeSplatPath,O,$==null?void 0:$.relative),Z=es(te,ue,u),J=Ki(Z,te,ue);if(J.active&&J.matches&&(Z=J.matches),!Z){kn(P,O,ln(404,{pathname:ue}),{flushSync:K});return}let{path:Y,submission:ne,error:de}=Py(p.v7_normalizeFormMethod,!0,ue,$);if(de){kn(P,O,de,{flushSync:K});return}let ve=ga(Z,Y),Tt=($&&$.preventScrollReset)===!0;if(ne&&Qn(ne.formMethod)){We(P,O,Y,ve,Z,J.active,K,Tt,ne);return}Ie.set(P,{routeId:O,path:Y}),$t(P,O,Y,ve,Z,J.active,K,Tt,ne)}async function We(P,O,M,$,K,te,ue,Z,J){Me(),Ie.delete(P);function Y(st){if(!st.route.action&&!st.route.lazy){let ar=ln(405,{method:J.formMethod,pathname:M,routeId:O});return kn(P,O,ar,{flushSync:ue}),!0}return!1}if(!te&&Y($))return;let ne=y.fetchers.get(P);Ve(P,aA(J,ne),{flushSync:ue});let de=new AbortController,ve=Us(t.history,M,de.signal,J);if(te){let st=await or(K,new URL(ve.url).pathname,ve.signal,P);if(st.type==="aborted")return;if(st.type==="error"){kn(P,O,st.error,{flushSync:ue});return}else if(st.matches){if(K=st.matches,$=ga(K,M),Y($))return}else{kn(P,O,ln(404,{pathname:M}),{flushSync:ue});return}}z.set(P,de);let Tt=re,Ae=(await be("action",y,ve,[$],K,P))[$.route.id];if(ve.signal.aborted){z.get(P)===de&&z.delete(P);return}if(p.v7_fetcherPersist&&$e.has(P)){if(ss(Ae)||Tn(Ae)){Ve(P,oi(void 0));return}}else{if(ss(Ae))if(z.delete(P),oe>Tt){Ve(P,oi(void 0));return}else return se.add(P),Ve(P,aa(J)),mt(ve,Ae,!1,{fetcherSubmission:J,preventScrollReset:Z});if(Tn(Ae)){kn(P,O,Ae.error);return}}if(yi(Ae))throw ln(400,{type:"defer-action"});let Ge=y.navigation.location||y.location,Er=Us(t.history,Ge,de.signal),Xr=l||o,zn=y.navigation.state!=="idle"?es(Xr,y.navigation.location,u):y.matches;we(zn,"Didn't find any matches after fetcher action");let en=++re;Ee.set(P,en);let js=aa(J,Ae.data);y.fetchers.set(P,js);let[xr,vn]=by(t.history,y,zn,J,Ge,!1,p.v7_skipActionErrorRevalidation,Oe,Ke,Le,$e,Ie,se,Xr,u,[$.route.id,Ae]);vn.filter(st=>st.key!==P).forEach(st=>{let ar=st.key,Ho=y.fetchers.get(ar),jl=aa(void 0,Ho?Ho.data:void 0);y.fetchers.set(ar,jl),Bn(ar),st.controller&&z.set(ar,st.controller)}),qe({fetchers:new Map(y.fetchers)});let bn=()=>vn.forEach(st=>Bn(st.key));de.signal.addEventListener("abort",bn);let{loaderResults:Jr,fetcherResults:Ce}=await ce(y,zn,xr,vn,Er);if(de.signal.aborted)return;de.signal.removeEventListener("abort",bn),Ee.delete(P),z.delete(P),vn.forEach(st=>z.delete(st.key));let Ze=uu(Jr);if(Ze)return mt(Er,Ze.result,!1,{preventScrollReset:Z});if(Ze=uu(Ce),Ze)return se.add(Ze.key),mt(Er,Ze.result,!1,{preventScrollReset:Z});let{loaderData:Tr,errors:Zr}=My(y,zn,Jr,void 0,vn,Ce,He);if(y.fetchers.has(P)){let st=oi(Ae.data);y.fetchers.set(P,st)}kl(en),y.navigation.state==="loading"&&en>oe?(we(v,"Expected pending action"),x&&x.abort(),pe(y.navigation.location,{matches:zn,loaderData:Tr,errors:Zr,fetchers:new Map(y.fetchers)})):(qe({errors:Zr,loaderData:Vy(y.loaderData,Tr,zn,Zr),fetchers:new Map(y.fetchers)}),Oe=!1)}async function $t(P,O,M,$,K,te,ue,Z,J){let Y=y.fetchers.get(P);Ve(P,aa(J,Y?Y.data:void 0),{flushSync:ue});let ne=new AbortController,de=Us(t.history,M,ne.signal);if(te){let Ae=await or(K,new URL(de.url).pathname,de.signal,P);if(Ae.type==="aborted")return;if(Ae.type==="error"){kn(P,O,Ae.error,{flushSync:ue});return}else if(Ae.matches)K=Ae.matches,$=ga(K,M);else{kn(P,O,ln(404,{pathname:M}),{flushSync:ue});return}}z.set(P,ne);let ve=re,Ue=(await be("loader",y,de,[$],K,P))[$.route.id];if(yi(Ue)&&(Ue=await jp(Ue,de.signal,!0)||Ue),z.get(P)===ne&&z.delete(P),!de.signal.aborted){if($e.has(P)){Ve(P,oi(void 0));return}if(ss(Ue))if(oe>ve){Ve(P,oi(void 0));return}else{se.add(P),await mt(de,Ue,!1,{preventScrollReset:Z});return}if(Tn(Ue)){kn(P,O,Ue.error);return}we(!yi(Ue),"Unhandled fetcher deferred data"),Ve(P,oi(Ue.data))}}async function mt(P,O,M,$){let{submission:K,fetcherSubmission:te,preventScrollReset:ue,replace:Z}=$===void 0?{}:$;O.response.headers.has("X-Remix-Revalidate")&&(Oe=!0);let J=O.response.headers.get("Location");we(J,"Expected a Location header on the redirect Response"),J=Oy(J,new URL(P.url),u);let Y=Za(y.location,J,{_isRedirect:!0});if(n){let Ae=!1;if(O.response.headers.has("X-Remix-Reload-Document"))Ae=!0;else if(Dp.test(J)){const Ge=t.history.createURL(J);Ae=Ge.origin!==e.location.origin||zr(Ge.pathname,u)==null}if(Ae){Z?e.location.replace(J):e.location.assign(J);return}}x=null;let ne=Z===!0||O.response.headers.has("X-Remix-Replace")?St.Replace:St.Push,{formMethod:de,formAction:ve,formEncType:Tt}=y.navigation;!K&&!te&&de&&ve&&Tt&&(K=zy(y.navigation));let Ue=K||te;if(BR.has(O.response.status)&&Ue&&Qn(Ue.formMethod))await xe(ne,Y,{submission:ot({},Ue,{formAction:J}),preventScrollReset:ue||I,enableViewTransition:M?C:void 0});else{let Ae=Xd(Y,K);await xe(ne,Y,{overrideNavigation:Ae,fetcherSubmission:te,preventScrollReset:ue||I,enableViewTransition:M?C:void 0})}}async function be(P,O,M,$,K,te){let ue,Z={};try{ue=await GR(c,P,O,M,$,K,te,s,i)}catch(J){return $.forEach(Y=>{Z[Y.route.id]={type:Fe.error,error:J}}),Z}for(let[J,Y]of Object.entries(ue))if(tA(Y)){let ne=Y.result;Z[J]={type:Fe.redirect,response:JR(ne,M,J,K,u,p.v7_relativeSplatPath)}}else Z[J]=await XR(Y);return Z}async function ce(P,O,M,$,K){let te=P.matches,ue=be("loader",P,K,M,O,null),Z=Promise.all($.map(async ne=>{if(ne.matches&&ne.match&&ne.controller){let ve=(await be("loader",P,Us(t.history,ne.path,ne.controller.signal),[ne.match],ne.matches,ne.key))[ne.match.route.id];return{[ne.key]:ve}}else return Promise.resolve({[ne.key]:{type:Fe.error,error:ln(404,{pathname:ne.path})}})})),J=await ue,Y=(await Z).reduce((ne,de)=>Object.assign(ne,de),{});return await Promise.all([iA(O,J,K.signal,te,P.loaderData),sA(O,Y,$)]),{loaderResults:J,fetcherResults:Y}}function Me(){Oe=!0,Ke.push(...qi()),Ie.forEach((P,O)=>{z.has(O)&&Le.add(O),Bn(O)})}function Ve(P,O,M){M===void 0&&(M={}),y.fetchers.set(P,O),qe({fetchers:new Map(y.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function kn(P,O,M,$){$===void 0&&($={});let K=ts(y.matches,O);ks(P),qe({errors:{[K.route.id]:M},fetchers:new Map(y.fetchers)},{flushSync:($&&$.flushSync)===!0})}function Fo(P){return lt.set(P,(lt.get(P)||0)+1),$e.has(P)&&$e.delete(P),y.fetchers.get(P)||zR}function ks(P){let O=y.fetchers.get(P);z.has(P)&&!(O&&O.state==="loading"&&Ee.has(P))&&Bn(P),Ie.delete(P),Ee.delete(P),se.delete(P),p.v7_fetcherPersist&&$e.delete(P),Le.delete(P),y.fetchers.delete(P)}function Hi(P){let O=(lt.get(P)||0)-1;O<=0?(lt.delete(P),$e.add(P),p.v7_fetcherPersist||ks(P)):lt.set(P,O),qe({fetchers:new Map(y.fetchers)})}function Bn(P){let O=z.get(P);O&&(O.abort(),z.delete(P))}function Bo(P){for(let O of P){let M=Fo(O),$=oi(M.data);y.fetchers.set(O,$)}}function bs(){let P=[],O=!1;for(let M of se){let $=y.fetchers.get(M);we($,"Expected fetcher: "+M),$.state==="loading"&&(se.delete(M),P.push(M),O=!0)}return Bo(P),O}function kl(P){let O=[];for(let[M,$]of Ee)if($<P){let K=y.fetchers.get(M);we(K,"Expected fetcher: "+M),K.state==="loading"&&(Bn(M),Ee.delete(M),O.push(M))}return Bo(O),O.length>0}function yd(P,O){let M=y.blockers.get(P)||oa;return Xe.get(P)!==O&&Xe.set(P,O),M}function Ds(P){y.blockers.delete(P),Xe.delete(P)}function Wi(P,O){let M=y.blockers.get(P)||oa;we(M.state==="unblocked"&&O.state==="blocked"||M.state==="blocked"&&O.state==="blocked"||M.state==="blocked"&&O.state==="proceeding"||M.state==="blocked"&&O.state==="unblocked"||M.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+O.state);let $=new Map(y.blockers);$.set(P,O),qe({blockers:$})}function zo(P){let{currentLocation:O,nextLocation:M,historyAction:$}=P;if(Xe.size===0)return;Xe.size>1&&_o(!1,"A router only supports one blocker at a time");let K=Array.from(Xe.entries()),[te,ue]=K[K.length-1],Z=y.blockers.get(te);if(!(Z&&Z.state==="proceeding")&&ue({currentLocation:O,nextLocation:M,historyAction:$}))return te}function wr(P){let O=ln(404,{pathname:P}),M=l||o,{matches:$,route:K}=Fy(M);return qi(),{notFoundMatches:$,route:K,error:O}}function qi(P){let O=[];return He.forEach((M,$)=>{(!P||P($))&&(M.cancel(),O.push($),He.delete($))}),O}function $o(P,O,M){if(R=P,b=O,N=M||null,!S&&y.navigation===Yd){S=!0;let $=Qi(y.location,y.matches);$!=null&&qe({restoreScrollPosition:$})}return()=>{R=null,b=null,N=null}}function sr(P,O){return N&&N(P,O.map($=>_R($,y.loaderData)))||P.key}function bl(P,O){if(R&&b){let M=sr(P,O);R[M]=b()}}function Qi(P,O){if(R){let M=sr(P,O),$=R[M];if(typeof $=="number")return $}return null}function Ki(P,O,M){if(f)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Pu(O,M,u,!0)}}else return{active:!0,matches:Pu(O,M,u,!0)||[]};return{active:!1,matches:null}}async function or(P,O,M,$){if(!f)return{type:"success",matches:P};let K=P;for(;;){let te=l==null,ue=l||o,Z=s;try{await f({signal:M,path:O,matches:K,fetcherKey:$,patch:(ne,de)=>{M.aborted||jy(ne,de,ue,Z,i)}})}catch(ne){return{type:"error",error:ne,partialMatches:K}}finally{te&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let J=es(ue,O,u);if(J)return{type:"success",matches:J};let Y=Pu(ue,O,u,!0);if(!Y||K.length===Y.length&&K.every((ne,de)=>ne.route.id===Y[de].route.id))return{type:"success",matches:null};K=Y}}function Dl(P){s={},l=dc(P,i,void 0,s)}function jt(P,O){let M=l==null;jy(P,O,l||o,s,i),M&&(o=[...o],qe({}))}return F={get basename(){return u},get future(){return p},get state(){return y},get routes(){return o},get window(){return e},initialize:rr,subscribe:ir,enableScrollRestoration:$o,navigate:_e,fetch:Re,revalidate:ut,createHref:P=>t.history.createHref(P),encodeLocation:P=>t.history.encodeLocation(P),getFetcher:Fo,deleteFetcher:Hi,dispose:yn,getBlocker:yd,deleteBlocker:Ds,patchRoutes:jt,_internalFetchControllers:z,_internalActiveDeferreds:He,_internalSetRoutes:Dl},F}function WR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function af(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let p of e)if(u.push(p),p.route.id===o){c=p;break}}else u=e,c=e[e.length-1];let f=bp(i||".",kp(u,s),zr(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c){let p=Op(f.search);if(c.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let g=new URLSearchParams(f.search),E=g.getAll("index");g.delete("index"),E.filter(N=>N).forEach(N=>g.append("index",N));let R=g.toString();f.search=R?"?"+R:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Lr([n,f.pathname])),_s(f)}function Py(t,e,n,r){if(!r||!WR(r))return{path:n};if(r.formMethod&&!rA(r.formMethod))return{path:n,error:ln(405,{method:r.formMethod})};let i=()=>({path:n,error:ln(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=O0(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Qn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((E,R)=>{let[N,b]=R;return""+E+N+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Qn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}we(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=uf(r.formData),c=r.formData;else if(r.body instanceof FormData)u=uf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=Ly(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=Ly(u)}catch{return i()}let f={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Qn(f.formMethod))return{path:n,submission:f};let p=Fi(n);return e&&p.search&&Op(p.search)&&u.append("index",""),p.search="?"+u,{path:_s(p),submission:f}}function ky(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function by(t,e,n,r,i,s,o,l,u,c,f,p,g,E,R,N){let b=N?Tn(N[1])?N[1].error:N[1].data:void 0,S=t.createURL(e.location),w=t.createURL(i),A=n;s&&e.errors?A=ky(n,Object.keys(e.errors)[0],!0):N&&Tn(N[1])&&(A=ky(n,N[0]));let j=N?N[1].statusCode:void 0,U=o&&j&&j>=400,F=A.filter((v,I)=>{let{route:x}=v;if(x.lazy)return!0;if(x.loader==null)return!1;if(s)return lf(x,e.loaderData,e.errors);if(qR(e.loaderData,e.matches[I],v)||u.some(T=>T===v.route.id))return!0;let C=e.matches[I],k=v;return Dy(v,ot({currentUrl:S,currentParams:C.params,nextUrl:w,nextParams:k.params},r,{actionResult:b,actionStatus:j,defaultShouldRevalidate:U?!1:l||S.pathname+S.search===w.pathname+w.search||S.search!==w.search||D0(C,k)}))}),y=[];return p.forEach((v,I)=>{if(s||!n.some(le=>le.route.id===v.routeId)||f.has(I))return;let x=es(E,v.path,R);if(!x){y.push({key:I,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let C=e.fetchers.get(I),k=ga(x,v.path),T=!1;g.has(I)?T=!1:c.has(I)?(c.delete(I),T=!0):C&&C.state!=="idle"&&C.data===void 0?T=l:T=Dy(k,ot({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:b,actionStatus:j,defaultShouldRevalidate:U?!1:l})),T&&y.push({key:I,routeId:v.routeId,path:v.path,matches:x,match:k,controller:new AbortController})}),[F,y]}function lf(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function qR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function D0(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Dy(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function jy(t,e,n,r,i){var s;let o;if(t){let c=r[t];we(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(f=>j0(c,f))),u=dc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function j0(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>j0(n,s))}):!1}async function QR(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];we(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";_o(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!yR.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ot({},e(i),{lazy:void 0}))}async function KR(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function GR(t,e,n,r,i,s,o,l,u,c){let f=s.map(E=>E.route.lazy?QR(E.route,u,l):void 0),p=s.map((E,R)=>{let N=f[R],b=i.some(w=>w.route.id===E.route.id);return ot({},E,{shouldLoad:b,resolve:async w=>(w&&r.method==="GET"&&(E.route.lazy||E.route.loader)&&(b=!0),b?YR(e,r,E,N,w,c):Promise.resolve({type:Fe.data,result:void 0}))})}),g=await t({matches:p,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(f)}catch{}return g}async function YR(t,e,n,r,i,s){let o,l,u=c=>{let f,p=new Promise((R,N)=>f=N);l=()=>f(),e.signal.addEventListener("abort",l);let g=R=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...R!==void 0?[R]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(N=>g(N)):g())}}catch(R){return{type:"error",result:R}}})();return Promise.race([E,p])};try{let c=n.route[t];if(r)if(c){let f,[p]=await Promise.all([u(c).catch(g=>{f=g}),r]);if(f!==void 0)throw f;o=p}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw ln(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Fe.data,result:void 0};else if(c)o=await u(c);else{let f=new URL(e.url),p=f.pathname+f.search;throw ln(404,{pathname:p})}we(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Fe.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function XR(t){let{result:e,type:n}=t;if(L0(e)){let p;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(g){return{type:Fe.error,error:g}}return n===Fe.error?{type:Fe.error,error:new fc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:Fe.data,data:p,statusCode:e.status,headers:e.headers}}if(n===Fe.error){if(By(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Fe.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Fe.error,error:new fc(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:el(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Fe.error,error:e,statusCode:el(e)?e.status:void 0}}if(nA(e)){var l,u;return{type:Fe.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(By(e)){var c,f;return{type:Fe.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Fe.data,data:e}}function JR(t,e,n,r,i,s){let o=t.headers.get("Location");if(we(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Dp.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=af(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function Oy(t,e,n){if(Dp.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=zr(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Us(t,e,n,r){let i=t.createURL(O0(e)).toString(),s={signal:n};if(r&&Qn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=uf(r.formData):s.body=r.formData}return new Request(i,s)}function uf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Ly(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function ZR(t,e,n,r,i){let s={},o=null,l,u=!1,c={},f=n&&Tn(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let g=p.route.id,E=e[g];if(we(!ss(E),"Cannot handle redirect results in processLoaderData"),Tn(E)){let R=E.error;f!==void 0&&(R=f,f=void 0),o=o||{};{let N=ts(t,g);o[N.route.id]==null&&(o[N.route.id]=R)}s[g]=void 0,u||(u=!0,l=el(E.error)?E.error.status:500),E.headers&&(c[g]=E.headers)}else yi(E)?(r.set(g,E.deferredData),s[g]=E.deferredData.data,E.statusCode!=null&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers)):(s[g]=E.data,E.statusCode&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function My(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=ZR(e,n,r,o);return i.forEach(c=>{let{key:f,match:p,controller:g}=c,E=s[f];if(we(E,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Tn(E)){let R=ts(t.matches,p==null?void 0:p.route.id);u&&u[R.route.id]||(u=ot({},u,{[R.route.id]:E.error})),t.fetchers.delete(f)}else if(ss(E))we(!1,"Unhandled fetcher revalidation redirect");else if(yi(E))we(!1,"Unhandled fetcher deferred data");else{let R=oi(E.data);t.fetchers.set(f,R)}}),{loaderData:l,errors:u}}function Vy(t,e,n,r){let i=ot({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Uy(t){return t?Tn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ts(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Fy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ln(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new fc(t||500,l,new Error(u),!0)}function uu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ss(i))return{key:r,result:i}}}function O0(t){let e=typeof t=="string"?Fi(t):t;return _s(ot({},e,{hash:""}))}function eA(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function tA(t){return L0(t.result)&&FR.has(t.result.status)}function yi(t){return t.type===Fe.deferred}function Tn(t){return t.type===Fe.error}function ss(t){return(t&&t.type)===Fe.redirect}function By(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function nA(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function L0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function rA(t){return UR.has(t.toLowerCase())}function Qn(t){return MR.has(t.toLowerCase())}async function iA(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let f=r.find(g=>g.route.id===c.route.id),p=f!=null&&!D0(f,c)&&(i&&i[c.route.id])!==void 0;yi(u)&&p&&await jp(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function sA(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&yi(l)&&(we(o,"Expected an AbortController for revalidating fetcher deferred result"),await jp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function jp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Fe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Fe.error,error:i}}return{type:Fe.data,data:t.deferredData.data}}}function Op(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ga(t,e){let n=typeof e=="string"?Fi(e).search:e.search;if(t[t.length-1].route.index&&Op(n||""))return t[t.length-1];let r=P0(t);return r[r.length-1]}function zy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Xd(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function oA(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function aa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function aA(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function oi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function lA(t,e){try{let n=t.sessionStorage.getItem(b0);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function uA(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(b0,JSON.stringify(n))}catch(r){_o(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pc.apply(this,arguments)}const gl=D.createContext(null),Lp=D.createContext(null),Bi=D.createContext(null),Mp=D.createContext(null),Yr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),M0=D.createContext(null);function cA(t,e){let{relative:n}=e===void 0?{}:e;yl()||we(!1);let{basename:r,navigator:i}=D.useContext(Bi),{hash:s,pathname:o,search:l}=Qc(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Lr([r,o])),i.createHref({pathname:u,search:l,hash:s})}function yl(){return D.useContext(Mp)!=null}function bo(){return yl()||we(!1),D.useContext(Mp).location}function V0(t){D.useContext(Bi).static||D.useLayoutEffect(t)}function As(){let{isDataRoute:t}=D.useContext(Yr);return t?SA():dA()}function dA(){yl()||we(!1);let t=D.useContext(gl),{basename:e,future:n,navigator:r}=D.useContext(Bi),{matches:i}=D.useContext(Yr),{pathname:s}=bo(),o=JSON.stringify(kp(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return V0(()=>{l.current=!0}),D.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let p=bp(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Lr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}const hA=D.createContext(null);function fA(t){let e=D.useContext(Yr).outlet;return e&&D.createElement(hA.Provider,{value:t},e)}function pA(){let{matches:t}=D.useContext(Yr),e=t[t.length-1];return e?e.params:{}}function Qc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Bi),{matches:i}=D.useContext(Yr),{pathname:s}=bo(),o=JSON.stringify(kp(i,r.v7_relativeSplatPath));return D.useMemo(()=>bp(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function mA(t,e,n,r){yl()||we(!1);let{navigator:i}=D.useContext(Bi),{matches:s}=D.useContext(Yr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=bo(),f;f=c;let p=f.pathname||"/",g=p;if(u!=="/"){let N=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=es(t,{pathname:g});return wA(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Lr([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Lr([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r)}function gA(){let t=IA(),e=el(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const yA=D.createElement(gA,null);class vA extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Yr.Provider,{value:this.props.routeContext},D.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _A(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(gl);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Yr.Provider,{value:e},r)}function wA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||we(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:E}=n,R=p.route.loader&&g[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||R){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let E,R=!1,N=null,b=null;n&&(E=l&&p.route.id?l[p.route.id]:void 0,N=p.route.errorElement||yA,u&&(c<0&&g===0?(RA("route-fallback"),R=!0,b=null):c===g&&(R=!0,b=p.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,g+1)),w=()=>{let A;return E?A=N:R?A=b:p.route.Component?A=D.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,D.createElement(_A,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?D.createElement(vA,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}var U0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(U0||{}),F0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(F0||{});function EA(t){let e=D.useContext(gl);return e||we(!1),e}function xA(t){let e=D.useContext(Lp);return e||we(!1),e}function TA(t){let e=D.useContext(Yr);return e||we(!1),e}function B0(t){let e=TA(),n=e.matches[e.matches.length-1];return n.route.id||we(!1),n.route.id}function IA(){var t;let e=D.useContext(M0),n=xA(F0.UseRouteError),r=B0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function SA(){let{router:t}=EA(U0.UseNavigateStable),e=B0(),n=D.useRef(!1);return V0(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pc({fromRouteId:e},s)))},[t,e])}const $y={};function RA(t,e,n){$y[t]||($y[t]=!0)}function AA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function NA(t){return fA(t.context)}function CA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=St.Pop,navigator:s,static:o=!1,future:l}=t;yl()&&we(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:pc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Fi(r));let{pathname:f="/",search:p="",hash:g="",state:E=null,key:R="default"}=r,N=D.useMemo(()=>{let b=zr(f,u);return b==null?null:{location:{pathname:b,search:p,hash:g,state:E,key:R},navigationType:i}},[u,f,p,g,E,R,i]);return N==null?null:D.createElement(Bi.Provider,{value:c},D.createElement(Mp.Provider,{children:n,value:N}))}new Promise(()=>{});function PA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wo.apply(this,arguments)}function z0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bA(t,e){return t.button===0&&(!e||e==="_self")&&!kA(t)}const DA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],OA="6";try{window.__reactRouterVersion=OA}catch{}function LA(t,e){return HR({basename:void 0,future:wo({},void 0,{v7_prependBasename:!0}),history:pR({window:void 0}),hydrationData:MA(),routes:t,mapRouteProperties:PA,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function MA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=wo({},e,{errors:VA(e.errors)})),e}function VA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new fc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const $0=D.createContext({isTransitioning:!1}),UA=D.createContext(new Map),FA="startTransition",Hy=tI[FA],BA="flushSync",Wy=fR[BA];function zA(t){Hy?Hy(t):t()}function la(t){Wy?Wy(t):t()}let $A=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function HA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,l]=D.useState(),[u,c]=D.useState({isTransitioning:!1}),[f,p]=D.useState(),[g,E]=D.useState(),[R,N]=D.useState(),b=D.useRef(new Map),{v7_startTransition:S}=r||{},w=D.useCallback(v=>{S?zA(v):v()},[S]),A=D.useCallback((v,I)=>{let{deletedFetchers:x,flushSync:C,viewTransitionOpts:k}=I;v.fetchers.forEach((le,Oe)=>{le.data!==void 0&&b.current.set(Oe,le.data)}),x.forEach(le=>b.current.delete(le));let T=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||T){C?la(()=>s(v)):w(()=>s(v));return}if(C){la(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let le=n.window.document.startViewTransition(()=>{la(()=>s(v))});le.finished.finally(()=>{la(()=>{p(void 0),E(void 0),l(void 0),c({isTransitioning:!1})})}),la(()=>E(le));return}g?(f&&f.resolve(),g.skipTransition(),N({state:v,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,g,f,b,w]);D.useLayoutEffect(()=>n.subscribe(A),[n,A]),D.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new $A)},[u]),D.useEffect(()=>{if(f&&o&&n.window){let v=o,I=f.promise,x=n.window.document.startViewTransition(async()=>{w(()=>s(v)),await I});x.finished.finally(()=>{p(void 0),E(void 0),l(void 0),c({isTransitioning:!1})}),E(x)}},[w,o,f,n.window]),D.useEffect(()=>{f&&o&&i.location.key===o.location.key&&f.resolve()},[f,g,i.location,o]),D.useEffect(()=>{!u.isTransitioning&&R&&(l(R.state),c({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),N(void 0))},[u.isTransitioning,R]),D.useEffect(()=>{},[]);let j=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,I,x)=>n.navigate(v,{state:I,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(v,I,x)=>n.navigate(v,{replace:!0,state:I,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),U=n.basename||"/",F=D.useMemo(()=>({router:n,navigator:j,static:!1,basename:U}),[n,j,U]),y=D.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return D.useEffect(()=>AA(r,n.future),[r,n.future]),D.createElement(D.Fragment,null,D.createElement(gl.Provider,{value:F},D.createElement(Lp.Provider,{value:i},D.createElement(UA.Provider,{value:b.current},D.createElement($0.Provider,{value:u},D.createElement(CA,{basename:U,location:i.location,navigationType:i.historyAction,navigator:j,future:y},i.initialized||n.future.v7_partialHydration?D.createElement(WA,{routes:n.routes,future:n.future,state:i}):e))))),null)}const WA=D.memo(qA);function qA(t){let{routes:e,future:n,state:r}=t;return mA(e,void 0,r,n)}const QA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:f,viewTransition:p}=e,g=z0(e,DA),{basename:E}=D.useContext(Bi),R,N=!1;if(typeof c=="string"&&KA.test(c)&&(R=c,QA))try{let A=new URL(window.location.href),j=c.startsWith("//")?new URL(A.protocol+c):new URL(c),U=zr(j.pathname,E);j.origin===A.origin&&U!=null?c=U+j.search+j.hash:N=!0}catch{}let b=cA(c,{relative:i}),S=YA(c,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function w(A){r&&r(A),A.defaultPrevented||S(A)}return D.createElement("a",wo({},g,{href:R||b,onClick:N||s?r:w,ref:n,target:u}))}),cu=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:f}=e,p=z0(e,jA),g=Qc(u,{relative:p.relative}),E=bo(),R=D.useContext(Lp),{navigator:N,basename:b}=D.useContext(Bi),S=R!=null&&XA(g)&&c===!0,w=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,A=E.pathname,j=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;i||(A=A.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&b&&(j=zr(j,b)||j);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let F=A===w||!o&&A.startsWith(w)&&A.charAt(U)==="/",y=j!=null&&(j===w||!o&&j.startsWith(w)&&j.charAt(w.length)==="/"),v={isActive:F,isPending:y,isTransitioning:S},I=F?r:void 0,x;typeof s=="function"?x=s(v):x=[s,F?"active":null,y?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(v):l;return D.createElement(rn,wo({},p,{"aria-current":I,className:x,ref:n,style:C,to:u,viewTransition:c}),typeof f=="function"?f(v):f)});var cf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cf||(cf={}));var qy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qy||(qy={}));function GA(t){let e=D.useContext(gl);return e||we(!1),e}function YA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=As(),c=bo(),f=Qc(t,{relative:o});return D.useCallback(p=>{if(bA(p,n)){p.preventDefault();let g=r!==void 0?r:_s(c)===_s(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,f,r,i,n,t,s,o,l])}function XA(t,e){e===void 0&&(e={});let n=D.useContext($0);n==null&&we(!1);let{basename:r}=GA(cf.useViewTransitionState),i=Qc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=zr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=zr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hc(i.pathname,o)!=null||hc(i.pathname,s)!=null}var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},W0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,E=c&63;u||(E=64,o||(g=64)),r.push(n[f],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(H0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||p==null)throw new ZA;const g=s<<2|l>>4;if(r.push(g),c!==64){const E=l<<4&240|c>>2;if(r.push(E),p!==64){const R=c<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eN=function(t){const e=H0(t);return W0.encodeByteArray(e,!0)},mc=function(t){return eN(t).replace(/\./g,"")},q0=function(t){try{return W0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=()=>tN().__FIREBASE_DEFAULTS__,rN=()=>{if(typeof process>"u"||typeof Qy>"u")return;const t=Qy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q0(t[1]);return e&&JSON.parse(e)},Kc=()=>{try{return nN()||rN()||iN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Q0=t=>{var e,n;return(n=(e=Kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vp=t=>{const e=Q0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K0=()=>{var t;return(t=Kc())===null||t===void 0?void 0:t.config},G0=t=>{var e;return(e=Kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function aN(){var t;const e=(t=Kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hN(){return!aN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fN(){try{return typeof indexedDB=="object"}catch{return!1}}function pN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="FirebaseError";class _r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mN,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gN(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new _r(i,l,r)}}function gN(t,e){return t.replace(yN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yN=/\{\$([^}]+)}/g;function vN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ky(s)&&Ky(o)){if(!gc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ky(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _N(t,e){const n=new wN(t,e);return n.subscribe.bind(n)}class wN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jd),i.error===void 0&&(i.error=Jd),i.complete===void 0&&(i.complete=Jd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IN(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TN(t){return t===Zi?void 0:t}function IN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const RN={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},AN=Ne.INFO,NN={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},CN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Up{constructor(e){this.name=e,this._logLevel=AN,this._logHandler=CN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const PN=(t,e)=>e.some(n=>t instanceof n);let Gy,Yy;function kN(){return Gy||(Gy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bN(){return Yy||(Yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X0=new WeakMap,df=new WeakMap,J0=new WeakMap,Zd=new WeakMap,Fp=new WeakMap;function DN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X0.set(n,t)}).catch(()=>{}),Fp.set(e,t),e}function jN(t){if(df.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});df.set(t,e)}let hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ON(t){hf=t(hf)}function LN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(eh(this),e,...n);return J0.set(r,e.sort?e.sort():[e]),Ai(r)}:bN().includes(t)?function(...e){return t.apply(eh(this),e),Ai(X0.get(this))}:function(...e){return Ai(t.apply(eh(this),e))}}function MN(t){return typeof t=="function"?LN(t):(t instanceof IDBTransaction&&jN(t),PN(t,kN())?new Proxy(t,hf):t)}function Ai(t){if(t instanceof IDBRequest)return DN(t);if(Zd.has(t))return Zd.get(t);const e=MN(t);return e!==t&&(Zd.set(t,e),Fp.set(e,t)),e}const eh=t=>Fp.get(t);function VN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ai(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ai(o.result),u.oldVersion,u.newVersion,Ai(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const UN=["get","getKey","getAll","getAllKeys","count"],FN=["put","add","delete","clear"],th=new Map;function Xy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(th.get(e))return th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UN.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return th.set(e,s),s}ON(t=>({...t,get:(e,n,r)=>Xy(e,n)||t.get(e,n,r),has:(e,n)=>!!Xy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",Jy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Up("@firebase/app"),$N="@firebase/app-compat",HN="@firebase/analytics-compat",WN="@firebase/analytics",qN="@firebase/app-check-compat",QN="@firebase/app-check",KN="@firebase/auth",GN="@firebase/auth-compat",YN="@firebase/database",XN="@firebase/data-connect",JN="@firebase/database-compat",ZN="@firebase/functions",eC="@firebase/functions-compat",tC="@firebase/installations",nC="@firebase/installations-compat",rC="@firebase/messaging",iC="@firebase/messaging-compat",sC="@firebase/performance",oC="@firebase/performance-compat",aC="@firebase/remote-config",lC="@firebase/remote-config-compat",uC="@firebase/storage",cC="@firebase/storage-compat",dC="@firebase/firestore",hC="@firebase/vertexai-preview",fC="@firebase/firestore-compat",pC="firebase",mC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",gC={[ff]:"fire-core",[$N]:"fire-core-compat",[WN]:"fire-analytics",[HN]:"fire-analytics-compat",[QN]:"fire-app-check",[qN]:"fire-app-check-compat",[KN]:"fire-auth",[GN]:"fire-auth-compat",[YN]:"fire-rtdb",[XN]:"fire-data-connect",[JN]:"fire-rtdb-compat",[ZN]:"fire-fn",[eC]:"fire-fn-compat",[tC]:"fire-iid",[nC]:"fire-iid-compat",[rC]:"fire-fcm",[iC]:"fire-fcm-compat",[sC]:"fire-perf",[oC]:"fire-perf-compat",[aC]:"fire-rc",[lC]:"fire-rc-compat",[uC]:"fire-gcs",[cC]:"fire-gcs-compat",[dC]:"fire-fst",[fC]:"fire-fst-compat",[hC]:"fire-vertex","fire-js":"fire-js",[pC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,yC=new Map,mf=new Map;function Zy(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(mf.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,t);for(const n of yc.values())Zy(n,t);for(const n of yC.values())Zy(n,t);return!0}function wl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new vl("app","Firebase",vC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=mC;function Z0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=K0()),!n)throw Ni.create("no-options");const s=yc.get(i);if(s){if(gc(n,s.options)&&gc(r,s.config))return s;throw Ni.create("duplicate-app",{appName:i})}const o=new SN(i);for(const u of mf.values())o.addComponent(u);const l=new _C(n,r,o);return yc.set(i,l),l}function Gc(t=pf){const e=yc.get(t);if(!e&&t===pf&&K0())return Z0();if(!e)throw Ni.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let i=(r=gC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(l.join(" "));return}Di(new $r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebase-heartbeat-database",EC=1,tl="firebase-heartbeat-store";let nh=null;function eE(){return nh||(nh=VN(wC,EC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),nh}async function xC(t){try{const n=(await eE()).transaction(tl),r=await n.objectStore(tl).get(tE(t));return await n.done,r}catch(e){if(e instanceof _r)Hr.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(n.message)}}}async function ev(t,e){try{const r=(await eE()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,tE(t)),await r.done}catch(n){if(n instanceof _r)Hr.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hr.warn(r.message)}}}function tE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=1024,IC=30*24*60*60*1e3;class SC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=IC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:r,unsentEntries:i}=RC(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hr.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function RC(t,e=TC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fN()?pN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nv(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){Di(new $r("platform-logger",e=>new BN(e),"PRIVATE")),Di(new $r("heartbeat",e=>new SC(e),"PRIVATE")),Mn(ff,Jy,t),Mn(ff,Jy,"esm2017"),Mn("fire-js","")}NC("");function Bp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function nE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CC=nE,rE=new vl("auth","Firebase",nE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Up("@firebase/auth");function PC(t,...e){vc.logLevel<=Ne.WARN&&vc.warn(`Auth (${Ns}): ${t}`,...e)}function ku(t,...e){vc.logLevel<=Ne.ERROR&&vc.error(`Auth (${Ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,...e){throw $p(t,...e)}function Xn(t,...e){return $p(t,...e)}function zp(t,e,n){const r=Object.assign(Object.assign({},CC()),{[e]:n});return new vl("auth","Firebase",r).create(e,{appName:t.name})}function cs(t){return zp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&yr(t,"argument-error"),zp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $p(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rE.create(t,...e)}function he(t,e,...n){if(!t)throw $p(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ku(e),new Error(e)}function Wr(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bC(){return rv()==="http:"||rv()==="https:"}function rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bC()||uN()||"connection"in navigator)?navigator.onLine:!0}function jC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=oN()||cN()}get(){return DC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new El(3e4,6e4);function Wp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Do(t,e,n,r,i={}){return sE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=_l(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return lN()||(c.referrerPolicy="no-referrer"),iE.fetch()(oE(t,t.config.apiHost,n,l),c)})}async function sE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},OC),e);try{const i=new VC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw du(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zp(t,f,c);yr(t,f)}}catch(i){if(i instanceof _r)throw i;yr(t,"network-request-failed",{message:String(i)})}}async function MC(t,e,n,r,i={}){const s=await Do(t,e,n,r,i);return"mfaPendingCredential"in s&&yr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function oE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hp(t.config,i):`${t.config.apiScheme}://${i}`}class VC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xn(this.auth,"network-request-failed")),LC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(t,e){return Do(t,"POST","/v1/accounts:delete",e)}async function aE(t,e){return Do(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lE(t,e=!1){const n=ft(t),r=await n.getIdToken(e),i=qp(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pa(rh(i.auth_time)),issuedAtTime:Pa(rh(i.iat)),expirationTime:Pa(rh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function rh(t){return Number(t)*1e3}function qp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=q0(n);return i?JSON.parse(i):(ku("Failed to decode base64 JWT payload"),null)}catch(i){return ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iv(t){const e=qp(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _r&&FC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t){var e;const n=t.auth,r=await t.getIdToken(),i=await nl(t,aE(n,{idToken:r}));he(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uE(s.providerUserInfo):[],l=$C(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function zC(t){const e=ft(t);await _c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uE(t){return t.map(e=>{var{providerId:n}=e,r=Bp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e){const n=await sE(t,{},async()=>{const r=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=oE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",iE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WC(t,e){return Do(t,"POST","/v2/accounts:revokeToken",Wp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=iv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await HC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ao;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ao,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lE(this,e)}reload(){return zC(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _c(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await nl(this,UC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:j,isAnonymous:U,providerData:F,stsTokenManager:y}=n;he(A&&y,e,"internal-error");const v=ao.fromJSON(this.name,y);he(typeof A=="string",e,"internal-error"),ri(p,e.name),ri(g,e.name),he(typeof j=="boolean",e,"internal-error"),he(typeof U=="boolean",e,"internal-error"),ri(E,e.name),ri(R,e.name),ri(N,e.name),ri(b,e.name),ri(S,e.name),ri(w,e.name);const I=new Dr({uid:A,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:U,photoURL:R,phoneNumber:E,tenantId:N,stsTokenManager:v,createdAt:S,lastLoginAt:w});return F&&Array.isArray(F)&&(I.providerData=F.map(x=>Object.assign({},x))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new ao;i.updateFromServerResponse(n);const s=new Dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _c(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ao;l.updateFromIdToken(r);const u=new Dr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;function jr(t){Wr(t instanceof Function,"Expected a class definition");let e=sv.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cE.type="NONE";const ov=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bu(this.userKey,i.apiKey,s),this.fullPersistenceKey=bu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(jr(ov),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||jr(ov);const o=bu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const p=Dr._fromJSON(e,f);c!==s&&(l=p),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new lo(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new lo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gE(e))return"Blackberry";if(yE(e))return"Webos";if(hE(e))return"Safari";if((e.includes("chrome/")||fE(e))&&!e.includes("edge/"))return"Chrome";if(mE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dE(t=Zt()){return/firefox\//i.test(t)}function hE(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fE(t=Zt()){return/crios\//i.test(t)}function pE(t=Zt()){return/iemobile/i.test(t)}function mE(t=Zt()){return/android/i.test(t)}function gE(t=Zt()){return/blackberry/i.test(t)}function yE(t=Zt()){return/webos/i.test(t)}function Qp(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qC(t=Zt()){var e;return Qp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QC(){return dN()&&document.documentMode===10}function vE(t=Zt()){return Qp(t)||mE(t)||yE(t)||gE(t)||/windows phone/i.test(t)||pE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e=[]){let n;switch(t){case"Browser":n=av(Zt());break;case"Worker":n=`${av(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e={}){return Do(t,"GET","/v2/passwordPolicy",Wp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=6;class XC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lv(this),this.idTokenSubscription=new lv(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aE(this,{idToken:e}),r=await Dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _c(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(cs(this));const n=e?ft(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GC(this),n=new XC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yc(t){return ft(t)}class lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_N(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZC(t){Kp=t}function eP(t){return Kp.loadJS(t)}function tP(){return Kp.gapiScript}function nP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e){const n=wl(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(gc(s,e??{}))return i;yr(i,"already-initialized")}return n.initialize({options:e})}function iP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sP(t,e,n){const r=Yc(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=wE(e),{host:o,port:l}=oP(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),aP()}function wE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oP(t){const e=wE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uv(o)}}}function uv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return MC(t,"POST","/v1/accounts:signInWithIdp",Wp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="http://localhost";class ws extends EE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ws(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:lP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Gp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends xl{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends xl{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends xl{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Dr._fromIdTokenResponse(e,r,i),o=cv(r);return new Eo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cv(r);return new Eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends _r{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wc(e,n,r,i)}}function xE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wc._fromErrorAndOperation(t,s,e,r):s})}async function uP(t,e,n=!1){const r=await nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e,n=!1){const{auth:r}=t;if(kr(r.app))return Promise.reject(cs(r));const i="reauthenticate";try{const s=await nl(t,xE(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=qp(s.idToken);he(o,r,"internal-error");const{sub:l}=o;return he(t.uid===l,r,"user-mismatch"),Eo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e,n=!1){if(kr(t.app))return Promise.reject(cs(t));const r="signIn",i=await xE(t,r,e),s=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function hP(t,e,n,r){return ft(t).onIdTokenChanged(e,n,r)}function fP(t,e,n){return ft(t).beforeAuthStateChanged(e,n)}function pP(t,e,n,r){return ft(t).onAuthStateChanged(e,n,r)}const Ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=1e3,gP=10;class IE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);QC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IE.type="LOCAL";const yP=IE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SE.type="SESSION";const RE=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await vP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Yp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function wP(t){pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function EP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TP(){return AE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",IP=1,xc="firebaseLocalStorage",CE="fbase_key";class Tl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jc(t,e){return t.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function SP(){const t=indexedDB.deleteDatabase(NE);return new Tl(t).toPromise()}function vf(){const t=indexedDB.open(NE,IP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xc,{keyPath:CE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xc)?e(r):(r.close(),await SP(),e(await vf()))})})}async function dv(t,e,n){const r=Jc(t,!0).put({[CE]:e,value:n});return new Tl(r).toPromise()}async function RP(t,e){const n=Jc(t,!1).get(e),r=await new Tl(n).toPromise();return r===void 0?null:r.value}function hv(t,e){const n=Jc(t,!0).delete(e);return new Tl(n).toPromise()}const AP=800,NP=3;class PE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(TP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await EP(),!this.activeServiceWorker)return;this.sender=new _P(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await dv(e,Ec,"1"),await hv(e,Ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Jc(i,!1).getAll();return new Tl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PE.type="LOCAL";const CP=PE;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e){return e?jr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends EE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PP(t){return dP(t.auth,new Xp(t),t.bypassAuthState)}function kP(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),cP(n,new Xp(t),t.bypassAuthState)}async function bP(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),uP(n,new Xp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PP;case"linkViaPopup":case"linkViaRedirect":return bP;case"reauthViaPopup":case"reauthViaRedirect":return kP;default:yr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new El(2e3,1e4);async function jP(t,e,n){if(kr(t.app))return Promise.reject(Xn(t,"operation-not-supported-in-this-environment"));const r=Yc(t);kC(t,e,Gp);const i=kE(r,n);return new os(r,"signInViaPopup",e,i).executeNotNull()}class os extends bE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DP.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="pendingRedirect",Du=new Map;class LP extends bE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Du.get(this.auth._key());if(!e){try{const r=await MP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Du.set(this.auth._key(),e)}return this.bypassAuthState||Du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MP(t,e){const n=FP(e),r=UP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VP(t,e){Du.set(t._key(),e)}function UP(t){return jr(t._redirectPersistence)}function FP(t){return bu(OP,t.config.apiKey,t.name)}async function BP(t,e,n=!1){if(kr(t.app))return Promise.reject(cs(t));const r=Yc(t),i=kE(r,e),o=await new LP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=10*60*1e3;class $P{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zP&&this.cachedEventUids.clear(),this.cachedEventUids.has(fv(e))}saveEventToCache(e){this.cachedEventUids.add(fv(e)),this.lastProcessedEventTime=Date.now()}}function fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e={}){return Do(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QP=/^https?/;async function KP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WP(t);for(const n of e)try{if(GP(n))return}catch{}yr(t,"unauthorized-domain")}function GP(t){const e=gf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QP.test(n))return!1;if(qP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new El(3e4,6e4);function pv(){const t=pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XP(t){return new Promise((e,n)=>{var r,i,s;function o(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(Xn(t,"network-request-failed"))},timeout:YP.get()})}if(!((i=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pr().gapi)===null||s===void 0)&&s.load)o();else{const l=nP("iframefcb");return pr()[l]=()=>{gapi.load?o():n(Xn(t,"network-request-failed"))},eP(`${tP()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ju=null,e})}let ju=null;function JP(t){return ju=ju||XP(t),ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=new El(5e3,15e3),ek="__/auth/iframe",tk="emulator/auth/iframe",nk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ik(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hp(e,tk):`https://${t.config.authDomain}/${ek}`,r={apiKey:e.apiKey,appName:t.name,v:Ns},i=rk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_l(r).slice(1)}`}async function sk(t){const e=await JP(t),n=pr().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:ik(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xn(t,"network-request-failed"),l=pr().setTimeout(()=>{s(o)},ZP.get());function u(){pr().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ak=500,lk=600,uk="_blank",ck="http://localhost";class mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dk(t,e,n,r=ak,i=lk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},ok),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Zt().toLowerCase();n&&(l=fE(c)?uk:n),dE(c)&&(e=e||ck,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[E,R])=>`${g}${E}=${R},`,"");if(qC(c)&&l!=="_self")return hk(e||"",l),new mv(null);const p=window.open(e||"",l,f);he(p,t,"popup-blocked");try{p.focus()}catch{}return new mv(p)}function hk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="__/auth/handler",pk="emulator/auth/handler",mk=encodeURIComponent("fac");async function gv(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ns,eventId:i};if(e instanceof Gp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof xl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${mk}=${encodeURIComponent(u)}`:"";return`${gk(t)}?${_l(l).slice(1)}${c}`}function gk({config:t}){return t.emulator?Hp(t,pk):`https://${t.authDomain}/${fk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="webStorageSupport";class yk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=BP,this._overrideRedirectResult=VP}async _openPopup(e,n,r,i){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gv(e,n,r,gf(),i);return dk(e,o,Yp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gv(e,n,r,gf(),i);return wP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await sk(e),r=new $P(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ih,{type:ih},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ih];o!==void 0&&n(!!o),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vE()||hE()||Qp()}}const vk=yk;var yv="@firebase/auth",vv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ek(t){Di(new $r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_E(t)},c=new JC(r,i,s,u);return iP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new $r("auth-internal",e=>{const n=Yc(e.getProvider("auth").getImmediate());return(r=>new _k(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(yv,vv,wk(t)),Mn(yv,vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=5*60,Tk=G0("authIdTokenMaxAge")||xk;let _v=null;const Ik=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Tk)return;const i=n==null?void 0:n.token;_v!==i&&(_v=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Sk(t=Gc()){const e=wl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rP(t,{popupRedirectResolver:vk,persistence:[CP,yP,RE]}),r=G0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Ik(s.toString());fP(n,o,()=>o(n.currentUser)),hP(n,l=>o(l))}}const i=Q0("auth");return i&&sP(n,`http://${i}`),n}function Rk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Xn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Rk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ek("Browser");var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,jE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function I(){}I.prototype=v.prototype,y.D=v.prototype,y.prototype=new I,y.prototype.constructor=y,y.C=function(x,C,k){for(var T=Array(arguments.length-2),le=2;le<arguments.length;le++)T[le-2]=arguments[le];return v.prototype[C].apply(x,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,v,I){I||(I=0);var x=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)x[C]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(C=0;16>C;++C)x[C]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=y.g[0],I=y.g[1],C=y.g[2];var k=y.g[3],T=v+(k^I&(C^k))+x[0]+3614090360&4294967295;v=I+(T<<7&4294967295|T>>>25),T=k+(C^v&(I^C))+x[1]+3905402710&4294967295,k=v+(T<<12&4294967295|T>>>20),T=C+(I^k&(v^I))+x[2]+606105819&4294967295,C=k+(T<<17&4294967295|T>>>15),T=I+(v^C&(k^v))+x[3]+3250441966&4294967295,I=C+(T<<22&4294967295|T>>>10),T=v+(k^I&(C^k))+x[4]+4118548399&4294967295,v=I+(T<<7&4294967295|T>>>25),T=k+(C^v&(I^C))+x[5]+1200080426&4294967295,k=v+(T<<12&4294967295|T>>>20),T=C+(I^k&(v^I))+x[6]+2821735955&4294967295,C=k+(T<<17&4294967295|T>>>15),T=I+(v^C&(k^v))+x[7]+4249261313&4294967295,I=C+(T<<22&4294967295|T>>>10),T=v+(k^I&(C^k))+x[8]+1770035416&4294967295,v=I+(T<<7&4294967295|T>>>25),T=k+(C^v&(I^C))+x[9]+2336552879&4294967295,k=v+(T<<12&4294967295|T>>>20),T=C+(I^k&(v^I))+x[10]+4294925233&4294967295,C=k+(T<<17&4294967295|T>>>15),T=I+(v^C&(k^v))+x[11]+2304563134&4294967295,I=C+(T<<22&4294967295|T>>>10),T=v+(k^I&(C^k))+x[12]+1804603682&4294967295,v=I+(T<<7&4294967295|T>>>25),T=k+(C^v&(I^C))+x[13]+4254626195&4294967295,k=v+(T<<12&4294967295|T>>>20),T=C+(I^k&(v^I))+x[14]+2792965006&4294967295,C=k+(T<<17&4294967295|T>>>15),T=I+(v^C&(k^v))+x[15]+1236535329&4294967295,I=C+(T<<22&4294967295|T>>>10),T=v+(C^k&(I^C))+x[1]+4129170786&4294967295,v=I+(T<<5&4294967295|T>>>27),T=k+(I^C&(v^I))+x[6]+3225465664&4294967295,k=v+(T<<9&4294967295|T>>>23),T=C+(v^I&(k^v))+x[11]+643717713&4294967295,C=k+(T<<14&4294967295|T>>>18),T=I+(k^v&(C^k))+x[0]+3921069994&4294967295,I=C+(T<<20&4294967295|T>>>12),T=v+(C^k&(I^C))+x[5]+3593408605&4294967295,v=I+(T<<5&4294967295|T>>>27),T=k+(I^C&(v^I))+x[10]+38016083&4294967295,k=v+(T<<9&4294967295|T>>>23),T=C+(v^I&(k^v))+x[15]+3634488961&4294967295,C=k+(T<<14&4294967295|T>>>18),T=I+(k^v&(C^k))+x[4]+3889429448&4294967295,I=C+(T<<20&4294967295|T>>>12),T=v+(C^k&(I^C))+x[9]+568446438&4294967295,v=I+(T<<5&4294967295|T>>>27),T=k+(I^C&(v^I))+x[14]+3275163606&4294967295,k=v+(T<<9&4294967295|T>>>23),T=C+(v^I&(k^v))+x[3]+4107603335&4294967295,C=k+(T<<14&4294967295|T>>>18),T=I+(k^v&(C^k))+x[8]+1163531501&4294967295,I=C+(T<<20&4294967295|T>>>12),T=v+(C^k&(I^C))+x[13]+2850285829&4294967295,v=I+(T<<5&4294967295|T>>>27),T=k+(I^C&(v^I))+x[2]+4243563512&4294967295,k=v+(T<<9&4294967295|T>>>23),T=C+(v^I&(k^v))+x[7]+1735328473&4294967295,C=k+(T<<14&4294967295|T>>>18),T=I+(k^v&(C^k))+x[12]+2368359562&4294967295,I=C+(T<<20&4294967295|T>>>12),T=v+(I^C^k)+x[5]+4294588738&4294967295,v=I+(T<<4&4294967295|T>>>28),T=k+(v^I^C)+x[8]+2272392833&4294967295,k=v+(T<<11&4294967295|T>>>21),T=C+(k^v^I)+x[11]+1839030562&4294967295,C=k+(T<<16&4294967295|T>>>16),T=I+(C^k^v)+x[14]+4259657740&4294967295,I=C+(T<<23&4294967295|T>>>9),T=v+(I^C^k)+x[1]+2763975236&4294967295,v=I+(T<<4&4294967295|T>>>28),T=k+(v^I^C)+x[4]+1272893353&4294967295,k=v+(T<<11&4294967295|T>>>21),T=C+(k^v^I)+x[7]+4139469664&4294967295,C=k+(T<<16&4294967295|T>>>16),T=I+(C^k^v)+x[10]+3200236656&4294967295,I=C+(T<<23&4294967295|T>>>9),T=v+(I^C^k)+x[13]+681279174&4294967295,v=I+(T<<4&4294967295|T>>>28),T=k+(v^I^C)+x[0]+3936430074&4294967295,k=v+(T<<11&4294967295|T>>>21),T=C+(k^v^I)+x[3]+3572445317&4294967295,C=k+(T<<16&4294967295|T>>>16),T=I+(C^k^v)+x[6]+76029189&4294967295,I=C+(T<<23&4294967295|T>>>9),T=v+(I^C^k)+x[9]+3654602809&4294967295,v=I+(T<<4&4294967295|T>>>28),T=k+(v^I^C)+x[12]+3873151461&4294967295,k=v+(T<<11&4294967295|T>>>21),T=C+(k^v^I)+x[15]+530742520&4294967295,C=k+(T<<16&4294967295|T>>>16),T=I+(C^k^v)+x[2]+3299628645&4294967295,I=C+(T<<23&4294967295|T>>>9),T=v+(C^(I|~k))+x[0]+4096336452&4294967295,v=I+(T<<6&4294967295|T>>>26),T=k+(I^(v|~C))+x[7]+1126891415&4294967295,k=v+(T<<10&4294967295|T>>>22),T=C+(v^(k|~I))+x[14]+2878612391&4294967295,C=k+(T<<15&4294967295|T>>>17),T=I+(k^(C|~v))+x[5]+4237533241&4294967295,I=C+(T<<21&4294967295|T>>>11),T=v+(C^(I|~k))+x[12]+1700485571&4294967295,v=I+(T<<6&4294967295|T>>>26),T=k+(I^(v|~C))+x[3]+2399980690&4294967295,k=v+(T<<10&4294967295|T>>>22),T=C+(v^(k|~I))+x[10]+4293915773&4294967295,C=k+(T<<15&4294967295|T>>>17),T=I+(k^(C|~v))+x[1]+2240044497&4294967295,I=C+(T<<21&4294967295|T>>>11),T=v+(C^(I|~k))+x[8]+1873313359&4294967295,v=I+(T<<6&4294967295|T>>>26),T=k+(I^(v|~C))+x[15]+4264355552&4294967295,k=v+(T<<10&4294967295|T>>>22),T=C+(v^(k|~I))+x[6]+2734768916&4294967295,C=k+(T<<15&4294967295|T>>>17),T=I+(k^(C|~v))+x[13]+1309151649&4294967295,I=C+(T<<21&4294967295|T>>>11),T=v+(C^(I|~k))+x[4]+4149444226&4294967295,v=I+(T<<6&4294967295|T>>>26),T=k+(I^(v|~C))+x[11]+3174756917&4294967295,k=v+(T<<10&4294967295|T>>>22),T=C+(v^(k|~I))+x[2]+718787259&4294967295,C=k+(T<<15&4294967295|T>>>17),T=I+(k^(C|~v))+x[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(C+(T<<21&4294967295|T>>>11))&4294967295,y.g[2]=y.g[2]+C&4294967295,y.g[3]=y.g[3]+k&4294967295}r.prototype.u=function(y,v){v===void 0&&(v=y.length);for(var I=v-this.blockSize,x=this.B,C=this.h,k=0;k<v;){if(C==0)for(;k<=I;)i(this,y,k),k+=this.blockSize;if(typeof y=="string"){for(;k<v;)if(x[C++]=y.charCodeAt(k++),C==this.blockSize){i(this,x),C=0;break}}else for(;k<v;)if(x[C++]=y[k++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;var I=8*this.o;for(v=y.length-8;v<y.length;++v)y[v]=I&255,I/=256;for(this.u(y),y=Array(16),v=I=0;4>v;++v)for(var x=0;32>x;x+=8)y[I++]=this.g[v]>>>x&255;return y};function s(y,v){var I=l;return Object.prototype.hasOwnProperty.call(I,y)?I[y]:I[y]=v(y)}function o(y,v){this.h=v;for(var I=[],x=!0,C=y.length-1;0<=C;C--){var k=y[C]|0;x&&k==v||(I[C]=k,x=!1)}this.g=I}var l={};function u(y){return-128<=y&&128>y?s(y,function(v){return new o([v|0],0>v?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return p;if(0>y)return b(c(-y));for(var v=[],I=1,x=0;y>=I;x++)v[x]=y/I|0,I*=4294967296;return new o(v,0)}function f(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return b(f(y.substring(1),v));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(v,8)),x=p,C=0;C<y.length;C+=8){var k=Math.min(8,y.length-C),T=parseInt(y.substring(C,C+k),v);8>k?(k=c(Math.pow(v,k)),x=x.j(k).add(c(T))):(x=x.j(I),x=x.add(c(T)))}return x}var p=u(0),g=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-b(this).m();for(var y=0,v=1,I=0;I<this.g.length;I++){var x=this.i(I);y+=(0<=x?x:4294967296+x)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(R(this))return"0";if(N(this))return"-"+b(this).toString(y);for(var v=c(Math.pow(y,6)),I=this,x="";;){var C=j(I,v).g;I=S(I,C.j(v));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(y);if(I=C,R(I))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function R(y){if(y.h!=0)return!1;for(var v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function N(y){return y.h==-1}t.l=function(y){return y=S(this,y),N(y)?-1:R(y)?0:1};function b(y){for(var v=y.g.length,I=[],x=0;x<v;x++)I[x]=~y.g[x];return new o(I,~y.h).add(g)}t.abs=function(){return N(this)?b(this):this},t.add=function(y){for(var v=Math.max(this.g.length,y.g.length),I=[],x=0,C=0;C<=v;C++){var k=x+(this.i(C)&65535)+(y.i(C)&65535),T=(k>>>16)+(this.i(C)>>>16)+(y.i(C)>>>16);x=T>>>16,k&=65535,T&=65535,I[C]=T<<16|k}return new o(I,I[I.length-1]&-2147483648?-1:0)};function S(y,v){return y.add(b(v))}t.j=function(y){if(R(this)||R(y))return p;if(N(this))return N(y)?b(this).j(b(y)):b(b(this).j(y));if(N(y))return b(this.j(b(y)));if(0>this.l(E)&&0>y.l(E))return c(this.m()*y.m());for(var v=this.g.length+y.g.length,I=[],x=0;x<2*v;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<y.g.length;C++){var k=this.i(x)>>>16,T=this.i(x)&65535,le=y.i(C)>>>16,Oe=y.i(C)&65535;I[2*x+2*C]+=T*Oe,w(I,2*x+2*C),I[2*x+2*C+1]+=k*Oe,w(I,2*x+2*C+1),I[2*x+2*C+1]+=T*le,w(I,2*x+2*C+1),I[2*x+2*C+2]+=k*le,w(I,2*x+2*C+2)}for(x=0;x<v;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=v;x<2*v;x++)I[x]=0;return new o(I,0)};function w(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function A(y,v){this.g=y,this.h=v}function j(y,v){if(R(v))throw Error("division by zero");if(R(y))return new A(p,p);if(N(y))return v=j(b(y),v),new A(b(v.g),b(v.h));if(N(v))return v=j(y,b(v)),new A(b(v.g),v.h);if(30<y.g.length){if(N(y)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,x=v;0>=x.l(y);)I=U(I),x=U(x);var C=F(I,1),k=F(x,1);for(x=F(x,2),I=F(I,2);!R(x);){var T=k.add(x);0>=T.l(y)&&(C=C.add(I),k=T),x=F(x,1),I=F(I,1)}return v=S(y,C.j(v)),new A(C,v)}for(C=p;0<=y.l(v);){for(I=Math.max(1,Math.floor(y.m()/v.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=c(I),T=k.j(v);N(T)||0<T.l(y);)I-=x,k=c(I),T=k.j(v);R(k)&&(k=g),C=C.add(k),y=S(y,T)}return new A(C,y)}t.A=function(y){return j(this,y).h},t.and=function(y){for(var v=Math.max(this.g.length,y.g.length),I=[],x=0;x<v;x++)I[x]=this.i(x)&y.i(x);return new o(I,this.h&y.h)},t.or=function(y){for(var v=Math.max(this.g.length,y.g.length),I=[],x=0;x<v;x++)I[x]=this.i(x)|y.i(x);return new o(I,this.h|y.h)},t.xor=function(y){for(var v=Math.max(this.g.length,y.g.length),I=[],x=0;x<v;x++)I[x]=this.i(x)^y.i(x);return new o(I,this.h^y.h)};function U(y){for(var v=y.g.length+1,I=[],x=0;x<v;x++)I[x]=y.i(x)<<1|y.i(x-1)>>>31;return new o(I,y.h)}function F(y,v){var I=v>>5;v%=32;for(var x=y.g.length-I,C=[],k=0;k<x;k++)C[k]=0<v?y.i(k+I)>>>v|y.i(k+I+1)<<32-v:y.i(k+I);return new o(C,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,ds=o}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OE,ya,LE,Ou,_f,ME,VE,UE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var L=a[_];if(!(L in m))break e;m=m[L]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var m=0,_=!1,L={next:function(){if(!_&&m<a.length){var V=m++;return{value:h(V,a[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),a.apply(h,L)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function E(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function R(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,L,V){for(var q=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)q[Qe-2]=arguments[Qe];return h.prototype[L].apply(_,q)}}function N(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function b(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const L=a.length||0,V=_.length||0;a.length=L+V;for(let q=0;q<V;q++)a[L+q]=_[q]}else a.push(_)}}class S{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var U=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function F(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function y(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function v(a){const h={};for(const m in a)h[m]=a[m];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,h){let m,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(m in _)a[m]=_[m];for(let V=0;V<I.length;V++)m=I[V],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function C(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function k(a){l.setTimeout(()=>{throw a},0)}function T(){var a=re;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class le{constructor(){this.h=this.g=null}add(h,m){const _=Oe.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Oe=new S(()=>new Ke,a=>a.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,z=!1,re=new le,oe=()=>{const a=l.Promise.resolve(void 0);Le=()=>{a.then(Ee)}};var Ee=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(m){k(m)}var h=Oe;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function $e(a,h){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(U){e:{try{j(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:He[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&$e.aa.h.call(this)}}R($e,Ie);var He={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Fn=0;function rr(a,h,m,_,L){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=L,this.key=++Fn,this.da=this.fa=!1}function yn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ir(a){this.src=a,this.g={},this.h=0}ir.prototype.add=function(a,h,m,_,L){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=pe(a,h,_,L);return-1<q?(h=a[q],m||(h.fa=!1)):(h=new rr(h,this.src,V,!!_,L),h.fa=m,a.push(h)),h};function qe(a,h){var m=h.type;if(m in a.g){var _=a.g[m],L=Array.prototype.indexOf.call(_,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(_,L,1),V&&(yn(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function pe(a,h,m,_){for(var L=0;L<a.length;++L){var V=a[L];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==_)return L}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),ut={};function xe(a,h,m,_,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)xe(a,h[V],m,_,L);return null}return m=be(m),a&&a[Xe]?a.K(h,m,c(_)?!!_.capture:!1,L):Q(a,h,m,!1,_,L)}function Q(a,h,m,_,L,V){if(!h)throw Error("Invalid event type");var q=c(L)?!!L.capture:!!L,Qe=$t(a);if(Qe||(a[_e]=Qe=new ir(a)),m=Qe.add(h,m,_,q,V),m.proxy)return m;if(_=ae(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)lt||(L=q),L===void 0&&(L=!1),a.addEventListener(h.toString(),_,L);else if(a.attachEvent)a.attachEvent(Re(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ae(){function a(m){return h.call(a.src,a.listener,m)}const h=We;return a}function me(a,h,m,_,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)me(a,h[V],m,_,L);else _=c(_)?!!_.capture:!!_,m=be(m),a&&a[Xe]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],m=pe(V,m,_,L),-1<m&&(yn(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=$t(a))&&(h=a.g[h.toString()],a=-1,h&&(a=pe(h,m,_,L)),(m=-1<a?h[a]:null)&&Je(m))}function Je(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Xe])qe(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(Re(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=$t(h))?(qe(m,a),m.h==0&&(m.src=null,h[_e]=null)):yn(a)}}}function Re(a){return a in ut?ut[a]:ut[a]="on"+a}function We(a,h){if(a.da)a=!0;else{h=new $e(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&Je(a),a=m.call(_,h)}return a}function $t(a){return a=a[_e],a instanceof ir?a:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(a){return typeof a=="function"?a:(a[mt]||(a[mt]=function(h){return a.handleEvent(h)}),a[mt])}function ce(){se.call(this),this.i=new ir(this),this.M=this,this.F=null}R(ce,se),ce.prototype[Xe]=!0,ce.prototype.removeEventListener=function(a,h,m,_){me(this,a,h,m,_)};function Me(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new Ie(h,a);else if(h instanceof Ie)h.target=h.target||a;else{var L=h;h=new Ie(_,a),x(h,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var q=h.g=m[V];L=Ve(q,_,!0,h)&&L}if(q=h.g=a,L=Ve(q,_,!0,h)&&L,L=Ve(q,_,!1,h)&&L,m)for(V=0;V<m.length;V++)q=h.g=m[V],L=Ve(q,_,!1,h)&&L}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)yn(m[_]);delete a.g[h],a.h--}}this.F=null},ce.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},ce.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function Ve(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var q=h[V];if(q&&!q.da&&q.capture==m){var Qe=q.listener,Ot=q.ha||q.src;q.fa&&qe(a.i,q),L=Qe.call(Ot,_)!==!1&&L}}return L&&!_.defaultPrevented}function kn(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Fo(a){a.g=kn(()=>{a.g=null,a.i&&(a.i=!1,Fo(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ks extends se{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Fo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){se.call(this),this.h=a,this.g={}}R(Hi,se);var Bn=[];function Bo(a){F(a.g,function(h,m){this.g.hasOwnProperty(m)&&Je(h)},a),a.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Bo(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=l.JSON.stringify,kl=l.JSON.parse,yd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ds(){}Ds.prototype.h=null;function Wi(a){return a.h||(a.h=a.i())}function zo(){}var wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){Ie.call(this,"d")}R(qi,Ie);function $o(){Ie.call(this,"c")}R($o,Ie);var sr={},bl=null;function Qi(){return bl=bl||new ce}sr.La="serverreachability";function Ki(a){Ie.call(this,sr.La,a)}R(Ki,Ie);function or(a){const h=Qi();Me(h,new Ki(h))}sr.STAT_EVENT="statevent";function Dl(a,h){Ie.call(this,sr.STAT_EVENT,a),this.stat=h}R(Dl,Ie);function jt(a){const h=Qi();Me(h,new Dl(h,a))}sr.Ma="timingevent";function P(a,h){Ie.call(this,sr.Ma,a),this.size=h}R(P,Ie);function O(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function M(){this.g=!0}M.prototype.xa=function(){this.g=!1};function $(a,h,m,_,L,V){a.info(function(){if(a.g)if(V)for(var q="",Qe=V.split("&"),Ot=0;Ot<Qe.length;Ot++){var De=Qe[Ot].split("=");if(1<De.length){var Ht=De[0];De=De[1];var Wt=Ht.split("_");q=2<=Wt.length&&Wt[1]=="type"?q+(Ht+"="+De+"&"):q+(Ht+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+h+`
`+m+`
`+q})}function K(a,h,m,_,L,V,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+h+`
`+m+`
`+V+" "+q})}function te(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Z(a,m)+(_?" "+_:"")})}function ue(a,h){a.info(function(){return"TIMEOUT: "+h})}M.prototype.info=function(){};function Z(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return bs(m)}catch{return h}}var J={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function de(){}R(de,Ds),de.prototype.g=function(){return new XMLHttpRequest},de.prototype.i=function(){return{}},ne=new de;function ve(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Ue={},Ae={};function Ge(a,h,m){a.L=1,a.v=Ml(Ir(h)),a.m=m,a.P=!0,Er(a,null)}function Er(a,h){a.F=Date.now(),en(a),a.A=Ir(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Ym(m.i,"t",_),a.C=0,m=a.j.J,a.h=new Tt,a.g=pg(a.j,m?h:null,!a.m),0<a.O&&(a.M=new ks(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var L="readystatechange";Array.isArray(L)||(L&&(Bn[0]=L.toString()),L=Bn);for(var V=0;V<L.length;V++){var q=xe(m,L[V],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),or(),$(a.i,a.u,a.A,a.l,a.R,a.m)}ve.prototype.ca=function(a){a=a.target;const h=this.M;h&&Sr(a)==3?h.j():this.Y(a)},ve.prototype.Y=function(a){try{if(a==this.g)e:{const Wt=Sr(this.g);var h=this.g.Ba();const Ms=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||rg(this.g)))){this.J||Wt!=4||h==7||(h==8||0>=Ms?or(3):or(2)),xr(this);var m=this.g.Z();this.X=m;t:if(Xr(this)){var _=rg(this.g);a="";var L=_.length,V=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),vn(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(V&&h==L-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,K(this.i,this.u,this.A,this.l,this.R,Wt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Ot=this.g;if((Qe=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Qe)){var De=Qe;break t}}De=null}if(m=De)te(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jr(this,m);else{this.o=!1,this.s=3,jt(12),bn(this),vn(this);break e}}if(this.P){m=!0;let $n;for(;!this.J&&this.C<q.length;)if($n=zn(this,q),$n==Ae){Wt==4&&(this.s=4,jt(14),m=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Ue){this.s=4,jt(15),te(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else te(this.i,this.l,$n,null),Jr(this,$n);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||q.length!=0||this.h.h||(this.s=1,jt(16),m=!1),this.o=this.o&&m,!m)te(this.i,this.l,q,"[Invalid Chunked Response]"),bn(this),vn(this);else if(0<q.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ed(Ht),Ht.M=!0,jt(11))}}else te(this.i,this.l,q,null),Jr(this,q);Wt==4&&bn(this),this.o&&!this.J&&(Wt==4?cg(this.j,this):(this.o=!1,en(this)))}else VT(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),bn(this),vn(this)}}}catch{}finally{}};function Xr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function zn(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?Ae:(m=Number(h.substring(m,_)),isNaN(m)?Ue:(_+=1,_+m>h.length?Ae:(h=h.slice(_,_+m),a.C=_+m,h)))}ve.prototype.cancel=function(){this.J=!0,bn(this)};function en(a){a.S=Date.now()+a.I,js(a,a.I)}function js(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=O(g(a.ba,a),h)}function xr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ve.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ue(this.i,this.A),this.L!=2&&(or(),jt(17)),bn(this),this.s=2,vn(this)):js(this,this.S-a)};function vn(a){a.j.G==0||a.J||cg(a.j,a)}function bn(a){xr(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Bo(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Jr(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||st(m.h,a))){if(!a.K&&st(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)$l(m),Bl(m);else break e;wd(m),jt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=O(g(m.Za,m),6e3));if(1>=Zr(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Yi(m,11)}else if((a.K||m.g==a)&&$l(m),!w(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let De=L[h];if(m.T=De[0],De=De[1],m.G==2)if(De[0]=="c"){m.K=De[1],m.ia=De[2];const Ht=De[3];Ht!=null&&(m.la=Ht,m.j.info("VER="+m.la));const Wt=De[4];Wt!=null&&(m.Aa=Wt,m.j.info("SVER="+m.Aa));const Ms=De[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(_=1.5*Ms,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const $n=a.g;if($n){const Wl=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var V=_.h;V.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ar(V,V.h),V.h=null))}if(_.D){const xd=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(_.ya=xd,et(_.I,_.D,xd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var q=a;if(_.qa=fg(_,_.J?_.ia:null,_.W),q.K){Ho(_.h,q);var Qe=q,Ot=_.L;Ot&&(Qe.I=Ot),Qe.B&&(xr(Qe),en(Qe)),_.g=q}else lg(_);0<m.i.length&&zl(m)}else De[0]!="stop"&&De[0]!="close"||Yi(m,7);else m.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Yi(m,7):_d(m):De[0]!="noop"&&m.l&&m.l.ta(De),m.v=0)}}or(4)}catch{}}var Ce=class{constructor(a,h){this.g=a,this.map=h}};function Ze(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tr(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Zr(a){return a.h?1:a.g?a.g.size:0}function st(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ar(a,h){a.g?a.g.add(h):a.h=h}function Ho(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ze.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function jl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return N(a.i)}function TT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function IT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function Hm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=IT(a),_=TT(a),L=_.length,V=0;V<L;V++)h.call(void 0,_[V],m&&m[V],a)}var Wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ST(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),L=null;if(0<=_){var V=a[m].substring(0,_);L=a[m].substring(_+1)}else V=a[m];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Gi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gi){this.h=a.h,Ol(this,a.j),this.o=a.o,this.g=a.g,Ll(this,a.s),this.l=a.l;var h=a.i,m=new Qo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),qm(this,m),this.m=a.m}else a&&(h=String(a).match(Wm))?(this.h=!1,Ol(this,h[1]||"",!0),this.o=Wo(h[2]||""),this.g=Wo(h[3]||"",!0),Ll(this,h[4]),this.l=Wo(h[5]||"",!0),qm(this,h[6]||"",!0),this.m=Wo(h[7]||"")):(this.h=!1,this.i=new Qo(null,this.h))}Gi.prototype.toString=function(){var a=[],h=this.j;h&&a.push(qo(h,Qm,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(qo(h,Qm,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(qo(m,m.charAt(0)=="/"?NT:AT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",qo(m,PT)),a.join("")};function Ir(a){return new Gi(a)}function Ol(a,h,m){a.j=m?Wo(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ll(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function qm(a,h,m){h instanceof Qo?(a.i=h,kT(a.i,a.h)):(m||(h=qo(h,CT)),a.i=new Qo(h,a.h))}function et(a,h,m){a.i.set(h,m)}function Ml(a){return et(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Wo(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qo(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,RT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function RT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Qm=/[#\/\?@]/g,AT=/[#\?:]/g,NT=/[#\?]/g,CT=/[#\?@]/g,PT=/#/g;function Qo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function ei(a){a.g||(a.g=new Map,a.h=0,a.i&&ST(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Qo.prototype,t.add=function(a,h){ei(this),this.i=null,a=Os(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Km(a,h){ei(a),h=Os(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Gm(a,h){return ei(a),h=Os(a,h),a.g.has(h)}t.forEach=function(a,h){ei(this),this.g.forEach(function(m,_){m.forEach(function(L){a.call(h,L,_,this)},this)},this)},t.na=function(){ei(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const L=a[_];for(let V=0;V<L.length;V++)m.push(h[_])}return m},t.V=function(a){ei(this);let h=[];if(typeof a=="string")Gm(this,a)&&(h=h.concat(this.g.get(Os(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return ei(this),this.i=null,a=Os(this,a),Gm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Ym(a,h,m){Km(a,h),0<m.length&&(a.i=null,a.g.set(Os(a,h),N(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const V=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var L=V;q[_]!==""&&(L+="="+encodeURIComponent(String(q[_]))),a.push(L)}}return this.i=a.join("&")};function Os(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function kT(a,h){h&&!a.j&&(ei(a),a.i=null,a.g.forEach(function(m,_){var L=_.toLowerCase();_!=L&&(Km(this,_),Ym(this,L,m))},a)),a.j=h}function bT(a,h){const m=new M;if(l.Image){const _=new Image;_.onload=E(ti,m,"TestLoadImage: loaded",!0,h,_),_.onerror=E(ti,m,"TestLoadImage: error",!1,h,_),_.onabort=E(ti,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(ti,m,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function DT(a,h){const m=new M,_=new AbortController,L=setTimeout(()=>{_.abort(),ti(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(V=>{clearTimeout(L),V.ok?ti(m,"TestPingServer: ok",!0,h):ti(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),ti(m,"TestPingServer: error",!1,h)})}function ti(a,h,m,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(m)}catch{}}function jT(){this.g=new yd}function OT(a,h,m){const _=m||"";try{Hm(a,function(L,V){let q=L;c(L)&&(q=bs(L)),h.push(_+V+"="+encodeURIComponent(q))})}catch(L){throw h.push(_+"type="+encodeURIComponent("_badmap")),L}}function Vl(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Vl,Ds),Vl.prototype.g=function(){return new Ul(this.l,this.j)},Vl.prototype.i=function(a){return function(){return a}}({});function Ul(a,h){ce.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ul,ce),t=Ul.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Go(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ko(this):Go(this),this.readyState==3&&Xm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ko(this))},t.Qa=function(a){this.g&&(this.response=a,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Go(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Go(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Jm(a){let h="";return F(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function vd(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Jm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):et(a,h,m))}function gt(a){ce.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(gt,ce);var LT=/^https?$/i,MT=["POST","PUT"];t=gt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?Wi(this.o):Wi(ne),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Zm(this,V);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)m.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())m.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(MT,h,void 0))||_||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of m)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ng(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Zm(this,V)}};function Zm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,eg(a),Fl(a)}function eg(a){a.A||(a.A=!0,Me(a,"complete"),Me(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Me(this,"complete"),Me(this,"abort"),Fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tg(this):this.bb())},t.bb=function(){tg(this)};function tg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Sr(a)!=4||a.Z()!=2)){if(a.u&&Sr(a)==4)kn(a.Ea,0,a);else if(Me(a,"readystatechange"),Sr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=q===0){var L=String(a.D).match(Wm)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),_=!LT.test(L?L.toLowerCase():"")}m=_}if(m)Me(a,"complete"),Me(a,"success");else{a.m=6;try{var V=2<Sr(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",eg(a)}}finally{Fl(a)}}}}function Fl(a,h){if(a.g){ng(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Me(a,"ready");try{m.onreadystatechange=_}catch{}}}function ng(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Sr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),kl(h)}};function rg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function VT(a){const h={};a=(a.g&&2<=Sr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(w(a[_]))continue;var m=C(a[_]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[L]||[];h[L]=V,V.push(m)}y(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function ig(a){this.Aa=0,this.i=[],this.j=new M,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yo("baseRetryDelayMs",5e3,a),this.cb=Yo("retryDelaySeedMs",1e4,a),this.Wa=Yo("forwardChannelMaxRetries",2,a),this.wa=Yo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ze(a&&a.concurrentRequestLimit),this.Da=new jT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ig.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){jt(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=fg(this,null,this.W),zl(this)};function _d(a){if(sg(a),a.G==3){var h=a.U++,m=Ir(a.I);if(et(m,"SID",a.K),et(m,"RID",h),et(m,"TYPE","terminate"),Xo(a,m),h=new ve(a,a.j,h),h.L=2,h.v=Ml(Ir(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=pg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),en(h)}hg(a)}function Bl(a){a.g&&(Ed(a),a.g.cancel(),a.g=null)}function sg(a){Bl(a),a.u&&(l.clearTimeout(a.u),a.u=null),$l(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function zl(a){if(!Tr(a.h)&&!a.s){a.s=!0;var h=a.Ga;Le||oe(),z||(Le(),z=!0),re.add(h,a),a.B=0}}function UT(a,h){return Zr(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=O(g(a.Ga,a,h),dg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new ve(this,this.j,a);let V=this.o;if(this.S&&(V?(V=v(V),x(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=ag(this,L,h),m=Ir(this.I),et(m,"RID",a),et(m,"CVER",22),this.D&&et(m,"X-HTTP-Session-Id",this.D),Xo(this,m),V&&(this.O?h="headers="+encodeURIComponent(String(Jm(V)))+"&"+h:this.m&&vd(m,this.m,V)),ar(this.h,L),this.Ua&&et(m,"TYPE","init"),this.P?(et(m,"$req",h),et(m,"SID","null"),L.T=!0,Ge(L,m,null)):Ge(L,m,h),this.G=2}}else this.G==3&&(a?og(this,a):this.i.length==0||Tr(this.h)||og(this))};function og(a,h){var m;h?m=h.l:m=a.U++;const _=Ir(a.I);et(_,"SID",a.K),et(_,"RID",m),et(_,"AID",a.T),Xo(a,_),a.m&&a.o&&vd(_,a.m,a.o),m=new ve(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=ag(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ar(a.h,m),Ge(m,_,h)}function Xo(a,h){a.H&&F(a.H,function(m,_){et(h,_,m)}),a.l&&Hm({},function(m,_){et(h,_,m)})}function ag(a,h,m){m=Math.min(a.i.length,m);var _=a.l?g(a.l.Na,a.l,a):null;e:{var L=a.i;let V=-1;for(;;){const q=["count="+m];V==-1?0<m?(V=L[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Qe=!0;for(let Ot=0;Ot<m;Ot++){let De=L[Ot].g;const Ht=L[Ot].map;if(De-=V,0>De)V=Math.max(0,L[Ot].g-100),Qe=!1;else try{OT(Ht,q,"req"+De+"_")}catch{_&&_(Ht)}}if(Qe){_=q.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function lg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Le||oe(),z||(Le(),z=!0),re.add(h,a),a.v=0}}function wd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=O(g(a.Fa,a),dg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,ug(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=O(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Bl(this),ug(this))};function Ed(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ug(a){a.g=new ve(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Ir(a.qa);et(h,"RID","rpc"),et(h,"SID",a.K),et(h,"AID",a.T),et(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&et(h,"TO",a.ja),et(h,"TYPE","xmlhttp"),Xo(a,h),a.m&&a.o&&vd(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Ml(Ir(h)),m.m=null,m.P=!0,Er(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Bl(this),wd(this),jt(19))};function $l(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function cg(a,h){var m=null;if(a.g==h){$l(a),Ed(a),a.g=null;var _=2}else if(st(a.h,h))m=h.D,Ho(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=a.B;_=Qi(),Me(_,new P(_,m)),zl(a)}else lg(a);else if(L=h.s,L==3||L==0&&0<h.X||!(_==1&&UT(a,h)||_==2&&wd(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),L){case 1:Yi(a,5);break;case 4:Yi(a,10);break;case 3:Yi(a,6);break;default:Yi(a,2)}}}function dg(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Yi(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),_=a.Xa;const L=!_;_=new Gi(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ol(_,"https"),Ml(_),L?bT(_.toString(),m):DT(_.toString(),m)}else jt(2);a.G=0,a.l&&a.l.sa(h),hg(a),sg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function hg(a){if(a.G=0,a.ka=[],a.l){const h=jl(a.h);(h.length!=0||a.i.length!=0)&&(b(a.ka,h),b(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function fg(a,h,m){var _=m instanceof Gi?Ir(m):new Gi(m);if(_.g!="")h&&(_.g=h+"."+_.g),Ll(_,_.s);else{var L=l.location;_=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new Gi(null);_&&Ol(V,_),h&&(V.g=h),L&&Ll(V,L),m&&(V.l=m),_=V}return m=a.D,h=a.ya,m&&h&&et(_,m,h),et(_,"VER",a.la),Xo(a,_),_}function pg(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new gt(new Vl({eb:m})):new gt(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mg(){}t=mg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(a,h){return new _n(a,h)};function _n(a,h){ce.call(this),this.g=new ig(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ls(this)}R(_n,ce),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){_d(this.g)},_n.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=bs(a),a=m);h.i.push(new Ce(h.Ya++,a)),h.G==3&&zl(h)},_n.prototype.N=function(){this.g.l=null,delete this.j,_d(this.g),delete this.g,_n.aa.N.call(this)};function gg(a){qi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}R(gg,qi);function yg(){$o.call(this),this.status=1}R(yg,$o);function Ls(a){this.g=a}R(Ls,mg),Ls.prototype.ua=function(){Me(this.g,"a")},Ls.prototype.ta=function(a){Me(this.g,new gg(a))},Ls.prototype.sa=function(a){Me(this.g,new yg)},Ls.prototype.ra=function(){Me(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,UE=function(){return new Hl},VE=function(){return Qi()},ME=sr,_f={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},J.NO_ERROR=0,J.TIMEOUT=8,J.HTTP_ERROR=6,Ou=J,Y.COMPLETE="complete",LE=Y,zo.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",ce.prototype.listen=ce.prototype.K,ya=zo,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,OE=gt}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ev="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Up("@firebase/firestore");function ua(){return Es.logLevel}function ee(t,...e){if(Es.logLevel<=Ne.DEBUG){const n=e.map(Jp);Es.debug(`Firestore (${jo}): ${t}`,...n)}}function qr(t,...e){if(Es.logLevel<=Ne.ERROR){const n=e.map(Jp);Es.error(`Firestore (${jo}): ${t}`,...n)}}function xo(t,...e){if(Es.logLevel<=Ne.WARN){const n=e.map(Jp);Es.warn(`Firestore (${jo}): ${t}`,...n)}}function Jp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: `+t;throw qr(e),new Error(e)}function ze(t,e){t||fe()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ak{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class Nk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ck{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string"),new FE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Gt(e)}}class Pk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Pk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ze(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string"),this.R=n.token,new bk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function To(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Pt(0,0))}static max(){return new ge(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends rl{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const Ok=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends rl{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return Ok.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(rt.fromString(e))}static fromName(e){return new ie(rt.fromString(e).popFirst(5))}static empty(){return new ie(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new rt(e.slice()))}}function Lk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new ji(i,ie.empty(),e)}function Mk(t){return new ji(t.readTime,t.key,-1)}class ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ji(ge.min(),ie.empty(),-1)}static max(){return new ji(ge.max(),ie.empty(),-1)}}function Vk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Uk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Bk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zp.oe=-1;function Zc(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function zk(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Mt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Mt.RED,this.left=i??Mt.EMPTY,this.right=s??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Mt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new Ft(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $E("Invalid base64 string: "+s):s}}(e);return new zt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const $k=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(t){if(ze(!!t),typeof t=="string"){let e=0;const n=$k.exec(t);if(ze(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tm(t){const e=t.mapValue.fields.__previous_value__;return em(e)?tm(e):e}function il(t){const e=Oi(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class sl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{}};function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?em(t)?4:qk(t)?9007199254740991:Wk(t)?10:11:fe()}function vr(t,e){if(t===e)return!0;const n=Ts(t);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oi(i.timestampValue),l=Oi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return xs(i.bytesValue).isEqual(xs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return wt(i.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wt(i.integerValue)===wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wt(i.doubleValue),l=wt(s.doubleValue);return o===l?Tc(o)===Tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return To(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(xv(o)!==xv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!vr(o[u],l[u])))return!1;return!0}(t,e);default:return fe()}}function ol(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function Io(t,e){if(t===e)return 0;const n=Ts(t),r=Ts(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=wt(s.integerValue||s.doubleValue),u=wt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Iv(t.timestampValue,e.timestampValue);case 4:return Iv(il(t),il(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(s,o){const l=xs(s),u=xs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=je(l[c],u[c]);if(f!==0)return f}return je(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=je(wt(s.latitude),wt(o.latitude));return l!==0?l:je(wt(s.longitude),wt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,f;const p=s.fields||{},g=o.fields||{},E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,R=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=je(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((f=R==null?void 0:R.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Sv(E,R)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=je(u[p],f[p]);if(g!==0)return g;const E=Io(l[u[p]],c[f[p]]);if(E!==0)return E}return je(u.length,f.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Iv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Oi(t),r=Oi(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function Sv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Io(n[i],r[i]);if(s)return s}return je(n.length,r.length)}function So(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=wf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${wf(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function Rv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ef(t){return!!t&&"integerValue"in t}function nm(t){return!!t&&"arrayValue"in t}function Av(t){return!!t&&"nullValue"in t}function Nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}function Wk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ka(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=Vt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ka(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(ka(this.value))}}function HE(t){const e=[];return Cs(t.fields,(n,r)=>{const i=new Vt([n]);if(Lu(r)){const s=HE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Xt(e,0,ge.min(),ge.min(),ge.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,ge.min(),ge.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,ge.min(),ge.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.position=e,this.inclusive=n}}function Cv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Io(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{}class At extends WE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gk(e,n,r):n==="array-contains"?new Jk(e,r):n==="in"?new Zk(e,r):n==="not-in"?new eb(e,r):n==="array-contains-any"?new tb(e,r):new At(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Yk(e,r):new Xk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Io(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends WE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nr(e,n)}matches(e){return qE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qE(t){return t.op==="and"}function QE(t){return Kk(t)&&qE(t)}function Kk(t){for(const e of t.filters)if(e instanceof nr)return!1;return!0}function xf(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+So(t.value);if(QE(t))return t.filters.map(e=>xf(e)).join(",");{const e=t.filters.map(n=>xf(n)).join(",");return`${t.op}(${e})`}}function KE(t,e){return t instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(t,e):t instanceof nr?function(r,i){return i instanceof nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&KE(o,i.filters[l]),!0):!1}(t,e):void fe()}function GE(t){return t instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`}(t):t instanceof nr?function(n){return n.op.toString()+" {"+n.getFilters().map(GE).join(" ,")+"}"}(t):"Filter"}class Gk extends At{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yk extends At{constructor(e,n){super(e,"in",n),this.keys=YE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xk extends At{constructor(e,n){super(e,"not-in",n),this.keys=YE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class Jk extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nm(n)&&ol(n.arrayValue,this.value)}}class Zk extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class eb extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ol(this.value.arrayValue,n)}}class tb extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ol(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function kv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new nb(t,e,n,r,i,s,o)}function rm(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>So(r)).join(",")),e.ue=n}return e.ue}function im(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pv(t.startAt,e.startAt)&&Pv(t.endAt,e.endAt)}function Tf(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rb(t,e,n,r,i,s,o,l){return new Oo(t,e,n,r,i,s,o,l)}function sm(t){return new Oo(t)}function bv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XE(t){return t.collectionGroup!==null}function ba(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ft(Vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new al(s,r))}),n.has(Vt.keyField().canonicalString())||e.ce.push(new al(Vt.keyField(),r))}return e.ce}function mr(t){const e=ye(t);return e.le||(e.le=ib(e,ba(t))),e.le}function ib(t,e){if(t.limitType==="F")return kv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new al(i.field,s)});const n=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;return kv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function If(t,e){const n=t.filters.concat([e]);return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sc(t,e,n){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return im(mr(t),mr(e))&&t.limitType===e.limitType}function JE(t){return`${rm(mr(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GE(i)).join(", ")}]`),Zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>So(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>So(i)).join(",")),`Target(${r})`}(mr(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ba(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Cv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,ba(r),i)||r.endAt&&!function(o,l,u){const c=Cv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,ba(r),i))}(t,e)}function sb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZE(t){return(e,n)=>{let r=!1;for(const i of ba(t)){const s=ob(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ob(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Io(u,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return zE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new pt(ie.comparator);function Qr(){return ab}const ex=new pt(ie.comparator);function va(...t){let e=ex;for(const n of t)e=e.insert(n.key,n);return e}function tx(t){let e=ex;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return Da()}function nx(){return Da()}function Da(){return new Lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const lb=new pt(ie.comparator),ub=new Ft(ie.comparator);function Se(...t){let e=ub;for(const n of t)e=e.add(n);return e}const cb=new Ft(je);function db(){return cb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function rx(t){return{integerValue:""+t}}function hb(t,e){return zk(e)?rx(e):om(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function fb(t,e,n){return t instanceof ll?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&em(s)&&(s=tm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ul?sx(t,e):t instanceof cl?ox(t,e):function(i,s){const o=ix(i,s),l=Dv(o)+Dv(i.Pe);return Ef(o)&&Ef(i.Pe)?rx(l):om(i.serializer,l)}(t,e)}function pb(t,e,n){return t instanceof ul?sx(t,e):t instanceof cl?ox(t,e):n}function ix(t,e){return t instanceof Rc?function(r){return Ef(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ll extends nd{}class ul extends nd{constructor(e){super(),this.elements=e}}function sx(t,e){const n=ax(e);for(const r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class cl extends nd{constructor(e){super(),this.elements=e}}function ox(t,e){let n=ax(e);for(const r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}class Rc extends nd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dv(t){return wt(t.integerValue||t.doubleValue)}function ax(t){return nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.field=e,this.transform=n}}function gb(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ul&&i instanceof ul||r instanceof cl&&i instanceof cl?To(r.elements,i.elements,vr):r instanceof Rc&&i instanceof Rc?vr(r.Pe,i.Pe):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class yb{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rd{}function lx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new am(t.key,Jn.none()):new Rl(t.key,t.data,Jn.none());{const n=t.data,r=cn.empty();let i=new Ft(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zi(t.key,r,new Sn(i.toArray()),Jn.none())}}function vb(t,e,n){t instanceof Rl?function(i,s,o){const l=i.value.clone(),u=Ov(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(i,s,o){if(!Mu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ov(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ux(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ja(t,e,n,r){return t instanceof Rl?function(s,o,l,u){if(!Mu(s.precondition,o))return l;const c=s.value.clone(),f=Lv(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(s,o,l,u){if(!Mu(s.precondition,o))return l;const c=Lv(s.fieldTransforms,u,o),f=o.data;return f.setAll(ux(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return Mu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _b(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ix(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function jv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&To(r,i,(s,o)=>gb(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rl extends rd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends rd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ux(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ov(t,e,n){const r=new Map;ze(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,pb(o,l,n[i]))}return r}function Lv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fb(s,o,e))}return r}class am extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wb extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vb(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=lx(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(n,r)=>jv(n,r))&&To(this.baseMutations,e.baseMutations,(n,r)=>jv(n,r))}}class lm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ze(e.mutations.length===r.length);let i=function(){return lb}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Pe;function Ib(t){switch(t){default:return fe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function cx(t){if(t===void 0)return qr("GRPC error has no .code"),B.UNKNOWN;switch(t){case It.OK:return B.OK;case It.CANCELLED:return B.CANCELLED;case It.UNKNOWN:return B.UNKNOWN;case It.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case It.INTERNAL:return B.INTERNAL;case It.UNAVAILABLE:return B.UNAVAILABLE;case It.UNAUTHENTICATED:return B.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case It.NOT_FOUND:return B.NOT_FOUND;case It.ALREADY_EXISTS:return B.ALREADY_EXISTS;case It.PERMISSION_DENIED:return B.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case It.ABORTED:return B.ABORTED;case It.OUT_OF_RANGE:return B.OUT_OF_RANGE;case It.UNIMPLEMENTED:return B.UNIMPLEMENTED;case It.DATA_LOSS:return B.DATA_LOSS;default:return fe()}}(Pe=It||(It={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new ds([4294967295,4294967295],0);function Mv(t){const e=Sb().encode(t),n=new jE;return n.update(e),new Uint8Array(n.digest())}function Vv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,r],0),new ds([i,s],0)]}class um{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _a(`Invalid padding: ${n}`);if(r<0)throw new _a(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _a(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ds.fromNumber(r)));return i.compare(Rb)===1&&(i=new ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Mv(e),[r,i]=Vv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new um(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Mv(e),[r,i]=Vv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new id(ge.min(),i,new pt(je),Qr(),Se())}}class Al{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Al(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class dx{constructor(e,n){this.targetId=e,this.me=n}}class hx{constructor(e,n,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Uv{constructor(){this.fe=0,this.ge=Bv(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),r=Se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new Al(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ab{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=Fv(),this.Qe=new pt(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Tf(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,Xt.newNoDocument(o,ge.min()))}else ze(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=xs(r).toUint8Array()}catch(u){if(u instanceof $E)return xo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new um(o,i,s)}catch(u){return xo(u instanceof _a?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Tf(l.target)){const u=new ie(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Xt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Se();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new id(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=Fv(),this.Qe=new pt(je),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Uv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ft(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Fv(){return new pt(ie.comparator)}function Bv(){return new pt(ie.comparator)}const Nb={asc:"ASCENDING",desc:"DESCENDING"},Cb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pb={and:"AND",or:"OR"};class kb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sf(t,e){return t.useProto3Json||Zc(e)?e:{value:e}}function Ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bb(t,e){return Ac(t,e.toTimestamp())}function gr(t){return ze(!!t),ge.fromTimestamp(function(n){const r=Oi(n);return new Pt(r.seconds,r.nanos)}(t))}function cm(t,e){return Rf(t,e).canonicalString()}function Rf(t,e){const n=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function px(t){const e=rt.fromString(t);return ze(_x(e)),e}function Af(t,e){return cm(t.databaseId,e.path)}function sh(t,e){const n=px(e);if(n.get(1)!==t.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(gx(n))}function mx(t,e){return cm(t.databaseId,e)}function Db(t){const e=px(t);return e.length===4?rt.emptyPath():gx(e)}function Nf(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gx(t){return ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zv(t,e,n){return{name:Af(t,e),fields:n.value.mapValue.fields}}function jb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(ze(f===void 0||typeof f=="string"),zt.fromBase64String(f||"")):(ze(f===void 0||f instanceof Buffer||f instanceof Uint8Array),zt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?B.UNKNOWN:cx(c.code);return new G(f,c.message||"")}(o);n=new hx(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=sh(t,r.document.name),s=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):ge.min(),l=new cn({mapValue:{fields:r.document.fields}}),u=Xt.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Vu(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=sh(t,r.document),s=r.readTime?gr(r.readTime):ge.min(),o=Xt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Vu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=sh(t,r.document),s=r.removedTargetIds||[];n=new Vu([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Tb(i,s),l=r.targetId;n=new dx(l,o)}}return n}function Ob(t,e){let n;if(e instanceof Rl)n={update:zv(t,e.key,e.value)};else if(e instanceof am)n={delete:Af(t,e.key)};else if(e instanceof zi)n={update:zv(t,e.key,e.data),updateMask:Hb(e.fieldMask)};else{if(!(e instanceof wb))return fe();n={verify:Af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function Lb(t,e){return t&&t.length>0?(ze(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gr(i.updateTime):gr(s);return o.isEqual(ge.min())&&(o=gr(s)),new yb(o,i.transformResults||[])}(n,e))):[]}function Mb(t,e){return{documents:[mx(t,e.path)]}}function Vb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mx(t,i);const s=function(c){if(c.length!==0)return vx(nr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:Bs(g.field),direction:Bb(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Sf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Ub(t){let e=Db(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ze(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=yx(p);return g instanceof nr&&QE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(R){return new al(zs(R.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Zc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,E=p.values||[];return new Ic(E,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,E=p.values||[];return new Ic(E,g)}(n.endAt)),rb(e,i,o,s,l,"F",u,c)}function Fb(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(n.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return At.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return At.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nr.create(n.compositeFilter.filters.map(r=>yx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function Bb(t){return Nb[t]}function zb(t){return Cb[t]}function $b(t){return Pb[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function zs(t){return Vt.fromServerFormat(t.fieldPath)}function vx(t){return t instanceof At?function(n){if(n.op==="=="){if(Nv(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(Av(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nv(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(Av(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:zb(n.op),value:n.value}}}(t):t instanceof nr?function(n){const r=n.getFilters().map(i=>vx(i));return r.length===1?r[0]:{compositeFilter:{op:$b(n.op),filters:r}}}(t):fe()}function Hb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _x(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,i,s=ge.min(),o=ge.min(),l=zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.ct=e}}function qb(t){const e=Ub({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.un=new Kb}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(ji.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Kb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ft(rt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ft(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ro(0)}static kn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.changes=new Lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ja(r.mutation,i,Sn.empty(),Pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){const i=as();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=va();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Qr();const o=Da(),l=function(){return Da()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof zi)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),ja(f.mutation,c,f.mutation.getFieldMask(),Pt.now())):o.set(c.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var p;return l.set(c,new Yb(f,(p=o.get(c))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Da();let i=new pt((o,l)=>o-l),s=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||Sn.empty();f=l.applyToLocalView(c,f),r.set(u,f);const p=(i.get(l.batchId)||Se()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,p=nx();f.forEach(g=>{if(!s.has(g)){const E=lx(n.get(g),r.get(g));E!==null&&p.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(as());let l=-1,u=s;return o.next(c=>H.forEach(c,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?H.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Se())).next(f=>({batchId:l,changes:tx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=va();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=va();return this.indexManager.getCollectionParents(e,s).next(l=>H.forEach(l,u=>{const c=function(p,g){return new Oo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Xt.newInvalidDocument(f)))});let l=va();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&ja(f.mutation,c,Sn.empty(),Pt.now()),td(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gr(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:qb(i.bundledQuery),readTime:gr(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.overlays=new pt(ie.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=as(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new pt((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=as(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=as(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return H.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xb(n,r));let s=this.Ir.get(n);s===void 0&&(s=Se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Tr=new Ft(kt.Er),this.dr=new Ft(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new kt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new rt([])),r=new kt(n,e),i=new kt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new rt([])),r=new kt(n,e),i=new kt(n,e+1);let s=Se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ft(kt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Eb(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new kt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),i=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(je);return n.forEach(i=>{const s=new kt(i,0),o=new kt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new kt(new ie(s),0);let l=new Ft(je);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ze(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,i=>{const s=new kt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new kt(n,0),i=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.Mr=e,this.docs=function(){return new pt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xt.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qr();const o=n.path,l=new ie(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Vk(Mk(f),r)<=0||(i.has(f.key)||td(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r1(this)}getSize(e){return H.resolve(this.size)}}class r1 extends Gb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.persistence=e,this.Nr=new Lo(n=>rm(n),im),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dm,this.targetCount=0,this.kr=Ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zp(0),this.Kr=!1,this.Kr=!0,this.$r=new e1,this.referenceDelegate=e(this),this.Ur=new i1(this),this.indexManager=new Qb,this.remoteDocumentCache=function(i){return new n1(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Wb(n),this.Gr=new Jb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new t1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new o1(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class o1 extends Fk{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Jr=new dm,this.Yr=null}static Zr(e){return new hm(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Se(),i=Se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hN()?8:Bk(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new a1;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ua()<=Ne.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(ua()<=Ne.DEBUG&&ee("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ua()<=Ne.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):H.resolve())}Yi(e,n){if(bv(n))return H.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sc(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Se(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,Sc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return bv(n)||i.isEqual(ge.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?H.resolve(null):(ua()<=Ne.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fs(n)),this.rs(e,o,n,Lk(i,-1)).next(l=>l))})}ts(e,n){let r=new Ft(ZE(e));return n.forEach((i,s)=>{td(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ua()<=Ne.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ji.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new pt(je),this._s=new Lo(s=>rm(s),im),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function c1(t,e,n,r){return new u1(t,e,n,r)}async function wx(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Se();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function d1(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const p=c.batch,g=p.keys();let E=H.resolve();return g.forEach(R=>{E=E.next(()=>f.getEntry(u,R)).next(N=>{const b=c.docVersions.get(R);ze(b!==null),N.version.compareTo(b)<0&&(p.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),f.addEntry(N)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Se();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ex(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function h1(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(zt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(p,E),function(N,b,S){return N.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,E,f)&&l.push(n.Ur.updateTargetData(s,E))});let u=Qr(),c=Se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(f1(s,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(ge.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return H.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function f1(t,e,n){let r=Se(),i=Se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ge.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ee("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function p1(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m1(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=ye(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function $v(t,e,n){const r=ye(t);let i=ge.min(),s=Se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const p=ye(u),g=p._s.get(f);return g!==void 0?H.resolve(p.os.get(g)):p.Ur.getTargetData(c,f)}(r,o,mr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:Se())).next(l=>(g1(r,sb(e),l),{documents:l,Ts:s})))}function g1(t,e,n){let r=t.us.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Hv{constructor(){this.activeTargetIds=db()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y1{constructor(){this.so=new Hv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function oh(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class E1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=oh(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(f=>(ee("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw xo("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=_1[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=oh();return new Promise((o,l)=>{const u=new OE;u.setWithCredentials(!0),u.listenOnce(LE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ou.NO_ERROR:const f=u.getResponseJson();ee(Kt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ou.TIMEOUT:ee(Kt,`RPC '${e}' ${s} timed out`),l(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case Ou.HTTP_ERROR:const p=u.getStatus();if(ee(Kt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const R=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(S)>=0?S:B.UNKNOWN}(E.status);l(new G(R,E.message))}else l(new G(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(B.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ee(Kt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(Kt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=oh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UE(),l=VE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ee(Kt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,E=!1;const R=new w1({Io:b=>{E?ee(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(ee(Kt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ee(Kt,`RPC '${e}' stream ${i} sending:`,b),p.send(b))},To:()=>p.close()}),N=(b,S,w)=>{b.listen(S,A=>{try{w(A)}catch(j){setTimeout(()=>{throw j},0)}})};return N(p,ya.EventType.OPEN,()=>{E||(ee(Kt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),N(p,ya.EventType.CLOSE,()=>{E||(E=!0,ee(Kt,`RPC '${e}' stream ${i} transport closed`),R.So())}),N(p,ya.EventType.ERROR,b=>{E||(E=!0,xo(Kt,`RPC '${e}' stream ${i} transport errored:`,b),R.So(new G(B.UNAVAILABLE,"The operation could not be completed")))}),N(p,ya.EventType.MESSAGE,b=>{var S;if(!E){const w=b.data[0];ze(!!w);const A=w,j=A.error||((S=A[0])===null||S===void 0?void 0:S.error);if(j){ee(Kt,`RPC '${e}' stream ${i} received error:`,j);const U=j.status;let F=function(I){const x=It[I];if(x!==void 0)return cx(x)}(U),y=j.message;F===void 0&&(F=B.INTERNAL,y="Unknown error status: "+U+" with message "+j.message),E=!0,R.So(new G(F,y)),p.close()}else ee(Kt,`RPC '${e}' stream ${i} received:`,w),R.bo(w)}}),N(l,ME.STAT_EVENT,b=>{b.stat===_f.PROXY?ee(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===_f.NOPROXY&&ee(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){return new kb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new G(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x1 extends Tx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jb(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?gr(o.readTime):ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Tf(u)?{documents:Mb(s,u)}:{query:Vb(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=fx(s,o.resumeToken);const c=Sf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){l.readTime=Ac(s,o.snapshotVersion.toTimestamp());const c=Sf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=Fb(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.a_(n)}}class T1 extends Tx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Lb(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ob(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Rf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Rf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class S1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ps(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ye(u);c.L_.add(4),await Nl(c),c.q_.set("Unknown"),c.L_.delete(4),await od(c)}(this))})}),this.q_=new S1(r,i)}}async function od(t){if(Ps(t))for(const e of t.B_)await e(!0)}async function Nl(t){for(const e of t.B_)await e(!1)}function Ix(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ym(n)?gm(n):Mo(n).r_()&&mm(n,e))}function pm(t,e){const n=ye(t),r=Mo(n);n.N_.delete(e),r.r_()&&Sx(n,e),n.N_.size===0&&(r.r_()?r.o_():Ps(n)&&n.q_.set("Unknown"))}function mm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).A_(e)}function Sx(t,e){t.Q_.xe(e),Mo(t).R_(e)}function gm(t){t.Q_=new Ab({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.q_.v_()}function ym(t){return Ps(t)&&!Mo(t).n_()&&t.N_.size>0}function Ps(t){return ye(t).L_.size===0}function Rx(t){t.Q_=void 0}async function A1(t){t.q_.set("Online")}async function N1(t){t.N_.forEach((e,n)=>{mm(t,e)})}async function C1(t,e){Rx(t),ym(t)?(t.q_.M_(e),gm(t)):t.q_.set("Unknown")}async function P1(t,e,n){if(t.q_.set("Online"),e instanceof hx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nc(t,r)}else if(e instanceof Vu?t.Q_.Ke(e):e instanceof dx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const r=await Ex(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(zt.EMPTY_BYTE_STRING,f.snapshotVersion)),Sx(s,u);const p=new vi(f.target,u,c,f.sequenceNumber);mm(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Nc(t,r)}}async function Nc(t,e,n){if(!Sl(e))throw e;t.L_.add(1),await Nl(t),t.q_.set("Offline"),n||(n=()=>Ex(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await od(t)})}function Ax(t,e){return e().catch(n=>Nc(t,n,e))}async function ad(t){const e=ye(t),n=Li(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;k1(e);)try{const i=await p1(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,b1(e,i)}catch(i){await Nc(e,i)}Nx(e)&&Cx(e)}function k1(t){return Ps(t)&&t.O_.length<10}function b1(t,e){t.O_.push(e);const n=Li(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Nx(t){return Ps(t)&&!Li(t).n_()&&t.O_.length>0}function Cx(t){Li(t).start()}async function D1(t){Li(t).p_()}async function j1(t){const e=Li(t);for(const n of t.O_)e.m_(n.mutations)}async function O1(t,e,n){const r=t.O_.shift(),i=lm.from(r,e,n);await Ax(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ad(t)}async function L1(t,e){e&&Li(t).V_&&await async function(r,i){if(function(o){return Ib(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();Li(r).s_(),await Ax(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ad(r)}}(t,e),Nx(t)&&Cx(t)}async function qv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Ps(n);n.L_.add(3),await Nl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await od(n)}async function M1(t,e){const n=ye(t);e?(n.L_.delete(2),await od(n)):e||(n.L_.add(2),await Nl(n),n.q_.set("Unknown"))}function Mo(t){return t.K_||(t.K_=function(n,r,i){const s=ye(n);return s.w_(),new x1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:A1.bind(null,t),Ro:N1.bind(null,t),mo:C1.bind(null,t),d_:P1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ym(t)?gm(t):t.q_.set("Unknown")):(await t.K_.stop(),Rx(t))})),t.K_}function Li(t){return t.U_||(t.U_=function(n,r,i){const s=ye(n);return s.w_(),new T1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:D1.bind(null,t),mo:L1.bind(null,t),f_:j1.bind(null,t),g_:O1.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ad(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new vm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _m(t,e){if(qr("AsyncQueue",`${e}: ${t}`),Sl(t))return new G(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=va(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.W_=new pt(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ao(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class U1{constructor(){this.queries=Kv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=Kv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new G(B.ABORTED,"Firestore shutting down"))}}function Kv(){return new Lo(t=>JE(t),ed)}async function Px(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new V1,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=_m(o,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&wm(n)}async function kx(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F1(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&wm(n)}function B1(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function wm(t){t.Y_.forEach(e=>{e.next()})}var Pf,Gv;(Gv=Pf||(Pf={})).ea="default",Gv.Cache="cache";class bx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.key=e}}class jx{constructor(e){this.key=e}}class z1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=ZE(e),this.Ra=new co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Qv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),E=td(this.query,p)?p:null,R=!!g&&this.mutatedKeys.has(g.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let b=!1;g&&E?g.data.isEqual(E.data)?R!==N&&(r.track({type:3,doc:E}),b=!0):this.ga(g,E)||(r.track({type:2,doc:E}),b=!0,(u&&this.Aa(E,u)>0||c&&this.Aa(E,c)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),b=!0):g&&!E&&(r.track({type:1,doc:g}),b=!0,(u||c)&&(l=!0)),b&&(E?(o=o.add(E),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(E,R){const N=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return N(E)-N(R)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Ao(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new jx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Dx(r))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class H1{constructor(e){this.key=e,this.va=!1}}class W1{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Lo(l=>JE(l),ed),this.Ma=new Map,this.xa=new Set,this.Oa=new pt(ie.comparator),this.Na=new Map,this.La=new dm,this.Ba={},this.ka=new Map,this.qa=Ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function q1(t,e,n=!0){const r=Fx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Ox(r,e,n,!0),i}async function Q1(t,e){const n=Fx(t);await Ox(n,e,!0,!1)}async function Ox(t,e,n,r){const i=await m1(t.localStore,mr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await K1(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ix(t.remoteStore,i),l}async function K1(t,e,n,r,i){t.Ka=(p,g,E)=>async function(N,b,S,w){let A=b.view.ma(S);A.ns&&(A=await $v(N.localStore,b.query,!1).then(({documents:y})=>b.view.ma(y,A)));const j=w&&w.targetChanges.get(b.targetId),U=w&&w.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(A,N.isPrimaryClient,j,U);return Xv(N,b.targetId,F.wa),F.snapshot}(t,p,g,E);const s=await $v(t.localStore,e,!0),o=new z1(e,s.Ts),l=o.ma(s.documents),u=Al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Xv(t,n,c.wa);const f=new $1(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function G1(t,e,n){const r=ye(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ed(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pm(r.remoteStore,i.targetId),kf(r,i.targetId)}).catch(Il)):(kf(r,i.targetId),await Cf(r.localStore,i.targetId,!0))}async function Y1(t,e){const n=ye(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pm(n.remoteStore,r.targetId))}async function X1(t,e,n){const r=iD(t);try{const i=await function(o,l){const u=ye(o),c=Pt.now(),f=l.reduce((E,R)=>E.add(R.key),Se());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let R=Qr(),N=Se();return u.cs.getEntries(E,f).next(b=>{R=b,R.forEach((S,w)=>{w.isValidDocument()||(N=N.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,R)).next(b=>{p=b;const S=[];for(const w of l){const A=_b(w,p.get(w.key).overlayedDocument);A!=null&&S.push(new zi(w.key,A,HE(A.value.mapValue),Jn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,S,l)}).next(b=>{g=b;const S=b.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(E,b.batchId,S)})}).then(()=>({batchId:g.batchId,changes:tx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new pt(je)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Cl(r,i.changes),await ad(r.remoteStore)}catch(i){const s=_m(i,"Failed to persist write");n.reject(s)}}async function Lx(t,e){const n=ye(t);try{const r=await h1(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ze(o.va):i.removedDocuments.size>0&&(ze(o.va),o.va=!1))}),await Cl(n,r,e)}catch(r){await Il(r)}}function Yv(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ye(o);u.onlineState=l;let c=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(c=!0)}),c&&wm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J1(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new pt(ie.comparator);o=o.insert(s,Xt.newNoDocument(s,ge.min()));const l=Se().add(s),u=new id(ge.min(),new Map,new pt(je),o,l);await Lx(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Em(r)}else await Cf(r.localStore,e,!1).then(()=>kf(r,e,n)).catch(Il)}async function Z1(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await d1(n.localStore,e);Vx(n,r,null),Mx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cl(n,i)}catch(i){await Il(i)}}async function eD(t,e,n){const r=ye(t);try{const i=await function(o,l){const u=ye(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(ze(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);Vx(r,e,n),Mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cl(r,i)}catch(i){await Il(i)}}function Mx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vx(t,e,n){const r=ye(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ux(t,r)})}function Ux(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(pm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Em(t))}function Xv(t,e,n){for(const r of n)r instanceof Dx?(t.La.addReference(r.key,e),tD(t,r)):r instanceof jx?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ux(t,r.key)):fe()}function tD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),Em(t))}function Em(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(rt.fromString(e)),r=t.qa.next();t.Na.set(r,new H1(n)),t.Oa=t.Oa.insert(n,r),Ix(t.remoteStore,new vi(mr(sm(n.path)),r,"TargetPurposeLimboResolution",Zp.oe))}}async function Cl(t,e,n){const r=ye(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=fm.Wi(u.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const f=ye(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>H.forEach(c,g=>H.forEach(g.$i,E=>f.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>H.forEach(g.Ui,E=>f.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!Sl(p))throw p;ee("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const E=f.os.get(g),R=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(R);f.os=f.os.insert(g,N)}}}(r.localStore,s))}async function nD(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await wx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new G(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cl(n,r.hs)}}function rD(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return Se().add(r.key);{let i=Se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function Fx(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J1.bind(null,e),e.Ca.d_=F1.bind(null,e.eventManager),e.Ca.$a=B1.bind(null,e.eventManager),e}function iD(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eD.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Ga(e){return new s1(hm.Zr,this.serializer)}Wa(e){return new y1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),await M1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new U1}()}createDatastore(e){const n=sd(e.databaseInfo.databaseId),r=function(s){return new E1(s)}(e.databaseInfo);return function(s,o,l,u){return new I1(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new R1(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Yv(this.syncEngine,n,0),function(){return Wv.D()?new Wv:new v1}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const p=new W1(i,s,o,l,u,c);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Nl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bf.provider={build:()=>new bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=BE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_m(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lh(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await wx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oD(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qv(e.remoteStore,i)),t._onlineComponents=e}async function oD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await lh(t,new Cc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await lh(t,new Cc);return t._offlineComponents}async function zx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Jv(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Jv(t,new bf))),t._onlineComponents}function aD(t){return zx(t).then(e=>e.syncEngine)}async function $x(t){const e=await zx(t),n=e.eventManager;return n.onListen=q1.bind(null,e.syncEngine),n.onUnlisten=G1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Y1.bind(null,e.syncEngine),n}function lD(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Bx({next:g=>{f.Za(),o.enqueueAndForget(()=>kx(s,p));const E=g.docs.has(l);!E&&g.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new bx(sm(l.path),f,{includeMetadataChanges:!0,_a:!0});return Px(s,p)}(await $x(t),t.asyncQueue,e,n,r)),r.promise}function uD(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Bx({next:g=>{f.Za(),o.enqueueAndForget(()=>kx(s,p)),g.fromCache&&u.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new bx(l,f,{includeMetadataChanges:!0,_a:!0});return Px(s,p)}(await $x(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e,n){if(!n)throw new G(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cD(t,e,n,r){if(e===!0&&r===!0)throw new G(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function e_(t){if(!ie.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function t_(t){if(ie.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ld(t);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ak;switch(r.type){case"firstParty":return new kk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zv.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Zv.delete(n),r.terminate())}(this),Promise.resolve()}}function dD(t,e,n,r={}){var i;const s=(t=Kr(t,ud))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Gt.MOCK_USER;else{l=Y0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Gt(c)}t._authCredentials=new Nk(new FE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class Ci extends $i{constructor(e,n,r){super(e,n,sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new ie(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function hn(t,e,...n){if(t=ft(t),Wx("collection","path",e),t instanceof ud){const r=rt.fromString(e,...n);return t_(r),new Ci(t,null,r)}{if(!(t instanceof gn||t instanceof Ci))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return t_(r),new Ci(t.firestore,null,r)}}function Pi(t,e,...n){if(t=ft(t),arguments.length===1&&(e=BE.newId()),Wx("doc","path",e),t instanceof ud){const r=rt.fromString(e,...n);return e_(r),new gn(t,null,new ie(r))}{if(!(t instanceof gn||t instanceof Ci))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return e_(r),new gn(t.firestore,t instanceof Ci?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xx(this,"async_queue_retry"),this.Vu=()=>{const r=ah();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw qr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=vm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Vo extends ud{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new r_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r_(e),this._firestoreClient=void 0,await e}}}function hD(t,e){const n=typeof t=="object"?t:Gc(),r=typeof t=="string"?t:"(default)",i=wl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Vp("firestore");s&&dD(i,...s)}return i}function xm(t){if(t._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fD(t),t._firestoreClient}function fD(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new Hk(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Hx(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new sD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(zt.fromBase64String(e))}catch(n){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new No(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^__.*__$/;class mD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rl(e,this.data,n,this.fieldTransforms)}}class qx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Qx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Sm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Qx(this.Cu)&&pD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sd(e)}Qu(e,n,r,i=!1){return new Sm({Cu:e,methodName:n,qu:r,path:Vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rm(t){const e=t._freezeSettings(),n=sd(t._databaseId);return new gD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yD(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Nm("Data must be an object, but it was:",o,r);const l=Kx(r,o);let u,c;if(s.merge)u=new Sn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=Df(e,p,n);if(!o.contains(g))throw new G(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Yx(f,g)||f.push(g)}u=new Sn(f),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new mD(new cn(l),u,c)}class hd extends dd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}class Am extends dd{_toFieldTransform(e){return new mb(e.path,new ll)}isEqual(e){return e instanceof Am}}function vD(t,e,n,r){const i=t.Qu(1,e,n);Nm("Data must be an object, but it was:",i,r);const s=[],o=cn.empty();Cs(r,(u,c)=>{const f=Cm(e,u,n);c=ft(c);const p=i.Nu(f);if(c instanceof hd)s.push(f);else{const g=Pl(c,p);g!=null&&(s.push(f),o.set(f,g))}});const l=new Sn(s);return new qx(o,l,i.fieldTransforms)}function _D(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Df(e,r,n)],u=[i];if(s.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Df(e,s[g])),u.push(s[g+1]);const c=[],f=cn.empty();for(let g=l.length-1;g>=0;--g)if(!Yx(c,l[g])){const E=l[g];let R=u[g];R=ft(R);const N=o.Nu(E);if(R instanceof hd)c.push(E);else{const b=Pl(R,N);b!=null&&(c.push(E),f.set(E,b))}}const p=new Sn(c);return new qx(f,p,o.fieldTransforms)}function wD(t,e,n,r=!1){return Pl(n,t.Qu(r?4:3,e))}function Pl(t,e){if(Gx(t=ft(t)))return Nm("Unsupported field value:",e,t),Kx(t,e);if(t instanceof dd)return function(r,i){if(!Qx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Pl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Pt.fromDate(r);return{timestampValue:Ac(i.serializer,s)}}if(r instanceof Pt){const s=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ac(i.serializer,s)}}if(r instanceof Tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof No)return{bytesValue:fx(i.serializer,r._byteString)};if(r instanceof gn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Im)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return om(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ld(r)}`)}(t,e)}function Kx(t,e){const n={};return zE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,i)=>{const s=Pl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Gx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof Tm||t instanceof No||t instanceof gn||t instanceof dd||t instanceof Im)}function Nm(t,e,n){if(!Gx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ld(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Df(t,e,n){if((e=ft(e))instanceof cd)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw Pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ED=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(ED)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cd(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new G(B.INVALID_ARGUMENT,l+t+u)}function Yx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xD extends Xx{data(){return super.data()}}function fd(t,e){return typeof e=="string"?Cm(t,e):e instanceof cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class km extends Pm{}function Zn(t,e,...n){let r=[];e instanceof Pm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof bm).length,l=s.filter(u=>u instanceof pd).length;if(o>1||o>0&&l>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class pd extends km{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pd(e,n,r)}_apply(e){const n=this._parse(e);return Jx(e._query,n),new $i(e.firestore,e.converter,If(e._query,n))}_parse(e){const n=Rm(e.firestore);return function(s,o,l,u,c,f,p){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){s_(p,f);const E=[];for(const R of p)E.push(i_(u,s,R));g={arrayValue:{values:E}}}else g=i_(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||s_(p,f),g=wD(l,o,p,f==="in"||f==="not-in");return At.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uh(t,e,n){const r=e,i=fd("where",t);return pd._create(i,r,n)}class bm extends Pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)Jx(o,u),o=If(o,u)}(e._query,n),new $i(e.firestore,e.converter,If(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dm extends km{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new al(s,o)}(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Oo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function hs(t,e="asc"){const n=e,r=fd("orderBy",t);return Dm._create(r,n)}class jm extends km{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jm(e,n,r)}_apply(e){return new $i(e.firestore,e.converter,Sc(e._query,this._limit,this._limitType))}}function ID(t){return jm._create("limit",t,"F")}function i_(t,e,n){if(typeof(n=ft(n))=="string"){if(n==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XE(e)&&n.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!ie.isDocumentKey(r))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rv(t,new ie(r))}if(n instanceof gn)return Rv(t,n._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(n)}.`)}function s_(t,e){if(!Array.isArray(t)||t.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jx(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SD{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>wt(o.doubleValue));return new Im(s)}convertGeoPoint(e){return new Tm(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=Oi(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);ze(_x(r));const i=new sl(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zx extends Xx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uu extends Zx{data(e={}){return super.data(e)}}class AD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uu(this._firestore,this._userDataWriter,r.key,r,new wa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Uu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Uu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:ND(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ND(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t){t=Kr(t,gn);const e=Kr(t.firestore,Vo);return lD(xm(e),t._key).then(n=>CD(e,t,n))}class tT extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function er(t){t=Kr(t,$i);const e=Kr(t.firestore,Vo),n=xm(e),r=new tT(e);return TD(t._query),uD(n,t._query).then(i=>new AD(e,r,t,i))}function nT(t,e,n,...r){t=Kr(t,gn);const i=Kr(t.firestore,Vo),s=Rm(i);let o;return o=typeof(e=ft(e))=="string"||e instanceof cd?_D(s,"updateDoc",t._key,e,n,r):vD(s,"updateDoc",t._key,e),Mm(i,[o.toMutation(t._key,Jn.exists(!0))])}function Om(t){return Mm(Kr(t.firestore,Vo),[new am(t._key,Jn.none())])}function Lm(t,e){const n=Kr(t.firestore,Vo),r=Pi(t),i=RD(t.converter,e);return Mm(n,[yD(Rm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function Mm(t,e){return function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget(async()=>X1(await aD(r),i,s)),s.promise}(xm(t),e)}function CD(t,e,n){const r=n.docs.get(e._key),i=new tT(t);return new Zx(t,i,e._key,r,new wa(n.hasPendingWrites,n.fromCache),e.converter)}function PD(){return new Am("serverTimestamp")}(function(e,n=!0){(function(i){jo=i})(Ns),Di(new $r("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Vo(new Ck(r.getProvider("auth-internal")),new Dk(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Mn(Ev,"4.7.3",e),Mn(Ev,"4.7.3","esm2017")})();var kD="firebase",bD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(kD,bD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebasestorage.googleapis.com",iT="storageBucket",DD=2*60*1e3,jD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends _r{constructor(e,n,r=0){super(ch(e),`Firebase Storage: ${n} (${ch(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ch(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function ch(t){return"storage/"+t}function Vm(){const t="An unknown error occurred, please check the error payload for server response.";return new _t(vt.UNKNOWN,t)}function OD(t){return new _t(vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function LD(t){return new _t(vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(vt.UNAUTHENTICATED,t)}function VD(){return new _t(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UD(t){return new _t(vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function FD(){return new _t(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BD(){return new _t(vt.CANCELED,"User canceled the upload/download.")}function zD(t){return new _t(vt.INVALID_URL,"Invalid URL '"+t+"'.")}function $D(t){return new _t(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function HD(){return new _t(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iT+"' property when initializing the app?")}function WD(){return new _t(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qD(){return new _t(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QD(t){return new _t(vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jf(t){return new _t(vt.INVALID_ARGUMENT,t)}function sT(){return new _t(vt.APP_DELETED,"The Firebase app was deleted.")}function KD(t){return new _t(vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oa(t,e){return new _t(vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ca(t){throw new _t(vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw $D(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),R={bucket:1,path:3},N=n===rT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",S=new RegExp(`^https?://${N}/${i}/${b}`,"i"),A=[{regex:l,indices:u,postModify:s},{regex:E,indices:R,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let j=0;j<A.length;j++){const U=A[j],F=U.regex.exec(e);if(F){const y=F[U.indices.bucket];let v=F[U.indices.path];v||(v=""),r=new Rn(y,v),U.postModify(r);break}}if(r==null)throw zD(e);return r}}class GD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function f(...b){c||(c=!0,e.apply(null,b))}function p(b){i=setTimeout(()=>{i=null,t(E,u())},b)}function g(){s&&clearTimeout(s)}function E(b,...S){if(c){g();return}if(b){g(),f.call(null,b,...S);return}if(u()||o){g(),f.call(null,b,...S);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,p(A)}let R=!1;function N(b){R||(R=!0,g(),!c&&(i!==null?(b||(l=2),clearTimeout(i),p(0)):b||(l=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function XD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){return t!==void 0}function ZD(t){return typeof t=="object"&&!Array.isArray(t)}function Um(t){return typeof t=="string"||t instanceof String}function o_(t){return Fm()&&t instanceof Blob}function Fm(){return typeof Blob<"u"}function a_(t,e,n,r){if(r<e)throw jf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw jf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function oT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var fs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fs||(fs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,i,s,o,l,u,c,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,R)=>{this.resolve_=E,this.reject_=R,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===fs.NO_ERROR,u=s.getStatus();if(!l||e2(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===fs.ABORT;r(!1,new gu(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new gu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());JD(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Vm();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?sT():BD();o(u)}else{const u=FD();o(u)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=YD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function n2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function r2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function i2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function s2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function o2(t,e,n,r,i,s,o=!0){const l=oT(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return i2(c,e),n2(c,n),r2(c,s),s2(c,r),new t2(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l2(...t){const e=a2();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Fm())return new Blob(t);throw new _t(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){if(typeof atob>"u")throw QD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dh{constructor(e,n){this.data=e,this.contentType=n||null}}function d2(t,e){switch(t){case dr.RAW:return new dh(aT(e));case dr.BASE64:case dr.BASE64URL:return new dh(lT(t,e));case dr.DATA_URL:return new dh(f2(e),p2(e))}throw Vm()}function aT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function h2(t){let e;try{e=decodeURIComponent(t)}catch{throw Oa(dr.DATA_URL,"Malformed data URL.")}return aT(e)}function lT(t,e){switch(t){case dr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Oa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Oa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=c2(e)}catch(i){throw i.message.includes("polyfill")?i:Oa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class uT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Oa(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=m2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function f2(t){const e=new uT(t);return e.base64?lT(dr.BASE64,e.rest):h2(e.rest)}function p2(t){return new uT(t).contentType}function m2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){let r=0,i="";o_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(o_(this.data_)){const r=this.data_,i=u2(r,e,n);return i===null?null:new pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pi(r,!0)}}static getBlob(...e){if(Fm()){const n=e.map(r=>r instanceof pi?r.data_:r);return new pi(l2.apply(null,n))}else{const n=e.map(o=>Um(o)?d2(dr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){let e;try{e=JSON.parse(t)}catch{return null}return ZD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function dT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e){return e}class tn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||v2}}let yu=null;function _2(t){return!Um(t)||t.length<2?t:dT(t)}function hT(){if(yu)return yu;const t=[];t.push(new tn("bucket")),t.push(new tn("generation")),t.push(new tn("metageneration")),t.push(new tn("name","fullPath",!0));function e(s,o){return _2(o)}const n=new tn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new tn("size");return i.xform=r,t.push(i),t.push(new tn("timeCreated")),t.push(new tn("updated")),t.push(new tn("md5Hash",null,!0)),t.push(new tn("cacheControl",null,!0)),t.push(new tn("contentDisposition",null,!0)),t.push(new tn("contentEncoding",null,!0)),t.push(new tn("contentLanguage",null,!0)),t.push(new tn("contentType",null,!0)),t.push(new tn("metadata","customMetadata",!0)),yu=t,yu}function w2(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Rn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function E2(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return w2(r,t),r}function fT(t,e,n){const r=cT(e);return r===null?null:E2(t,r,n)}function x2(t,e,n,r){const i=cT(e);if(i===null||!Um(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),E=md(g,n,r),R=oT({alt:"media",token:c});return E+R})[0]}function T2(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Bm{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){if(!t)throw Vm()}function I2(t,e){function n(r,i){const s=fT(t,i,e);return pT(s!==null),s}return n}function S2(t,e){function n(r,i){const s=fT(t,i,e);return pT(s!==null),x2(s,i,t.host,t._protocol)}return n}function mT(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=VD():i=MD():n.getStatus()===402?i=LD(t.bucket):n.getStatus()===403?i=UD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function gT(t){const e=mT(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=OD(t.path)),s.serverResponse=i.serverResponse,s}return n}function R2(t,e,n){const r=e.fullServerUrl(),i=md(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Bm(i,s,S2(t,n),o);return l.errorHandler=gT(e),l}function A2(t,e){const n=e.fullServerUrl(),r=md(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,c){}const l=new Bm(r,i,o,s);return l.successCodes=[200,204],l.errorHandler=gT(e),l}function N2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=N2(null,e)),r}function P2(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let A="";for(let j=0;j<2;j++)A=A+Math.random().toString().slice(2);return A}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=C2(e,r,i),f=T2(c,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",E=pi.getBlob(p,r,g);if(E===null)throw WD();const R={name:c.fullPath},N=md(s,t.host,t._protocol),b="POST",S=t.maxUploadRetryTime,w=new Bm(N,b,I2(t,n),S);return w.urlParams=R,w.headers=o,w.body=E.uploadData(),w.errorHandler=mT(e),w}class k2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ca("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ca("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ca("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ca("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ca("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class b2 extends k2{initXhr(){this.xhr_.responseType="text"}}function zm(){return new b2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Is(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dT(this._location.path)}get storage(){return this._service}get parent(){const e=g2(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new Is(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KD(e)}}function D2(t,e,n){t._throwIfRoot("uploadBytes");const r=P2(t.storage,t._location,hT(),new pi(e,!0),n);return t.storage.makeRequestWithTokens(r,zm).then(i=>({metadata:i,ref:t}))}function j2(t){t._throwIfRoot("getDownloadURL");const e=R2(t.storage,t._location,hT());return t.storage.makeRequestWithTokens(e,zm).then(n=>{if(n===null)throw qD();return n})}function O2(t){t._throwIfRoot("deleteObject");const e=A2(t.storage,t._location);return t.storage.makeRequestWithTokens(e,zm)}function L2(t,e){const n=y2(t._location.path,e),r=new Rn(t._location.bucket,n);return new Is(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){return/^[A-Za-z]+:\/\//.test(t)}function V2(t,e){return new Is(t,e)}function yT(t,e){if(t instanceof $m){const n=t;if(n._bucket==null)throw HD();const r=new Is(n,n._bucket);return e!=null?yT(r,e):r}else return e!==void 0?L2(t,e):t}function U2(t,e){if(e&&M2(e)){if(t instanceof $m)return V2(t,e);throw jf("To use ref(service, url), the first argument must be a Storage instance.")}else return yT(t,e)}function l_(t,e){const n=e==null?void 0:e[iT];return n==null?null:Rn.makeFromBucketSpec(n,t)}function F2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Y0(i,t.app.options.projectId))}class $m{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DD,this._maxUploadRetryTime=jD,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=l_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=l_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Is(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new GD(sT());{const o=o2(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const u_="@firebase/storage",c_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="storage";function ii(t,e,n){return t=ft(t),D2(t,e,n)}function si(t){return t=ft(t),j2(t)}function da(t){return t=ft(t),O2(t)}function wn(t,e){return t=ft(t),U2(t,e)}function B2(t=Gc(),e){t=ft(t);const r=wl(t,vT).getImmediate({identifier:e}),i=Vp("storage");return i&&z2(r,...i),r}function z2(t,e,n,r={}){F2(t,e,n,r)}function $2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $m(n,r,i,e,Ns)}function H2(){Di(new $r(vT,$2,"PUBLIC").setMultipleInstances(!0)),Mn(u_,c_,""),Mn(u_,c_,"esm2017")}H2();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="us-central1";class q2{constructor(e,n,r,i,s=Of,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new W2(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Of}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Q2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const d_="@firebase/functions",h_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="auth-internal",G2="app-check-internal",Y2="messaging-internal";function X2(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(K2),l=r.getProvider(Y2),u=r.getProvider(G2);return new q2(s,o,l,u,i,t)};Di(new $r(_T,n,"PUBLIC").setMultipleInstances(!0)),Mn(d_,h_,e),Mn(d_,h_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t=Gc(),e=Of){const r=wl(ft(t),_T).getImmediate({identifier:e}),i=Vp("functions");return i&&Z2(r,...i),r}function Z2(t,e,n){Q2(ft(t),e,n)}X2(fetch.bind(self));const ej={apiKey:"AIzaSyB0Qjs2dvrcJAZeWUd9SyPVnTXufRImsi4",authDomain:"xmas-quiz-8c02e.firebaseapp.com",projectId:"xmas-quiz-8c02e",storageBucket:"xmas-quiz-8c02e.firebasestorage.app",messagingSenderId:"978823764359",appId:"1:978823764359:web:dfbd31fbac09f62a82db22"},gd=Z0(ej),wT=Sk(gd),ET=new Nr;ET.setCustomParameters({prompt:"select_account"});const tj=ET,Et=hD(gd),En=B2(gd);J2(gd);const Uo=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState(!0),[i,s]=D.useState(null),[o,l]=D.useState(null);return D.useEffect(()=>{const u=pP(wT,async c=>{if(r(!0),s(null),!c){e(!1),l(null),r(!1);return}l({uid:c.uid,email:c.email});try{if((await lE(c)).claims.admin===!0){e(!0),r(!1);return}const g=Pi(Et,"admins",c.uid),E=await eT(g);e(E.exists())}catch(f){console.error("Error checking admin status:",f),s("Failed to verify admin status"),e(!1)}finally{r(!1)}});return()=>u()},[]),{isAdmin:t,loading:n,error:i,currentUser:o}},nj=({snowflakeCount:t=100})=>{const e=D.useRef(null),n=D.useRef([]),r=D.useRef(0);return D.useEffect(()=>{const i=e.current;if(!i)return;const s=i.getContext("2d");if(!s)return;const o=()=>{i.width=window.innerWidth,i.height=window.innerHeight},l=()=>{n.current=[];for(let p=0;p<t;p++)n.current.push({x:Math.random()*i.width,y:Math.random()*i.height,size:Math.random()*4+1,speed:Math.random()*1+.5,opacity:Math.random()*.6+.3,wind:Math.random()*.5-.25})},u=p=>{s.beginPath(),s.arc(p.x,p.y,p.size,0,Math.PI*2),s.fillStyle=`rgba(255, 255, 255, ${p.opacity})`,s.fill()},c=p=>{p.y+=p.speed,p.x+=p.wind,p.y>i.height&&(p.y=-10,p.x=Math.random()*i.width),p.x>i.width?p.x=0:p.x<0&&(p.x=i.width)},f=()=>{s.clearRect(0,0,i.width,i.height),n.current.forEach(p=>{u(p),c(p)}),r.current=requestAnimationFrame(f)};return window.addEventListener("resize",o),o(),l(),f(),()=>{window.removeEventListener("resize",o),cancelAnimationFrame(r.current)}},[t]),d.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full pointer-events-none z-10","aria-hidden":"true"})};function rj(){const{isAdmin:t}=Uo(),[e,n]=D.useState(!1),r=bo();D.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),D.useEffect(()=>{e&&n(!1)},[r.pathname]);const i=()=>{n(!e)};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-xmas-bg to-xmas-card bg-opacity-95",children:[d.jsx(nj,{snowflakeCount:150}),d.jsxs("div",{className:"navbar bg-gradient-to-r from-xmas-card via-xmas-card to-xmas-bg border-b border-xmas-gold px-2 sm:px-4 shadow-lg relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-60"}),d.jsx("div",{className:"absolute -bottom-4 left-0 right-0 h-8 snow-accumulation-fast"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("button",{className:"btn btn-ghost btn-sm md:hidden relative z-10",onClick:i,"aria-label":"Toggle navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),d.jsxs(rn,{to:"/",className:"hidden sm:flex items-center group",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-xmas-gold to-xmas-line rounded-full opacity-70 group-hover:opacity-100 blur transition duration-200"}),d.jsx("div",{className:"relative flex items-center justify-center w-10 h-10 bg-xmas-card rounded-full border border-xmas-gold overflow-hidden",children:d.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})})]}),d.jsx("div",{className:"ml-3 font-christmas text-xl sm:text-2xl bg-gradient-to-br from-xmas-gold via-xmas-snow to-xmas-gold bg-clip-text text-transparent font-bold",children:"Xmas Quiz"})]}),d.jsxs(rn,{to:"/",className:"sm:hidden flex items-center",children:[d.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-xmas-card border border-xmas-gold overflow-hidden",children:d.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover"})}),d.jsx("span",{className:"ml-2 font-christmas text-lg text-xmas-gold",children:"PACT - Christmas Quiz"})]})]}),d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:t&&d.jsxs(rn,{to:"/admin",className:"relative group overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-xmas-line to-xmas-gold opacity-70 blur-sm group-hover:opacity-100 transition duration-300"}),d.jsxs("div",{className:"relative btn btn-sm bg-xmas-card border border-xmas-gold px-3 py-1 flex items-center",children:[d.jsx("i",{className:"fas fa-lock mr-2 text-xmas-gold"}),d.jsx("span",{className:"font-christmas",children:"Admin"})]})]})})]}),d.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-70 z-20 transition-opacity duration-300 md:hidden ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i}),d.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-xmas-bg to-xmas-card border-r border-xmas-gold z-30 transform transition-transform duration-300 ease-in-out md:hidden shadow-xl ${e?"translate-x-0":"-translate-x-full"}`,children:[d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-60"}),d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-xmas-gold bg-xmas-card bg-opacity-80",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-xmas-card border border-xmas-gold shadow-lg overflow-hidden",children:d.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover"})}),d.jsx("div",{className:"ml-3 font-christmas text-xl bg-gradient-to-br from-xmas-gold via-xmas-snow to-xmas-gold bg-clip-text text-transparent font-bold",children:"Xmas Quiz"})]}),d.jsx("button",{className:"btn btn-ghost btn-sm text-xmas-text hover:text-xmas-line",onClick:i,"aria-label":"Close navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d.jsx("div",{className:"overflow-y-auto h-full pb-20",children:d.jsxs("div",{className:"p-4 pt-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-christmas text-xl text-xmas-gold mb-4 pl-2 border-l-2 border-xmas-line",children:"Navigation"}),d.jsxs("ul",{className:"space-y-3",children:[d.jsx("li",{children:d.jsx(cu,{to:"/",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-home mr-3 text-xmas-gold"}),d.jsx("span",{children:"Home"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})}),d.jsx("li",{children:d.jsx(cu,{to:"/quiz",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-question-circle mr-3 text-xmas-gold"}),d.jsx("span",{children:"Take Quiz"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})})]})]}),t&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-christmas text-xl text-xmas-gold mb-4 pl-2 border-l-2 border-xmas-line",children:"Admin"}),d.jsxs("ul",{className:"space-y-3",children:[d.jsx("li",{children:d.jsx(cu,{to:"/admin",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-cog mr-3 text-xmas-gold"}),d.jsx("span",{children:"Dashboard"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})}),d.jsx("li",{children:d.jsx(cu,{to:"/admin/results",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-trophy mr-3 text-xmas-gold"}),d.jsx("span",{children:"Results"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})})]})]}),d.jsx("div",{className:"mt-8 pt-4 border-t border-xmas-gold border-opacity-30 flex justify-center",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("i",{className:"fas fa-snowflake text-xmas-gold opacity-60"}),d.jsx("i",{className:"fas fa-tree text-xmas-gold opacity-60"}),d.jsx("i",{className:"fas fa-gift text-xmas-gold opacity-60"})]})})]})})]}),d.jsx("main",{className:"p-4",children:d.jsx(NA,{})}),d.jsx("div",{className:"fixed bottom-0 left-0 w-full pointer-events-none",children:d.jsx("div",{className:"container mx-auto",children:d.jsxs("div",{className:"relative h-16",children:[d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-40"}),d.jsx("div",{className:"absolute bottom-4 left-4 opacity-30",children:d.jsx("i",{className:"fas fa-tree text-4xl text-xmas-gold"})}),d.jsx("div",{className:"absolute bottom-4 right-4 opacity-30",children:d.jsx("i",{className:"fas fa-star text-4xl text-xmas-gold"})})]})})})]})}const ij=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState(null);return D.useEffect(()=>{(async()=>{try{const l=Zn(hn(Et,"scores"),hs("score","desc"),ID(10)),u=await er(l),c=[];u.forEach(f=>{var g;const p=f.data();c.push({id:f.id,playerName:p.playerName,score:p.score,timestamp:((g=p.timestamp)==null?void 0:g.toDate())||new Date})}),e(c)}catch(l){console.error("Error fetching scores:",l),s("Failed to load scoreboard. Please try again later.")}finally{r(!1)}})()},[]),n?d.jsx("div",{className:"flex justify-center items-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?d.jsx("div",{className:"text-center text-error p-4",children:d.jsx("p",{children:i})}):t.length===0?d.jsx("div",{className:"text-center p-4",children:d.jsx("p",{className:"text-xl",children:"No scores yet! Be the first to play!"})}):d.jsx("div",{className:"overflow-x-auto snow-accumulation snow-pile relative",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-xmas-gold",children:[d.jsx("th",{className:"text-center",children:"#"}),d.jsx("th",{children:"Player"}),d.jsx("th",{className:"text-right",children:"Score"})]})}),d.jsx("tbody",{children:t.map((o,l)=>d.jsxs("tr",{className:`${l<3?"font-bold":""} ${l===0?"bg-opacity-20 bg-xmas-gold":""}`,children:[d.jsxs("td",{className:"text-center",children:[l===0&&d.jsx("i",{className:"fas fa-crown text-xmas-gold mr-1"}),l+1]}),d.jsxs("td",{className:"flex items-center gap-2",children:[o.playerName,l===0&&d.jsx("span",{className:"badge badge-warning",children:"Champion"}),l===1&&d.jsx("span",{className:"badge badge-secondary",children:"Runner-up"})]}),d.jsx("td",{className:"text-right font-bold",children:o.score})]},o.id))})]})})},sj=()=>d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h1",{className:"font-christmas text-5xl md:text-7xl text-xmas-line mb-4",children:"Christmas Quiz"}),d.jsx("p",{className:"text-xl md:text-2xl text-xmas-snow mb-8",children:"Test your Christmas knowledge and compete for the top spot!"}),d.jsx("div",{className:"flex flex-col md:flex-row justify-center gap-6 mb-12",children:d.jsxs(rn,{to:"/quiz",className:"btn btn-primary btn-lg text-xl px-8 py-3 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30",children:[d.jsx("i",{className:"fas fa-play-circle mr-2"})," Start Quiz"]})})]}),d.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:d.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-xmas-gold to-transparent"})}),d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-30 snow-accumulation snow-accumulation-fast relative",children:[d.jsx("div",{className:"mb-6 text-center",children:d.jsxs("h2",{className:"font-christmas text-3xl md:text-4xl text-xmas-gold inline-block relative",children:[d.jsx("span",{className:"relative z-10",children:"Leaderboard"}),d.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-1 bg-xmas-gold opacity-30 rounded-full"})]})}),d.jsx(ij,{})]}),d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-20 snow-accumulation snow-accumulation-slow relative",children:[d.jsx("h2",{className:"font-christmas text-3xl text-xmas-line mb-6",children:"How to Play"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[d.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:d.jsx("i",{className:"fas fa-question-circle"})}),d.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Answer Questions"}),d.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Test your Christmas knowledge with our festive questions!"})]}),d.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-gold",children:[d.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:d.jsx("i",{className:"fas fa-gift"})}),d.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Multiple Rounds"}),d.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Enjoy different themed rounds of Christmas fun!"})]}),d.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[d.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:d.jsx("i",{className:"fas fa-medal"})}),d.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Compete"}),d.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Get on the leaderboard and show off your Christmas spirit!"})]})]})]}),d.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:d.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-xmas-gold to-transparent"})}),d.jsx("footer",{className:"text-center text-xmas-mute mt-12 pb-8",children:d.jsxs("p",{children:[" ",new Date().getFullYear()," Christmas Quiz | ",d.jsx(rn,{to:"/admin/login",className:"hover:text-xmas-link",children:"Admin"})]})})]});var nt=(t=>(t.GENERAL="general",t.PICTURE="picture",t.MUSIC="music",t.TRIVIA="trivia",t.CHRISTMAS="christmas",t))(nt||{});const Fu=({src:t,alt:e,className:n="",thumbnailHeight:r="h-12",zoomFactor:i=2,maxWidth:s="600px",maxHeight:o="600px"})=>{const[l,u]=D.useState(!1),[c,f]=D.useState({top:!0,left:null}),p=D.useRef(null),g=D.useRef(null);return D.useEffect(()=>{if(l&&p.current&&g.current){const E=p.current.getBoundingClientRect(),R=g.current.getBoundingClientRect(),N=window.innerWidth,b=E.left+R.width/2>N,S=E.left-R.width/2<0,w=E.top-R.height<0;f({top:!w,left:b?!0:S?!1:null})}},[l]),d.jsxs("div",{className:"relative inline-block",ref:p,children:[d.jsx("img",{src:t,alt:e,className:`${r} w-auto object-cover rounded-lg cursor-pointer ${n}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),l&&d.jsx("div",{ref:g,className:`absolute z-50 shadow-2xl rounded-lg overflow-hidden ${c.top?"bottom-full mb-2":"top-full mt-2"} ${c.left===!0?"right-0":c.left===!1?"left-0":"left-1/2 transform -translate-x-1/2"}`,children:d.jsx("img",{src:t,alt:e,className:"object-contain rounded-lg",style:{maxHeight:o,maxWidth:s,minHeight:"300px",minWidth:"300px",width:"auto",height:"auto"}})})]})},xT=(t,e,n={})=>{if(!e||!t)return!1;const{allowPartialMatch:r=!0,minMatchPercentage:i=70,acceptableAlternatives:s=[]}=n,o=c=>c.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),l=o(t),u=o(e);return!!(l===u||s.length>0&&s.map(f=>o(f)).includes(l)||r&&(u.includes(l)&&l.length>=u.length*(i/100)||l.includes(u)&&u.length>=l.length*(i/100)))},oj=({question:t,userAnswer:e,roundType:n})=>{const r=t.isTextInput?typeof e=="string"&&e.toLowerCase().trim()===(t.textAnswer||"").toLowerCase().trim():typeof e=="number"&&e===t.correctAnswer,i=t.isTextInput?typeof e=="string"&&!r&&xT(e,t.textAnswer,{acceptableAlternatives:t.alternativeAnswers||[]}):!1,s=r||i;return d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-4 mb-4",children:[d.jsx("h3",{className:"text-xl font-christmas mb-2",children:t.text}),n===nt.PICTURE?d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[t.coverImageUrl&&d.jsxs("div",{className:"flex flex-col items-center mb-4",children:[d.jsx("p",{className:"text-xl font-christmas mb-2",children:"Movie Cover"}),d.jsx(Fu,{src:t.coverImageUrl,alt:"Cover Image",thumbnailHeight:"max-h-72",maxWidth:"600px",maxHeight:"600px",className:"object-contain rounded-lg shadow-lg"})]}),t.normalImageUrl&&d.jsxs("div",{className:"flex flex-col items-center mt-4",children:[d.jsx("p",{className:"text-sm mb-1",children:"Scene from the movie"}),d.jsx(Fu,{src:t.normalImageUrl,alt:"Answer Image",thumbnailHeight:"max-h-48",maxWidth:"500px",maxHeight:"500px",className:"object-contain rounded-lg"})]})]}):t.imageUrl&&d.jsx("div",{className:"flex flex-col items-center mb-6",children:d.jsx(Fu,{src:t.imageUrl,alt:"Question Image",thumbnailHeight:"max-h-48",maxWidth:"500px",maxHeight:"500px",className:"object-contain rounded-lg"})}),d.jsx("div",{className:"mt-3",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm",children:"Your answer:"}),d.jsx("p",{className:`font-bold ${s?"text-green-500":"text-red-500"}`,children:t.isTextInput?e||"No answer provided":typeof e=="number"?t.options[e]:"No answer provided"}),i&&d.jsx("p",{className:"text-xs text-amber-500 italic mt-1",children:"Alternative answer accepted"})]}),(!s||i)&&d.jsxs("div",{className:"mt-2 sm:mt-0",children:[d.jsx("p",{className:"text-sm",children:i?"Primary answer:":"Correct answer:"}),d.jsx("p",{className:"font-bold text-green-500",children:t.isTextInput?t.textAnswer:t.options[t.correctAnswer]})]})]})}),d.jsx("div",{className:"mt-3 flex justify-end",children:s?d.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:"Correct"}):d.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-red-100 text-red-800",children:"Incorrect"})})]})},aj=({round:t,questions:e,userAnswers:n,roundScore:r,onContinue:i,isLastRound:s=!1})=>d.jsx("div",{className:"container mx-auto px-4 py-6",children:d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6 mb-6 snow-accumulation snow-accumulation-slow relative",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-2xl font-christmas text-xmas-gold",children:[t.title," - Round Results"]}),d.jsxs("div",{className:"mt-3 md:mt-0",children:[d.jsx("span",{className:"text-sm",children:"Round Score"}),d.jsxs("div",{className:"text-3xl font-bold text-xmas-gold",children:[r," / ",e.length]})]})]}),d.jsx("div",{className:"space-y-6",children:e.map(o=>d.jsx(oj,{question:o,userAnswer:n[o.id],roundType:t.type},o.id))}),d.jsx("div",{className:"mt-8 flex justify-end",children:d.jsx("button",{className:"btn btn-primary",onClick:i,children:s?"Finish Quiz":"Continue to Next Round"})})]})}),lj=({rounds:t,completedRounds:e,onSelectRound:n,currentRoundIndex:r,roundScores:i={},quizFinished:s=!1,onSubmitFinalScore:o})=>{const l=u=>{switch(u){case nt.PICTURE:return d.jsx("i",{className:"fas fa-image text-info"});case nt.MUSIC:return d.jsx("i",{className:"fas fa-music text-success"});case nt.TRIVIA:return d.jsx("i",{className:"fas fa-lightbulb text-warning"});case nt.CHRISTMAS:return d.jsx("i",{className:"fas fa-holly-berry text-error"});default:return d.jsx("i",{className:"fas fa-question-circle text-primary"})}};return d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6 mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-2xl font-christmas text-xmas-gold",children:s?"Review Your Rounds":"Choose a Round"}),s&&o&&d.jsx("div",{children:d.jsxs("button",{className:"btn btn-primary",onClick:o,children:[d.jsx("i",{className:"fas fa-trophy mr-2"})," Submit Final Score"]})})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((u,c)=>{const f=e.includes(u.id),p=r===c;return d.jsx("button",{className:`p-5 rounded-lg border transition-all ${p?"bg-xmas-gold bg-opacity-20 border-xmas-gold":f?"bg-success bg-opacity-10 border-success border-opacity-30":"bg-xmas-card hover:bg-xmas-gold hover:bg-opacity-10 border-xmas-gold border-opacity-30"}`,onClick:()=>n(c),children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"text-xl",children:l(u.type)}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("h3",{className:"font-christmas text-lg",children:u.title}),d.jsx("p",{className:"text-sm text-xmas-text text-opacity-80 line-clamp-3 h-14",children:u.description})]}),f&&d.jsxs("div",{className:"text-success flex flex-col items-end",children:[d.jsx("i",{className:"fas fa-check-circle"}),i&&i[u.id]!==void 0&&d.jsxs("span",{className:"text-xs mt-1 font-bold",children:[i[u.id]," pts"]})]})]})},u.id)})}),s&&d.jsx("div",{className:"mt-6 p-4 bg-success bg-opacity-10 border border-success border-opacity-30 rounded-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-xl text-success",children:d.jsx("i",{className:"fas fa-check-circle"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-christmas text-lg",children:"All Rounds Completed!"}),d.jsx("p",{className:"text-sm",children:"Click on any round to review your answers or submit your final score."})]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm",children:"Total Score"}),d.jsx("div",{className:"text-2xl font-bold text-success",children:Object.values(i).reduce((u,c)=>u+c,0)})]})]})})]})},hh=()=>{window.scrollTo({top:0,behavior:"smooth"})},uj=()=>{const t=As(),[e,n]=D.useState([]),[r,i]=D.useState([]),[s,o]=D.useState(null),[l,u]=D.useState([]),[c,f]=D.useState({}),[p,g]=D.useState({}),[E,R]=D.useState(0),[N,b]=D.useState({}),[S,w]=D.useState([]),[A,j]=D.useState(""),[U,F]=D.useState(!1),[y,v]=D.useState(!1),[I,x]=D.useState(!1),[C,k]=D.useState(!1),[T,le]=D.useState(!1),[Oe,Ke]=D.useState(!1),[Le,z]=D.useState(!1),[re,oe]=D.useState({}),[Ee,se]=D.useState(!0),[Ie,lt]=D.useState(!1),[$e,He]=D.useState(null);D.useEffect(()=>{(async()=>{try{const _e=Zn(hn(Et,"rounds"),hs("order","asc")),ut=await er(_e),xe=[];ut.forEach(Re=>{const We=Re.data();xe.push({id:Re.id,...We})});const Q=Zn(hn(Et,"questions")),ae=await er(Q),me=[];ae.forEach(Re=>{const We=Re.data();me.push({id:Re.id,...We,roundId:We.roundId||""})});const Je={};xe.forEach(Re=>{Je[Re.id]=0}),n(xe),i(me),b(Je),se(!1)}catch(_e){console.error("Error fetching quiz data:",_e),He("Failed to load quiz data. Please try again later."),se(!1)}})()},[]);const Xe=()=>{v(!0),z(!0)},Fn=(pe,_e)=>{f(ut=>({...ut,[pe]:_e}))},rr=(pe,_e)=>{g(ut=>({...ut,[pe]:_e}))},yn=()=>{if(s===null)return;let pe=0;const _e={};l.forEach(xe=>{if(xe.isTextInput){const Q=p[xe.id]||"";_e[xe.id]=Q,xT(Q,xe.textAnswer,{acceptableAlternatives:xe.alternativeAnswers||[]})&&pe++}else{const Q=c[xe.id];_e[xe.id]=Q,Q!==void 0&&Q===xe.correctAnswer&&pe++}}),R(xe=>xe+pe);const ut=e[s];b(xe=>({...xe,[ut.id]:pe})),oe(xe=>({...xe,..._e})),hh(),k(!0),Ke(!0)},ir=()=>{if(Ke(!1),hh(),s!==null){const _e=e[s];_e&&!S.includes(_e.id)&&w(ut=>[...ut,_e.id])}const pe=[...S];s!==null&&!pe.includes(e[s].id)&&pe.push(e[s].id),pe.length>=e.length&&x(!0),z(!0),o(null),u([]),f({}),g({}),k(!1),le(!1)},qe=async()=>{if(!A.trim()){alert("Please enter your name");return}lt(!0);try{await Lm(hn(Et,"scores"),{playerName:A.trim(),score:E,roundScores:N,completedRounds:S,timestamp:PD()}),hh(),t("/")}catch(pe){console.error("Error submitting score:",pe),He("Failed to submit your score. Please try again."),lt(!1)}};if(Ee)return d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-xmas-gold"}),d.jsx("p",{className:"mt-4 text-xl",children:"Loading Christmas Quiz..."})]});if($e)return d.jsx("div",{className:"text-center p-8",children:d.jsxs("div",{className:"bg-error bg-opacity-20 p-6 rounded-lg",children:[d.jsx("h2",{className:"text-2xl font-christmas text-error mb-4",children:"Oh no! Something went wrong"}),d.jsx("p",{className:"mb-4",children:$e}),d.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Return Home"})]})});if(r.length===0)return d.jsx("div",{className:"text-center p-8",children:d.jsxs("div",{className:"bg-warning bg-opacity-20 p-6 rounded-lg",children:[d.jsx("h2",{className:"text-2xl font-christmas text-warning mb-4",children:"No Questions Available"}),d.jsx("p",{className:"mb-4",children:"There are no quiz questions available right now. Please check back later!"}),d.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Return Home"})]})});if(!y)return d.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[d.jsx("h1",{className:"font-christmas text-4xl md:text-5xl text-xmas-line mb-6",children:"Christmas Quiz"}),d.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[d.jsx("h2",{className:"text-2xl font-christmas text-xmas-gold mb-4",children:"Ready to Test Your Christmas Knowledge?"}),d.jsx("p",{className:"mb-6",children:"Answer the questions correctly to earn points. Choose any round to begin!"}),d.jsxs("button",{className:"btn btn-primary btn-lg font-christmas text-xl",onClick:Xe,children:[d.jsx("i",{className:"fas fa-play-circle mr-2"})," Start Quiz"]})]})]});if(U)return d.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[d.jsx("h1",{className:"font-christmas text-4xl md:text-5xl text-xmas-line mb-6",children:"Quiz Complete!"}),d.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg max-w-md mx-auto",children:[d.jsx("div",{className:"text-6xl text-xmas-gold mb-4",children:d.jsx("i",{className:"fas fa-star"})}),d.jsx("h2",{className:"text-3xl font-christmas text-xmas-gold mb-2",children:"Your Score"}),d.jsxs("p",{className:"text-4xl font-bold mb-6",children:[E," points"]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text text-xmas-snow",children:"Enter your name to save your score:"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:A,onChange:pe=>j(pe.target.value),placeholder:"Your Name",disabled:Ie})]}),d.jsx("button",{className:"btn btn-primary w-full",onClick:qe,disabled:Ie,children:Ie?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Submitting..."]}):"Submit Score"})]})]});if(e[s],Oe&&s!==null){const pe=e[s],_e=[...S];_e.includes(pe.id)||_e.push(pe.id);const ut=_e.length>=e.length;return d.jsx(aj,{round:pe,questions:l,userAnswers:re,roundScore:N[pe.id]||0,onContinue:ir,isLastRound:ut})}if(Le)return d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-2xl font-christmas text-xmas-line",children:"Christmas Quiz"}),d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"text-sm",children:"Current Score"}),d.jsx("h2",{className:"text-xl font-bold",children:E})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm",children:"Rounds Completed"}),d.jsxs("h2",{className:"text-xl font-bold",children:[S.length," / ",e.length]})]})]}),d.jsx(lj,{rounds:e,completedRounds:S,onSelectRound:pe=>{const _e=e[pe],ut=r.filter(xe=>xe.roundId===_e.id);o(pe),u(ut),S.includes(_e.id)?Ke(!0):Ke(!1),z(!1)},currentRoundIndex:s,roundScores:N,quizFinished:I,onSubmitFinalScore:()=>F(!0)})]});if(s!==null){const pe=e[s];return d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-sm",children:"Round"}),d.jsx("h2",{className:"text-xl font-bold",children:(pe==null?void 0:pe.title)||"Quiz"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"text-sm",children:"Score"}),d.jsx("h2",{className:"text-xl font-bold",children:E})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm",children:"Questions"}),d.jsx("h2",{className:"text-xl font-bold",children:l.length})]})]}),d.jsx("div",{className:"space-y-8 mb-8",children:l.map((_e,ut)=>d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[d.jsxs("h3",{className:"text-2xl font-christmas mb-4",children:["Question ",ut+1,": ",_e.text]}),(pe==null?void 0:pe.type)===nt.PICTURE&&_e.blankedImageUrl&&d.jsx("div",{className:"mb-4 flex justify-center",children:d.jsx(Fu,{src:_e.blankedImageUrl,alt:"Question Image",thumbnailHeight:"max-h-64",maxWidth:"800px",maxHeight:"800px",className:"object-contain rounded-lg"})}),_e.isTextInput?d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Your Answer:"})}),d.jsx("div",{className:"flex gap-2",children:d.jsx("input",{type:"text",className:"input input-bordered flex-1",value:p[_e.id]||"",onChange:xe=>rr(_e.id,xe.target.value),placeholder:"Type your answer here"})})]}):d.jsx("div",{className:"space-y-3",children:_e.options.map((xe,Q)=>d.jsxs("button",{className:`btn btn-outline w-full justify-start text-left px-4 py-3 ${c[_e.id]===Q?"btn-primary":""}`,onClick:()=>Fn(_e.id,Q),children:[d.jsxs("span",{className:"mr-3",children:[String.fromCharCode(65+Q),"."]}),xe]},Q))})]},_e.id))}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("button",{className:"btn btn-outline",onClick:()=>{z(!0),o(null)},children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Round Selection"]}),d.jsx("button",{className:"btn btn-primary btn-lg",onClick:yn,children:"Submit Answers & Show Results"})]})]})}},cj=()=>{const t=As(),{isAdmin:e,loading:n,currentUser:r}=Uo(),[i,s]=D.useState(!1),[o,l]=D.useState(null),u=!1;D.useEffect(()=>{e&&!n&&t("/admin")},[e,n,t]);const c=async()=>{l(null),s(!0);try{await jP(wT,tj)}catch(f){console.error("Login error:",f),f.code==="auth/popup-closed-by-user"?l("Sign-in popup was closed. Please try again."):f.code==="auth/cancelled-popup-request"?l("Another popup is already open. Please try again."):f.code==="auth/unauthorized-domain"?(console.error("Unauthorized domain error:",window.location.hostname),l("This domain is not authorized for OAuth operations. Please add "+window.location.hostname+" to your Firebase authorized domains list in the Firebase console under Authentication > Sign-in method > Authorized domains.")):l("Failed to sign in. Please try again."),s(!1)}};return n?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsx("div",{className:"container mx-auto px-4 py-12",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-4xl text-xmas-line mb-2",children:"Admin Login"}),d.jsx("p",{className:"text-xmas-mute",children:"Sign in to manage the Christmas Quiz"})]}),d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[u,r&&d.jsxs("div",{className:"bg-info bg-opacity-10 border-l-4 border-info p-4 mb-6 rounded",children:[d.jsx("p",{className:"text-info font-bold mb-2",children:"User Authenticated"}),d.jsxs("p",{className:"text-info text-sm mb-1",children:["Email: ",r.email]}),d.jsxs("p",{className:"text-info text-sm mb-2",children:["UID: ",r.uid]}),d.jsxs("p",{className:"text-info text-sm",children:["To grant admin access, create a document in the ",d.jsx("code",{className:"bg-base-300 px-1 py-0.5 rounded",children:"admins"})," collection with this UID as the document ID."]}),u]}),o&&d.jsx("div",{className:"bg-error bg-opacity-10 border-l-4 border-error p-4 mb-6 rounded",children:d.jsx("p",{className:"text-error",children:o})}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("p",{className:"mb-4",children:"Sign in with your Google account to access the admin panel."}),d.jsx("p",{className:"text-sm text-xmas-mute mb-6",children:"Only authorized administrators will be granted access."}),d.jsx("button",{onClick:c,className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:i,children:i?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm"}),"Signing in..."]}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[d.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12
                      s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20
                      s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),d.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039
                      l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),d.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36
                      c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),d.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571
                      c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),"Sign in with Google"]})})]})]}),d.jsx("div",{className:"text-center mt-6",children:d.jsx("button",{onClick:()=>t("/"),className:"btn btn-link text-xmas-mute",children:"Back to Home"})})]})})},dj=()=>{const t=As(),{isAdmin:e,loading:n}=Uo(),[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(null);D.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),D.useEffect(()=>{e&&(async()=>{if(e){o(!0);try{const p=await er(Zn(hn(Et,"rounds"),hs("order","asc"))),g=[];p.forEach(E=>{const R=E.data();g.push({id:E.id,...R})}),i(g)}catch(p){console.error("Error fetching rounds:",p),u("Failed to load rounds")}finally{o(!1)}}})()},[e]);const c=f=>{switch(f){case nt.PICTURE:return d.jsx("i",{className:"fas fa-image text-info"});case nt.MUSIC:return d.jsx("i",{className:"fas fa-music text-success"});case nt.TRIVIA:return d.jsx("i",{className:"fas fa-lightbulb text-warning"});case nt.CHRISTMAS:return d.jsx("i",{className:"fas fa-holly-berry text-error"});default:return d.jsx("i",{className:"fas fa-question-circle text-primary"})}};return n||s?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Admin Dashboard"}),d.jsx("div",{className:"flex gap-2",children:d.jsxs(rn,{to:"/admin/results",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-trophy mr-2"})," View Results"]})})]}),l&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:l})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-christmas mb-4 text-xmas-gold",children:"Quiz Rounds"}),r.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No rounds yet"}),d.jsx("p",{className:"mb-4",children:"Start by adding your first quiz round!"}),d.jsxs(rn,{to:"/admin/rounds",className:"btn btn-primary",children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(f=>d.jsx("div",{className:"card bg-xmas-card shadow-xl",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h2",{className:"card-title font-christmas",children:[c(f.type)," ",f.title]}),d.jsxs("div",{className:"badge badge-outline",children:["#",f.order]})]}),d.jsx("p",{className:"text-sm mb-4",children:f.description}),d.jsx("div",{className:"card-actions justify-end",children:d.jsxs(rn,{to:`/admin/questions/${f.id}`,className:"btn btn-primary btn-sm",children:[d.jsx("i",{className:"fas fa-list mr-1"})," Manage Questions"]})})]})},f.id)),d.jsx("div",{className:"card bg-base-100 border-2 border-dashed border-base-300 shadow-xl flex items-center justify-center",children:d.jsxs("div",{className:"card-body items-center text-center",children:[d.jsx("h2",{className:"card-title font-christmas",children:"Add New Round"}),d.jsx("p",{children:"Create a new quiz round"}),d.jsx("div",{className:"card-actions justify-center mt-4",children:d.jsxs(rn,{to:"/admin/rounds",className:"btn btn-primary",children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})})]})})]})]})]})},hj=()=>{const t=As(),{isAdmin:e,loading:n}=Uo(),[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(null),[c,f]=D.useState("score"),[p,g]=D.useState("desc");D.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),D.useEffect(()=>{e&&(async()=>{if(e)try{const b=Zn(hn(Et,"scores"),hs(c,p)),S=await er(b),w=[];S.forEach(A=>{var U;const j=A.data();w.push({id:A.id,playerName:j.playerName,score:j.score,timestamp:((U=j.timestamp)==null?void 0:U.toDate())||new Date})}),i(w)}catch(b){console.error("Error fetching scores:",b),u("Failed to load scores")}finally{o(!1)}})()},[e,c,p]);const E=N=>{N===c?g(p==="asc"?"desc":"asc"):(f(N),g("desc"))},R=async N=>{if(confirm("Are you sure you want to delete this score?"))try{await Om(Pi(Et,"scores",N)),i(r.filter(b=>b.id!==N))}catch(b){console.error("Error deleting score:",b),u("Failed to delete score")}};return n||s?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Quiz Results"}),d.jsxs(rn,{to:"/admin",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Dashboard"]})]}),l&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:l})]}),r.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No quiz results yet"}),d.jsx("p",{children:"Results will appear here once players complete the quiz"})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-xmas-card p-4 rounded-lg mb-6",children:d.jsxs("div",{className:"stats shadow",children:[d.jsxs("div",{className:"stat",children:[d.jsx("div",{className:"stat-title",children:"Total Players"}),d.jsx("div",{className:"stat-value",children:r.length})]}),d.jsxs("div",{className:"stat",children:[d.jsx("div",{className:"stat-title",children:"Average Score"}),d.jsx("div",{className:"stat-value",children:Math.round(r.reduce((N,b)=>N+b.score,0)/r.length)})]}),d.jsxs("div",{className:"stat",children:[d.jsx("div",{className:"stat-title",children:"Highest Score"}),d.jsx("div",{className:"stat-value",children:Math.max(...r.map(N=>N.score))})]})]})}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Rank"}),d.jsx("th",{children:d.jsxs("button",{className:"flex items-center",onClick:()=>E("playerName"),children:["Player",c==="playerName"&&d.jsx("i",{className:`fas fa-sort-${p==="asc"?"up":"down"} ml-2`})]})}),d.jsx("th",{children:d.jsxs("button",{className:"flex items-center",onClick:()=>E("score"),children:["Score",c==="score"&&d.jsx("i",{className:`fas fa-sort-${p==="asc"?"up":"down"} ml-2`})]})}),d.jsx("th",{children:d.jsxs("button",{className:"flex items-center",onClick:()=>E("timestamp"),children:["Date",c==="timestamp"&&d.jsx("i",{className:`fas fa-sort-${p==="asc"?"up":"down"} ml-2`})]})}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:r.map((N,b)=>d.jsxs("tr",{children:[d.jsx("td",{children:b+1}),d.jsx("td",{children:N.playerName}),d.jsx("td",{className:"font-bold",children:N.score}),d.jsxs("td",{children:[N.timestamp.toLocaleDateString()," ",N.timestamp.toLocaleTimeString()]}),d.jsx("td",{children:d.jsx("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>R(N.id),children:d.jsx("i",{className:"fas fa-trash"})})})]},N.id))})]})})]})]})},fj=()=>{const t=As(),{isAdmin:e,loading:n}=Uo(),[r,i]=D.useState([]),[s,o]=D.useState(!0),[l,u]=D.useState(null),[c,f]=D.useState(!1),[p,g]=D.useState(null),[E,R]=D.useState(""),[N,b]=D.useState(""),[S,w]=D.useState(nt.GENERAL),[A,j]=D.useState(1),[U,F]=D.useState(!1);D.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),D.useEffect(()=>{e&&(async()=>{if(e)try{const le=Zn(hn(Et,"rounds"),hs("order","asc")),Oe=await er(le),Ke=[];Oe.forEach(Le=>{const z=Le.data();Ke.push({id:Le.id,...z})}),i(Ke)}catch(le){console.error("Error fetching rounds:",le),u("Failed to load rounds")}finally{o(!1)}})()},[e]);const y=()=>{R(""),b(""),w(nt.GENERAL),j(r.length+1),g(null)},v=async T=>{T.preventDefault(),F(!0);try{await Lm(hn(Et,"rounds"),{title:E,description:N,type:S,order:A});const le=Zn(hn(Et,"rounds"),hs("order","asc")),Oe=await er(le),Ke=[];Oe.forEach(Le=>{const z=Le.data();Ke.push({id:Le.id,...z})}),i(Ke),f(!1),y()}catch(le){console.error("Error adding round:",le),u("Failed to add round")}finally{F(!1)}},I=T=>{g(T),R(T.title),b(T.description),w(T.type),j(T.order),f(!0)},x=async T=>{if(T.preventDefault(),!!p){F(!0);try{const le=Pi(Et,"rounds",p.id);await nT(le,{title:E,description:N,type:S,order:A});const Oe=Zn(hn(Et,"rounds"),hs("order","asc")),Ke=await er(Oe),Le=[];Ke.forEach(z=>{const re=z.data();Le.push({id:z.id,...re})}),i(Le),f(!1),y()}catch(le){console.error("Error updating round:",le),u("Failed to update round")}finally{F(!1)}}},C=async T=>{if(confirm("Are you sure you want to delete this round? This will NOT delete questions in this round."))try{await Om(Pi(Et,"rounds",T)),i(r.filter(le=>le.id!==T))}catch(le){console.error("Error deleting round:",le),u("Failed to delete round")}},k=T=>{switch(T){case nt.PICTURE:return d.jsx("i",{className:"fas fa-image text-info"});case nt.MUSIC:return d.jsx("i",{className:"fas fa-music text-success"});case nt.TRIVIA:return d.jsx("i",{className:"fas fa-lightbulb text-warning"});case nt.CHRISTMAS:return d.jsx("i",{className:"fas fa-holly-berry text-error"});default:return d.jsx("i",{className:"fas fa-question-circle text-primary"})}};return n||s?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Quiz Rounds"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(rn,{to:"/admin",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Dashboard"]}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>{y(),j(r.length+1),f(!0)},children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]})]}),l&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:l})]}),r.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No rounds yet"}),d.jsx("p",{className:"mb-4",children:"Start by adding your first quiz round!"}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>f(!0),children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(T=>d.jsx("div",{className:"card bg-xmas-card shadow-xl",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h2",{className:"card-title font-christmas",children:[k(T.type)," ",T.title]}),d.jsxs("div",{className:"badge badge-outline",children:["#",T.order]})]}),d.jsx("p",{className:"text-sm mb-4",children:T.description}),d.jsxs("div",{className:"card-actions justify-end",children:[d.jsxs(rn,{to:`/admin/questions/${T.id}`,className:"btn btn-primary btn-sm",children:[d.jsx("i",{className:"fas fa-list mr-1"})," Manage Questions"]}),d.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>I(T),children:d.jsx("i",{className:"fas fa-edit"})}),d.jsx("button",{className:"btn btn-error btn-outline btn-sm",onClick:()=>C(T.id),children:d.jsx("i",{className:"fas fa-trash"})})]})]})},T.id))}),c&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl max-w-md w-full",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-christmas",children:p?"Edit Round":"Add New Round"}),d.jsx("button",{className:"btn btn-sm btn-circle",onClick:()=>{f(!1),y()},children:d.jsx("i",{className:"fas fa-times"})})]}),d.jsxs("form",{onSubmit:p?x:v,children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Round Title"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:E,onChange:T=>R(T.target.value),placeholder:"e.g., Christmas Movies",required:!0})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Description"})}),d.jsx("textarea",{className:"textarea textarea-bordered h-20",value:N,onChange:T=>b(T.target.value),placeholder:"Brief description of this round"})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Round Type"})}),d.jsxs("select",{className:"select select-bordered w-full",value:S,onChange:T=>w(T.target.value),required:!0,children:[d.jsx("option",{value:nt.GENERAL,children:"General Questions"}),d.jsx("option",{value:nt.PICTURE,children:"Picture Round"}),d.jsx("option",{value:nt.MUSIC,children:"Music Round"}),d.jsx("option",{value:nt.TRIVIA,children:"Trivia Round"}),d.jsx("option",{value:nt.CHRISTMAS,children:"Christmas Round"})]})]}),d.jsxs("div",{className:"form-control mb-6",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Display Order"})}),d.jsx("input",{type:"number",className:"input input-bordered",value:A,onChange:T=>j(parseInt(T.target.value)||1),min:"1",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{f(!1),y()},children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:U,children:U?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),p?"Updating...":"Adding..."]}):p?"Update Round":"Add Round"})]})]})]})})})]})},pj=async(t,e=.8)=>new Promise((n,r)=>{const i=new FileReader;i.onload=s=>{var l;const o=new Image;o.onload=()=>{const u=document.createElement("canvas");u.width=o.width,u.height=o.height;const c=u.getContext("2d");if(!c){r(new Error("Could not get canvas context"));return}c.drawImage(o,0,0),u.toBlob(f=>{if(!f){r(new Error("Could not convert image to WebP"));return}const p=t.name.split(".").slice(0,-1).join(".")+".webp",g=new File([f],p,{type:"image/webp"});n(g)},"image/webp",e)},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=(l=s.target)==null?void 0:l.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(t)}),mj=t=>t.type.startsWith("image/"),gj=async(t,e=.8)=>{if(!mj(t)||t.type==="image/webp")return t;try{return await pj(t,e)}catch(n){return console.error("Error converting image to WebP:",n),t}},yj=()=>{const t=As(),{roundId:e}=pA(),{isAdmin:n,loading:r}=Uo(),[i,s]=D.useState(null),[o,l]=D.useState([]),[u,c]=D.useState(!0),[f,p]=D.useState(null),[g,E]=D.useState(!1),[R,N]=D.useState(null),[b,S]=D.useState(""),[w,A]=D.useState(["","","",""]),[j,U]=D.useState(0),[F,y]=D.useState(null),[v,I]=D.useState(null),[x,C]=D.useState(null),[k,T]=D.useState(null),[le,Oe]=D.useState(null),[Ke,Le]=D.useState(null),[z,re]=D.useState(null),[oe,Ee]=D.useState(null),[se,Ie]=D.useState(!1),[lt,$e]=D.useState(""),[He,Xe]=D.useState([""]),[Fn,rr]=D.useState(!1);D.useEffect(()=>{!r&&!n&&t("/admin/login")},[n,r,t]),D.useEffect(()=>{n&&e&&(async()=>{if(!(!n||!e))try{const ae=await eT(Pi(Et,"rounds",e));if(!ae.exists()){p("Round not found"),c(!1);return}const me=ae.data();s({id:ae.id,...me});const Je=Zn(hn(Et,"questions"),uh("roundId","==",e)),Re=await er(Je),We=[];Re.forEach($t=>{const mt=$t.data();We.push({id:$t.id,...mt})}),l(We)}catch(ae){console.error("Error fetching round data:",ae),p("Failed to load round data")}finally{c(!1)}})()},[n,e]);const yn=async(Q,ae)=>{var Je;const me=(Je=Q.target.files)==null?void 0:Je[0];if(me)try{const Re=await gj(me,.85);switch(ae){case"main":y(Re);const We=new FileReader;We.onloadend=()=>{Oe(We.result)},We.readAsDataURL(Re);break;case"blanked":I(Re);const $t=new FileReader;$t.onloadend=()=>{Le($t.result)},$t.readAsDataURL(Re);break;case"normal":C(Re);const mt=new FileReader;mt.onloadend=()=>{re(mt.result)},mt.readAsDataURL(Re);break;case"cover":T(Re);const be=new FileReader;be.onloadend=()=>{Ee(be.result)},be.readAsDataURL(Re);break}}catch(Re){console.error("Error processing image:",Re);const We=me;switch(ae){case"main":y(We),Oe(URL.createObjectURL(We));break;case"blanked":I(We),Le(URL.createObjectURL(We));break;case"normal":C(We),re(URL.createObjectURL(We));break;case"cover":T(We),Ee(URL.createObjectURL(We));break}}},ir=(Q,ae)=>{const me=[...w];me[Q]=ae,A(me)},qe=()=>{S(""),A(["","","",""]),U(0),y(null),I(null),C(null),T(null),Oe(null),Le(null),re(null),Ee(null),Ie(!1),$e(""),Xe([""]),N(null)},pe=async Q=>{if(Q.preventDefault(),!!e){rr(!0);try{let ae="",me="",Je="",Re="";if(F){const be=wn(En,`question-images/${Date.now()}-${F.name}`),ce={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"main",originalFormat:F.type,convertedToWebP:F.type!=="image/webp"?"true":"false"}};await ii(be,F,ce),ae=await si(be)}if(v){const be=wn(En,`question-images/blanked-${Date.now()}-${v.name}`),ce={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"blanked",originalFormat:v.type,convertedToWebP:v.type!=="image/webp"?"true":"false"}};await ii(be,v,ce),me=await si(be)}if(x){const be=wn(En,`question-images/normal-${Date.now()}-${x.name}`),ce={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"normal",originalFormat:x.type,convertedToWebP:x.type!=="image/webp"?"true":"false"}};await ii(be,x,ce),Je=await si(be)}if(k){const be=wn(En,`question-images/cover-${Date.now()}-${k.name}`),ce={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"cover",originalFormat:k.type,convertedToWebP:k.type!=="image/webp"?"true":"false"}};await ii(be,k,ce),Re=await si(be)}await Lm(hn(Et,"questions"),{text:b,options:w,correctAnswer:j,roundId:e,...ae&&{imageUrl:ae},...me&&{blankedImageUrl:me},...Je&&{normalImageUrl:Je},...Re&&{coverImageUrl:Re},...se&&{isTextInput:se},...se&&lt&&{textAnswer:lt},...se&&{alternativeAnswers:He.filter(be=>be.trim()!=="")}});const We=Zn(hn(Et,"questions"),uh("roundId","==",e)),$t=await er(We),mt=[];$t.forEach(be=>{const ce=be.data();mt.push({id:be.id,...ce})}),l(mt),E(!1),qe()}catch(ae){console.error("Error adding question:",ae),p("Failed to add question")}finally{rr(!1)}}},_e=Q=>{N(Q),S(Q.text),A([...Q.options]),U(Q.correctAnswer),Oe(Q.imageUrl||null),Le(Q.blankedImageUrl||null),re(Q.normalImageUrl||null),Ee(Q.coverImageUrl||null),Ie(Q.isTextInput||!1),$e(Q.textAnswer||""),Xe(Q.alternativeAnswers||[""]),E(!0)},ut=async Q=>{if(Q.preventDefault(),!(!R||!e)){rr(!0);try{let ae=R.imageUrl||"",me=R.blankedImageUrl||"",Je=R.normalImageUrl||"",Re=R.coverImageUrl||"";if(F){if(R.imageUrl)try{const Ve=wn(En,R.imageUrl);await da(Ve)}catch(Ve){console.error("Error deleting old main image:",Ve)}const ce=wn(En,`question-images/${Date.now()}-${F.name}`),Me={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"main",originalFormat:F.type,convertedToWebP:F.type!=="image/webp"?"true":"false"}};await ii(ce,F,Me),ae=await si(ce)}if(v){if(R.blankedImageUrl)try{const Ve=wn(En,R.blankedImageUrl);await da(Ve)}catch(Ve){console.error("Error deleting old blanked image:",Ve)}const ce=wn(En,`question-images/blanked-${Date.now()}-${v.name}`),Me={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"blanked",originalFormat:v.type,convertedToWebP:v.type!=="image/webp"?"true":"false"}};await ii(ce,v,Me),me=await si(ce)}if(x){if(R.normalImageUrl)try{const Ve=wn(En,R.normalImageUrl);await da(Ve)}catch(Ve){console.error("Error deleting old normal image:",Ve)}const ce=wn(En,`question-images/normal-${Date.now()}-${x.name}`),Me={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"normal",originalFormat:x.type,convertedToWebP:x.type!=="image/webp"?"true":"false"}};await ii(ce,x,Me),Je=await si(ce)}if(k){if(R.coverImageUrl)try{const Ve=wn(En,R.coverImageUrl);await da(Ve)}catch(Ve){console.error("Error deleting old cover image:",Ve)}const ce=wn(En,`question-images/cover-${Date.now()}-${k.name}`),Me={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"cover",originalFormat:k.type,convertedToWebP:k.type!=="image/webp"?"true":"false"}};await ii(ce,k,Me),Re=await si(ce)}const We=Pi(Et,"questions",R.id);await nT(We,{text:b,options:w,correctAnswer:j,roundId:e,...ae&&{imageUrl:ae},...me&&{blankedImageUrl:me},...Je&&{normalImageUrl:Je},...Re&&{coverImageUrl:Re},isTextInput:se,...se&&{textAnswer:lt},...se&&{alternativeAnswers:He.filter(ce=>ce.trim()!=="")}});const $t=Zn(hn(Et,"questions"),uh("roundId","==",e)),mt=await er($t),be=[];mt.forEach(ce=>{const Me=ce.data();be.push({id:ce.id,...Me})}),l(be),E(!1),qe()}catch(ae){console.error("Error updating question:",ae),p("Failed to update question")}finally{rr(!1)}}},xe=async(Q,ae)=>{if(confirm("Are you sure you want to delete this question?"))try{if(ae)try{const me=wn(En,ae);await da(me)}catch(me){console.error("Error deleting image:",me)}await Om(Pi(Et,"questions",Q)),l(o.filter(me=>me.id!==Q))}catch(me){console.error("Error deleting question:",me),p("Failed to delete question")}};return r||u?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:i.title}),d.jsx("p",{className:"text-xmas-mute",children:i.description})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(rn,{to:"/admin/rounds",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Rounds"]}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>{qe(),E(!0)},children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Question"]})]})]}),f&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:f})]}),o.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No questions in this round yet"}),d.jsx("p",{className:"mb-4",children:"Start by adding your first question!"}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>E(!0),children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Question"]})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Question"}),d.jsx("th",{children:"Options"}),d.jsx("th",{children:"Correct Answer"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:o.map(Q=>d.jsxs("tr",{children:[d.jsxs("td",{className:"max-w-xs",children:[d.jsx("div",{className:"font-medium",children:Q.text}),Q.imageUrl&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:Q.imageUrl,alt:"Question",className:"h-12 w-auto object-cover rounded"})})]}),d.jsx("td",{children:Q.isTextInput?d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-500 italic",children:"Text input question"}),Q.alternativeAnswers&&Q.alternativeAnswers.length>0&&d.jsxs("div",{className:"mt-2",children:[d.jsx("p",{className:"text-xs font-medium",children:"Alternative answers:"}),d.jsx("ul",{className:"list-disc pl-4 text-sm",children:Q.alternativeAnswers.map((ae,me)=>d.jsx("li",{children:ae},me))})]})]}):d.jsx("ol",{className:"list-alpha pl-4",children:Q.options.map((ae,me)=>d.jsx("li",{className:me===Q.correctAnswer?"font-bold text-success":"",children:ae},me))})}),d.jsx("td",{children:Q.isTextInput?Q.textAnswer:String.fromCharCode(65+Q.correctAnswer)}),d.jsx("td",{children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>_e(Q),children:d.jsx("i",{className:"fas fa-edit"})}),d.jsx("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>xe(Q.id,Q.imageUrl),children:d.jsx("i",{className:"fas fa-trash"})})]})})]},Q.id))})]})}),g&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-christmas",children:R?"Edit Question":"Add New Question"}),d.jsx("button",{className:"btn btn-sm btn-circle",onClick:()=>{E(!1),qe()},children:d.jsx("i",{className:"fas fa-times"})})]}),d.jsxs("form",{onSubmit:R?ut:pe,children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Question Text"})}),d.jsx("textarea",{className:"textarea textarea-bordered h-24",value:b,onChange:Q=>S(Q.target.value),placeholder:"Enter your question here",required:!0})]}),(i==null?void 0:i.type)===nt.PICTURE&&d.jsx("div",{className:"form-control mb-4",children:d.jsxs("label",{className:"label cursor-pointer",children:[d.jsx("span",{className:"label-text",children:"Use text input instead of multiple choice"}),d.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:se,onChange:Q=>Ie(Q.target.checked)})]})}),se&&(i==null?void 0:i.type)===nt.PICTURE?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Correct Text Answer"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:lt,onChange:Q=>$e(Q.target.value),placeholder:"Enter the correct answer",required:se})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsxs("label",{className:"label",children:[d.jsx("span",{className:"label-text",children:"Alternative Acceptable Answers"}),d.jsxs("button",{type:"button",className:"btn btn-xs btn-outline",onClick:()=>Xe([...He,""]),children:[d.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]}),d.jsx("div",{className:"space-y-2",children:He.map((Q,ae)=>d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",className:"input input-bordered flex-1",value:Q,onChange:me=>{const Je=[...He];Je[ae]=me.target.value,Xe(Je)},placeholder:`Alternative answer ${ae+1}`}),He.length>1&&d.jsx("button",{type:"button",className:"btn btn-sm btn-outline btn-error",onClick:()=>{const me=He.filter((Je,Re)=>Re!==ae);Xe(me)},children:d.jsx("i",{className:"fas fa-times"})})]},ae))}),d.jsx("p",{className:"text-xs text-xmas-mute mt-2",children:`Add alternative answers that should be accepted (e.g., "Christmas Vacation" for "National Lampoon's Christmas Vacation")`})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Options"})}),w.map((Q,ae)=>d.jsxs("div",{className:"flex items-center mb-2",children:[d.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-xmas-card border border-base-300 rounded-full mr-2",children:String.fromCharCode(65+ae)}),d.jsx("input",{type:"text",className:"input input-bordered flex-1",value:Q,onChange:me=>ir(ae,me.target.value),placeholder:`Option ${String.fromCharCode(65+ae)}`,required:!se})]},ae))]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Correct Answer"})}),d.jsx("select",{className:"select select-bordered w-full",value:j,onChange:Q=>U(Number(Q.target.value)),required:!se,children:w.map((Q,ae)=>d.jsx("option",{value:ae,children:String.fromCharCode(65+ae)},ae))})]})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Main Image (Optional)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>yn(Q,"main")}),le&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:le,alt:"Main Preview",className:"h-32 object-contain rounded"})})]}),(i==null?void 0:i.type)===nt.PICTURE&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Blanked Image (Shown during question)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>yn(Q,"blanked")}),Ke&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:Ke,alt:"Blanked Preview",className:"h-32 object-contain rounded"})})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Normal Image (Shown with answers)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>yn(Q,"normal")}),z&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:z,alt:"Normal Preview",className:"h-32 object-contain rounded"})})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Cover Image (Shown before next round)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>yn(Q,"cover")}),oe&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:oe,alt:"Cover Preview",className:"h-32 object-contain rounded"})})]})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{E(!1),qe()},children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Fn,children:Fn?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),R?"Updating...":"Adding..."]}):R?"Update Question":"Add Question"})]})]})]})})})]}):d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"bg-error bg-opacity-10 p-6 rounded-lg",children:[d.jsx("h2",{className:"text-2xl font-christmas text-error mb-4",children:"Round Not Found"}),d.jsx("p",{className:"mb-4",children:"The round you're looking for doesn't exist or has been deleted."}),d.jsx(rn,{to:"/admin/rounds",className:"btn btn-primary",children:"Back to Rounds"})]})})},vj=LA([{element:d.jsx(rj,{}),children:[{path:"/",element:d.jsx(sj,{})},{path:"/quiz",element:d.jsx(uj,{})},{path:"/admin/login",element:d.jsx(cj,{})},{path:"/admin",element:d.jsx(dj,{})},{path:"/admin/results",element:d.jsx(hj,{})},{path:"/admin/rounds",element:d.jsx(fj,{})},{path:"/admin/questions/:roundId",element:d.jsx(yj,{})}]}]);fh.createRoot(document.getElementById("root")).render(d.jsx(S_.StrictMode,{children:d.jsx(HA,{router:vj})}));

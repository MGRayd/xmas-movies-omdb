function D0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L0={exports:{}},Zd={},O0={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=Symbol.for("react.element"),h1=Symbol.for("react.portal"),f1=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),w1=Symbol.for("react.suspense"),_1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),jv=Symbol.iterator;function E1(t){return t===null||typeof t!="object"?null:(t=jv&&t[jv]||t["@@iterator"],typeof t=="function"?t:null)}var M0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V0=Object.assign,F0={};function ka(t,e,n){this.props=t,this.context=e,this.refs=F0,this.updater=n||M0}ka.prototype.isReactComponent={};ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U0(){}U0.prototype=ka.prototype;function Om(t,e,n){this.props=t,this.context=e,this.refs=F0,this.updater=n||M0}var Mm=Om.prototype=new U0;Mm.constructor=Om;V0(Mm,ka.prototype);Mm.isPureReactComponent=!0;var Dv=Array.isArray,z0=Object.prototype.hasOwnProperty,Vm={current:null},B0={key:!0,ref:!0,__self:!0,__source:!0};function $0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)z0.call(e,r)&&!B0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pu,type:t,key:s,ref:o,props:i,_owner:Vm.current}}function k1(t,e){return{$$typeof:pu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===pu}function b1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lv=/\/+/g;function Yh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b1(""+t.key):e.toString(36)}function jc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pu:case h1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Yh(o,0):r,Dv(i)?(n="",t!=null&&(n=t.replace(Lv,"$&/")+"/"),jc(i,e,n,"",function(u){return u})):i!=null&&(Fm(i)&&(i=k1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Lv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Dv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Yh(s,a);o+=jc(s,e,n,l,i)}else if(l=E1(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Yh(s,a++),o+=jc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tc(t,e,n){if(t==null)return t;var r=[],i=0;return jc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function S1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},Dc={transition:null},T1={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:Vm};function H0(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:tc,forEach:function(t,e,n){tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tc(t,function(){e++}),e},toArray:function(t){return tc(t,function(e){return e})||[]},only:function(t){if(!Fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=ka;Oe.Fragment=f1;Oe.Profiler=m1;Oe.PureComponent=Om;Oe.StrictMode=p1;Oe.Suspense=w1;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T1;Oe.act=H0;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)z0.call(e,l)&&!B0.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:pu,type:t.type,key:i,ref:s,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:y1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g1,_context:t},t.Consumer=t};Oe.createElement=$0;Oe.createFactory=function(t){var e=$0.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:v1,render:t}};Oe.isValidElement=Fm;Oe.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:S1}};Oe.memo=function(t,e){return{$$typeof:_1,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Dc.transition;Dc.transition={};try{t()}finally{Dc.transition=e}};Oe.unstable_act=H0;Oe.useCallback=function(t,e){return xn.current.useCallback(t,e)};Oe.useContext=function(t){return xn.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return xn.current.useEffect(t,e)};Oe.useId=function(){return xn.current.useId()};Oe.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return xn.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Oe.useRef=function(t){return xn.current.useRef(t)};Oe.useState=function(t){return xn.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return xn.current.useTransition()};Oe.version="18.3.1";O0.exports=Oe;var D=O0.exports;const q0=Jd(D),I1=D0({__proto__:null,default:q0},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=D,N1=Symbol.for("react.element"),A1=Symbol.for("react.fragment"),R1=Object.prototype.hasOwnProperty,P1=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j1={key:!0,ref:!0,__self:!0,__source:!0};function W0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)R1.call(e,r)&&!j1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:N1,type:t,key:s,ref:o,props:i,_owner:P1.current}}Zd.Fragment=A1;Zd.jsx=W0;Zd.jsxs=W0;L0.exports=Zd;var d=L0.exports,tp={},K0={exports:{}},Qn={},G0={exports:{}},Q0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Z){var L=W.length;W.push(Z);e:for(;0<L;){var ye=L-1>>>1,$=W[ye];if(0<i($,Z))W[ye]=Z,W[L]=$,L=ye;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Z=W[0],L=W.pop();if(L!==Z){W[0]=L;e:for(var ye=0,$=W.length,P=$>>>1;ye<P;){var le=2*(ye+1)-1,Ie=W[le],Ce=le+1,Me=W[Ce];if(0>i(Ie,L))Ce<$&&0>i(Me,Ie)?(W[ye]=Me,W[Ce]=L,ye=Ce):(W[ye]=Ie,W[le]=L,ye=le);else if(Ce<$&&0>i(Me,L))W[ye]=Me,W[Ce]=L,ye=Ce;else break e}}return Z}function i(W,Z){var L=W.sortIndex-Z.sortIndex;return L!==0?L:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,y=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var Z=n(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=W)r(u),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(u)}}function O(W){if(k=!1,C(W),!y)if(n(l)!==null)y=!0,K(V);else{var Z=n(u);Z!==null&&ce(O,Z.startTime-W)}}function V(W,Z){y=!1,k&&(k=!1,b(w),w=-1),m=!0;var L=p;try{for(C(Z),f=n(l);f!==null&&(!(f.expirationTime>Z)||W&&!T());){var ye=f.callback;if(typeof ye=="function"){f.callback=null,p=f.priorityLevel;var $=ye(f.expirationTime<=Z);Z=t.unstable_now(),typeof $=="function"?f.callback=$:f===n(l)&&r(l),C(Z)}else r(l);f=n(l)}if(f!==null)var P=!0;else{var le=n(u);le!==null&&ce(O,le.startTime-Z),P=!1}return P}finally{f=null,p=L,m=!1}}var j=!1,x=null,w=-1,E=5,v=-1;function T(){return!(t.unstable_now()-v<E)}function I(){if(x!==null){var W=t.unstable_now();v=W;var Z=!0;try{Z=x(!0,W)}finally{Z?N():(j=!1,x=null)}}else j=!1}var N;if(typeof S=="function")N=function(){S(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=I,N=function(){z.postMessage(null)}}else N=function(){R(I,0)};function K(W){x=W,j||(j=!0,N())}function ce(W,Z){w=R(function(){W(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,K(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var L=p;p=Z;try{return W()}finally{p=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var L=p;p=W;try{return Z()}finally{p=L}},t.unstable_scheduleCallback=function(W,Z,L){var ye=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ye+L:ye):L=ye,W){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=L+$,W={id:h++,callback:Z,priorityLevel:W,startTime:L,expirationTime:$,sortIndex:-1},L>ye?(W.sortIndex=L,e(u,W),n(l)===null&&W===n(u)&&(k?(b(w),w=-1):k=!0,ce(O,L-ye))):(W.sortIndex=$,e(l,W),y||m||(y=!0,K(V))),W},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(W){var Z=p;return function(){var L=p;p=Z;try{return W.apply(this,arguments)}finally{p=L}}}})(Q0);G0.exports=Q0;var D1=G0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=D,Gn=D1;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y0=new Set,Ml={};function fo(t,e){sa(t,e),sa(t+"Capture",e)}function sa(t,e){for(Ml[t]=e,t=0;t<e.length;t++)Y0.add(e[t])}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=Object.prototype.hasOwnProperty,O1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ov={},Mv={};function M1(t){return np.call(Mv,t)?!0:np.call(Ov,t)?!1:O1.test(t)?Mv[t]=!0:(Ov[t]=!0,!1)}function V1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F1(t,e,n,r){if(e===null||typeof e>"u"||V1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var Um=/[\-:]([a-z])/g;function zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Um,zm);Jt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Um,zm);Jt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Um,zm);Jt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bm(t,e,n,r){var i=Jt.hasOwnProperty(e)?Jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F1(e,n,i,r)&&(n=null),r||i===null?M1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bi=L1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nc=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),$m=Symbol.for("react.strict_mode"),rp=Symbol.for("react.profiler"),X0=Symbol.for("react.provider"),J0=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),sp=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),Z0=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function Wa(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Xh;function cl(t){if(Xh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xh=e&&e[1]||""}return`
`+Xh+t}var Jh=!1;function Zh(t,e){if(!t||Jh)return"";Jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function U1(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=Zh(t.type,!1),t;case 11:return t=Zh(t.type.render,!1),t;case 1:return t=Zh(t.type,!0),t;default:return""}}function op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Oo:return"Portal";case rp:return"Profiler";case $m:return"StrictMode";case ip:return"Suspense";case sp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J0:return(t.displayName||"Context")+".Consumer";case X0:return(t._context.displayName||"Context")+".Provider";case Hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qm:return e=t.displayName||null,e!==null?e:op(t.type)||"Memo";case Bi:e=t._payload,t=t._init;try{return op(t(e))}catch{}}return null}function z1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return op(e);case 8:return e===$m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B1(t){var e=eE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rc(t){t._valueTracker||(t._valueTracker=B1(t))}function tE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function id(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ap(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nE(t,e){e=e.checked,e!=null&&Bm(t,"checked",e,!1)}function lp(t,e){nE(t,e);var n=ds(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?up(t,e.type,n):e.hasOwnProperty("defaultValue")&&up(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function up(t,e,n){(e!=="number"||id(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dl=Array.isArray;function Go(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ds(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(dl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ds(n)}}function rE(t,e){var n=ds(e.value),r=ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ic,sE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(t){$1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wl[e]=wl[t]})});function oE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wl.hasOwnProperty(t)&&wl[t]?(""+e).trim():e+"px"}function aE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var H1=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hp(t,e){if(e){if(H1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function fp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=null;function Wm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mp=null,Qo=null,Yo=null;function $v(t){if(t=yu(t)){if(typeof mp!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=ih(e),mp(t.stateNode,t.type,e))}}function lE(t){Qo?Yo?Yo.push(t):Yo=[t]:Qo=t}function uE(){if(Qo){var t=Qo,e=Yo;if(Yo=Qo=null,$v(t),e)for(t=0;t<e.length;t++)$v(e[t])}}function cE(t,e){return t(e)}function dE(){}var ef=!1;function hE(t,e,n){if(ef)return t(e,n);ef=!0;try{return cE(t,e,n)}finally{ef=!1,(Qo!==null||Yo!==null)&&(dE(),uE())}}function Fl(t,e){var n=t.stateNode;if(n===null)return null;var r=ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var gp=!1;if(mi)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){gp=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{gp=!1}function q1(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var _l=!1,sd=null,od=!1,yp=null,W1={onError:function(t){_l=!0,sd=t}};function K1(t,e,n,r,i,s,o,a,l){_l=!1,sd=null,q1.apply(W1,arguments)}function G1(t,e,n,r,i,s,o,a,l){if(K1.apply(this,arguments),_l){if(_l){var u=sd;_l=!1,sd=null}else throw Error(ee(198));od||(od=!0,yp=u)}}function po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hv(t){if(po(t)!==t)throw Error(ee(188))}function Q1(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Hv(i),t;if(s===r)return Hv(i),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function pE(t){return t=Q1(t),t!==null?mE(t):null}function mE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mE(t);if(e!==null)return e;t=t.sibling}return null}var gE=Gn.unstable_scheduleCallback,qv=Gn.unstable_cancelCallback,Y1=Gn.unstable_shouldYield,X1=Gn.unstable_requestPaint,It=Gn.unstable_now,J1=Gn.unstable_getCurrentPriorityLevel,Km=Gn.unstable_ImmediatePriority,yE=Gn.unstable_UserBlockingPriority,ad=Gn.unstable_NormalPriority,Z1=Gn.unstable_LowPriority,vE=Gn.unstable_IdlePriority,eh=null,Vr=null;function eC(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(eh,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:rC,tC=Math.log,nC=Math.LN2;function rC(t){return t>>>=0,t===0?32:31-(tC(t)/nC|0)|0}var sc=64,oc=4194304;function hl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ld(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=hl(a):(s&=o,s!==0&&(r=hl(s)))}else o=n&~i,o!==0?r=hl(o):s!==0&&(r=hl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),i=1<<n,r|=t[n],e&=~i;return r}function iC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=iC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=sc;return sc<<=1,!(sc&4194240)&&(sc=64),t}function tf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function oC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ye=0;function _E(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xE,Qm,EE,kE,bE,wp=!1,ac=[],es=null,ts=null,ns=null,Ul=new Map,zl=new Map,Hi=[],aC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wv(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(e.pointerId)}}function Ga(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=yu(e),e!==null&&Qm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lC(t,e,n,r,i){switch(e){case"focusin":return es=Ga(es,t,e,n,r,i),!0;case"dragenter":return ts=Ga(ts,t,e,n,r,i),!0;case"mouseover":return ns=Ga(ns,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ul.set(s,Ga(Ul.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zl.set(s,Ga(zl.get(s)||null,t,e,n,r,i)),!0}return!1}function SE(t){var e=zs(t.target);if(e!==null){var n=po(e);if(n!==null){if(e=n.tag,e===13){if(e=fE(n),e!==null){t.blockedOn=e,bE(t.priority,function(){EE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_p(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pp=r,n.target.dispatchEvent(r),pp=null}else return e=yu(n),e!==null&&Qm(e),t.blockedOn=n,!1;e.shift()}return!0}function Kv(t,e,n){Lc(t)&&n.delete(e)}function uC(){wp=!1,es!==null&&Lc(es)&&(es=null),ts!==null&&Lc(ts)&&(ts=null),ns!==null&&Lc(ns)&&(ns=null),Ul.forEach(Kv),zl.forEach(Kv)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,wp||(wp=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,uC)))}function Bl(t){function e(i){return Qa(i,t)}if(0<ac.length){Qa(ac[0],t);for(var n=1;n<ac.length;n++){var r=ac[n];r.blockedOn===t&&(r.blockedOn=null)}}for(es!==null&&Qa(es,t),ts!==null&&Qa(ts,t),ns!==null&&Qa(ns,t),Ul.forEach(e),zl.forEach(e),n=0;n<Hi.length;n++)r=Hi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)SE(n),n.blockedOn===null&&Hi.shift()}var Xo=bi.ReactCurrentBatchConfig,ud=!0;function cC(t,e,n,r){var i=Ye,s=Xo.transition;Xo.transition=null;try{Ye=1,Ym(t,e,n,r)}finally{Ye=i,Xo.transition=s}}function dC(t,e,n,r){var i=Ye,s=Xo.transition;Xo.transition=null;try{Ye=4,Ym(t,e,n,r)}finally{Ye=i,Xo.transition=s}}function Ym(t,e,n,r){if(ud){var i=_p(t,e,n,r);if(i===null)hf(t,e,r,cd,n),Wv(t,r);else if(lC(i,t,e,n,r))r.stopPropagation();else if(Wv(t,r),e&4&&-1<aC.indexOf(t)){for(;i!==null;){var s=yu(i);if(s!==null&&xE(s),s=_p(t,e,n,r),s===null&&hf(t,e,r,cd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hf(t,e,r,null,n)}}var cd=null;function _p(t,e,n,r){if(cd=null,t=Wm(r),t=zs(t),t!==null)if(e=po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cd=t,null}function TE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J1()){case Km:return 1;case yE:return 4;case ad:case Z1:return 16;case vE:return 536870912;default:return 16}default:return 16}}var Yi=null,Xm=null,Oc=null;function IE(){if(Oc)return Oc;var t,e=Xm,n=e.length,r,i="value"in Yi?Yi.value:Yi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Oc=i.slice(t,1<r?1-r:void 0)}function Mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lc(){return!0}function Gv(){return!1}function Yn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lc:Gv,this.isPropagationStopped=Gv,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),e}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jm=Yn(ba),gu=yt({},ba,{view:0,detail:0}),hC=Yn(gu),nf,rf,Ya,th=yt({},gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?(nf=t.screenX-Ya.screenX,rf=t.screenY-Ya.screenY):rf=nf=0,Ya=t),nf)},movementY:function(t){return"movementY"in t?t.movementY:rf}}),Qv=Yn(th),fC=yt({},th,{dataTransfer:0}),pC=Yn(fC),mC=yt({},gu,{relatedTarget:0}),sf=Yn(mC),gC=yt({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),yC=Yn(gC),vC=yt({},ba,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wC=Yn(vC),_C=yt({},ba,{data:0}),Yv=Yn(_C),xC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kC[t])?!!e[t]:!1}function Zm(){return bC}var SC=yt({},gu,{key:function(t){if(t.key){var e=xC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zm,charCode:function(t){return t.type==="keypress"?Mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TC=Yn(SC),IC=yt({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=Yn(IC),CC=yt({},gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zm}),NC=Yn(CC),AC=yt({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),RC=Yn(AC),PC=yt({},th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jC=Yn(PC),DC=[9,13,27,32],eg=mi&&"CompositionEvent"in window,xl=null;mi&&"documentMode"in document&&(xl=document.documentMode);var LC=mi&&"TextEvent"in window&&!xl,CE=mi&&(!eg||xl&&8<xl&&11>=xl),Jv=" ",Zv=!1;function NE(t,e){switch(t){case"keyup":return DC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function OC(t,e){switch(t){case"compositionend":return AE(e);case"keypress":return e.which!==32?null:(Zv=!0,Jv);case"textInput":return t=e.data,t===Jv&&Zv?null:t;default:return null}}function MC(t,e){if(Vo)return t==="compositionend"||!eg&&NE(t,e)?(t=IE(),Oc=Xm=Yi=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CE&&e.locale!=="ko"?null:e.data;default:return null}}var VC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ew(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VC[t.type]:e==="textarea"}function RE(t,e,n,r){lE(r),e=dd(e,"onChange"),0<e.length&&(n=new Jm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var El=null,$l=null;function FC(t){BE(t,0)}function nh(t){var e=zo(t);if(tE(e))return t}function UC(t,e){if(t==="change")return e}var PE=!1;if(mi){var of;if(mi){var af="oninput"in document;if(!af){var tw=document.createElement("div");tw.setAttribute("oninput","return;"),af=typeof tw.oninput=="function"}of=af}else of=!1;PE=of&&(!document.documentMode||9<document.documentMode)}function nw(){El&&(El.detachEvent("onpropertychange",jE),$l=El=null)}function jE(t){if(t.propertyName==="value"&&nh($l)){var e=[];RE(e,$l,t,Wm(t)),hE(FC,e)}}function zC(t,e,n){t==="focusin"?(nw(),El=e,$l=n,El.attachEvent("onpropertychange",jE)):t==="focusout"&&nw()}function BC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nh($l)}function $C(t,e){if(t==="click")return nh(e)}function HC(t,e){if(t==="input"||t==="change")return nh(e)}function qC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sr=typeof Object.is=="function"?Object.is:qC;function Hl(t,e){if(Sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!np.call(e,i)||!Sr(t[i],e[i]))return!1}return!0}function rw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=rw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rw(n)}}function DE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LE(){for(var t=window,e=id();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=id(t.document)}return e}function tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WC(t){var e=LE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DE(n.ownerDocument.documentElement,n)){if(r!==null&&tg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=iw(n,s);var o=iw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KC=mi&&"documentMode"in document&&11>=document.documentMode,Fo=null,xp=null,kl=null,Ep=!1;function sw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ep||Fo==null||Fo!==id(r)||(r=Fo,"selectionStart"in r&&tg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Hl(kl,r)||(kl=r,r=dd(xp,"onSelect"),0<r.length&&(e=new Jm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fo)))}function uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uo={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},lf={},OE={};mi&&(OE=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function rh(t){if(lf[t])return lf[t];if(!Uo[t])return t;var e=Uo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OE)return lf[t]=e[n];return t}var ME=rh("animationend"),VE=rh("animationiteration"),FE=rh("animationstart"),UE=rh("transitionend"),zE=new Map,ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(t,e){zE.set(t,e),fo(e,[t])}for(var uf=0;uf<ow.length;uf++){var cf=ow[uf],GC=cf.toLowerCase(),QC=cf[0].toUpperCase()+cf.slice(1);ys(GC,"on"+QC)}ys(ME,"onAnimationEnd");ys(VE,"onAnimationIteration");ys(FE,"onAnimationStart");ys("dblclick","onDoubleClick");ys("focusin","onFocus");ys("focusout","onBlur");ys(UE,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function aw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G1(r,e,void 0,t),t.currentTarget=null}function BE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;aw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;aw(i,a,u),s=l}}}if(od)throw t=yp,od=!1,yp=null,t}function at(t,e){var n=e[Ip];n===void 0&&(n=e[Ip]=new Set);var r=t+"__bubble";n.has(r)||($E(e,t,2,!1),n.add(r))}function df(t,e,n){var r=0;e&&(r|=4),$E(n,t,r,e)}var cc="_reactListening"+Math.random().toString(36).slice(2);function ql(t){if(!t[cc]){t[cc]=!0,Y0.forEach(function(n){n!=="selectionchange"&&(YC.has(n)||df(n,!1,t),df(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cc]||(e[cc]=!0,df("selectionchange",!1,e))}}function $E(t,e,n,r){switch(TE(e)){case 1:var i=cC;break;case 4:i=dC;break;default:i=Ym}n=i.bind(null,e,n,t),i=void 0,!gp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hE(function(){var u=s,h=Wm(n),f=[];e:{var p=zE.get(t);if(p!==void 0){var m=Jm,y=t;switch(t){case"keypress":if(Mc(n)===0)break e;case"keydown":case"keyup":m=TC;break;case"focusin":y="focus",m=sf;break;case"focusout":y="blur",m=sf;break;case"beforeblur":case"afterblur":m=sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=pC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=NC;break;case ME:case VE:case FE:m=yC;break;case UE:m=RC;break;case"scroll":m=hC;break;case"wheel":m=jC;break;case"copy":case"cut":case"paste":m=wC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xv}var k=(e&4)!==0,R=!k&&t==="scroll",b=k?p!==null?p+"Capture":null:p;k=[];for(var S=u,C;S!==null;){C=S;var O=C.stateNode;if(C.tag===5&&O!==null&&(C=O,b!==null&&(O=Fl(S,b),O!=null&&k.push(Wl(S,O,C)))),R)break;S=S.return}0<k.length&&(p=new m(p,y,null,n,h),f.push({event:p,listeners:k}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==pp&&(y=n.relatedTarget||n.fromElement)&&(zs(y)||y[gi]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?zs(y):null,y!==null&&(R=po(y),y!==R||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(k=Qv,O="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(k=Xv,O="onPointerLeave",b="onPointerEnter",S="pointer"),R=m==null?p:zo(m),C=y==null?p:zo(y),p=new k(O,S+"leave",m,n,h),p.target=R,p.relatedTarget=C,O=null,zs(h)===u&&(k=new k(b,S+"enter",y,n,h),k.target=C,k.relatedTarget=R,O=k),R=O,m&&y)t:{for(k=m,b=y,S=0,C=k;C;C=Co(C))S++;for(C=0,O=b;O;O=Co(O))C++;for(;0<S-C;)k=Co(k),S--;for(;0<C-S;)b=Co(b),C--;for(;S--;){if(k===b||b!==null&&k===b.alternate)break t;k=Co(k),b=Co(b)}k=null}else k=null;m!==null&&lw(f,p,m,k,!1),y!==null&&R!==null&&lw(f,R,y,k,!0)}}e:{if(p=u?zo(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var V=UC;else if(ew(p))if(PE)V=HC;else{V=BC;var j=zC}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=$C);if(V&&(V=V(t,u))){RE(f,V,n,h);break e}j&&j(t,p,u),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&up(p,"number",p.value)}switch(j=u?zo(u):window,t){case"focusin":(ew(j)||j.contentEditable==="true")&&(Fo=j,xp=u,kl=null);break;case"focusout":kl=xp=Fo=null;break;case"mousedown":Ep=!0;break;case"contextmenu":case"mouseup":case"dragend":Ep=!1,sw(f,n,h);break;case"selectionchange":if(KC)break;case"keydown":case"keyup":sw(f,n,h)}var x;if(eg)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Vo?NE(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(CE&&n.locale!=="ko"&&(Vo||w!=="onCompositionStart"?w==="onCompositionEnd"&&Vo&&(x=IE()):(Yi=h,Xm="value"in Yi?Yi.value:Yi.textContent,Vo=!0)),j=dd(u,w),0<j.length&&(w=new Yv(w,t,null,n,h),f.push({event:w,listeners:j}),x?w.data=x:(x=AE(n),x!==null&&(w.data=x)))),(x=LC?OC(t,n):MC(t,n))&&(u=dd(u,"onBeforeInput"),0<u.length&&(h=new Yv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=x))}BE(f,e)})}function Wl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fl(t,n),s!=null&&r.unshift(Wl(t,s,i)),s=Fl(t,e),s!=null&&r.push(Wl(t,s,i))),t=t.return}return r}function Co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Fl(n,s),l!=null&&o.unshift(Wl(n,l,a))):i||(l=Fl(n,s),l!=null&&o.push(Wl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XC=/\r\n?/g,JC=/\u0000|\uFFFD/g;function uw(t){return(typeof t=="string"?t:""+t).replace(XC,`
`).replace(JC,"")}function dc(t,e,n){if(e=uw(e),uw(t)!==e&&n)throw Error(ee(425))}function hd(){}var kp=null,bp=null;function Sp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tp=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,eN=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(t){return cw.resolve(null).then(t).catch(tN)}:Tp;function tN(t){setTimeout(function(){throw t})}function ff(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bl(e)}function rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),Or="__reactFiber$"+Sa,Kl="__reactProps$"+Sa,gi="__reactContainer$"+Sa,Ip="__reactEvents$"+Sa,nN="__reactListeners$"+Sa,rN="__reactHandles$"+Sa;function zs(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gi]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dw(t);t!==null;){if(n=t[Or])return n;t=dw(t)}return e}t=n,n=t.parentNode}return null}function yu(t){return t=t[Or]||t[gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function ih(t){return t[Kl]||null}var Cp=[],Bo=-1;function vs(t){return{current:t}}function ct(t){0>Bo||(t.current=Cp[Bo],Cp[Bo]=null,Bo--)}function rt(t,e){Bo++,Cp[Bo]=t.current,t.current=e}var hs={},dn=vs(hs),Nn=vs(!1),Js=hs;function oa(t,e){var n=t.type.contextTypes;if(!n)return hs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function An(t){return t=t.childContextTypes,t!=null}function fd(){ct(Nn),ct(dn)}function hw(t,e,n){if(dn.current!==hs)throw Error(ee(168));rt(dn,e),rt(Nn,n)}function HE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,z1(t)||"Unknown",i));return yt({},n,r)}function pd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,Js=dn.current,rt(dn,t),rt(Nn,Nn.current),!0}function fw(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=HE(t,e,Js),r.__reactInternalMemoizedMergedChildContext=t,ct(Nn),ct(dn),rt(dn,t)):ct(Nn),rt(Nn,n)}var ii=null,sh=!1,pf=!1;function qE(t){ii===null?ii=[t]:ii.push(t)}function iN(t){sh=!0,qE(t)}function ws(){if(!pf&&ii!==null){pf=!0;var t=0,e=Ye;try{var n=ii;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ii=null,sh=!1}catch(i){throw ii!==null&&(ii=ii.slice(t+1)),gE(Km,ws),i}finally{Ye=e,pf=!1}}return null}var $o=[],Ho=0,md=null,gd=0,er=[],tr=0,Zs=null,oi=1,ai="";function Ls(t,e){$o[Ho++]=gd,$o[Ho++]=md,md=t,gd=e}function WE(t,e,n){er[tr++]=oi,er[tr++]=ai,er[tr++]=Zs,Zs=t;var r=oi;t=ai;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var s=32-wr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,oi=1<<32-wr(e)+i|n<<i|r,ai=s+t}else oi=1<<s|n<<i|r,ai=t}function ng(t){t.return!==null&&(Ls(t,1),WE(t,1,0))}function rg(t){for(;t===md;)md=$o[--Ho],$o[Ho]=null,gd=$o[--Ho],$o[Ho]=null;for(;t===Zs;)Zs=er[--tr],er[tr]=null,ai=er[--tr],er[tr]=null,oi=er[--tr],er[tr]=null}var Wn=null,$n=null,pt=!1,gr=null;function KE(t,e){var n=rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,$n=rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zs!==null?{id:oi,overflow:ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wn=t,$n=null,!0):!1;default:return!1}}function Np(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ap(t){if(pt){var e=$n;if(e){var n=e;if(!pw(t,e)){if(Np(t))throw Error(ee(418));e=rs(n.nextSibling);var r=Wn;e&&pw(t,e)?KE(r,n):(t.flags=t.flags&-4097|2,pt=!1,Wn=t)}}else{if(Np(t))throw Error(ee(418));t.flags=t.flags&-4097|2,pt=!1,Wn=t}}}function mw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function hc(t){if(t!==Wn)return!1;if(!pt)return mw(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sp(t.type,t.memoizedProps)),e&&(e=$n)){if(Np(t))throw GE(),Error(ee(418));for(;e;)KE(t,e),e=rs(e.nextSibling)}if(mw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$n=rs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=Wn?rs(t.stateNode.nextSibling):null;return!0}function GE(){for(var t=$n;t;)t=rs(t.nextSibling)}function aa(){$n=Wn=null,pt=!1}function ig(t){gr===null?gr=[t]:gr.push(t)}var sN=bi.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function fc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gw(t){var e=t._init;return e(t._payload)}function QE(t){function e(b,S){if(t){var C=b.deletions;C===null?(b.deletions=[S],b.flags|=16):C.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=as(b,S),b.index=0,b.sibling=null,b}function s(b,S,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<S?(b.flags|=2,S):C):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,S,C,O){return S===null||S.tag!==6?(S=xf(C,b.mode,O),S.return=b,S):(S=i(S,C),S.return=b,S)}function l(b,S,C,O){var V=C.type;return V===Mo?h(b,S,C.props.children,O,C.key):S!==null&&(S.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bi&&gw(V)===S.type)?(O=i(S,C.props),O.ref=Xa(b,S,C),O.return=b,O):(O=Hc(C.type,C.key,C.props,null,b.mode,O),O.ref=Xa(b,S,C),O.return=b,O)}function u(b,S,C,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Ef(C,b.mode,O),S.return=b,S):(S=i(S,C.children||[]),S.return=b,S)}function h(b,S,C,O,V){return S===null||S.tag!==7?(S=Gs(C,b.mode,O,V),S.return=b,S):(S=i(S,C),S.return=b,S)}function f(b,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=xf(""+S,b.mode,C),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nc:return C=Hc(S.type,S.key,S.props,null,b.mode,C),C.ref=Xa(b,null,S),C.return=b,C;case Oo:return S=Ef(S,b.mode,C),S.return=b,S;case Bi:var O=S._init;return f(b,O(S._payload),C)}if(dl(S)||Wa(S))return S=Gs(S,b.mode,C,null),S.return=b,S;fc(b,S)}return null}function p(b,S,C,O){var V=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return V!==null?null:a(b,S,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nc:return C.key===V?l(b,S,C,O):null;case Oo:return C.key===V?u(b,S,C,O):null;case Bi:return V=C._init,p(b,S,V(C._payload),O)}if(dl(C)||Wa(C))return V!==null?null:h(b,S,C,O,null);fc(b,C)}return null}function m(b,S,C,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(C)||null,a(S,b,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case nc:return b=b.get(O.key===null?C:O.key)||null,l(S,b,O,V);case Oo:return b=b.get(O.key===null?C:O.key)||null,u(S,b,O,V);case Bi:var j=O._init;return m(b,S,C,j(O._payload),V)}if(dl(O)||Wa(O))return b=b.get(C)||null,h(S,b,O,V,null);fc(S,O)}return null}function y(b,S,C,O){for(var V=null,j=null,x=S,w=S=0,E=null;x!==null&&w<C.length;w++){x.index>w?(E=x,x=null):E=x.sibling;var v=p(b,x,C[w],O);if(v===null){x===null&&(x=E);break}t&&x&&v.alternate===null&&e(b,x),S=s(v,S,w),j===null?V=v:j.sibling=v,j=v,x=E}if(w===C.length)return n(b,x),pt&&Ls(b,w),V;if(x===null){for(;w<C.length;w++)x=f(b,C[w],O),x!==null&&(S=s(x,S,w),j===null?V=x:j.sibling=x,j=x);return pt&&Ls(b,w),V}for(x=r(b,x);w<C.length;w++)E=m(x,b,w,C[w],O),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?w:E.key),S=s(E,S,w),j===null?V=E:j.sibling=E,j=E);return t&&x.forEach(function(T){return e(b,T)}),pt&&Ls(b,w),V}function k(b,S,C,O){var V=Wa(C);if(typeof V!="function")throw Error(ee(150));if(C=V.call(C),C==null)throw Error(ee(151));for(var j=V=null,x=S,w=S=0,E=null,v=C.next();x!==null&&!v.done;w++,v=C.next()){x.index>w?(E=x,x=null):E=x.sibling;var T=p(b,x,v.value,O);if(T===null){x===null&&(x=E);break}t&&x&&T.alternate===null&&e(b,x),S=s(T,S,w),j===null?V=T:j.sibling=T,j=T,x=E}if(v.done)return n(b,x),pt&&Ls(b,w),V;if(x===null){for(;!v.done;w++,v=C.next())v=f(b,v.value,O),v!==null&&(S=s(v,S,w),j===null?V=v:j.sibling=v,j=v);return pt&&Ls(b,w),V}for(x=r(b,x);!v.done;w++,v=C.next())v=m(x,b,w,v.value,O),v!==null&&(t&&v.alternate!==null&&x.delete(v.key===null?w:v.key),S=s(v,S,w),j===null?V=v:j.sibling=v,j=v);return t&&x.forEach(function(I){return e(b,I)}),pt&&Ls(b,w),V}function R(b,S,C,O){if(typeof C=="object"&&C!==null&&C.type===Mo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case nc:e:{for(var V=C.key,j=S;j!==null;){if(j.key===V){if(V=C.type,V===Mo){if(j.tag===7){n(b,j.sibling),S=i(j,C.props.children),S.return=b,b=S;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bi&&gw(V)===j.type){n(b,j.sibling),S=i(j,C.props),S.ref=Xa(b,j,C),S.return=b,b=S;break e}n(b,j);break}else e(b,j);j=j.sibling}C.type===Mo?(S=Gs(C.props.children,b.mode,O,C.key),S.return=b,b=S):(O=Hc(C.type,C.key,C.props,null,b.mode,O),O.ref=Xa(b,S,C),O.return=b,b=O)}return o(b);case Oo:e:{for(j=C.key;S!==null;){if(S.key===j)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(b,S.sibling),S=i(S,C.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=Ef(C,b.mode,O),S.return=b,b=S}return o(b);case Bi:return j=C._init,R(b,S,j(C._payload),O)}if(dl(C))return y(b,S,C,O);if(Wa(C))return k(b,S,C,O);fc(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(b,S.sibling),S=i(S,C),S.return=b,b=S):(n(b,S),S=xf(C,b.mode,O),S.return=b,b=S),o(b)):n(b,S)}return R}var la=QE(!0),YE=QE(!1),yd=vs(null),vd=null,qo=null,sg=null;function og(){sg=qo=vd=null}function ag(t){var e=yd.current;ct(yd),t._currentValue=e}function Rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jo(t,e){vd=t,sg=qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Cn=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(sg!==t)if(t={context:t,memoizedValue:e,next:null},qo===null){if(vd===null)throw Error(ee(308));qo=t,vd.dependencies={lanes:0,firstContext:t}}else qo=qo.next=t;return e}var Bs=null;function lg(t){Bs===null?Bs=[t]:Bs.push(t)}function XE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,lg(e)):(n.next=i.next,i.next=n),e.interleaved=n,yi(t,r)}function yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $i=!1;function ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yi(t,n)}return i=r.interleaved,i===null?(e.next=e,lg(r)):(e.next=i.next,i.next=e),r.interleaved=e,yi(t,n)}function Vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gm(t,n)}}function yw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wd(t,e,n,r){var i=t.updateQueue;$i=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,k=a;switch(p=e,m=n,k.tag){case 1:if(y=k.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=k.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=yt({},f,p);break e;case 2:$i=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);to|=o,t.lanes=o,t.memoizedState=f}}function vw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var vu={},Fr=vs(vu),Gl=vs(vu),Ql=vs(vu);function $s(t){if(t===vu)throw Error(ee(174));return t}function cg(t,e){switch(rt(Ql,e),rt(Gl,t),rt(Fr,vu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dp(e,t)}ct(Fr),rt(Fr,e)}function ua(){ct(Fr),ct(Gl),ct(Ql)}function ZE(t){$s(Ql.current);var e=$s(Fr.current),n=dp(e,t.type);e!==n&&(rt(Gl,t),rt(Fr,n))}function dg(t){Gl.current===t&&(ct(Fr),ct(Gl))}var mt=vs(0);function _d(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mf=[];function hg(){for(var t=0;t<mf.length;t++)mf[t]._workInProgressVersionPrimary=null;mf.length=0}var Fc=bi.ReactCurrentDispatcher,gf=bi.ReactCurrentBatchConfig,eo=0,gt=null,Lt=null,zt=null,xd=!1,bl=!1,Yl=0,oN=0;function rn(){throw Error(ee(321))}function fg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sr(t[n],e[n]))return!1;return!0}function pg(t,e,n,r,i,s){if(eo=s,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fc.current=t===null||t.memoizedState===null?cN:dN,t=n(r,i),bl){s=0;do{if(bl=!1,Yl=0,25<=s)throw Error(ee(301));s+=1,zt=Lt=null,e.updateQueue=null,Fc.current=hN,t=n(r,i)}while(bl)}if(Fc.current=Ed,e=Lt!==null&&Lt.next!==null,eo=0,zt=Lt=gt=null,xd=!1,e)throw Error(ee(300));return t}function mg(){var t=Yl!==0;return Yl=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?gt.memoizedState=zt=t:zt=zt.next=t,zt}function ar(){if(Lt===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=zt===null?gt.memoizedState:zt.next;if(e!==null)zt=e,Lt=t;else{if(t===null)throw Error(ee(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},zt===null?gt.memoizedState=zt=t:zt=zt.next=t}return zt}function Xl(t,e){return typeof e=="function"?e(t):e}function yf(t){var e=ar(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((eo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,gt.lanes|=h,to|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Sr(r,e.memoizedState)||(Cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gt.lanes|=s,to|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vf(t){var e=ar(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sr(s,e.memoizedState)||(Cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ek(){}function tk(t,e){var n=gt,r=ar(),i=e(),s=!Sr(r.memoizedState,i);if(s&&(r.memoizedState=i,Cn=!0),r=r.queue,gg(ik.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Jl(9,rk.bind(null,n,r,i,e),void 0,null),Bt===null)throw Error(ee(349));eo&30||nk(n,e,i)}return i}function nk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rk(t,e,n,r){e.value=n,e.getSnapshot=r,sk(e)&&ok(t)}function ik(t,e,n){return n(function(){sk(e)&&ok(t)})}function sk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sr(t,n)}catch{return!0}}function ok(t){var e=yi(t,1);e!==null&&_r(e,t,1,-1)}function ww(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:t},e.queue=t,t=t.dispatch=uN.bind(null,gt,t),[e.memoizedState,t]}function Jl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ak(){return ar().memoizedState}function Uc(t,e,n,r){var i=Dr();gt.flags|=t,i.memoizedState=Jl(1|e,n,void 0,r===void 0?null:r)}function oh(t,e,n,r){var i=ar();r=r===void 0?null:r;var s=void 0;if(Lt!==null){var o=Lt.memoizedState;if(s=o.destroy,r!==null&&fg(r,o.deps)){i.memoizedState=Jl(e,n,s,r);return}}gt.flags|=t,i.memoizedState=Jl(1|e,n,s,r)}function _w(t,e){return Uc(8390656,8,t,e)}function gg(t,e){return oh(2048,8,t,e)}function lk(t,e){return oh(4,2,t,e)}function uk(t,e){return oh(4,4,t,e)}function ck(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dk(t,e,n){return n=n!=null?n.concat([t]):null,oh(4,4,ck.bind(null,e,t),n)}function yg(){}function hk(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fk(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pk(t,e,n){return eo&21?(Sr(n,e)||(n=wE(),gt.lanes|=n,to|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Cn=!0),t.memoizedState=n)}function aN(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=gf.transition;gf.transition={};try{t(!1),e()}finally{Ye=n,gf.transition=r}}function mk(){return ar().memoizedState}function lN(t,e,n){var r=os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gk(t))yk(e,n);else if(n=XE(t,e,n,r),n!==null){var i=wn();_r(n,t,r,i),vk(n,e,r)}}function uN(t,e,n){var r=os(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gk(t))yk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Sr(a,o)){var l=e.interleaved;l===null?(i.next=i,lg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=XE(t,e,i,r),n!==null&&(i=wn(),_r(n,t,r,i),vk(n,e,r))}}function gk(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function yk(t,e){bl=xd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gm(t,n)}}var Ed={readContext:or,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},cN={readContext:or,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:_w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4194308,4,ck.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uc(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lN.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:ww,useDebugValue:yg,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=ww(!1),e=t[0];return t=aN.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,i=Dr();if(pt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Bt===null)throw Error(ee(349));eo&30||nk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_w(ik.bind(null,r,s,t),[t]),r.flags|=2048,Jl(9,rk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dr(),e=Bt.identifierPrefix;if(pt){var n=ai,r=oi;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dN={readContext:or,useCallback:hk,useContext:or,useEffect:gg,useImperativeHandle:dk,useInsertionEffect:lk,useLayoutEffect:uk,useMemo:fk,useReducer:yf,useRef:ak,useState:function(){return yf(Xl)},useDebugValue:yg,useDeferredValue:function(t){var e=ar();return pk(e,Lt.memoizedState,t)},useTransition:function(){var t=yf(Xl)[0],e=ar().memoizedState;return[t,e]},useMutableSource:ek,useSyncExternalStore:tk,useId:mk,unstable_isNewReconciler:!1},hN={readContext:or,useCallback:hk,useContext:or,useEffect:gg,useImperativeHandle:dk,useInsertionEffect:lk,useLayoutEffect:uk,useMemo:fk,useReducer:vf,useRef:ak,useState:function(){return vf(Xl)},useDebugValue:yg,useDeferredValue:function(t){var e=ar();return Lt===null?e.memoizedState=t:pk(e,Lt.memoizedState,t)},useTransition:function(){var t=vf(Xl)[0],e=ar().memoizedState;return[t,e]},useMutableSource:ek,useSyncExternalStore:tk,useId:mk,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ah={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wn(),i=os(t),s=hi(r,i);s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(_r(e,t,i,r),Vc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wn(),i=os(t),s=hi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(_r(e,t,i,r),Vc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wn(),r=os(t),i=hi(n,r);i.tag=2,e!=null&&(i.callback=e),e=is(t,i,r),e!==null&&(_r(e,t,r,n),Vc(e,t,r))}};function xw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hl(n,r)||!Hl(i,s):!0}function wk(t,e,n){var r=!1,i=hs,s=e.contextType;return typeof s=="object"&&s!==null?s=or(s):(i=An(e)?Js:dn.current,r=e.contextTypes,s=(r=r!=null)?oa(t,i):hs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ew(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ah.enqueueReplaceState(e,e.state,null)}function jp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ug(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=or(s):(s=An(e)?Js:dn.current,i.context=oa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Pp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ah.enqueueReplaceState(i,i.state,null),wd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e){try{var n="",r=e;do n+=U1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fN=typeof WeakMap=="function"?WeakMap:Map;function _k(t,e,n){n=hi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bd||(bd=!0,Hp=r),Dp(t,e)},n}function xk(t,e,n){n=hi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Dp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dp(t,e),typeof r!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=IN.bind(null,t,e,n),e.then(t,t))}function bw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hi(-1,1),e.tag=2,is(n,e,1))),n.lanes|=1),t)}var pN=bi.ReactCurrentOwner,Cn=!1;function yn(t,e,n,r){e.child=t===null?YE(e,null,n,r):la(e,t.child,n,r)}function Tw(t,e,n,r,i){n=n.render;var s=e.ref;return Jo(e,i),r=pg(t,e,n,r,s,i),n=mg(),t!==null&&!Cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vi(t,e,i)):(pt&&n&&ng(e),e.flags|=1,yn(t,e,r,i),e.child)}function Iw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Sg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ek(t,e,s,r,i)):(t=Hc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Hl,n(o,r)&&t.ref===e.ref)return vi(t,e,i)}return e.flags|=1,t=as(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ek(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Hl(s,r)&&t.ref===e.ref)if(Cn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Cn=!0);else return e.lanes=t.lanes,vi(t,e,i)}return Lp(t,e,n,r,i)}function kk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ko,zn),zn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Ko,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,rt(Ko,zn),zn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,rt(Ko,zn),zn|=r;return yn(t,e,i,n),e.child}function bk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lp(t,e,n,r,i){var s=An(n)?Js:dn.current;return s=oa(e,s),Jo(e,i),n=pg(t,e,n,r,s,i),r=mg(),t!==null&&!Cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vi(t,e,i)):(pt&&r&&ng(e),e.flags|=1,yn(t,e,n,i),e.child)}function Cw(t,e,n,r,i){if(An(n)){var s=!0;pd(e)}else s=!1;if(Jo(e,i),e.stateNode===null)zc(t,e),wk(e,n,r),jp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=or(u):(u=An(n)?Js:dn.current,u=oa(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Ew(e,o,r,u),$i=!1;var p=e.memoizedState;o.state=p,wd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Nn.current||$i?(typeof h=="function"&&(Pp(e,n,h,r),l=e.memoizedState),(a=$i||xw(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,JE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:fr(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=or(l):(l=An(n)?Js:dn.current,l=oa(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Ew(e,o,r,l),$i=!1,p=e.memoizedState,o.state=p,wd(e,r,o,i);var y=e.memoizedState;a!==f||p!==y||Nn.current||$i?(typeof m=="function"&&(Pp(e,n,m,r),y=e.memoizedState),(u=$i||xw(e,n,u,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Op(t,e,n,r,s,i)}function Op(t,e,n,r,i,s){bk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fw(e,n,!1),vi(t,e,s);r=e.stateNode,pN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=la(e,t.child,null,s),e.child=la(e,null,a,s)):yn(t,e,a,s),e.memoizedState=r.state,i&&fw(e,n,!0),e.child}function Sk(t){var e=t.stateNode;e.pendingContext?hw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hw(t,e.context,!1),cg(t,e.containerInfo)}function Nw(t,e,n,r,i){return aa(),ig(i),e.flags|=256,yn(t,e,n,r),e.child}var Mp={dehydrated:null,treeContext:null,retryLane:0};function Vp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tk(t,e,n){var r=e.pendingProps,i=mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rt(mt,i&1),t===null)return Ap(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ch(o,r,0,null),t=Gs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vp(n),e.memoizedState=Mp,t):vg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=as(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=as(a,s):(s=Gs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Vp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Mp,r}return s=t.child,t=s.sibling,r=as(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vg(t,e){return e=ch({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pc(t,e,n,r){return r!==null&&ig(r),la(e,t.child,null,n),t=vg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wf(Error(ee(422))),pc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ch({mode:"visible",children:r.children},i,0,null),s=Gs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&la(e,t.child,null,o),e.child.memoizedState=Vp(o),e.memoizedState=Mp,s);if(!(e.mode&1))return pc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=wf(s,r,void 0),pc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Cn||a){if(r=Bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yi(t,i),_r(r,t,i,-1))}return bg(),r=wf(Error(ee(421))),pc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=CN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$n=rs(i.nextSibling),Wn=e,pt=!0,gr=null,t!==null&&(er[tr++]=oi,er[tr++]=ai,er[tr++]=Zs,oi=t.id,ai=t.overflow,Zs=e),e=vg(e,r.children),e.flags|=4096,e)}function Aw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rp(t.return,e,n)}function _f(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ik(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,n,e);else if(t.tag===19)Aw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(mt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_d(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_f(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_d(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_f(e,!0,n,null,s);break;case"together":_f(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=as(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=as(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gN(t,e,n){switch(e.tag){case 3:Sk(e),aa();break;case 5:ZE(e);break;case 1:An(e.type)&&pd(e);break;case 4:cg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rt(yd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?Tk(t,e,n):(rt(mt,mt.current&1),t=vi(t,e,n),t!==null?t.sibling:null);rt(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ik(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rt(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,kk(t,e,n)}return vi(t,e,n)}var Ck,Fp,Nk,Ak;Ck=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fp=function(){};Nk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$s(Fr.current);var s=null;switch(n){case"input":i=ap(t,i),r=ap(t,r),s=[];break;case"select":i=yt({},i,{value:void 0}),r=yt({},r,{value:void 0}),s=[];break;case"textarea":i=cp(t,i),r=cp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hd)}hp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ml.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ml.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&at("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Ak=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ja(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yN(t,e,n){var r=e.pendingProps;switch(rg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return An(e.type)&&fd(),sn(e),null;case 3:return r=e.stateNode,ua(),ct(Nn),ct(dn),hg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Kp(gr),gr=null))),Fp(t,e),sn(e),null;case 5:dg(e);var i=$s(Ql.current);if(n=e.type,t!==null&&e.stateNode!=null)Nk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return sn(e),null}if(t=$s(Fr.current),hc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Or]=e,r[Kl]=s,t=(e.mode&1)!==0,n){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(i=0;i<fl.length;i++)at(fl[i],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":Fv(r,s),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},at("invalid",r);break;case"textarea":zv(r,s),at("invalid",r)}hp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),i=["children",""+a]):Ml.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&at("scroll",r)}switch(n){case"input":rc(r),Uv(r,s,!0);break;case"textarea":rc(r),Bv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Or]=e,t[Kl]=r,Ck(t,e,!1,!1),e.stateNode=t;e:{switch(o=fp(n,r),n){case"dialog":at("cancel",t),at("close",t),i=r;break;case"iframe":case"object":case"embed":at("load",t),i=r;break;case"video":case"audio":for(i=0;i<fl.length;i++)at(fl[i],t);i=r;break;case"source":at("error",t),i=r;break;case"img":case"image":case"link":at("error",t),at("load",t),i=r;break;case"details":at("toggle",t),i=r;break;case"input":Fv(t,r),i=ap(t,r),at("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yt({},r,{value:void 0}),at("invalid",t);break;case"textarea":zv(t,r),i=cp(t,r),at("invalid",t);break;default:i=r}hp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vl(t,l):typeof l=="number"&&Vl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ml.hasOwnProperty(s)?l!=null&&s==="onScroll"&&at("scroll",t):l!=null&&Bm(t,s,l,o))}switch(n){case"input":rc(t),Uv(t,r,!1);break;case"textarea":rc(t),Bv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ds(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Go(t,!!r.multiple,s,!1):r.defaultValue!=null&&Go(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)Ak(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=$s(Ql.current),$s(Fr.current),hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Or]=e,(s=r.nodeValue!==n)&&(t=Wn,t!==null))switch(t.tag){case 3:dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=e,e.stateNode=r}return sn(e),null;case 13:if(ct(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&$n!==null&&e.mode&1&&!(e.flags&128))GE(),aa(),e.flags|=98560,s=!1;else if(s=hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[Or]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),s=!1}else gr!==null&&(Kp(gr),gr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Ot===0&&(Ot=3):bg())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return ua(),Fp(t,e),t===null&&ql(e.stateNode.containerInfo),sn(e),null;case 10:return ag(e.type._context),sn(e),null;case 17:return An(e.type)&&fd(),sn(e),null;case 19:if(ct(mt),s=e.memoizedState,s===null)return sn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ja(s,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_d(t),o!==null){for(e.flags|=128,Ja(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(mt,mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&It()>da&&(e.flags|=128,r=!0,Ja(s,!1),e.lanes=4194304)}else{if(!r)if(t=_d(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pt)return sn(e),null}else 2*It()-s.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,r=!0,Ja(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=It(),e.sibling=null,n=mt.current,rt(mt,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return kg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function vN(t,e){switch(rg(e),e.tag){case 1:return An(e.type)&&fd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(),ct(Nn),ct(dn),hg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dg(e),null;case 13:if(ct(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(mt),null;case 4:return ua(),null;case 10:return ag(e.type._context),null;case 22:case 23:return kg(),null;case 24:return null;default:return null}}var mc=!1,ln=!1,wN=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Wo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function Up(t,e,n){try{n()}catch(r){_t(t,e,r)}}var Rw=!1;function _N(t,e){if(kp=ud,t=LE(),tg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bp={focusedElem:t,selectionRange:n},ud=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var k=y.memoizedProps,R=y.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:fr(e.type,k),R);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(O){_t(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return y=Rw,Rw=!1,y}function Sl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Up(e,n,s)}i=i.next}while(i!==r)}}function lh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rk(t){var e=t.alternate;e!==null&&(t.alternate=null,Rk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Or],delete e[Kl],delete e[Ip],delete e[nN],delete e[rN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pk(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hd));else if(r!==4&&(t=t.child,t!==null))for(Bp(t,e,n),t=t.sibling;t!==null;)Bp(t,e,n),t=t.sibling}function $p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($p(t,e,n),t=t.sibling;t!==null;)$p(t,e,n),t=t.sibling}var Wt=null,pr=!1;function Vi(t,e,n){for(n=n.child;n!==null;)jk(t,e,n),n=n.sibling}function jk(t,e,n){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(eh,n)}catch{}switch(n.tag){case 5:ln||Wo(n,e);case 6:var r=Wt,i=pr;Wt=null,Vi(t,e,n),Wt=r,pr=i,Wt!==null&&(pr?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(pr?(t=Wt,n=n.stateNode,t.nodeType===8?ff(t.parentNode,n):t.nodeType===1&&ff(t,n),Bl(t)):ff(Wt,n.stateNode));break;case 4:r=Wt,i=pr,Wt=n.stateNode.containerInfo,pr=!0,Vi(t,e,n),Wt=r,pr=i;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Up(n,e,o),i=i.next}while(i!==r)}Vi(t,e,n);break;case 1:if(!ln&&(Wo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_t(n,e,a)}Vi(t,e,n);break;case 21:Vi(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,Vi(t,e,n),ln=r):Vi(t,e,n);break;default:Vi(t,e,n)}}function jw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wN),e.forEach(function(r){var i=NN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,pr=!1;break e;case 3:Wt=a.stateNode.containerInfo,pr=!0;break e;case 4:Wt=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(Wt===null)throw Error(ee(160));jk(s,o,i),Wt=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_t(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dk(e,t),e=e.sibling}function Dk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),jr(t),r&4){try{Sl(3,t,t.return),lh(3,t)}catch(k){_t(t,t.return,k)}try{Sl(5,t,t.return)}catch(k){_t(t,t.return,k)}}break;case 1:hr(e,t),jr(t),r&512&&n!==null&&Wo(n,n.return);break;case 5:if(hr(e,t),jr(t),r&512&&n!==null&&Wo(n,n.return),t.flags&32){var i=t.stateNode;try{Vl(i,"")}catch(k){_t(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nE(i,s),fp(a,o);var u=fp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?aE(i,f):h==="dangerouslySetInnerHTML"?sE(i,f):h==="children"?Vl(i,f):Bm(i,h,f,u)}switch(a){case"input":lp(i,s);break;case"textarea":rE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Go(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Go(i,!!s.multiple,s.defaultValue,!0):Go(i,!!s.multiple,s.multiple?[]:"",!1))}i[Kl]=s}catch(k){_t(t,t.return,k)}}break;case 6:if(hr(e,t),jr(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){_t(t,t.return,k)}}break;case 3:if(hr(e,t),jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bl(e.containerInfo)}catch(k){_t(t,t.return,k)}break;case 4:hr(e,t),jr(t);break;case 13:hr(e,t),jr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xg=It())),r&4&&jw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(u=ln)||h,hr(e,t),ln=u):hr(e,t),jr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(p=ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:Sl(4,p,p.return);break;case 1:Wo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(k){_t(r,n,k)}}break;case 5:Wo(p,p.return);break;case 22:if(p.memoizedState!==null){Lw(f);continue}}m!==null?(m.return=p,ae=m):Lw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oE("display",o))}catch(k){_t(t,t.return,k)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){_t(t,t.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hr(e,t),jr(t),r&4&&jw(t);break;case 21:break;default:hr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Pk(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vl(i,""),r.flags&=-33);var s=Pw(t);$p(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Pw(t);Bp(t,a,o);break;default:throw Error(ee(161))}}catch(l){_t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xN(t,e,n){ae=t,Lk(t)}function Lk(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ln;a=mc;var u=ln;if(mc=o,(ln=l)&&!u)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?Ow(i):l!==null?(l.return=o,ae=l):Ow(i);for(;s!==null;)ae=s,Lk(s),s=s.sibling;ae=i,mc=a,ln=u}Dw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):Dw(t)}}function Dw(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||lh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Bl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}ln||e.flags&512&&zp(e)}catch(p){_t(e,e.return,p)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function Lw(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function Ow(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lh(4,e)}catch(l){_t(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_t(e,i,l)}}var s=e.return;try{zp(e)}catch(l){_t(e,s,l)}break;case 5:var o=e.return;try{zp(e)}catch(l){_t(e,o,l)}}}catch(l){_t(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var EN=Math.ceil,kd=bi.ReactCurrentDispatcher,wg=bi.ReactCurrentOwner,ir=bi.ReactCurrentBatchConfig,qe=0,Bt=null,jt=null,Yt=0,zn=0,Ko=vs(0),Ot=0,Zl=null,to=0,uh=0,_g=0,Tl=null,Tn=null,xg=0,da=1/0,ri=null,bd=!1,Hp=null,ss=null,gc=!1,Xi=null,Sd=0,Il=0,qp=null,Bc=-1,$c=0;function wn(){return qe&6?It():Bc!==-1?Bc:Bc=It()}function os(t){return t.mode&1?qe&2&&Yt!==0?Yt&-Yt:sN.transition!==null?($c===0&&($c=wE()),$c):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:TE(t.type)),t):1}function _r(t,e,n,r){if(50<Il)throw Il=0,qp=null,Error(ee(185));mu(t,n,r),(!(qe&2)||t!==Bt)&&(t===Bt&&(!(qe&2)&&(uh|=n),Ot===4&&qi(t,Yt)),Rn(t,r),n===1&&qe===0&&!(e.mode&1)&&(da=It()+500,sh&&ws()))}function Rn(t,e){var n=t.callbackNode;sC(t,e);var r=ld(t,t===Bt?Yt:0);if(r===0)n!==null&&qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qv(n),e===1)t.tag===0?iN(Mw.bind(null,t)):qE(Mw.bind(null,t)),eN(function(){!(qe&6)&&ws()}),n=null;else{switch(_E(r)){case 1:n=Km;break;case 4:n=yE;break;case 16:n=ad;break;case 536870912:n=vE;break;default:n=ad}n=$k(n,Ok.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ok(t,e){if(Bc=-1,$c=0,qe&6)throw Error(ee(327));var n=t.callbackNode;if(Zo()&&t.callbackNode!==n)return null;var r=ld(t,t===Bt?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Td(t,r);else{e=r;var i=qe;qe|=2;var s=Vk();(Bt!==t||Yt!==e)&&(ri=null,da=It()+500,Ks(t,e));do try{SN();break}catch(a){Mk(t,a)}while(!0);og(),kd.current=s,qe=i,jt!==null?e=0:(Bt=null,Yt=0,e=Ot)}if(e!==0){if(e===2&&(i=vp(t),i!==0&&(r=i,e=Wp(t,i))),e===1)throw n=Zl,Ks(t,0),qi(t,r),Rn(t,It()),n;if(e===6)qi(t,r);else{if(i=t.current.alternate,!(r&30)&&!kN(i)&&(e=Td(t,r),e===2&&(s=vp(t),s!==0&&(r=s,e=Wp(t,s))),e===1))throw n=Zl,Ks(t,0),qi(t,r),Rn(t,It()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Os(t,Tn,ri);break;case 3:if(qi(t,r),(r&130023424)===r&&(e=xg+500-It(),10<e)){if(ld(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tp(Os.bind(null,t,Tn,ri),e);break}Os(t,Tn,ri);break;case 4:if(qi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EN(r/1960))-r,10<r){t.timeoutHandle=Tp(Os.bind(null,t,Tn,ri),r);break}Os(t,Tn,ri);break;case 5:Os(t,Tn,ri);break;default:throw Error(ee(329))}}}return Rn(t,It()),t.callbackNode===n?Ok.bind(null,t):null}function Wp(t,e){var n=Tl;return t.current.memoizedState.isDehydrated&&(Ks(t,e).flags|=256),t=Td(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&Kp(e)),t}function Kp(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function kN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qi(t,e){for(e&=~_g,e&=~uh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function Mw(t){if(qe&6)throw Error(ee(327));Zo();var e=ld(t,0);if(!(e&1))return Rn(t,It()),null;var n=Td(t,e);if(t.tag!==0&&n===2){var r=vp(t);r!==0&&(e=r,n=Wp(t,r))}if(n===1)throw n=Zl,Ks(t,0),qi(t,e),Rn(t,It()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Os(t,Tn,ri),Rn(t,It()),null}function Eg(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(da=It()+500,sh&&ws())}}function no(t){Xi!==null&&Xi.tag===0&&!(qe&6)&&Zo();var e=qe;qe|=1;var n=ir.transition,r=Ye;try{if(ir.transition=null,Ye=1,t)return t()}finally{Ye=r,ir.transition=n,qe=e,!(qe&6)&&ws()}}function kg(){zn=Ko.current,ct(Ko)}function Ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZC(n)),jt!==null)for(n=jt.return;n!==null;){var r=n;switch(rg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fd();break;case 3:ua(),ct(Nn),ct(dn),hg();break;case 5:dg(r);break;case 4:ua();break;case 13:ct(mt);break;case 19:ct(mt);break;case 10:ag(r.type._context);break;case 22:case 23:kg()}n=n.return}if(Bt=t,jt=t=as(t.current,null),Yt=zn=e,Ot=0,Zl=null,_g=uh=to=0,Tn=Tl=null,Bs!==null){for(e=0;e<Bs.length;e++)if(n=Bs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bs=null}return t}function Mk(t,e){do{var n=jt;try{if(og(),Fc.current=Ed,xd){for(var r=gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xd=!1}if(eo=0,zt=Lt=gt=null,bl=!1,Yl=0,wg.current=null,n===null||n.return===null){Ot=1,Zl=e,jt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=bw(o);if(m!==null){m.flags&=-257,Sw(m,o,a,s,e),m.mode&1&&kw(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var k=new Set;k.add(l),e.updateQueue=k}else y.add(l);break e}else{if(!(e&1)){kw(s,u,e),bg();break e}l=Error(ee(426))}}else if(pt&&a.mode&1){var R=bw(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Sw(R,o,a,s,e),ig(ca(l,a));break e}}s=l=ca(l,a),Ot!==4&&(Ot=2),Tl===null?Tl=[s]:Tl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=_k(s,l,e);yw(s,b);break e;case 1:a=l;var S=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ss===null||!ss.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=xk(s,a,e);yw(s,O);break e}}s=s.return}while(s!==null)}Uk(n)}catch(V){e=V,jt===n&&n!==null&&(jt=n=n.return);continue}break}while(!0)}function Vk(){var t=kd.current;return kd.current=Ed,t===null?Ed:t}function bg(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Bt===null||!(to&268435455)&&!(uh&268435455)||qi(Bt,Yt)}function Td(t,e){var n=qe;qe|=2;var r=Vk();(Bt!==t||Yt!==e)&&(ri=null,Ks(t,e));do try{bN();break}catch(i){Mk(t,i)}while(!0);if(og(),qe=n,kd.current=r,jt!==null)throw Error(ee(261));return Bt=null,Yt=0,Ot}function bN(){for(;jt!==null;)Fk(jt)}function SN(){for(;jt!==null&&!Y1();)Fk(jt)}function Fk(t){var e=Bk(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?Uk(t):jt=e,wg.current=null}function Uk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vN(n,e),n!==null){n.flags&=32767,jt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,jt=null;return}}else if(n=yN(n,e,zn),n!==null){jt=n;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=t}while(e!==null);Ot===0&&(Ot=5)}function Os(t,e,n){var r=Ye,i=ir.transition;try{ir.transition=null,Ye=1,TN(t,e,n,r)}finally{ir.transition=i,Ye=r}return null}function TN(t,e,n,r){do Zo();while(Xi!==null);if(qe&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(oC(t,s),t===Bt&&(jt=Bt=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gc||(gc=!0,$k(ad,function(){return Zo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ir.transition,ir.transition=null;var o=Ye;Ye=1;var a=qe;qe|=4,wg.current=null,_N(t,n),Dk(n,t),WC(bp),ud=!!kp,bp=kp=null,t.current=n,xN(n),X1(),qe=a,Ye=o,ir.transition=s}else t.current=n;if(gc&&(gc=!1,Xi=t,Sd=i),s=t.pendingLanes,s===0&&(ss=null),eC(n.stateNode),Rn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bd)throw bd=!1,t=Hp,Hp=null,t;return Sd&1&&t.tag!==0&&Zo(),s=t.pendingLanes,s&1?t===qp?Il++:(Il=0,qp=t):Il=0,ws(),null}function Zo(){if(Xi!==null){var t=_E(Sd),e=ir.transition,n=Ye;try{if(ir.transition=null,Ye=16>t?16:t,Xi===null)var r=!1;else{if(t=Xi,Xi=null,Sd=0,qe&6)throw Error(ee(331));var i=qe;for(qe|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Sl(8,h,s)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var p=h.sibling,m=h.return;if(Rk(h),h===u){ae=null;break}if(p!==null){p.return=m,ae=p;break}ae=m}}}var y=s.alternate;if(y!==null){var k=y.child;if(k!==null){y.child=null;do{var R=k.sibling;k.sibling=null,k=R}while(k!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sl(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ae=b;break e}ae=s.return}}var S=t.current;for(ae=S;ae!==null;){o=ae;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ae=C;else e:for(o=S;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lh(9,a)}}catch(V){_t(a,a.return,V)}if(a===o){ae=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,ae=O;break e}ae=a.return}}if(qe=i,ws(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(eh,t)}catch{}r=!0}return r}finally{Ye=n,ir.transition=e}}return!1}function Vw(t,e,n){e=ca(n,e),e=_k(t,e,1),t=is(t,e,1),e=wn(),t!==null&&(mu(t,1,e),Rn(t,e))}function _t(t,e,n){if(t.tag===3)Vw(t,t,n);else for(;e!==null;){if(e.tag===3){Vw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ss===null||!ss.has(r))){t=ca(n,t),t=xk(e,t,1),e=is(e,t,1),t=wn(),e!==null&&(mu(e,1,t),Rn(e,t));break}}e=e.return}}function IN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Yt&n)===n&&(Ot===4||Ot===3&&(Yt&130023424)===Yt&&500>It()-xg?Ks(t,0):_g|=n),Rn(t,e)}function zk(t,e){e===0&&(t.mode&1?(e=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):e=1);var n=wn();t=yi(t,e),t!==null&&(mu(t,e,n),Rn(t,n))}function CN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zk(t,n)}function NN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),zk(t,n)}var Bk;Bk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)Cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Cn=!1,gN(t,e,n);Cn=!!(t.flags&131072)}else Cn=!1,pt&&e.flags&1048576&&WE(e,gd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zc(t,e),t=e.pendingProps;var i=oa(e,dn.current);Jo(e,n),i=pg(null,e,r,t,i,n);var s=mg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(r)?(s=!0,pd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ug(e),i.updater=ah,e.stateNode=i,i._reactInternals=e,jp(e,r,t,n),e=Op(null,e,r,!0,s,n)):(e.tag=0,pt&&s&&ng(e),yn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RN(r),t=fr(r,t),i){case 0:e=Lp(null,e,r,t,n);break e;case 1:e=Cw(null,e,r,t,n);break e;case 11:e=Tw(null,e,r,t,n);break e;case 14:e=Iw(null,e,r,fr(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Lp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Cw(t,e,r,i,n);case 3:e:{if(Sk(e),t===null)throw Error(ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,JE(t,e),wd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ca(Error(ee(423)),e),e=Nw(t,e,r,n,i);break e}else if(r!==i){i=ca(Error(ee(424)),e),e=Nw(t,e,r,n,i);break e}else for($n=rs(e.stateNode.containerInfo.firstChild),Wn=e,pt=!0,gr=null,n=YE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(aa(),r===i){e=vi(t,e,n);break e}yn(t,e,r,n)}e=e.child}return e;case 5:return ZE(e),t===null&&Ap(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sp(r,i)?o=null:s!==null&&Sp(r,s)&&(e.flags|=32),bk(t,e),yn(t,e,o,n),e.child;case 6:return t===null&&Ap(e),null;case 13:return Tk(t,e,n);case 4:return cg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=la(e,null,r,n):yn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Tw(t,e,r,i,n);case 7:return yn(t,e,e.pendingProps,n),e.child;case 8:return yn(t,e,e.pendingProps.children,n),e.child;case 12:return yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,rt(yd,r._currentValue),r._currentValue=o,s!==null)if(Sr(s.value,o)){if(s.children===i.children&&!Nn.current){e=vi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jo(e,n),i=or(i),r=r(i),e.flags|=1,yn(t,e,r,n),e.child;case 14:return r=e.type,i=fr(r,e.pendingProps),i=fr(r.type,i),Iw(t,e,r,i,n);case 15:return Ek(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),zc(t,e),e.tag=1,An(r)?(t=!0,pd(e)):t=!1,Jo(e,n),wk(e,r,i),jp(e,r,i,n),Op(null,e,r,!0,t,n);case 19:return Ik(t,e,n);case 22:return kk(t,e,n)}throw Error(ee(156,e.tag))};function $k(t,e){return gE(t,e)}function AN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,n,r){return new AN(t,e,n,r)}function Sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RN(t){if(typeof t=="function")return Sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hm)return 11;if(t===qm)return 14}return 2}function as(t,e){var n=t.alternate;return n===null?(n=rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Sg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mo:return Gs(n.children,i,s,e);case $m:o=8,i|=8;break;case rp:return t=rr(12,n,e,i|2),t.elementType=rp,t.lanes=s,t;case ip:return t=rr(13,n,e,i),t.elementType=ip,t.lanes=s,t;case sp:return t=rr(19,n,e,i),t.elementType=sp,t.lanes=s,t;case Z0:return ch(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X0:o=10;break e;case J0:o=9;break e;case Hm:o=11;break e;case qm:o=14;break e;case Bi:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=rr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Gs(t,e,n,r){return t=rr(7,t,r,e),t.lanes=n,t}function ch(t,e,n,r){return t=rr(22,t,r,e),t.elementType=Z0,t.lanes=n,t.stateNode={isHidden:!1},t}function xf(t,e,n){return t=rr(6,t,null,e),t.lanes=n,t}function Ef(t,e,n){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tg(t,e,n,r,i,s,o,a,l){return t=new PN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ug(s),t}function jN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hk(t){if(!t)return hs;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(An(n))return HE(t,n,e)}return e}function qk(t,e,n,r,i,s,o,a,l){return t=Tg(n,r,!0,t,i,s,o,a,l),t.context=Hk(null),n=t.current,r=wn(),i=os(n),s=hi(r,i),s.callback=e??null,is(n,s,i),t.current.lanes=i,mu(t,i,r),Rn(t,r),t}function dh(t,e,n,r){var i=e.current,s=wn(),o=os(i);return n=Hk(n),e.context===null?e.context=n:e.pendingContext=n,e=hi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=is(i,e,o),t!==null&&(_r(t,i,o,s),Vc(t,i,o)),o}function Id(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ig(t,e){Fw(t,e),(t=t.alternate)&&Fw(t,e)}function DN(){return null}var Wk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cg(t){this._internalRoot=t}hh.prototype.render=Cg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));dh(t,e,null,null)};hh.prototype.unmount=Cg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;no(function(){dh(null,t,null,null)}),e[gi]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=kE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hi.length&&e!==0&&e<Hi[n].priority;n++);Hi.splice(n,0,t),n===0&&SE(t)}};function Ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uw(){}function LN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Id(o);s.call(u)}}var o=qk(e,r,t,0,null,!1,!1,"",Uw);return t._reactRootContainer=o,t[gi]=o.current,ql(t.nodeType===8?t.parentNode:t),no(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Id(l);a.call(u)}}var l=Tg(t,0,!1,null,null,!1,!1,"",Uw);return t._reactRootContainer=l,t[gi]=l.current,ql(t.nodeType===8?t.parentNode:t),no(function(){dh(e,l,n,r)}),l}function ph(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Id(o);a.call(l)}}dh(e,o,t,i)}else o=LN(n,e,t,i,r);return Id(o)}xE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hl(e.pendingLanes);n!==0&&(Gm(e,n|1),Rn(e,It()),!(qe&6)&&(da=It()+500,ws()))}break;case 13:no(function(){var r=yi(t,1);if(r!==null){var i=wn();_r(r,t,1,i)}}),Ig(t,1)}};Qm=function(t){if(t.tag===13){var e=yi(t,134217728);if(e!==null){var n=wn();_r(e,t,134217728,n)}Ig(t,134217728)}};EE=function(t){if(t.tag===13){var e=os(t),n=yi(t,e);if(n!==null){var r=wn();_r(n,t,e,r)}Ig(t,e)}};kE=function(){return Ye};bE=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};mp=function(t,e,n){switch(e){case"input":if(lp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ih(r);if(!i)throw Error(ee(90));tE(r),lp(r,i)}}}break;case"textarea":rE(t,n);break;case"select":e=n.value,e!=null&&Go(t,!!n.multiple,e,!1)}};cE=Eg;dE=no;var ON={usingClientEntryPoint:!1,Events:[yu,zo,ih,lE,uE,Eg]},Za={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MN={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pE(t),t===null?null:t.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||DN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{eh=yc.inject(MN),Vr=yc}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ON;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ng(e))throw Error(ee(200));return jN(t,e,null,n)};Qn.createRoot=function(t,e){if(!Ng(t))throw Error(ee(299));var n=!1,r="",i=Wk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Tg(t,1,!1,null,null,n,!1,r,i),t[gi]=e.current,ql(t.nodeType===8?t.parentNode:t),new Cg(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=pE(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return no(t)};Qn.hydrate=function(t,e,n){if(!fh(e))throw Error(ee(200));return ph(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!Ng(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Wk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qk(e,null,t,1,n??null,i,!1,s,o),t[gi]=e.current,ql(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hh(e)};Qn.render=function(t,e,n){if(!fh(e))throw Error(ee(200));return ph(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!fh(t))throw Error(ee(40));return t._reactRootContainer?(no(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[gi]=null})}),!0):!1};Qn.unstable_batchedUpdates=Eg;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fh(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return ph(t,e,n,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function Kk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kk)}catch(t){console.error(t)}}Kk(),K0.exports=Qn;var Ag=K0.exports;const VN=Jd(Ag),FN=D0({__proto__:null,default:VN},[Ag]);var zw=Ag;tp.createRoot=zw.createRoot,tp.hydrateRoot=zw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ft(){return ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft.apply(this,arguments)}var Pt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pt||(Pt={}));const Bw="popstate";function UN(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return eu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ro(i)}return BN(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ha(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zN(){return Math.random().toString(36).substr(2,8)}function $w(t,e){return{usr:t.state,key:t.key,idx:e}}function eu(t,e,n,r){return n===void 0&&(n=null),ft({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_s(e):e,{state:n,key:e&&e.key||r||zN()})}function ro(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _s(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Pt.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(ft({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Pt.Pop;let R=h(),b=R==null?null:R-u;u=R,l&&l({action:a,location:k.location,delta:b})}function p(R,b){a=Pt.Push;let S=eu(k.location,R,b);u=h()+1;let C=$w(S,u),O=k.createHref(S);try{o.pushState(C,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(O)}s&&l&&l({action:a,location:k.location,delta:1})}function m(R,b){a=Pt.Replace;let S=eu(k.location,R,b);u=h();let C=$w(S,u),O=k.createHref(S);o.replaceState(C,"",O),s&&l&&l({action:a,location:k.location,delta:0})}function y(R){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof R=="string"?R:ro(R);return S=S.replace(/ $/,"%20"),je(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let k={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Bw,f),l=R,()=>{i.removeEventListener(Bw,f),l=null}},createHref(R){return e(i,R)},createURL:y,encodeLocation(R){let b=y(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(R){return o.go(R)}};return k}var Qe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qe||(Qe={}));const $N=new Set(["lazy","caseSensitive","path","id","index","children"]);function HN(t){return t.index===!0}function Cd(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(je(i.index!==!0||!i.children,"Cannot specify children on an index route"),je(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),HN(i)){let l=ft({},i,e(i),{id:a});return r[a]=l,l}else{let l=ft({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Cd(i.children,e,o,r)),l}})}function Vs(t,e,n){return n===void 0&&(n="/"),qc(t,e,n,!1)}function qc(t,e,n,r){let i=typeof e=="string"?_s(e):e,s=wi(i.pathname||"/",n);if(s==null)return null;let o=Gk(t);WN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=rA(s);a=tA(o[l],u,r)}return a}function qN(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Gk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=fi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gk(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:ZN(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Qk(s.path))i(s,o,l)}),e}function Qk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Qk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function WN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KN=/^:[\w-]+$/,GN=3,QN=2,YN=1,XN=10,JN=-2,Hw=t=>t==="*";function ZN(t,e){let n=t.split("/"),r=n.length;return n.some(Hw)&&(r+=JN),e&&(r+=QN),n.filter(i=>!Hw(i)).reduce((i,s)=>i+(KN.test(s)?GN:s===""?YN:XN),r)}function eA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tA(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Nd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Nd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:fi([s,f.pathname]),pathnameBase:oA(fi([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=fi([s,f.pathnameBase]))}return o}function Nd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let k=a[f]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function nA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ha(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ha(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_s(t):t;return{pathname:n?n.startsWith("/")?n:sA(n,e):e,search:aA(r),hash:lA(i)}}function sA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Yk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rg(t,e){let n=Yk(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_s(t):(i=ft({},t),je(!i.pathname||!i.pathname.includes("?"),kf("?","pathname","search",i)),je(!i.pathname||!i.pathname.includes("#"),kf("#","pathname","hash",i)),je(!i.search||!i.search.includes("#"),kf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=iA(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const fi=t=>t.join("/").replace(/\/\/+/g,"/"),oA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ad{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function tu(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Xk=["post","put","patch","delete"],uA=new Set(Xk),cA=["get",...Xk],dA=new Set(cA),hA=new Set([301,302,303,307,308]),fA=new Set([307,308]),bf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},el={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},jg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mA=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Jk="remix-router-transitions";function gA(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;je(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let M=t.detectErrorBoundary;i=F=>({hasErrorBoundary:M(F)})}else i=mA;let s={},o=Cd(t.routes,i,void 0,s),a,l=t.basename||"/",u=t.dataStrategy||_A,h=t.patchRoutesOnNavigation,f=ft({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),p=null,m=new Set,y=null,k=null,R=null,b=t.hydrationData!=null,S=Vs(o,t.history.location,l),C=!1,O=null;if(S==null&&!h){let M=Sn(404,{pathname:t.history.location.pathname}),{matches:F,route:B}=t_(o);S=F,O={[B.id]:M}}S&&!t.hydrationData&&Rs(S,o,t.history.location.pathname).active&&(S=null);let V;if(S)if(S.some(M=>M.route.lazy))V=!1;else if(!S.some(M=>M.route.loader))V=!0;else if(f.v7_partialHydration){let M=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null;if(F){let B=S.findIndex(Y=>F[Y.route.id]!==void 0);V=S.slice(0,B+1).every(Y=>!Qp(Y.route,M,F))}else V=S.every(B=>!Qp(B.route,M,F))}else V=t.hydrationData!=null;else if(V=!1,S=[],f.v7_partialHydration){let M=Rs(null,o,t.history.location.pathname);M.active&&M.matches&&(C=!0,S=M.matches)}let j,x={historyAction:t.history.action,location:t.history.location,matches:S,initialized:V,navigation:bf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},w=Pt.Pop,E=!1,v,T=!1,I=new Map,N=null,G=!1,z=!1,K=[],ce=new Set,W=new Map,Z=0,L=-1,ye=new Map,$=new Set,P=new Map,le=new Map,Ie=new Set,Ce=new Map,Me=new Map,it;function Dn(){if(p=t.history.listen(M=>{let{action:F,location:B,delta:Y}=M;if(it){it(),it=void 0;return}ha(Me.size===0||Y!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=Oa({currentLocation:x.location,nextLocation:B,historyAction:F});if(ie&&Y!=null){let fe=new Promise(_e=>{it=_e});t.history.go(Y*-1),Cs(ie,{state:"blocked",location:B,proceed(){Cs(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:B}),fe.then(()=>t.history.go(Y))},reset(){let _e=new Map(x.blockers);_e.set(ie,el),bt({blockers:_e})}});return}return On(F,B)}),n){DA(e,I);let M=()=>LA(e,I);e.addEventListener("pagehide",M),N=()=>e.removeEventListener("pagehide",M)}return x.initialized||On(Pt.Pop,x.location,{initialHydration:!0}),j}function Ln(){p&&p(),N&&N(),m.clear(),v&&v.abort(),x.fetchers.forEach((M,F)=>Vt(F)),x.blockers.forEach((M,F)=>en(F))}function lr(M){return m.add(M),()=>m.delete(M)}function bt(M,F){F===void 0&&(F={}),x=ft({},x,M);let B=[],Y=[];f.v7_fetcherPersist&&x.fetchers.forEach((ie,fe)=>{ie.state==="idle"&&(Ie.has(fe)?Y.push(fe):B.push(fe))}),Ie.forEach(ie=>{!x.fetchers.has(ie)&&!W.has(ie)&&Y.push(ie)}),[...m].forEach(ie=>ie(x,{deletedFetchers:Y,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),f.v7_fetcherPersist?(B.forEach(ie=>x.fetchers.delete(ie)),Y.forEach(ie=>Vt(ie))):Y.forEach(ie=>Ie.delete(ie))}function Xn(M,F,B){var Y,ie;let{flushSync:fe}=B===void 0?{}:B,_e=x.actionData!=null&&x.navigation.formMethod!=null&&mr(x.navigation.formMethod)&&x.navigation.state==="loading"&&((Y=M.state)==null?void 0:Y._isRedirect)!==!0,de;F.actionData?Object.keys(F.actionData).length>0?de=F.actionData:de=null:_e?de=x.actionData:de=null;let ue=F.loaderData?Zw(x.loaderData,F.loaderData,F.matches||[],F.errors):x.loaderData,oe=x.blockers;oe.size>0&&(oe=new Map(oe),oe.forEach((Re,Nt)=>oe.set(Nt,el)));let pe=E===!0||x.navigation.formMethod!=null&&mr(x.navigation.formMethod)&&((ie=M.state)==null?void 0:ie._isRedirect)!==!0;a&&(o=a,a=void 0),G||w===Pt.Pop||(w===Pt.Push?t.history.push(M,M.state):w===Pt.Replace&&t.history.replace(M,M.state));let be;if(w===Pt.Pop){let Re=I.get(x.location.pathname);Re&&Re.has(M.pathname)?be={currentLocation:x.location,nextLocation:M}:I.has(M.pathname)&&(be={currentLocation:M,nextLocation:x.location})}else if(T){let Re=I.get(x.location.pathname);Re?Re.add(M.pathname):(Re=new Set([M.pathname]),I.set(x.location.pathname,Re)),be={currentLocation:x.location,nextLocation:M}}bt(ft({},F,{actionData:de,loaderData:ue,historyAction:w,location:M,initialized:!0,navigation:bf,revalidation:"idle",restoreScrollPosition:As(M,F.matches||x.matches),preventScrollReset:pe,blockers:oe}),{viewTransitionOpts:be,flushSync:fe===!0}),w=Pt.Pop,E=!1,T=!1,G=!1,z=!1,K=[]}async function Ni(M,F){if(typeof M=="number"){t.history.go(M);return}let B=Gp(x.location,x.matches,l,f.v7_prependBasename,M,f.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:Y,submission:ie,error:fe}=qw(f.v7_normalizeFormMethod,!1,B,F),_e=x.location,de=eu(x.location,Y,F&&F.state);de=ft({},de,t.history.encodeLocation(de));let ue=F&&F.replace!=null?F.replace:void 0,oe=Pt.Push;ue===!0?oe=Pt.Replace:ue===!1||ie!=null&&mr(ie.formMethod)&&ie.formAction===x.location.pathname+x.location.search&&(oe=Pt.Replace);let pe=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,be=(F&&F.flushSync)===!0,Re=Oa({currentLocation:_e,nextLocation:de,historyAction:oe});if(Re){Cs(Re,{state:"blocked",location:de,proceed(){Cs(Re,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),Ni(M,F)},reset(){let Nt=new Map(x.blockers);Nt.set(Re,el),bt({blockers:Nt})}});return}return await On(oe,de,{submission:ie,pendingError:fe,preventScrollReset:pe,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:be})}function Ai(){if(X(),bt({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){On(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}On(w||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:T===!0})}}async function On(M,F,B){v&&v.abort(),v=null,w=M,G=(B&&B.startUninterruptedRevalidation)===!0,zu(x.location,x.matches),E=(B&&B.preventScrollReset)===!0,T=(B&&B.enableViewTransition)===!0;let Y=a||o,ie=B&&B.overrideNavigation,fe=B!=null&&B.initialHydration&&x.matches&&x.matches.length>0&&!C?x.matches:Vs(Y,F,l),_e=(B&&B.flushSync)===!0;if(fe&&x.initialized&&!z&&TA(x.location,F)&&!(B&&B.submission&&mr(B.submission.formMethod))){Xn(F,{matches:fe},{flushSync:_e});return}let de=Rs(fe,Y,F.pathname);if(de.active&&de.matches&&(fe=de.matches),!fe){let{error:Ge,notFoundMatches:Fe,route:tt}=Xr(F.pathname);Xn(F,{matches:Fe,loaderData:{},errors:{[tt.id]:Ge}},{flushSync:_e});return}v=new AbortController;let ue=No(t.history,F,v.signal,B&&B.submission),oe;if(B&&B.pendingError)oe=[Fs(fe).route.id,{type:Qe.error,error:B.pendingError}];else if(B&&B.submission&&mr(B.submission.formMethod)){let Ge=await Eo(ue,F,B.submission,fe,de.active,{replace:B.replace,flushSync:_e});if(Ge.shortCircuited)return;if(Ge.pendingActionResult){let[Fe,tt]=Ge.pendingActionResult;if(Bn(tt)&&tu(tt.error)&&tt.error.status===404){v=null,Xn(F,{matches:Ge.matches,loaderData:{},errors:{[Fe]:tt.error}});return}}fe=Ge.matches||fe,oe=Ge.pendingActionResult,ie=Sf(F,B.submission),_e=!1,de.active=!1,ue=No(t.history,ue.url,ue.signal)}let{shortCircuited:pe,matches:be,loaderData:Re,errors:Nt}=await Da(ue,F,fe,de.active,ie,B&&B.submission,B&&B.fetcherSubmission,B&&B.replace,B&&B.initialHydration===!0,_e,oe);pe||(v=null,Xn(F,ft({matches:be||fe},e_(oe),{loaderData:Re,errors:Nt})))}async function Eo(M,F,B,Y,ie,fe){fe===void 0&&(fe={}),X();let _e=PA(F,B);if(bt({navigation:_e},{flushSync:fe.flushSync===!0}),ie){let oe=await Rr(Y,F.pathname,M.signal);if(oe.type==="aborted")return{shortCircuited:!0};if(oe.type==="error"){let pe=Fs(oe.partialMatches).route.id;return{matches:oe.partialMatches,pendingActionResult:[pe,{type:Qe.error,error:oe.error}]}}else if(oe.matches)Y=oe.matches;else{let{notFoundMatches:pe,error:be,route:Re}=Xr(F.pathname);return{matches:pe,pendingActionResult:[Re.id,{type:Qe.error,error:be}]}}}let de,ue=pl(Y,F);if(!ue.route.action&&!ue.route.lazy)de={type:Qe.error,error:Sn(405,{method:M.method,pathname:F.pathname,routeId:ue.route.id})};else if(de=(await Cr("action",x,M,[ue],Y,null))[ue.route.id],M.signal.aborted)return{shortCircuited:!0};if(Hs(de)){let oe;return fe&&fe.replace!=null?oe=fe.replace:oe=Yw(de.response.headers.get("Location"),new URL(M.url),l)===x.location.pathname+x.location.search,await Mn(M,de,!0,{submission:B,replace:oe}),{shortCircuited:!0}}if(Ji(de))throw Sn(400,{type:"defer-action"});if(Bn(de)){let oe=Fs(Y,ue.route.id);return(fe&&fe.replace)!==!0&&(w=Pt.Push),{matches:Y,pendingActionResult:[oe.route.id,de]}}return{matches:Y,pendingActionResult:[ue.route.id,de]}}async function Da(M,F,B,Y,ie,fe,_e,de,ue,oe,pe){let be=ie||Sf(F,fe),Re=fe||_e||r_(be),Nt=!G&&(!f.v7_partialHydration||!ue);if(Y){if(Nt){let st=Ri(pe);bt(ft({navigation:be},st!==void 0?{actionData:st}:{}),{flushSync:oe})}let ze=await Rr(B,F.pathname,M.signal);if(ze.type==="aborted")return{shortCircuited:!0};if(ze.type==="error"){let st=Fs(ze.partialMatches).route.id;return{matches:ze.partialMatches,loaderData:{},errors:{[st]:ze.error}}}else if(ze.matches)B=ze.matches;else{let{error:st,notFoundMatches:ei,route:Li}=Xr(F.pathname);return{matches:ei,loaderData:{},errors:{[Li.id]:st}}}}let Ge=a||o,[Fe,tt]=Kw(t.history,x,B,Re,F,f.v7_partialHydration&&ue===!0,f.v7_skipActionErrorRevalidation,z,K,ce,Ie,P,$,Ge,l,pe);if(Ns(ze=>!(B&&B.some(st=>st.route.id===ze))||Fe&&Fe.some(st=>st.route.id===ze)),L=++Z,Fe.length===0&&tt.length===0){let ze=Jn();return Xn(F,ft({matches:B,loaderData:{},errors:pe&&Bn(pe[1])?{[pe[0]]:pe[1].error}:null},e_(pe),ze?{fetchers:new Map(x.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(Nt){let ze={};if(!Y){ze.navigation=be;let st=Ri(pe);st!==void 0&&(ze.actionData=st)}tt.length>0&&(ze.fetchers=Pi(tt)),bt(ze,{flushSync:oe})}tt.forEach(ze=>{St(ze.key),ze.controller&&W.set(ze.key,ze.controller)});let Jr=()=>tt.forEach(ze=>St(ze.key));v&&v.signal.addEventListener("abort",Jr);let{loaderResults:ji,fetcherResults:cr}=await H(x,B,Fe,tt,M);if(M.signal.aborted)return{shortCircuited:!0};v&&v.signal.removeEventListener("abort",Jr),tt.forEach(ze=>W.delete(ze.key));let mn=vc(ji);if(mn)return await Mn(M,mn.result,!0,{replace:de}),{shortCircuited:!0};if(mn=vc(cr),mn)return $.add(mn.key),await Mn(M,mn.result,!0,{replace:de}),{shortCircuited:!0};let{loaderData:bo,errors:Zr}=Jw(x,B,ji,pe,tt,cr,Ce);Ce.forEach((ze,st)=>{ze.subscribe(ei=>{(ei||ze.done)&&Ce.delete(st)})}),f.v7_partialHydration&&ue&&x.errors&&(Zr=ft({},x.errors,Zr));let Vn=Jn(),Zn=Ft(L),Di=Vn||Zn||tt.length>0;return ft({matches:B,loaderData:bo,errors:Zr},Di?{fetchers:new Map(x.fetchers)}:{})}function Ri(M){if(M&&!Bn(M[1]))return{[M[0]]:M[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function Pi(M){return M.forEach(F=>{let B=x.fetchers.get(F.key),Y=tl(void 0,B?B.data:void 0);x.fetchers.set(F.key,Y)}),new Map(x.fetchers)}function ko(M,F,B,Y){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");St(M);let ie=(Y&&Y.flushSync)===!0,fe=a||o,_e=Gp(x.location,x.matches,l,f.v7_prependBasename,B,f.v7_relativeSplatPath,F,Y==null?void 0:Y.relative),de=Vs(fe,_e,l),ue=Rs(de,fe,_e);if(ue.active&&ue.matches&&(de=ue.matches),!de){we(M,F,Sn(404,{pathname:_e}),{flushSync:ie});return}let{path:oe,submission:pe,error:be}=qw(f.v7_normalizeFormMethod,!0,_e,Y);if(be){we(M,F,be,{flushSync:ie});return}let Re=pl(de,oe),Nt=(Y&&Y.preventScrollReset)===!0;if(pe&&mr(pe.formMethod)){La(M,F,oe,Re,de,ue.active,ie,Nt,pe);return}P.set(M,{routeId:F,path:oe}),Is(M,F,oe,Re,de,ue.active,ie,Nt,pe)}async function La(M,F,B,Y,ie,fe,_e,de,ue){X(),P.delete(M);function oe(ht){if(!ht.route.action&&!ht.route.lazy){let Pr=Sn(405,{method:ue.formMethod,pathname:B,routeId:F});return we(M,F,Pr,{flushSync:_e}),!0}return!1}if(!fe&&oe(Y))return;let pe=x.fetchers.get(M);me(M,jA(ue,pe),{flushSync:_e});let be=new AbortController,Re=No(t.history,B,be.signal,ue);if(fe){let ht=await Rr(ie,new URL(Re.url).pathname,Re.signal,M);if(ht.type==="aborted")return;if(ht.type==="error"){we(M,F,ht.error,{flushSync:_e});return}else if(ht.matches){if(ie=ht.matches,Y=pl(ie,B),oe(Y))return}else{we(M,F,Sn(404,{pathname:B}),{flushSync:_e});return}}W.set(M,be);let Nt=Z,Fe=(await Cr("action",x,Re,[Y],ie,M))[Y.route.id];if(Re.signal.aborted){W.get(M)===be&&W.delete(M);return}if(f.v7_fetcherPersist&&Ie.has(M)){if(Hs(Fe)||Bn(Fe)){me(M,zi(void 0));return}}else{if(Hs(Fe))if(W.delete(M),L>Nt){me(M,zi(void 0));return}else return $.add(M),me(M,tl(ue)),Mn(Re,Fe,!1,{fetcherSubmission:ue,preventScrollReset:de});if(Bn(Fe)){we(M,F,Fe.error);return}}if(Ji(Fe))throw Sn(400,{type:"defer-action"});let tt=x.navigation.location||x.location,Jr=No(t.history,tt,be.signal),ji=a||o,cr=x.navigation.state!=="idle"?Vs(ji,x.navigation.location,l):x.matches;je(cr,"Didn't find any matches after fetcher action");let mn=++Z;ye.set(M,mn);let bo=tl(ue,Fe.data);x.fetchers.set(M,bo);let[Zr,Vn]=Kw(t.history,x,cr,ue,tt,!1,f.v7_skipActionErrorRevalidation,z,K,ce,Ie,P,$,ji,l,[Y.route.id,Fe]);Vn.filter(ht=>ht.key!==M).forEach(ht=>{let Pr=ht.key,Va=x.fetchers.get(Pr),$u=tl(void 0,Va?Va.data:void 0);x.fetchers.set(Pr,$u),St(Pr),ht.controller&&W.set(Pr,ht.controller)}),bt({fetchers:new Map(x.fetchers)});let Zn=()=>Vn.forEach(ht=>St(ht.key));be.signal.addEventListener("abort",Zn);let{loaderResults:Di,fetcherResults:ze}=await H(x,cr,Zr,Vn,Jr);if(be.signal.aborted)return;be.signal.removeEventListener("abort",Zn),ye.delete(M),W.delete(M),Vn.forEach(ht=>W.delete(ht.key));let st=vc(Di);if(st)return Mn(Jr,st.result,!1,{preventScrollReset:de});if(st=vc(ze),st)return $.add(st.key),Mn(Jr,st.result,!1,{preventScrollReset:de});let{loaderData:ei,errors:Li}=Jw(x,cr,Di,void 0,Vn,ze,Ce);if(x.fetchers.has(M)){let ht=zi(Fe.data);x.fetchers.set(M,ht)}Ft(mn),x.navigation.state==="loading"&&mn>L?(je(w,"Expected pending action"),v&&v.abort(),Xn(x.navigation.location,{matches:cr,loaderData:ei,errors:Li,fetchers:new Map(x.fetchers)})):(bt({errors:Li,loaderData:Zw(x.loaderData,ei,cr,Li),fetchers:new Map(x.fetchers)}),z=!1)}async function Is(M,F,B,Y,ie,fe,_e,de,ue){let oe=x.fetchers.get(M);me(M,tl(ue,oe?oe.data:void 0),{flushSync:_e});let pe=new AbortController,be=No(t.history,B,pe.signal);if(fe){let Fe=await Rr(ie,new URL(be.url).pathname,be.signal,M);if(Fe.type==="aborted")return;if(Fe.type==="error"){we(M,F,Fe.error,{flushSync:_e});return}else if(Fe.matches)ie=Fe.matches,Y=pl(ie,B);else{we(M,F,Sn(404,{pathname:B}),{flushSync:_e});return}}W.set(M,pe);let Re=Z,Ge=(await Cr("loader",x,be,[Y],ie,M))[Y.route.id];if(Ji(Ge)&&(Ge=await Dg(Ge,be.signal,!0)||Ge),W.get(M)===pe&&W.delete(M),!be.signal.aborted){if(Ie.has(M)){me(M,zi(void 0));return}if(Hs(Ge))if(L>Re){me(M,zi(void 0));return}else{$.add(M),await Mn(be,Ge,!1,{preventScrollReset:de});return}if(Bn(Ge)){we(M,F,Ge.error);return}je(!Ji(Ge),"Unhandled fetcher deferred data"),me(M,zi(Ge.data))}}async function Mn(M,F,B,Y){let{submission:ie,fetcherSubmission:fe,preventScrollReset:_e,replace:de}=Y===void 0?{}:Y;F.response.headers.has("X-Remix-Revalidate")&&(z=!0);let ue=F.response.headers.get("Location");je(ue,"Expected a Location header on the redirect Response"),ue=Yw(ue,new URL(M.url),l);let oe=eu(x.location,ue,{_isRedirect:!0});if(n){let Fe=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Fe=!0;else if(jg.test(ue)){const tt=t.history.createURL(ue);Fe=tt.origin!==e.location.origin||wi(tt.pathname,l)==null}if(Fe){de?e.location.replace(ue):e.location.assign(ue);return}}v=null;let pe=de===!0||F.response.headers.has("X-Remix-Replace")?Pt.Replace:Pt.Push,{formMethod:be,formAction:Re,formEncType:Nt}=x.navigation;!ie&&!fe&&be&&Re&&Nt&&(ie=r_(x.navigation));let Ge=ie||fe;if(fA.has(F.response.status)&&Ge&&mr(Ge.formMethod))await On(pe,oe,{submission:ft({},Ge,{formAction:ue}),preventScrollReset:_e||E,enableViewTransition:B?T:void 0});else{let Fe=Sf(oe,ie);await On(pe,oe,{overrideNavigation:Fe,fetcherSubmission:fe,preventScrollReset:_e||E,enableViewTransition:B?T:void 0})}}async function Cr(M,F,B,Y,ie,fe){let _e,de={};try{_e=await xA(u,M,F,B,Y,ie,fe,s,i)}catch(ue){return Y.forEach(oe=>{de[oe.route.id]={type:Qe.error,error:ue}}),de}for(let[ue,oe]of Object.entries(_e))if(IA(oe)){let pe=oe.result;de[ue]={type:Qe.redirect,response:bA(pe,B,ue,ie,l,f.v7_relativeSplatPath)}}else de[ue]=await kA(oe);return de}async function H(M,F,B,Y,ie){let fe=M.matches,_e=Cr("loader",M,ie,B,F,null),de=Promise.all(Y.map(async pe=>{if(pe.matches&&pe.match&&pe.controller){let Re=(await Cr("loader",M,No(t.history,pe.path,pe.controller.signal),[pe.match],pe.matches,pe.key))[pe.match.route.id];return{[pe.key]:Re}}else return Promise.resolve({[pe.key]:{type:Qe.error,error:Sn(404,{pathname:pe.path})}})})),ue=await _e,oe=(await de).reduce((pe,be)=>Object.assign(pe,be),{});return await Promise.all([AA(F,ue,ie.signal,fe,M.loaderData),RA(F,oe,Y)]),{loaderResults:ue,fetcherResults:oe}}function X(){z=!0,K.push(...Ns()),P.forEach((M,F)=>{W.has(F)&&ce.add(F),St(F)})}function me(M,F,B){B===void 0&&(B={}),x.fetchers.set(M,F),bt({fetchers:new Map(x.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function we(M,F,B,Y){Y===void 0&&(Y={});let ie=Fs(x.matches,F);Vt(M),bt({errors:{[ie.route.id]:B},fetchers:new Map(x.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function He(M){return le.set(M,(le.get(M)||0)+1),Ie.has(M)&&Ie.delete(M),x.fetchers.get(M)||pA}function Vt(M){let F=x.fetchers.get(M);W.has(M)&&!(F&&F.state==="loading"&&ye.has(M))&&St(M),P.delete(M),ye.delete(M),$.delete(M),f.v7_fetcherPersist&&Ie.delete(M),ce.delete(M),x.fetchers.delete(M)}function pn(M){let F=(le.get(M)||0)-1;F<=0?(le.delete(M),Ie.add(M),f.v7_fetcherPersist||Vt(M)):le.set(M,F),bt({fetchers:new Map(x.fetchers)})}function St(M){let F=W.get(M);F&&(F.abort(),W.delete(M))}function ur(M){for(let F of M){let B=He(F),Y=zi(B.data);x.fetchers.set(F,Y)}}function Jn(){let M=[],F=!1;for(let B of $){let Y=x.fetchers.get(B);je(Y,"Expected fetcher: "+B),Y.state==="loading"&&($.delete(B),M.push(B),F=!0)}return ur(M),F}function Ft(M){let F=[];for(let[B,Y]of ye)if(Y<M){let ie=x.fetchers.get(B);je(ie,"Expected fetcher: "+B),ie.state==="loading"&&(St(B),ye.delete(B),F.push(B))}return ur(F),F.length>0}function Nr(M,F){let B=x.blockers.get(M)||el;return Me.get(M)!==F&&Me.set(M,F),B}function en(M){x.blockers.delete(M),Me.delete(M)}function Cs(M,F){let B=x.blockers.get(M)||el;je(B.state==="unblocked"&&F.state==="blocked"||B.state==="blocked"&&F.state==="blocked"||B.state==="blocked"&&F.state==="proceeding"||B.state==="blocked"&&F.state==="unblocked"||B.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+B.state+" -> "+F.state);let Y=new Map(x.blockers);Y.set(M,F),bt({blockers:Y})}function Oa(M){let{currentLocation:F,nextLocation:B,historyAction:Y}=M;if(Me.size===0)return;Me.size>1&&ha(!1,"A router only supports one blocker at a time");let ie=Array.from(Me.entries()),[fe,_e]=ie[ie.length-1],de=x.blockers.get(fe);if(!(de&&de.state==="proceeding")&&_e({currentLocation:F,nextLocation:B,historyAction:Y}))return fe}function Xr(M){let F=Sn(404,{pathname:M}),B=a||o,{matches:Y,route:ie}=t_(B);return Ns(),{notFoundMatches:Y,route:ie,error:F}}function Ns(M){let F=[];return Ce.forEach((B,Y)=>{(!M||M(Y))&&(B.cancel(),F.push(Y),Ce.delete(Y))}),F}function Ma(M,F,B){if(y=M,R=F,k=B||null,!b&&x.navigation===bf){b=!0;let Y=As(x.location,x.matches);Y!=null&&bt({restoreScrollPosition:Y})}return()=>{y=null,R=null,k=null}}function Ar(M,F){return k&&k(M,F.map(Y=>qN(Y,x.loaderData)))||M.key}function zu(M,F){if(y&&R){let B=Ar(M,F);y[B]=R()}}function As(M,F){if(y){let B=Ar(M,F),Y=y[B];if(typeof Y=="number")return Y}return null}function Rs(M,F,B){if(h)if(M){if(Object.keys(M[0].params).length>0)return{active:!0,matches:qc(F,B,l,!0)}}else return{active:!0,matches:qc(F,B,l,!0)||[]};return{active:!1,matches:null}}async function Rr(M,F,B,Y){if(!h)return{type:"success",matches:M};let ie=M;for(;;){let fe=a==null,_e=a||o,de=s;try{await h({signal:B,path:F,matches:ie,fetcherKey:Y,patch:(pe,be)=>{B.aborted||Qw(pe,be,_e,de,i)}})}catch(pe){return{type:"error",error:pe,partialMatches:ie}}finally{fe&&!B.aborted&&(o=[...o])}if(B.aborted)return{type:"aborted"};let ue=Vs(_e,F,l);if(ue)return{type:"success",matches:ue};let oe=qc(_e,F,l,!0);if(!oe||ie.length===oe.length&&ie.every((pe,be)=>pe.route.id===oe[be].route.id))return{type:"success",matches:null};ie=oe}}function Bu(M){s={},a=Cd(M,i,void 0,s)}function $t(M,F){let B=a==null;Qw(M,F,a||o,s,i),B&&(o=[...o],bt({}))}return j={get basename(){return l},get future(){return f},get state(){return x},get routes(){return o},get window(){return e},initialize:Dn,subscribe:lr,enableScrollRestoration:Ma,navigate:Ni,fetch:ko,revalidate:Ai,createHref:M=>t.history.createHref(M),encodeLocation:M=>t.history.encodeLocation(M),getFetcher:He,deleteFetcher:pn,dispose:Ln,getBlocker:Nr,deleteBlocker:en,patchRoutes:$t,_internalFetchControllers:W,_internalActiveDeferreds:Ce,_internalSetRoutes:Bu},j}function yA(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Gp(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){u=f;break}}else l=e,u=e[e.length-1];let h=Pg(i||".",Rg(l,s),wi(t.pathname,n)||t.pathname,a==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&u){let f=Lg(h.search);if(u.route.index&&!f)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&f){let p=new URLSearchParams(h.search),m=p.getAll("index");p.delete("index"),m.filter(k=>k).forEach(k=>p.append("index",k));let y=p.toString();h.search=y?"?"+y:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:fi([n,h.pathname])),ro(h)}function qw(t,e,n,r){if(!r||!yA(r))return{path:n};if(r.formMethod&&!NA(r.formMethod))return{path:n,error:Sn(405,{method:r.formMethod})};let i=()=>({path:n,error:Sn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=tb(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!mr(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,y)=>{let[k,R]=y;return""+m+k+"="+R+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!mr(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}je(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=Yp(r.formData),u=r.formData;else if(r.body instanceof FormData)l=Yp(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=Xw(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=Xw(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(mr(h.formMethod))return{path:n,submission:h};let f=_s(n);return e&&f.search&&Lg(f.search)&&l.append("index",""),f.search="?"+l,{path:ro(f),submission:h}}function Ww(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Kw(t,e,n,r,i,s,o,a,l,u,h,f,p,m,y,k){let R=k?Bn(k[1])?k[1].error:k[1].data:void 0,b=t.createURL(e.location),S=t.createURL(i),C=n;s&&e.errors?C=Ww(n,Object.keys(e.errors)[0],!0):k&&Bn(k[1])&&(C=Ww(n,k[0]));let O=k?k[1].statusCode:void 0,V=o&&O&&O>=400,j=C.filter((w,E)=>{let{route:v}=w;if(v.lazy)return!0;if(v.loader==null)return!1;if(s)return Qp(v,e.loaderData,e.errors);if(vA(e.loaderData,e.matches[E],w)||l.some(N=>N===w.route.id))return!0;let T=e.matches[E],I=w;return Gw(w,ft({currentUrl:b,currentParams:T.params,nextUrl:S,nextParams:I.params},r,{actionResult:R,actionStatus:O,defaultShouldRevalidate:V?!1:a||b.pathname+b.search===S.pathname+S.search||b.search!==S.search||Zk(T,I)}))}),x=[];return f.forEach((w,E)=>{if(s||!n.some(G=>G.route.id===w.routeId)||h.has(E))return;let v=Vs(m,w.path,y);if(!v){x.push({key:E,routeId:w.routeId,path:w.path,matches:null,match:null,controller:null});return}let T=e.fetchers.get(E),I=pl(v,w.path),N=!1;p.has(E)?N=!1:u.has(E)?(u.delete(E),N=!0):T&&T.state!=="idle"&&T.data===void 0?N=a:N=Gw(I,ft({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:n[n.length-1].params},r,{actionResult:R,actionStatus:O,defaultShouldRevalidate:V?!1:a})),N&&x.push({key:E,routeId:w.routeId,path:w.path,matches:v,match:I,controller:new AbortController})}),[j,x]}function Qp(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function vA(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Zk(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Gw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Qw(t,e,n,r,i){var s;let o;if(t){let u=r[t];je(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),o=u.children}else o=n;let a=e.filter(u=>!o.some(h=>eb(u,h))),l=Cd(a,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...l)}function eb(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>eb(n,s))}):!1}async function wA(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];je(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ha(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!$N.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ft({},e(i),{lazy:void 0}))}async function _A(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function xA(t,e,n,r,i,s,o,a,l,u){let h=s.map(m=>m.route.lazy?wA(m.route,l,a):void 0),f=s.map((m,y)=>{let k=h[y],R=i.some(S=>S.route.id===m.route.id);return ft({},m,{shouldLoad:R,resolve:async S=>(S&&r.method==="GET"&&(m.route.lazy||m.route.loader)&&(R=!0),R?EA(e,r,m,k,S,u):Promise.resolve({type:Qe.data,result:void 0}))})}),p=await t({matches:f,request:r,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(h)}catch{}return p}async function EA(t,e,n,r,i,s){let o,a,l=u=>{let h,f=new Promise((y,k)=>h=k);a=()=>h(),e.signal.addEventListener("abort",a);let p=y=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),m=(async()=>{try{return{type:"data",result:await(i?i(k=>p(k)):p())}}catch(y){return{type:"error",result:y}}})();return Promise.race([m,f])};try{let u=n.route[t];if(r)if(u){let h,[f]=await Promise.all([l(u).catch(p=>{h=p}),r]);if(h!==void 0)throw h;o=f}else if(await r,u=n.route[t],u)o=await l(u);else if(t==="action"){let h=new URL(e.url),f=h.pathname+h.search;throw Sn(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:Qe.data,result:void 0};else if(u)o=await l(u);else{let h=new URL(e.url),f=h.pathname+h.search;throw Sn(404,{pathname:f})}je(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Qe.error,result:u}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function kA(t){let{result:e,type:n}=t;if(nb(e)){let f;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(p){return{type:Qe.error,error:p}}return n===Qe.error?{type:Qe.error,error:new Ad(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:Qe.data,data:f,statusCode:e.status,headers:e.headers}}if(n===Qe.error){if(n_(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:Qe.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:new Ad(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:tu(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:e,statusCode:tu(e)?e.status:void 0}}if(CA(e)){var a,l;return{type:Qe.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(n_(e)){var u,h;return{type:Qe.data,data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:Qe.data,data:e}}function bA(t,e,n,r,i,s){let o=t.headers.get("Location");if(je(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!jg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Gp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function Yw(t,e,n){if(jg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=wi(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function No(t,e,n,r){let i=t.createURL(tb(e)).toString(),s={signal:n};if(r&&mr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Yp(r.formData):s.body=r.formData}return new Request(i,s)}function Yp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Xw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function SA(t,e,n,r,i){let s={},o=null,a,l=!1,u={},h=n&&Bn(n[1])?n[1].error:void 0;return t.forEach(f=>{if(!(f.route.id in e))return;let p=f.route.id,m=e[p];if(je(!Hs(m),"Cannot handle redirect results in processLoaderData"),Bn(m)){let y=m.error;h!==void 0&&(y=h,h=void 0),o=o||{};{let k=Fs(t,p);o[k.route.id]==null&&(o[k.route.id]=y)}s[p]=void 0,l||(l=!0,a=tu(m.error)?m.error.status:500),m.headers&&(u[p]=m.headers)}else Ji(m)?(r.set(p,m.deferredData),s[p]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!l&&(a=m.statusCode),m.headers&&(u[p]=m.headers)):(s[p]=m.data,m.statusCode&&m.statusCode!==200&&!l&&(a=m.statusCode),m.headers&&(u[p]=m.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function Jw(t,e,n,r,i,s,o){let{loaderData:a,errors:l}=SA(e,n,r,o);return i.forEach(u=>{let{key:h,match:f,controller:p}=u,m=s[h];if(je(m,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(Bn(m)){let y=Fs(t.matches,f==null?void 0:f.route.id);l&&l[y.route.id]||(l=ft({},l,{[y.route.id]:m.error})),t.fetchers.delete(h)}else if(Hs(m))je(!1,"Unhandled fetcher revalidation redirect");else if(Ji(m))je(!1,"Unhandled fetcher deferred data");else{let y=zi(m.data);t.fetchers.set(h,y)}}),{loaderData:a,errors:l}}function Zw(t,e,n,r){let i=ft({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function e_(t){return t?Bn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Fs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function t_(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Sn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Ad(t||500,a,new Error(l),!0)}function vc(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Hs(i))return{key:r,result:i}}}function tb(t){let e=typeof t=="string"?_s(t):t;return ro(ft({},e,{hash:""}))}function TA(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function IA(t){return nb(t.result)&&hA.has(t.result.status)}function Ji(t){return t.type===Qe.deferred}function Bn(t){return t.type===Qe.error}function Hs(t){return(t&&t.type)===Qe.redirect}function n_(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function CA(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function nb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function NA(t){return dA.has(t.toLowerCase())}function mr(t){return uA.has(t.toLowerCase())}async function AA(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],u=t.find(p=>(p==null?void 0:p.route.id)===a);if(!u)continue;let h=r.find(p=>p.route.id===u.route.id),f=h!=null&&!Zk(h,u)&&(i&&i[u.route.id])!==void 0;Ji(l)&&f&&await Dg(l,n,!1).then(p=>{p&&(e[a]=p)})}}async function RA(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&Ji(a)&&(je(o,"Expected an AbortController for revalidating fetcher deferred result"),await Dg(a,o.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function Dg(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Qe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Qe.error,error:i}}return{type:Qe.data,data:t.deferredData.data}}}function Lg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function pl(t,e){let n=typeof e=="string"?_s(e).search:e.search;if(t[t.length-1].route.index&&Lg(n||""))return t[t.length-1];let r=Yk(t);return r[r.length-1]}function r_(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Sf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function PA(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function tl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function jA(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function zi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function DA(t,e){try{let n=t.sessionStorage.getItem(Jk);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function LA(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Jk,JSON.stringify(n))}catch(r){ha(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rd.apply(this,arguments)}const wu=D.createContext(null),Og=D.createContext(null),xs=D.createContext(null),Mg=D.createContext(null),Si=D.createContext({outlet:null,matches:[],isDataRoute:!1}),rb=D.createContext(null);function OA(t,e){let{relative:n}=e===void 0?{}:e;_u()||je(!1);let{basename:r,navigator:i}=D.useContext(xs),{hash:s,pathname:o,search:a}=mh(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:fi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function _u(){return D.useContext(Mg)!=null}function Es(){return _u()||je(!1),D.useContext(Mg).location}function ib(t){D.useContext(xs).static||D.useLayoutEffect(t)}function Gr(){let{isDataRoute:t}=D.useContext(Si);return t?YA():MA()}function MA(){_u()||je(!1);let t=D.useContext(wu),{basename:e,future:n,navigator:r}=D.useContext(xs),{matches:i}=D.useContext(Si),{pathname:s}=Es(),o=JSON.stringify(Rg(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return ib(()=>{a.current=!0}),D.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=Pg(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:fi([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const VA=D.createContext(null);function FA(t){let e=D.useContext(Si).outlet;return e&&D.createElement(VA.Provider,{value:t},e)}function Ti(){let{matches:t}=D.useContext(Si),e=t[t.length-1];return e?e.params:{}}function mh(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(xs),{matches:i}=D.useContext(Si),{pathname:s}=Es(),o=JSON.stringify(Rg(i,r.v7_relativeSplatPath));return D.useMemo(()=>Pg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function UA(t,e,n,r){_u()||je(!1);let{navigator:i}=D.useContext(xs),{matches:s}=D.useContext(Si),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Es(),h;h=u;let f=h.pathname||"/",p=f;if(l!=="/"){let k=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let m=Vs(t,{pathname:p});return qA(m&&m.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:fi([l,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:fi([l,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r)}function zA(){let t=QA(),e=tu(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const BA=D.createElement(zA,null);class $A extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Si.Provider,{value:this.props.routeContext},D.createElement(rb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HA(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(wu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Si.Provider,{value:e},r)}function qA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||je(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let m,y=!1,k=null,R=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,k=f.route.errorElement||BA,l&&(u<0&&p===0?(XA("route-fallback"),y=!0,R=null):u===p&&(y=!0,R=f.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),S=()=>{let C;return m?C=k:y?C=R:f.route.Component?C=D.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,D.createElement(HA,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement($A,{location:n.location,revalidation:n.revalidation,component:k,error:m,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var sb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sb||{}),ob=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ob||{});function WA(t){let e=D.useContext(wu);return e||je(!1),e}function KA(t){let e=D.useContext(Og);return e||je(!1),e}function GA(t){let e=D.useContext(Si);return e||je(!1),e}function ab(t){let e=GA(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function QA(){var t;let e=D.useContext(rb),n=KA(ob.UseRouteError),r=ab();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function YA(){let{router:t}=WA(sb.UseNavigateStable),e=ab(),n=D.useRef(!1);return ib(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Rd({fromRouteId:e},s)))},[t,e])}const i_={};function XA(t,e,n){i_[t]||(i_[t]=!0)}function JA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ZA(t){return FA(t.context)}function eR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Pt.Pop,navigator:s,static:o=!1,future:a}=t;_u()&&je(!1);let l=e.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:l,navigator:s,static:o,future:Rd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=_s(r));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,k=D.useMemo(()=>{let R=wi(h,l);return R==null?null:{location:{pathname:R,search:f,hash:p,state:m,key:y},navigationType:i}},[l,h,f,p,m,y,i]);return k==null?null:D.createElement(xs.Provider,{value:u},D.createElement(Mg.Provider,{children:n,value:k}))}new Promise(()=>{});function tR(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fa(){return fa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fa.apply(this,arguments)}function lb(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function nR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rR(t,e){return t.button===0&&(!e||e==="_self")&&!nR(t)}function Xp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function iR(t,e){let n=Xp(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const sR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],aR="6";try{window.__reactRouterVersion=aR}catch{}function lR(t,e){return gA({basename:void 0,future:fa({},void 0,{v7_prependBasename:!0}),history:UN({window:void 0}),hydrationData:uR(),routes:t,mapRouteProperties:tR,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function uR(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=fa({},e,{errors:cR(e.errors)})),e}function cR(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ad(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const ub=D.createContext({isTransitioning:!1}),dR=D.createContext(new Map),hR="startTransition",s_=I1[hR],fR="flushSync",o_=FN[fR];function pR(t){s_?s_(t):t()}function nl(t){o_?o_(t):t()}let mR=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function gR(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,a]=D.useState(),[l,u]=D.useState({isTransitioning:!1}),[h,f]=D.useState(),[p,m]=D.useState(),[y,k]=D.useState(),R=D.useRef(new Map),{v7_startTransition:b}=r||{},S=D.useCallback(w=>{b?pR(w):w()},[b]),C=D.useCallback((w,E)=>{let{deletedFetchers:v,flushSync:T,viewTransitionOpts:I}=E;w.fetchers.forEach((G,z)=>{G.data!==void 0&&R.current.set(z,G.data)}),v.forEach(G=>R.current.delete(G));let N=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!I||N){T?nl(()=>s(w)):S(()=>s(w));return}if(T){nl(()=>{p&&(h&&h.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let G=n.window.document.startViewTransition(()=>{nl(()=>s(w))});G.finished.finally(()=>{nl(()=>{f(void 0),m(void 0),a(void 0),u({isTransitioning:!1})})}),nl(()=>m(G));return}p?(h&&h.resolve(),p.skipTransition(),k({state:w,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(a(w),u({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[n.window,p,h,R,S]);D.useLayoutEffect(()=>n.subscribe(C),[n,C]),D.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new mR)},[l]),D.useEffect(()=>{if(h&&o&&n.window){let w=o,E=h.promise,v=n.window.document.startViewTransition(async()=>{S(()=>s(w)),await E});v.finished.finally(()=>{f(void 0),m(void 0),a(void 0),u({isTransitioning:!1})}),m(v)}},[S,o,h,n.window]),D.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),D.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),u({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),k(void 0))},[l.isTransitioning,y]),D.useEffect(()=>{},[]);let O=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,E,v)=>n.navigate(w,{state:E,preventScrollReset:v==null?void 0:v.preventScrollReset}),replace:(w,E,v)=>n.navigate(w,{replace:!0,state:E,preventScrollReset:v==null?void 0:v.preventScrollReset})}),[n]),V=n.basename||"/",j=D.useMemo(()=>({router:n,navigator:O,static:!1,basename:V}),[n,O,V]),x=D.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return D.useEffect(()=>JA(r,n.future),[r,n.future]),D.createElement(D.Fragment,null,D.createElement(wu.Provider,{value:j},D.createElement(Og.Provider,{value:i},D.createElement(dR.Provider,{value:R.current},D.createElement(ub.Provider,{value:l},D.createElement(eR,{basename:V,location:i.location,navigationType:i.historyAction,navigator:O,future:x},i.initialized||n.future.v7_partialHydration?D.createElement(yR,{routes:n.routes,future:n.future,state:i}):e))))),null)}const yR=D.memo(vR);function vR(t){let{routes:e,future:n,state:r}=t;return UA(e,void 0,r,n)}const wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Je=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=lb(e,sR),{basename:m}=D.useContext(xs),y,k=!1;if(typeof u=="string"&&_R.test(u)&&(y=u,wR))try{let C=new URL(window.location.href),O=u.startsWith("//")?new URL(C.protocol+u):new URL(u),V=wi(O.pathname,m);O.origin===C.origin&&V!=null?u=V+O.search+O.hash:k=!0}catch{}let R=OA(u,{relative:i}),b=ER(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function S(C){r&&r(C),C.defaultPrevented||b(C)}return D.createElement("a",fa({},p,{href:y||R,onClick:k||s?r:S,ref:n,target:l}))}),kn=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,f=lb(e,oR),p=mh(l,{relative:f.relative}),m=Es(),y=D.useContext(Og),{navigator:k,basename:R}=D.useContext(xs),b=y!=null&&kR(p)&&u===!0,S=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,C=m.pathname,O=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(C=C.toLowerCase(),O=O?O.toLowerCase():null,S=S.toLowerCase()),O&&R&&(O=wi(O,R)||O);const V=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let j=C===S||!o&&C.startsWith(S)&&C.charAt(V)==="/",x=O!=null&&(O===S||!o&&O.startsWith(S)&&O.charAt(S.length)==="/"),w={isActive:j,isPending:x,isTransitioning:b},E=j?r:void 0,v;typeof s=="function"?v=s(w):v=[s,j?"active":null,x?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(w):a;return D.createElement(Je,fa({},f,{"aria-current":E,className:v,ref:n,style:T,to:l,viewTransition:u}),typeof h=="function"?h(w):h)});var Jp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jp||(Jp={}));var a_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(a_||(a_={}));function xR(t){let e=D.useContext(wu);return e||je(!1),e}function ER(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Gr(),u=Es(),h=mh(t,{relative:o});return D.useCallback(f=>{if(rR(f,n)){f.preventDefault();let p=r!==void 0?r:ro(u)===ro(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,r,i,n,t,s,o,a])}function cb(t){let e=D.useRef(Xp(t)),n=D.useRef(!1),r=Es(),i=D.useMemo(()=>iR(r.search,n.current?null:e.current),[r.search]),s=Gr(),o=D.useCallback((a,l)=>{const u=Xp(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}function kR(t,e){e===void 0&&(e={});let n=D.useContext(ub);n==null&&je(!1);let{basename:r}=xR(Jp.useViewTransitionState),i=mh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Nd(i.pathname,o)!=null||Nd(i.pathname,s)!=null}const db=D.createContext(null);function bR({children:t}){const[e,n]=D.useState([]),r=D.useCallback(o=>{n(a=>a.filter(l=>l.id!==o))},[]),i=D.useCallback((o,a)=>{const l=Math.random().toString(36).slice(2);n(u=>[...u,{id:l,kind:o,message:a}]),setTimeout(()=>r(l),3e3)},[r]),s=D.useMemo(()=>({push:i}),[i]);return d.jsxs(db.Provider,{value:s,children:[t,d.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(o=>d.jsxs("div",{className:`alert shadow-lg max-w-sm ${o.kind==="success"?"alert-success":o.kind==="error"?"alert-error":"alert-info"}`,children:[d.jsxs("div",{children:[o.kind==="success"?"":o.kind==="error"?"":"",d.jsx("span",{className:"ml-2",children:o.message})]}),d.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>r(o.id),children:""})]},o.id))})]})}function ks(){const t=D.useContext(db);if(!t)throw new Error("useToast must be used inside <ToastProvider>");return{success:e=>t.push("success",e),error:e=>t.push("error",e),info:e=>t.push("info",e)}}function SR({className:t=""}){const[e,n]=D.useState(!1),[r,i]=D.useState(""),s=D.useRef(null),o=Gr(),a=Es();D.useEffect(()=>{if(a.pathname==="/search"){const h=new URLSearchParams(a.search).get("q");h&&(i(h),n(!0))}else i(""),n(!1)},[a]),D.useEffect(()=>{e&&s.current&&s.current.focus()},[e]),D.useEffect(()=>{const u=h=>{(h.ctrlKey||h.metaKey)&&h.key==="k"&&(h.preventDefault(),n(!0)),h.key==="Escape"&&e&&n(!1)};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e]);const l=u=>{u.preventDefault(),r.trim()&&(console.log(`Searching for: "${r.trim()}"`),o(`/search?q=${encodeURIComponent(r.trim())}`))};return d.jsx("div",{className:`relative ${t}`,children:e?d.jsxs("form",{onSubmit:l,className:"flex items-center",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{ref:s,type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Search...",className:"input input-bordered input-sm w-[100px] xs:w-[120px] sm:w-[180px] md:w-[220px]",onBlur:()=>!r&&n(!1)}),d.jsx("button",{type:"button",className:"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-xs btn-circle",onClick:()=>n(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("button",{type:"submit",className:"btn btn-primary btn-sm ml-1 px-1 sm:px-2 text-xs sm:text-sm",children:[d.jsx("span",{className:"hidden xs:inline",children:"Search"}),d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 xs:hidden",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}):d.jsxs("button",{onClick:()=>n(!0),className:"btn btn-ghost btn-sm px-1 sm:px-2","aria-label":"Search",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),d.jsx("span",{className:"ml-1 hidden lg:inline text-xs",children:"Search"})]})})}var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[h],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new IR;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CR=function(t){const e=hb(t);return fb.encodeByteArray(e,!0)},Pd=function(t){return CR(t).replace(/\./g,"")},pb=function(t){try{return fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=()=>NR().__FIREBASE_DEFAULTS__,RR=()=>{if(typeof process>"u"||typeof l_>"u")return;const t=l_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pb(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return AR()||RR()||PR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mb=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gb=t=>{const e=mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yb=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},vb=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pd(JSON.stringify(n)),Pd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function LR(){var t;const e=(t=gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FR(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UR(){return!LR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zR(){try{return typeof indexedDB=="object"}catch{return!1}}function BR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="FirebaseError";class Qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$R,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Qr(i,a,r)}}function HR(t,e){return t.replace(qR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const qR=/\{\$([^}]+)}/g;function WR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(u_(s)&&u_(o)){if(!jd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function u_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KR(t,e){const n=new GR(t,e);return n.subscribe.bind(n)}class GR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Tf),i.error===void 0&&(i.error=Tf),i.complete===void 0&&(i.complete=Tf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JR(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XR(t){return t===Ms?void 0:t}function JR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const eP={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},tP=Ue.INFO,nP={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},rP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=nP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=rP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const iP=(t,e)=>e.some(n=>t instanceof n);let c_,d_;function sP(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _b=new WeakMap,Zp=new WeakMap,xb=new WeakMap,If=new WeakMap,Fg=new WeakMap;function aP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ls(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_b.set(n,t)}).catch(()=>{}),Fg.set(e,t),e}function lP(t){if(Zp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Zp.set(t,e)}let em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uP(t){em=t(em)}function cP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cf(this),e,...n);return xb.set(r,e.sort?e.sort():[e]),ls(r)}:oP().includes(t)?function(...e){return t.apply(Cf(this),e),ls(_b.get(this))}:function(...e){return ls(t.apply(Cf(this),e))}}function dP(t){return typeof t=="function"?cP(t):(t instanceof IDBTransaction&&lP(t),iP(t,sP())?new Proxy(t,em):t)}function ls(t){if(t instanceof IDBRequest)return aP(t);if(If.has(t))return If.get(t);const e=dP(t);return e!==t&&(If.set(t,e),Fg.set(e,t)),e}const Cf=t=>Fg.get(t);function hP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ls(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ls(o.result),l.oldVersion,l.newVersion,ls(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const fP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],Nf=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Nf.set(e,s),s}uP(t=>({...t,get:(e,n,r)=>h_(e,n)||t.get(e,n,r),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",f_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Vg("@firebase/app"),yP="@firebase/app-compat",vP="@firebase/analytics-compat",wP="@firebase/analytics",_P="@firebase/app-check-compat",xP="@firebase/app-check",EP="@firebase/auth",kP="@firebase/auth-compat",bP="@firebase/database",SP="@firebase/data-connect",TP="@firebase/database-compat",IP="@firebase/functions",CP="@firebase/functions-compat",NP="@firebase/installations",AP="@firebase/installations-compat",RP="@firebase/messaging",PP="@firebase/messaging-compat",jP="@firebase/performance",DP="@firebase/performance-compat",LP="@firebase/remote-config",OP="@firebase/remote-config-compat",MP="@firebase/storage",VP="@firebase/storage-compat",FP="@firebase/firestore",UP="@firebase/vertexai-preview",zP="@firebase/firestore-compat",BP="firebase",$P="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",HP={[tm]:"fire-core",[yP]:"fire-core-compat",[wP]:"fire-analytics",[vP]:"fire-analytics-compat",[xP]:"fire-app-check",[_P]:"fire-app-check-compat",[EP]:"fire-auth",[kP]:"fire-auth-compat",[bP]:"fire-rtdb",[SP]:"fire-data-connect",[TP]:"fire-rtdb-compat",[IP]:"fire-fn",[CP]:"fire-fn-compat",[NP]:"fire-iid",[AP]:"fire-iid-compat",[RP]:"fire-fcm",[PP]:"fire-fcm-compat",[jP]:"fire-perf",[DP]:"fire-perf-compat",[LP]:"fire-rc",[OP]:"fire-rc-compat",[MP]:"fire-gcs",[VP]:"fire-gcs-compat",[FP]:"fire-fst",[zP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[BP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Map,qP=new Map,rm=new Map;function p_(t,e){try{t.container.addComponent(e)}catch(n){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function io(t){const e=t.name;if(rm.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,t);for(const n of Dd.values())p_(n,t);for(const n of qP.values())p_(n,t);return!0}function yh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new xu("app","Firebase",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=$P;function Eb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(n||(n=yb()),!n)throw us.create("no-options");const s=Dd.get(i);if(s){if(jd(n,s.options)&&jd(r,s.config))return s;throw us.create("duplicate-app",{appName:i})}const o=new ZR(i);for(const l of rm.values())o.addComponent(l);const a=new KP(n,r,o);return Dd.set(i,a),a}function Ug(t=nm){const e=Dd.get(t);if(!e&&t===nm&&yb())return Eb();if(!e)throw us.create("no-app",{appName:t});return e}function Ur(t,e,n){var r;let i=(r=HP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(a.join(" "));return}io(new fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="firebase-heartbeat-database",QP=1,nu="firebase-heartbeat-store";let Af=null;function kb(){return Af||(Af=hP(GP,QP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),Af}async function YP(t){try{const n=(await kb()).transaction(nu),r=await n.objectStore(nu).get(bb(t));return await n.done,r}catch(e){if(e instanceof Qr)_i.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(n.message)}}}async function m_(t,e){try{const r=(await kb()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,bb(t)),await r.done}catch(n){if(n instanceof Qr)_i.warn(n.message);else{const r=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_i.warn(r.message)}}}function bb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1024,JP=30*24*60*60*1e3;class ZP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=g_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=JP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g_(),{heartbeatsToSend:r,unsentEntries:i}=ej(this._heartbeatsCache.heartbeats),s=Pd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return _i.warn(n),""}}}function g_(){return new Date().toISOString().substring(0,10)}function ej(t,e=XP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),y_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zR()?BR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return m_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return m_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function y_(t){return Pd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){io(new fs("platform-logger",e=>new mP(e),"PRIVATE")),io(new fs("heartbeat",e=>new ZP(e),"PRIVATE")),Ur(tm,f_,t),Ur(tm,f_,"esm2017"),Ur("fire-js","")}nj("");function zg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rj=Sb,Tb=new xu("auth","Firebase",Sb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Vg("@firebase/auth");function ij(t,...e){Ld.logLevel<=Ue.WARN&&Ld.warn(`Auth (${mo}): ${t}`,...e)}function Wc(t,...e){Ld.logLevel<=Ue.ERROR&&Ld.error(`Auth (${mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,...e){throw $g(t,...e)}function xr(t,...e){return $g(t,...e)}function Bg(t,e,n){const r=Object.assign(Object.assign({},rj()),{[e]:n});return new xu("auth","Firebase",r).create(e,{appName:t.name})}function Qs(t){return Bg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sj(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Hr(t,"argument-error"),Bg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $g(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Tb.create(t,...e)}function Se(t,e,...n){if(!t)throw $g(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wc(e),new Error(e)}function xi(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oj(){return v_()==="http:"||v_()==="https:"}function v_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oj()||MR()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,xi(n>e,"Short delay should be less than long delay!"),this.isMobile=DR()||VR()}get(){return aj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t,e){xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new ku(3e4,6e4);function qg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ta(t,e,n,r,i={}){return Cb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Eu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return OR()||(u.referrerPolicy="no-referrer"),Ib.fetch()(Nb(t,t.config.apiHost,n,a),u)})}async function Cb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uj),e);try{const i=new hj(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw wc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bg(t,h,u);Hr(t,h)}}catch(i){if(i instanceof Qr)throw i;Hr(t,"network-request-failed",{message:String(i)})}}async function dj(t,e,n,r,i={}){const s=await Ta(t,e,n,r,i);return"mfaPendingCredential"in s&&Hr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Nb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hg(t.config,i):`${t.config.apiScheme}://${i}`}class hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xr(this.auth,"network-request-failed")),cj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e){return Ta(t,"POST","/v1/accounts:delete",e)}async function Ab(t,e){return Ta(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pj(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),i=Wg(r);Se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Cl(Rf(i.auth_time)),issuedAtTime:Cl(Rf(i.iat)),expirationTime:Cl(Rf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Rf(t){return Number(t)*1e3}function Wg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const i=pb(n);return i?JSON.parse(i):(Wc("Failed to decode base64 JWT payload"),null)}catch(i){return Wc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function w_(t){const e=Wg(t);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qr&&mj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ru(t,Ab(n,{idToken:r}));Se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Rb(s.providerUserInfo):[],a=vj(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function yj(t){const e=Ct(t);await Od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Rb(t){return t.map(e=>{var{providerId:n}=e,r=zg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e){const n=await Cb(t,{},async()=>{const r=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Nb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ib.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _j(t,e){return Ta(t,"POST","/v2/accounts:revokeToken",qg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=w_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await wj(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ea;return r&&(Se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){Se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ru(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pj(this,e)}reload(){return yj(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Od(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(Qs(this.auth));const e=await this.getIdToken();return await ru(this,fj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,S=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:O,isAnonymous:V,providerData:j,stsTokenManager:x}=n;Se(C&&x,e,"internal-error");const w=ea.fromJSON(this.name,x);Se(typeof C=="string",e,"internal-error"),Fi(f,e.name),Fi(p,e.name),Se(typeof O=="boolean",e,"internal-error"),Se(typeof V=="boolean",e,"internal-error"),Fi(m,e.name),Fi(y,e.name),Fi(k,e.name),Fi(R,e.name),Fi(b,e.name),Fi(S,e.name);const E=new ci({uid:C,auth:e,email:p,emailVerified:O,displayName:f,isAnonymous:V,photoURL:y,phoneNumber:m,tenantId:k,stsTokenManager:w,createdAt:b,lastLoginAt:S});return j&&Array.isArray(j)&&(E.providerData=j.map(v=>Object.assign({},v))),R&&(E._redirectEventId=R),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new ea;i.updateFromServerResponse(n);const s=new ci({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Od(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Rb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ea;a.updateFromIdToken(r);const l=new ci({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;function di(t){xi(t instanceof Function,"Expected a class definition");let e=__.get(t);return e?(xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,__.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Pb.type="NONE";const x_=Pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t,e,n){return`firebase:${t}:${e}:${n}`}class ta{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Kc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ta(di(x_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||di(x_);const o=Kc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=ci._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ta(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ta(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vb(e))return"Blackberry";if(Fb(e))return"Webos";if(Db(e))return"Safari";if((e.includes("chrome/")||Lb(e))&&!e.includes("edge/"))return"Chrome";if(Mb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jb(t=hn()){return/firefox\//i.test(t)}function Db(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lb(t=hn()){return/crios\//i.test(t)}function Ob(t=hn()){return/iemobile/i.test(t)}function Mb(t=hn()){return/android/i.test(t)}function Vb(t=hn()){return/blackberry/i.test(t)}function Fb(t=hn()){return/webos/i.test(t)}function Kg(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xj(t=hn()){var e;return Kg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ej(){return FR()&&document.documentMode===10}function Ub(t=hn()){return Kg(t)||Mb(t)||Fb(t)||Vb(t)||/windows phone/i.test(t)||Ob(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e=[]){let n;switch(t){case"Browser":n=E_(hn());break;case"Worker":n=`${E_(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e={}){return Ta(t,"GET","/v2/passwordPolicy",qg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=6;class Tj{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Sj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k_(this),this.idTokenSubscription=new k_(this),this.beforeStateQueue=new kj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ab(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(li(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Od(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(Qs(this));const n=e?Ct(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(Qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(Qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bj(this),n=new Tj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _j(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ij(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vh(t){return Ct(t)}class k_{constructor(e){this.auth=e,this.observer=null,this.addObserver=KR(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cj(t){Gg=t}function Nj(t){return Gg.loadJS(t)}function Aj(){return Gg.gapiScript}function Rj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t,e){const n=yh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(jd(s,e??{}))return i;Hr(i,"already-initialized")}return n.initialize({options:e})}function jj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Dj(t,e,n){const r=vh(t);Se(r._canInitEmulator,r,"emulator-config-failed"),Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Bb(e),{host:o,port:a}=Lj(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Oj()}function Bb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Lj(t){const e=Bb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:b_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:b_(o)}}}function b_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Oj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e){return dj(t,"POST","/v1/accounts:signInWithIdp",qg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="http://localhost";class so extends $b{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=zg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new so(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return na(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,na(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,na(e,n)}buildRequest(){const e={requestUri:Mj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Eu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Qg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends bu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return so._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return si.credential(n,r)}catch{return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com";si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends bu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends bu{constructor(){super("twitter.com")}static credential(e,n){return so._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gi.credential(n,r)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ci._fromIdTokenResponse(e,r,i),o=S_(r);return new pa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=S_(r);return new pa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function S_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Qr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Md.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Md(e,n,r,i)}}function Hb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Md._fromErrorAndOperation(t,s,e,r):s})}async function Vj(t,e,n=!1){const r=await ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fj(t,e,n=!1){const{auth:r}=t;if(li(r.app))return Promise.reject(Qs(r));const i="reauthenticate";try{const s=await ru(t,Hb(r,i,e,t),n);Se(s.idToken,r,"internal-error");const o=Wg(s.idToken);Se(o,r,"internal-error");const{sub:a}=o;return Se(t.uid===a,r,"user-mismatch"),pa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e,n=!1){if(li(t.app))return Promise.reject(Qs(t));const r="signIn",i=await Hb(t,r,e),s=await pa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function zj(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function Bj(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function Ii(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}function $j(t){return Ct(t).signOut()}const Vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=1e3,qj=10;class Wb extends qb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ub(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Ej()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Hj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wb.type="LOCAL";const Wj=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends qb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kb.type="SESSION";const Gb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Kj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Yg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function Qj(t){zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function Yj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jj(){return Qb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",Zj=1,Fd="firebaseLocalStorage",Xb="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function eD(){const t=indexedDB.deleteDatabase(Yb);return new Su(t).toPromise()}function om(){const t=indexedDB.open(Yb,Zj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fd,{keyPath:Xb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fd)?e(r):(r.close(),await eD(),e(await om()))})})}async function T_(t,e,n){const r=_h(t,!0).put({[Xb]:e,value:n});return new Su(r).toPromise()}async function tD(t,e){const n=_h(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function I_(t,e){const n=_h(t,!0).delete(e);return new Su(n).toPromise()}const nD=800,rD=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(Jj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Yj(),!this.activeServiceWorker)return;this.sender=new Gj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await T_(e,Vd,"1"),await I_(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>T_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=_h(i,!1).getAll();return new Su(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const iD=Jb;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e){return e?di(e):(Se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends $b{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,n){return na(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sD(t){return Uj(t.auth,new Xg(t),t.bypassAuthState)}function oD(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),Fj(n,new Xg(t),t.bypassAuthState)}async function aD(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),Vj(n,new Xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sD;case"linkViaPopup":case"linkViaRedirect":return aD;case"reauthViaPopup":case"reauthViaRedirect":return oD;default:Hr(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new ku(2e3,1e4);async function uD(t,e,n){if(li(t.app))return Promise.reject(xr(t,"operation-not-supported-in-this-environment"));const r=vh(t);sj(t,e,Qg);const i=Zb(r,n);return new qs(r,"signInViaPopup",e,i).executeNotNull()}class qs extends eS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=Yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lD.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="pendingRedirect",Gc=new Map;class dD extends eS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const r=await hD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hD(t,e){const n=mD(e),r=pD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function fD(t,e){Gc.set(t._key(),e)}function pD(t){return di(t._redirectPersistence)}function mD(t){return Kc(cD,t.config.apiKey,t.name)}async function gD(t,e,n=!1){if(li(t.app))return Promise.reject(Qs(t));const r=vh(t),i=Zb(r,e),o=await new dD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=10*60*1e3;class vD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yD&&this.cachedEventUids.clear(),this.cachedEventUids.has(C_(e))}saveEventToCache(e){this.cachedEventUids.add(C_(e)),this.lastProcessedEventTime=Date.now()}}function C_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e={}){return Ta(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ED=/^https?/;async function kD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _D(t);for(const n of e)try{if(bD(n))return}catch{}Hr(t,"unauthorized-domain")}function bD(t){const e=im(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ED.test(n))return!1;if(xD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=new ku(3e4,6e4);function N_(){const t=zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TD(t){return new Promise((e,n)=>{var r,i,s;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(xr(t,"network-request-failed"))},timeout:SD.get()})}if(!((i=(r=zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=zr().gapi)===null||s===void 0)&&s.load)o();else{const a=Rj("iframefcb");return zr()[a]=()=>{gapi.load?o():n(xr(t,"network-request-failed"))},Nj(`${Aj()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function ID(t){return Qc=Qc||TD(t),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new ku(5e3,15e3),ND="__/auth/iframe",AD="emulator/auth/iframe",RD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jD(t){const e=t.config;Se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hg(e,AD):`https://${t.config.authDomain}/${ND}`,r={apiKey:e.apiKey,appName:t.name,v:mo},i=PD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Eu(r).slice(1)}`}async function DD(t){const e=await ID(t),n=zr().gapi;return Se(n,t,"internal-error"),e.open({where:document.body,url:jD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=xr(t,"network-request-failed"),a=zr().setTimeout(()=>{s(o)},CD.get());function l(){zr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OD=500,MD=600,VD="_blank",FD="http://localhost";class A_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UD(t,e,n,r=OD,i=MD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},LD),{width:r.toString(),height:i.toString(),top:s,left:o}),u=hn().toLowerCase();n&&(a=Lb(u)?VD:n),jb(u)&&(e=e||FD,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(xj(u)&&a!=="_self")return zD(e||"",a),new A_(null);const f=window.open(e||"",a,h);Se(f,t,"popup-blocked");try{f.focus()}catch{}return new A_(f)}function zD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="__/auth/handler",$D="emulator/auth/handler",HD=encodeURIComponent("fac");async function R_(t,e,n,r,i,s){Se(t.config.authDomain,t,"auth-domain-config-required"),Se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mo,eventId:i};if(e instanceof Qg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof bu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${HD}=${encodeURIComponent(l)}`:"";return`${qD(t)}?${Eu(a).slice(1)}${u}`}function qD({config:t}){return t.emulator?Hg(t,$D):`https://${t.authDomain}/${BD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class WD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=gD,this._overrideRedirectResult=fD}async _openPopup(e,n,r,i){var s;xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await R_(e,n,r,im(),i);return UD(e,o,Yg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await R_(e,n,r,im(),i);return Qj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DD(e),r=new vD(e);return n.register("authEvent",i=>(Se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Pf];o!==void 0&&n(!!o),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ub()||Db()||Kg()}}const KD=WD;var P_="@firebase/auth",j_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YD(t){io(new fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(t)},u=new Ij(r,i,s,l);return jj(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),io(new fs("auth-internal",e=>{const n=vh(e.getProvider("auth").getImmediate());return(r=>new GD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(P_,j_,QD(t)),Ur(P_,j_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=5*60,JD=vb("authIdTokenMaxAge")||XD;let D_=null;const ZD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JD)return;const i=n==null?void 0:n.token;D_!==i&&(D_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function eL(t=Ug()){const e=yh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Pj(t,{popupRedirectResolver:KD,persistence:[iD,Wj,Gb]}),r=vb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=ZD(s.toString());Bj(n,o,()=>o(n.currentUser)),zj(n,a=>o(a))}}const i=mb("auth");return i&&Dj(n,`http://${i}`),n}function tL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Cj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=xr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",tL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YD("Browser");var nL="firebase",rL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(nL,rL,"app");var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,nS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function E(){}E.prototype=w.prototype,x.D=w.prototype,x.prototype=new E,x.prototype.constructor=x,x.C=function(v,T,I){for(var N=Array(arguments.length-2),G=2;G<arguments.length;G++)N[G-2]=arguments[G];return w.prototype[T].apply(v,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,E){E||(E=0);var v=Array(16);if(typeof w=="string")for(var T=0;16>T;++T)v[T]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(T=0;16>T;++T)v[T]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=x.g[0],E=x.g[1],T=x.g[2];var I=x.g[3],N=w+(I^E&(T^I))+v[0]+3614090360&4294967295;w=E+(N<<7&4294967295|N>>>25),N=I+(T^w&(E^T))+v[1]+3905402710&4294967295,I=w+(N<<12&4294967295|N>>>20),N=T+(E^I&(w^E))+v[2]+606105819&4294967295,T=I+(N<<17&4294967295|N>>>15),N=E+(w^T&(I^w))+v[3]+3250441966&4294967295,E=T+(N<<22&4294967295|N>>>10),N=w+(I^E&(T^I))+v[4]+4118548399&4294967295,w=E+(N<<7&4294967295|N>>>25),N=I+(T^w&(E^T))+v[5]+1200080426&4294967295,I=w+(N<<12&4294967295|N>>>20),N=T+(E^I&(w^E))+v[6]+2821735955&4294967295,T=I+(N<<17&4294967295|N>>>15),N=E+(w^T&(I^w))+v[7]+4249261313&4294967295,E=T+(N<<22&4294967295|N>>>10),N=w+(I^E&(T^I))+v[8]+1770035416&4294967295,w=E+(N<<7&4294967295|N>>>25),N=I+(T^w&(E^T))+v[9]+2336552879&4294967295,I=w+(N<<12&4294967295|N>>>20),N=T+(E^I&(w^E))+v[10]+4294925233&4294967295,T=I+(N<<17&4294967295|N>>>15),N=E+(w^T&(I^w))+v[11]+2304563134&4294967295,E=T+(N<<22&4294967295|N>>>10),N=w+(I^E&(T^I))+v[12]+1804603682&4294967295,w=E+(N<<7&4294967295|N>>>25),N=I+(T^w&(E^T))+v[13]+4254626195&4294967295,I=w+(N<<12&4294967295|N>>>20),N=T+(E^I&(w^E))+v[14]+2792965006&4294967295,T=I+(N<<17&4294967295|N>>>15),N=E+(w^T&(I^w))+v[15]+1236535329&4294967295,E=T+(N<<22&4294967295|N>>>10),N=w+(T^I&(E^T))+v[1]+4129170786&4294967295,w=E+(N<<5&4294967295|N>>>27),N=I+(E^T&(w^E))+v[6]+3225465664&4294967295,I=w+(N<<9&4294967295|N>>>23),N=T+(w^E&(I^w))+v[11]+643717713&4294967295,T=I+(N<<14&4294967295|N>>>18),N=E+(I^w&(T^I))+v[0]+3921069994&4294967295,E=T+(N<<20&4294967295|N>>>12),N=w+(T^I&(E^T))+v[5]+3593408605&4294967295,w=E+(N<<5&4294967295|N>>>27),N=I+(E^T&(w^E))+v[10]+38016083&4294967295,I=w+(N<<9&4294967295|N>>>23),N=T+(w^E&(I^w))+v[15]+3634488961&4294967295,T=I+(N<<14&4294967295|N>>>18),N=E+(I^w&(T^I))+v[4]+3889429448&4294967295,E=T+(N<<20&4294967295|N>>>12),N=w+(T^I&(E^T))+v[9]+568446438&4294967295,w=E+(N<<5&4294967295|N>>>27),N=I+(E^T&(w^E))+v[14]+3275163606&4294967295,I=w+(N<<9&4294967295|N>>>23),N=T+(w^E&(I^w))+v[3]+4107603335&4294967295,T=I+(N<<14&4294967295|N>>>18),N=E+(I^w&(T^I))+v[8]+1163531501&4294967295,E=T+(N<<20&4294967295|N>>>12),N=w+(T^I&(E^T))+v[13]+2850285829&4294967295,w=E+(N<<5&4294967295|N>>>27),N=I+(E^T&(w^E))+v[2]+4243563512&4294967295,I=w+(N<<9&4294967295|N>>>23),N=T+(w^E&(I^w))+v[7]+1735328473&4294967295,T=I+(N<<14&4294967295|N>>>18),N=E+(I^w&(T^I))+v[12]+2368359562&4294967295,E=T+(N<<20&4294967295|N>>>12),N=w+(E^T^I)+v[5]+4294588738&4294967295,w=E+(N<<4&4294967295|N>>>28),N=I+(w^E^T)+v[8]+2272392833&4294967295,I=w+(N<<11&4294967295|N>>>21),N=T+(I^w^E)+v[11]+1839030562&4294967295,T=I+(N<<16&4294967295|N>>>16),N=E+(T^I^w)+v[14]+4259657740&4294967295,E=T+(N<<23&4294967295|N>>>9),N=w+(E^T^I)+v[1]+2763975236&4294967295,w=E+(N<<4&4294967295|N>>>28),N=I+(w^E^T)+v[4]+1272893353&4294967295,I=w+(N<<11&4294967295|N>>>21),N=T+(I^w^E)+v[7]+4139469664&4294967295,T=I+(N<<16&4294967295|N>>>16),N=E+(T^I^w)+v[10]+3200236656&4294967295,E=T+(N<<23&4294967295|N>>>9),N=w+(E^T^I)+v[13]+681279174&4294967295,w=E+(N<<4&4294967295|N>>>28),N=I+(w^E^T)+v[0]+3936430074&4294967295,I=w+(N<<11&4294967295|N>>>21),N=T+(I^w^E)+v[3]+3572445317&4294967295,T=I+(N<<16&4294967295|N>>>16),N=E+(T^I^w)+v[6]+76029189&4294967295,E=T+(N<<23&4294967295|N>>>9),N=w+(E^T^I)+v[9]+3654602809&4294967295,w=E+(N<<4&4294967295|N>>>28),N=I+(w^E^T)+v[12]+3873151461&4294967295,I=w+(N<<11&4294967295|N>>>21),N=T+(I^w^E)+v[15]+530742520&4294967295,T=I+(N<<16&4294967295|N>>>16),N=E+(T^I^w)+v[2]+3299628645&4294967295,E=T+(N<<23&4294967295|N>>>9),N=w+(T^(E|~I))+v[0]+4096336452&4294967295,w=E+(N<<6&4294967295|N>>>26),N=I+(E^(w|~T))+v[7]+1126891415&4294967295,I=w+(N<<10&4294967295|N>>>22),N=T+(w^(I|~E))+v[14]+2878612391&4294967295,T=I+(N<<15&4294967295|N>>>17),N=E+(I^(T|~w))+v[5]+4237533241&4294967295,E=T+(N<<21&4294967295|N>>>11),N=w+(T^(E|~I))+v[12]+1700485571&4294967295,w=E+(N<<6&4294967295|N>>>26),N=I+(E^(w|~T))+v[3]+2399980690&4294967295,I=w+(N<<10&4294967295|N>>>22),N=T+(w^(I|~E))+v[10]+4293915773&4294967295,T=I+(N<<15&4294967295|N>>>17),N=E+(I^(T|~w))+v[1]+2240044497&4294967295,E=T+(N<<21&4294967295|N>>>11),N=w+(T^(E|~I))+v[8]+1873313359&4294967295,w=E+(N<<6&4294967295|N>>>26),N=I+(E^(w|~T))+v[15]+4264355552&4294967295,I=w+(N<<10&4294967295|N>>>22),N=T+(w^(I|~E))+v[6]+2734768916&4294967295,T=I+(N<<15&4294967295|N>>>17),N=E+(I^(T|~w))+v[13]+1309151649&4294967295,E=T+(N<<21&4294967295|N>>>11),N=w+(T^(E|~I))+v[4]+4149444226&4294967295,w=E+(N<<6&4294967295|N>>>26),N=I+(E^(w|~T))+v[11]+3174756917&4294967295,I=w+(N<<10&4294967295|N>>>22),N=T+(w^(I|~E))+v[2]+718787259&4294967295,T=I+(N<<15&4294967295|N>>>17),N=E+(I^(T|~w))+v[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(T+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+T&4294967295,x.g[3]=x.g[3]+I&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var E=w-this.blockSize,v=this.B,T=this.h,I=0;I<w;){if(T==0)for(;I<=E;)i(this,x,I),I+=this.blockSize;if(typeof x=="string"){for(;I<w;)if(v[T++]=x.charCodeAt(I++),T==this.blockSize){i(this,v),T=0;break}}else for(;I<w;)if(v[T++]=x[I++],T==this.blockSize){i(this,v),T=0;break}}this.h=T,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var E=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=E&255,E/=256;for(this.u(x),x=Array(16),w=E=0;4>w;++w)for(var v=0;32>v;v+=8)x[E++]=this.g[w]>>>v&255;return x};function s(x,w){var E=a;return Object.prototype.hasOwnProperty.call(E,x)?E[x]:E[x]=w(x)}function o(x,w){this.h=w;for(var E=[],v=!0,T=x.length-1;0<=T;T--){var I=x[T]|0;v&&I==w||(E[T]=I,v=!1)}this.g=E}var a={};function l(x){return-128<=x&&128>x?s(x,function(w){return new o([w|0],0>w?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return R(u(-x));for(var w=[],E=1,v=0;x>=E;v++)w[v]=x/E|0,E*=4294967296;return new o(w,0)}function h(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return R(h(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(w,8)),v=f,T=0;T<x.length;T+=8){var I=Math.min(8,x.length-T),N=parseInt(x.substring(T,T+I),w);8>I?(I=u(Math.pow(w,I)),v=v.j(I).add(u(N))):(v=v.j(E),v=v.add(u(N)))}return v}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-R(this).m();for(var x=0,w=1,E=0;E<this.g.length;E++){var v=this.i(E);x+=(0<=v?v:4294967296+v)*w,w*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(k(this))return"-"+R(this).toString(x);for(var w=u(Math.pow(x,6)),E=this,v="";;){var T=O(E,w).g;E=b(E,T.j(w));var I=((0<E.g.length?E.g[0]:E.h)>>>0).toString(x);if(E=T,y(E))return I+v;for(;6>I.length;)I="0"+I;v=I+v}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function k(x){return x.h==-1}t.l=function(x){return x=b(this,x),k(x)?-1:y(x)?0:1};function R(x){for(var w=x.g.length,E=[],v=0;v<w;v++)E[v]=~x.g[v];return new o(E,~x.h).add(p)}t.abs=function(){return k(this)?R(this):this},t.add=function(x){for(var w=Math.max(this.g.length,x.g.length),E=[],v=0,T=0;T<=w;T++){var I=v+(this.i(T)&65535)+(x.i(T)&65535),N=(I>>>16)+(this.i(T)>>>16)+(x.i(T)>>>16);v=N>>>16,I&=65535,N&=65535,E[T]=N<<16|I}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(x,w){return x.add(R(w))}t.j=function(x){if(y(this)||y(x))return f;if(k(this))return k(x)?R(this).j(R(x)):R(R(this).j(x));if(k(x))return R(this.j(R(x)));if(0>this.l(m)&&0>x.l(m))return u(this.m()*x.m());for(var w=this.g.length+x.g.length,E=[],v=0;v<2*w;v++)E[v]=0;for(v=0;v<this.g.length;v++)for(var T=0;T<x.g.length;T++){var I=this.i(v)>>>16,N=this.i(v)&65535,G=x.i(T)>>>16,z=x.i(T)&65535;E[2*v+2*T]+=N*z,S(E,2*v+2*T),E[2*v+2*T+1]+=I*z,S(E,2*v+2*T+1),E[2*v+2*T+1]+=N*G,S(E,2*v+2*T+1),E[2*v+2*T+2]+=I*G,S(E,2*v+2*T+2)}for(v=0;v<w;v++)E[v]=E[2*v+1]<<16|E[2*v];for(v=w;v<2*w;v++)E[v]=0;return new o(E,0)};function S(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function C(x,w){this.g=x,this.h=w}function O(x,w){if(y(w))throw Error("division by zero");if(y(x))return new C(f,f);if(k(x))return w=O(R(x),w),new C(R(w.g),R(w.h));if(k(w))return w=O(x,R(w)),new C(R(w.g),w.h);if(30<x.g.length){if(k(x)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var E=p,v=w;0>=v.l(x);)E=V(E),v=V(v);var T=j(E,1),I=j(v,1);for(v=j(v,2),E=j(E,2);!y(v);){var N=I.add(v);0>=N.l(x)&&(T=T.add(E),I=N),v=j(v,1),E=j(E,1)}return w=b(x,T.j(w)),new C(T,w)}for(T=f;0<=x.l(w);){for(E=Math.max(1,Math.floor(x.m()/w.m())),v=Math.ceil(Math.log(E)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),I=u(E),N=I.j(w);k(N)||0<N.l(x);)E-=v,I=u(E),N=I.j(w);y(I)&&(I=p),T=T.add(I),x=b(x,N)}return new C(T,x)}t.A=function(x){return O(this,x).h},t.and=function(x){for(var w=Math.max(this.g.length,x.g.length),E=[],v=0;v<w;v++)E[v]=this.i(v)&x.i(v);return new o(E,this.h&x.h)},t.or=function(x){for(var w=Math.max(this.g.length,x.g.length),E=[],v=0;v<w;v++)E[v]=this.i(v)|x.i(v);return new o(E,this.h|x.h)},t.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),E=[],v=0;v<w;v++)E[v]=this.i(v)^x.i(v);return new o(E,this.h^x.h)};function V(x){for(var w=x.g.length+1,E=[],v=0;v<w;v++)E[v]=x.i(v)<<1|x.i(v-1)>>>31;return new o(E,x.h)}function j(x,w){var E=w>>5;w%=32;for(var v=x.g.length-E,T=[],I=0;I<v;I++)T[I]=0<w?x.i(I+E)>>>w|x.i(I+E+1)<<32-w:x.i(I+E);return new o(T,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ys=o}).apply(typeof L_<"u"?L_:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rS,ml,iS,Yc,am,sS,oS,aS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var _=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in _))break e;_=_[U]}c=c[c.length-1],A=_[c],g=g(A),g!=A&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function s(c,g){c instanceof String&&(c+="");var _=0,A=!1,U={next:function(){if(!A&&_<c.length){var q=_++;return{value:g(q,c[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(c){return c||function(){return s(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function u(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function h(c,g,_){return c.call.apply(c.bind,arguments)}function f(c,g,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function p(c,g,_){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function m(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function y(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,U,q){for(var re=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)re[Ze-2]=arguments[Ze];return g.prototype[U].apply(A,re)}}function k(c){const g=c.length;if(0<g){const _=Array(g);for(let A=0;A<g;A++)_[A]=c[A];return _}return[]}function R(c,g){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(l(A)){const U=c.length||0,q=A.length||0;c.length=U+q;for(let re=0;re<q;re++)c[U+re]=A[re]}else c.push(A)}}class b{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function S(c){return/^[\s\xa0]*$/.test(c)}function C(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function O(c){return O[" "](c),c}O[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function j(c,g,_){for(const A in c)g.call(_,c[A],A,c)}function x(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function w(c){const g={};for(const _ in c)g[_]=c[_];return g}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(c,g){let _,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(_ in A)c[_]=A[_];for(let q=0;q<E.length;q++)_=E[q],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function T(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function I(c){a.setTimeout(()=>{throw c},0)}function N(){var c=Z;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class G{constructor(){this.h=this.g=null}add(g,_){const A=z.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var z=new b(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,W=!1,Z=new G,L=()=>{const c=a.Promise.resolve(void 0);ce=()=>{c.then(ye)}};var ye=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){I(_)}var g=z;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}W=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return c}();function Ie(c,g){if(P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(V){e:{try{O(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ie.aa.h.call(this)}}y(Ie,P);var Ce={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),it=0;function Dn(c,g,_,A,U){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=U,this.key=++it,this.da=this.fa=!1}function Ln(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function lr(c){this.src=c,this.g={},this.h=0}lr.prototype.add=function(c,g,_,A,U){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var re=Xn(c,g,A,U);return-1<re?(g=c[re],_||(g.fa=!1)):(g=new Dn(g,this.src,q,!!A,U),g.fa=_,c.push(g)),g};function bt(c,g){var _=g.type;if(_ in c.g){var A=c.g[_],U=Array.prototype.indexOf.call(A,g,void 0),q;(q=0<=U)&&Array.prototype.splice.call(A,U,1),q&&(Ln(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Xn(c,g,_,A){for(var U=0;U<c.length;++U){var q=c[U];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==A)return U}return-1}var Ni="closure_lm_"+(1e6*Math.random()|0),Ai={};function On(c,g,_,A,U){if(Array.isArray(g)){for(var q=0;q<g.length;q++)On(c,g[q],_,A,U);return null}return _=Cr(_),c&&c[Me]?c.K(g,_,u(A)?!!A.capture:!1,U):Eo(c,g,_,!1,A,U)}function Eo(c,g,_,A,U,q){if(!g)throw Error("Invalid event type");var re=u(U)?!!U.capture:!!U,Ze=Is(c);if(Ze||(c[Ni]=Ze=new lr(c)),_=Ze.add(g,_,A,re,q),_.proxy)return _;if(A=Da(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)le||(U=re),U===void 0&&(U=!1),c.addEventListener(g.toString(),A,U);else if(c.attachEvent)c.attachEvent(ko(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Da(){function c(_){return g.call(c.src,c.listener,_)}const g=La;return c}function Ri(c,g,_,A,U){if(Array.isArray(g))for(var q=0;q<g.length;q++)Ri(c,g[q],_,A,U);else A=u(A)?!!A.capture:!!A,_=Cr(_),c&&c[Me]?(c=c.i,g=String(g).toString(),g in c.g&&(q=c.g[g],_=Xn(q,_,A,U),-1<_&&(Ln(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete c.g[g],c.h--)))):c&&(c=Is(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Xn(g,_,A,U)),(_=-1<c?g[c]:null)&&Pi(_))}function Pi(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Me])bt(g.i,c);else{var _=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(_,A,c.capture):g.detachEvent?g.detachEvent(ko(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=Is(g))?(bt(_,c),_.h==0&&(_.src=null,g[Ni]=null)):Ln(c)}}}function ko(c){return c in Ai?Ai[c]:Ai[c]="on"+c}function La(c,g){if(c.da)c=!0;else{g=new Ie(g,this);var _=c.listener,A=c.ha||c.src;c.fa&&Pi(c),c=_.call(A,g)}return c}function Is(c){return c=c[Ni],c instanceof lr?c:null}var Mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(c){return typeof c=="function"?c:(c[Mn]||(c[Mn]=function(g){return c.handleEvent(g)}),c[Mn])}function H(){$.call(this),this.i=new lr(this),this.M=this,this.F=null}y(H,$),H.prototype[Me]=!0,H.prototype.removeEventListener=function(c,g,_,A){Ri(this,c,g,_,A)};function X(c,g){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new P(g,c);else if(g instanceof P)g.target=g.target||c;else{var U=g;g=new P(A,c),v(g,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var re=g.g=_[q];U=me(re,A,!0,g)&&U}if(re=g.g=c,U=me(re,A,!0,g)&&U,U=me(re,A,!1,g)&&U,_)for(q=0;q<_.length;q++)re=g.g=_[q],U=me(re,A,!1,g)&&U}H.prototype.N=function(){if(H.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],A=0;A<_.length;A++)Ln(_[A]);delete c.g[g],c.h--}}this.F=null},H.prototype.K=function(c,g,_,A){return this.i.add(String(c),g,!1,_,A)},H.prototype.L=function(c,g,_,A){return this.i.add(String(c),g,!0,_,A)};function me(c,g,_,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,q=0;q<g.length;++q){var re=g[q];if(re&&!re.da&&re.capture==_){var Ze=re.listener,Ht=re.ha||re.src;re.fa&&bt(c.i,re),U=Ze.call(Ht,A)!==!1&&U}}return U&&!A.defaultPrevented}function we(c,g,_){if(typeof c=="function")_&&(c=p(c,_));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(c,g||0)}function He(c){c.g=we(()=>{c.g=null,c.i&&(c.i=!1,He(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Vt extends ${constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:He(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pn(c){$.call(this),this.h=c,this.g={}}y(pn,$);var St=[];function ur(c){j(c.g,function(g,_){this.g.hasOwnProperty(_)&&Pi(g)},c),c.g={}}pn.prototype.N=function(){pn.aa.N.call(this),ur(this)},pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jn=a.JSON.stringify,Ft=a.JSON.parse,Nr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function en(){}en.prototype.h=null;function Cs(c){return c.h||(c.h=c.i())}function Oa(){}var Xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ns(){P.call(this,"d")}y(Ns,P);function Ma(){P.call(this,"c")}y(Ma,P);var Ar={},zu=null;function As(){return zu=zu||new H}Ar.La="serverreachability";function Rs(c){P.call(this,Ar.La,c)}y(Rs,P);function Rr(c){const g=As();X(g,new Rs(g))}Ar.STAT_EVENT="statevent";function Bu(c,g){P.call(this,Ar.STAT_EVENT,c),this.stat=g}y(Bu,P);function $t(c){const g=As();X(g,new Bu(g,c))}Ar.Ma="timingevent";function M(c,g){P.call(this,Ar.Ma,c),this.size=g}y(M,P);function F(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function B(){this.g=!0}B.prototype.xa=function(){this.g=!1};function Y(c,g,_,A,U,q){c.info(function(){if(c.g)if(q)for(var re="",Ze=q.split("&"),Ht=0;Ht<Ze.length;Ht++){var We=Ze[Ht].split("=");if(1<We.length){var tn=We[0];We=We[1];var nn=tn.split("_");re=2<=nn.length&&nn[1]=="type"?re+(tn+"="+We+"&"):re+(tn+"=redacted&")}}else re=null;else re=q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+g+`
`+_+`
`+re})}function ie(c,g,_,A,U,q,re){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+g+`
`+_+`
`+q+" "+re})}function fe(c,g,_,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+de(c,_)+(A?" "+A:"")})}function _e(c,g){c.info(function(){return"TIMEOUT: "+g})}B.prototype.info=function(){};function de(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var re=1;re<U.length;re++)U[re]=""}}}}return Jn(_)}catch{return g}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pe;function be(){}y(be,en),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},pe=new be;function Re(c,g,_,A){this.j=c,this.i=g,this.l=_,this.R=A||1,this.U=new pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var Ge={},Fe={};function tt(c,g,_){c.L=1,c.v=Wu(ti(g)),c.m=_,c.P=!0,Jr(c,null)}function Jr(c,g){c.F=Date.now(),mn(c),c.A=ti(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),dv(_.i,"t",A),c.C=0,_=c.j.J,c.h=new Nt,c.g=Nv(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Vt(p(c.Y,c,c.g),c.O)),g=c.U,_=c.g,A=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(St[0]=U.toString()),U=St);for(var q=0;q<U.length;q++){var re=On(_,U[q],A||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Rr(),Y(c.i,c.u,c.A,c.l,c.R,c.m)}Re.prototype.ca=function(c){c=c.target;const g=this.M;g&&ni(c)==3?g.j():this.Y(c)},Re.prototype.Y=function(c){try{if(c==this.g)e:{const nn=ni(this.g);var g=this.g.Ba();const Io=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||vv(this.g)))){this.J||nn!=4||g==7||(g==8||0>=Io?Rr(3):Rr(2)),Zr(this);var _=this.g.Z();this.X=_;t:if(ji(this)){var A=vv(this.g);c="";var U=A.length,q=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),Vn(this);var re="";break t}this.h.i=new a.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!(q&&g==U-1)});A.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,ie(this.i,this.u,this.A,this.l,this.R,nn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Ht=this.g;if((Ze=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Ze)){var We=Ze;break t}}We=null}if(_=We)fe(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Di(this,_);else{this.o=!1,this.s=3,$t(12),Zn(this),Vn(this);break e}}if(this.P){_=!0;let dr;for(;!this.J&&this.C<re.length;)if(dr=cr(this,re),dr==Fe){nn==4&&(this.s=4,$t(14),_=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==Ge){this.s=4,$t(15),fe(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else fe(this.i,this.l,dr,null),Di(this,dr);if(ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||re.length!=0||this.h.h||(this.s=1,$t(16),_=!1),this.o=this.o&&_,!_)fe(this.i,this.l,re,"[Invalid Chunked Response]"),Zn(this),Vn(this);else if(0<re.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Gh(tn),tn.M=!0,$t(11))}}else fe(this.i,this.l,re,null),Di(this,re);nn==4&&Zn(this),this.o&&!this.J&&(nn==4?Sv(this.j,this):(this.o=!1,mn(this)))}else c1(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Zn(this),Vn(this)}}}catch{}finally{}};function ji(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cr(c,g){var _=c.C,A=g.indexOf(`
`,_);return A==-1?Fe:(_=Number(g.substring(_,A)),isNaN(_)?Ge:(A+=1,A+_>g.length?Fe:(g=g.slice(A,A+_),c.C=A+_,g)))}Re.prototype.cancel=function(){this.J=!0,Zn(this)};function mn(c){c.S=Date.now()+c.I,bo(c,c.I)}function bo(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=F(p(c.ba,c),g)}function Zr(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Re.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(_e(this.i,this.A),this.L!=2&&(Rr(),$t(17)),Zn(this),this.s=2,Vn(this)):bo(this,this.S-c)};function Vn(c){c.j.G==0||c.J||Sv(c.j,c)}function Zn(c){Zr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ur(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Di(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||ht(_.h,c))){if(!c.K&&ht(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ju(_),Yu(_);else break e;Kh(_),$t(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=F(p(_.Za,_),6e3));if(1>=Li(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else js(_,11)}else if((c.K||_.g==c)&&Ju(_),!S(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let We=U[g];if(_.T=We[0],We=We[1],_.G==2)if(We[0]=="c"){_.K=We[1],_.ia=We[2];const tn=We[3];tn!=null&&(_.la=tn,_.j.info("VER="+_.la));const nn=We[4];nn!=null&&(_.Aa=nn,_.j.info("SVER="+_.Aa));const Io=We[5];Io!=null&&typeof Io=="number"&&0<Io&&(A=1.5*Io,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const dr=c.g;if(dr){const ec=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ec){var q=A.h;q.g||ec.indexOf("spdy")==-1&&ec.indexOf("quic")==-1&&ec.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Pr(q,q.h),q.h=null))}if(A.D){const Qh=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Qh&&(A.ya=Qh,ot(A.I,A.D,Qh))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var re=c;if(A.qa=Cv(A,A.J?A.ia:null,A.W),re.K){Va(A.h,re);var Ze=re,Ht=A.L;Ht&&(Ze.I=Ht),Ze.B&&(Zr(Ze),mn(Ze)),A.g=re}else kv(A);0<_.i.length&&Xu(_)}else We[0]!="stop"&&We[0]!="close"||js(_,7);else _.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?js(_,7):Wh(_):We[0]!="noop"&&_.l&&_.l.ta(We),_.v=0)}}Rr(4)}catch{}}var ze=class{constructor(c,g){this.g=c,this.map=g}};function st(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ei(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Li(c){return c.h?1:c.g?c.g.size:0}function ht(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Pr(c,g){c.g?c.g.add(g):c.h=g}function Va(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}st.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function $u(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return k(c.i)}function QI(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var g=[],_=c.length,A=0;A<_;A++)g.push(c[A]);return g}g=[],_=0;for(A in c)g[_++]=c[A];return g}function YI(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const A in c)g[_++]=A;return g}}}function sv(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=YI(c),A=QI(c),U=A.length,q=0;q<U;q++)g.call(void 0,A[q],_&&_[q],c)}var ov=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XI(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),U=null;if(0<=A){var q=c[_].substring(0,A);U=c[_].substring(A+1)}else q=c[_];g(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ps(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ps){this.h=c.h,Hu(this,c.j),this.o=c.o,this.g=c.g,qu(this,c.s),this.l=c.l;var g=c.i,_=new za;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),av(this,_),this.m=c.m}else c&&(g=String(c).match(ov))?(this.h=!1,Hu(this,g[1]||"",!0),this.o=Fa(g[2]||""),this.g=Fa(g[3]||"",!0),qu(this,g[4]),this.l=Fa(g[5]||"",!0),av(this,g[6]||"",!0),this.m=Fa(g[7]||"")):(this.h=!1,this.i=new za(null,this.h))}Ps.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Ua(g,lv,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Ua(g,lv,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ua(_,_.charAt(0)=="/"?e1:ZI,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ua(_,n1)),c.join("")};function ti(c){return new Ps(c)}function Hu(c,g,_){c.j=_?Fa(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function qu(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function av(c,g,_){g instanceof za?(c.i=g,r1(c.i,c.h)):(_||(g=Ua(g,t1)),c.i=new za(g,c.h))}function ot(c,g,_){c.i.set(g,_)}function Wu(c){return ot(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fa(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ua(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,JI),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function JI(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var lv=/[#\/\?@]/g,ZI=/[#\?:]/g,e1=/[#\?]/g,t1=/[#\?@]/g,n1=/#/g;function za(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Oi(c){c.g||(c.g=new Map,c.h=0,c.i&&XI(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=za.prototype,t.add=function(c,g){Oi(this),this.i=null,c=So(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function uv(c,g){Oi(c),g=So(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function cv(c,g){return Oi(c),g=So(c,g),c.g.has(g)}t.forEach=function(c,g){Oi(this),this.g.forEach(function(_,A){_.forEach(function(U){c.call(g,U,A,this)},this)},this)},t.na=function(){Oi(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let A=0;A<g.length;A++){const U=c[A];for(let q=0;q<U.length;q++)_.push(g[A])}return _},t.V=function(c){Oi(this);let g=[];if(typeof c=="string")cv(this,c)&&(g=g.concat(this.g.get(So(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},t.set=function(c,g){return Oi(this),this.i=null,c=So(this,c),cv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function dv(c,g,_){uv(c,g),0<_.length&&(c.i=null,c.g.set(So(c,g),k(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var A=g[_];const q=encodeURIComponent(String(A)),re=this.V(A);for(A=0;A<re.length;A++){var U=q;re[A]!==""&&(U+="="+encodeURIComponent(String(re[A]))),c.push(U)}}return this.i=c.join("&")};function So(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function r1(c,g){g&&!c.j&&(Oi(c),c.i=null,c.g.forEach(function(_,A){var U=A.toLowerCase();A!=U&&(uv(this,A),dv(this,U,_))},c)),c.j=g}function i1(c,g){const _=new B;if(a.Image){const A=new Image;A.onload=m(Mi,_,"TestLoadImage: loaded",!0,g,A),A.onerror=m(Mi,_,"TestLoadImage: error",!1,g,A),A.onabort=m(Mi,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=m(Mi,_,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function s1(c,g){const _=new B,A=new AbortController,U=setTimeout(()=>{A.abort(),Mi(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(q=>{clearTimeout(U),q.ok?Mi(_,"TestPingServer: ok",!0,g):Mi(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Mi(_,"TestPingServer: error",!1,g)})}function Mi(c,g,_,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(_)}catch{}}function o1(){this.g=new Nr}function a1(c,g,_){const A=_||"";try{sv(c,function(U,q){let re=U;u(U)&&(re=Jn(U)),g.push(A+q+"="+encodeURIComponent(re))})}catch(U){throw g.push(A+"type="+encodeURIComponent("_badmap")),U}}function Ku(c){this.l=c.Ub||null,this.j=c.eb||!1}y(Ku,en),Ku.prototype.g=function(){return new Gu(this.l,this.j)},Ku.prototype.i=function(c){return function(){return c}}({});function Gu(c,g){H.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Gu,H),t=Gu.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,$a(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hv(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hv(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ba(this):$a(this),this.readyState==3&&hv(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ba(this))},t.Qa=function(c){this.g&&(this.response=c,Ba(this))},t.ga=function(){this.g&&Ba(this)};function Ba(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$a(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function $a(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function fv(c){let g="";return j(c,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function qh(c,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=fv(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):ot(c,g,_))}function wt(c){H.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(wt,H);var l1=/^https?$/i,u1=["POST","PUT"];t=wt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pe.g(),this.v=this.o?Cs(this.o):Cs(pe),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(q){pv(this,q);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)_.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())_.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(u1,g,void 0))||A||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,re]of _)this.g.setRequestHeader(q,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yv(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){pv(this,q)}};function pv(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,mv(c),Qu(c)}function mv(c){c.A||(c.A=!0,X(c,"complete"),X(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,X(this,"complete"),X(this,"abort"),Qu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qu(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gv(this):this.bb())},t.bb=function(){gv(this)};function gv(c){if(c.h&&typeof o<"u"&&(!c.v[1]||ni(c)!=4||c.Z()!=2)){if(c.u&&ni(c)==4)we(c.Ea,0,c);else if(X(c,"readystatechange"),ni(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=re===0){var U=String(c.D).match(ov)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),A=!l1.test(U?U.toLowerCase():"")}_=A}if(_)X(c,"complete"),X(c,"success");else{c.m=6;try{var q=2<ni(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",mv(c)}}finally{Qu(c)}}}}function Qu(c,g){if(c.g){yv(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||X(c,"ready");try{_.onreadystatechange=A}catch{}}}function yv(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ni(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ft(g)}};function vv(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function c1(c){const g={};c=(c.g&&2<=ni(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(S(c[A]))continue;var _=T(c[A]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[U]||[];g[U]=q,q.push(_)}x(g,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function wv(c){this.Aa=0,this.i=[],this.j=new B,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ha("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ha("baseRetryDelayMs",5e3,c),this.cb=Ha("retryDelaySeedMs",1e4,c),this.Wa=Ha("forwardChannelMaxRetries",2,c),this.wa=Ha("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new st(c&&c.concurrentRequestLimit),this.Da=new o1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wv.prototype,t.la=8,t.G=1,t.connect=function(c,g,_,A){$t(0),this.W=c,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Cv(this,null,this.W),Xu(this)};function Wh(c){if(_v(c),c.G==3){var g=c.U++,_=ti(c.I);if(ot(_,"SID",c.K),ot(_,"RID",g),ot(_,"TYPE","terminate"),qa(c,_),g=new Re(c,c.j,g),g.L=2,g.v=Wu(ti(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=Nv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),mn(g)}Iv(c)}function Yu(c){c.g&&(Gh(c),c.g.cancel(),c.g=null)}function _v(c){Yu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ju(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Xu(c){if(!ei(c.h)&&!c.s){c.s=!0;var g=c.Ga;ce||L(),W||(ce(),W=!0),Z.add(g,c),c.B=0}}function d1(c,g){return Li(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=F(p(c.Ga,c,g),Tv(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Re(this,this.j,c);let q=this.o;if(this.S&&(q?(q=w(q),v(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ev(this,U,g),_=ti(this.I),ot(_,"RID",c),ot(_,"CVER",22),this.D&&ot(_,"X-HTTP-Session-Id",this.D),qa(this,_),q&&(this.O?g="headers="+encodeURIComponent(String(fv(q)))+"&"+g:this.m&&qh(_,this.m,q)),Pr(this.h,U),this.Ua&&ot(_,"TYPE","init"),this.P?(ot(_,"$req",g),ot(_,"SID","null"),U.T=!0,tt(U,_,null)):tt(U,_,g),this.G=2}}else this.G==3&&(c?xv(this,c):this.i.length==0||ei(this.h)||xv(this))};function xv(c,g){var _;g?_=g.l:_=c.U++;const A=ti(c.I);ot(A,"SID",c.K),ot(A,"RID",_),ot(A,"AID",c.T),qa(c,A),c.m&&c.o&&qh(A,c.m,c.o),_=new Re(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ev(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pr(c.h,_),tt(_,A,g)}function qa(c,g){c.H&&j(c.H,function(_,A){ot(g,A,_)}),c.l&&sv({},function(_,A){ot(g,A,_)})}function Ev(c,g,_){_=Math.min(c.i.length,_);var A=c.l?p(c.l.Na,c.l,c):null;e:{var U=c.i;let q=-1;for(;;){const re=["count="+_];q==-1?0<_?(q=U[0].g,re.push("ofs="+q)):q=0:re.push("ofs="+q);let Ze=!0;for(let Ht=0;Ht<_;Ht++){let We=U[Ht].g;const tn=U[Ht].map;if(We-=q,0>We)q=Math.max(0,U[Ht].g-100),Ze=!1;else try{a1(tn,re,"req"+We+"_")}catch{A&&A(tn)}}if(Ze){A=re.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,A}function kv(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ce||L(),W||(ce(),W=!0),Z.add(g,c),c.v=0}}function Kh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=F(p(c.Fa,c),Tv(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,bv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=F(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Yu(this),bv(this))};function Gh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bv(c){c.g=new Re(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=ti(c.qa);ot(g,"RID","rpc"),ot(g,"SID",c.K),ot(g,"AID",c.T),ot(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&ot(g,"TO",c.ja),ot(g,"TYPE","xmlhttp"),qa(c,g),c.m&&c.o&&qh(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Wu(ti(g)),_.m=null,_.P=!0,Jr(_,c)}t.Za=function(){this.C!=null&&(this.C=null,Yu(this),Kh(this),$t(19))};function Ju(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Sv(c,g){var _=null;if(c.g==g){Ju(c),Gh(c),c.g=null;var A=2}else if(ht(c.h,g))_=g.D,Va(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;A=As(),X(A,new M(A,_)),Xu(c)}else kv(c);else if(U=g.s,U==3||U==0&&0<g.X||!(A==1&&d1(c,g)||A==2&&Kh(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),U){case 1:js(c,5);break;case 4:js(c,10);break;case 3:js(c,6);break;default:js(c,2)}}}function Tv(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function js(c,g){if(c.j.info("Error code "+g),g==2){var _=p(c.fb,c),A=c.Xa;const U=!A;A=new Ps(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hu(A,"https"),Wu(A),U?i1(A.toString(),_):s1(A.toString(),_)}else $t(2);c.G=0,c.l&&c.l.sa(g),Iv(c),_v(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Iv(c){if(c.G=0,c.ka=[],c.l){const g=$u(c.h);(g.length!=0||c.i.length!=0)&&(R(c.ka,g),R(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function Cv(c,g,_){var A=_ instanceof Ps?ti(_):new Ps(_);if(A.g!="")g&&(A.g=g+"."+A.g),qu(A,A.s);else{var U=a.location;A=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var q=new Ps(null);A&&Hu(q,A),g&&(q.g=g),U&&qu(q,U),_&&(q.l=_),A=q}return _=c.D,g=c.ya,_&&g&&ot(A,_,g),ot(A,"VER",c.la),qa(c,A),A}function Nv(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new wt(new Ku({eb:_})):new wt(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Av(){}t=Av.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zu(){}Zu.prototype.g=function(c,g){return new Fn(c,g)};function Fn(c,g){H.call(this),this.g=new wv(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!S(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!S(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new To(this)}y(Fn,H),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Wh(this.g)},Fn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Jn(c),c=_);g.i.push(new ze(g.Ya++,c)),g.G==3&&Xu(g)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Wh(this.g),delete this.g,Fn.aa.N.call(this)};function Rv(c){Ns.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}y(Rv,Ns);function Pv(){Ma.call(this),this.status=1}y(Pv,Ma);function To(c){this.g=c}y(To,Av),To.prototype.ua=function(){X(this.g,"a")},To.prototype.ta=function(c){X(this.g,new Rv(c))},To.prototype.sa=function(c){X(this.g,new Pv)},To.prototype.ra=function(){X(this.g,"b")},Zu.prototype.createWebChannel=Zu.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,aS=function(){return new Zu},oS=function(){return As()},sS=Ar,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,Yc=ue,oe.COMPLETE="complete",iS=oe,Oa.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",H.prototype.listen=H.prototype.K,ml=Oa,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,rS=wt}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const O_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new Vg("@firebase/firestore");function rl(){return oo.logLevel}function he(t,...e){if(oo.logLevel<=Ue.DEBUG){const n=e.map(Jg);oo.debug(`Firestore (${Ia}): ${t}`,...n)}}function Ei(t,...e){if(oo.logLevel<=Ue.ERROR){const n=e.map(Jg);oo.error(`Firestore (${Ia}): ${t}`,...n)}}function ma(t,...e){if(oo.logLevel<=Ue.WARN){const n=e.map(Jg);oo.warn(`Firestore (${Ia}): ${t}`,...n)}}function Jg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: `+t;throw Ei(e),new Error(e)}function Xe(t,e){t||Te()}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(an.UNAUTHENTICATED))}shutdown(){}}class sL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oL{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new lS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new an(e)}}class aL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new aL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Xe(this.o===void 0);const r=s=>{s.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new uL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=dL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function ga(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Mt(0,0))}static max(){return new Ne(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(),r===void 0?r=e.length-n:r>e.length-n&&Te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return iu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof iu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends iu{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const hL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends iu{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return hL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(lt.fromString(e))}static fromName(e){return new ge(lt.fromString(e).popFirst(5))}static empty(){return new ge(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new lt(e.slice()))}}function fL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new ps(i,ge.empty(),e)}function pL(t){return new ps(t.readTime,t.key,-1)}class ps{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ps(Ne.min(),ge.empty(),-1)}static max(){return new ps(Ne.max(),ge.empty(),-1)}}function mL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==gL)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new J((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function vL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Iu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zg.oe=-1;function xh(t){return t==null}function Ud(t){return t===0&&1/t==-1/0}function wL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kt.EMPTY,this.right=s??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V_(this.data.getIterator())}getIteratorFrom(e){return new V_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class V_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Xt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dS("Invalid base64 string: "+s):s}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const _L=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=_L.exec(t);if(Xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ao(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ty(t){const e=t.mapValue.fields.__previous_value__;return ey(e)?ty(e):e}function su(t){const e=ms(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ou{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec={mapValue:{}};function lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ey(t)?4:kL(t)?9007199254740991:EL(t)?10:11:Te()}function qr(t,e){if(t===e)return!0;const n=lo(t);if(n!==lo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return su(t).isEqual(su(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ms(i.timestampValue),a=ms(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ao(i.bytesValue).isEqual(ao(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Tt(i.doubleValue),a=Tt(s.doubleValue);return o===a?Ud(o)===Ud(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(M_(o)!==M_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qr(o[l],a[l])))return!1;return!0}(t,e);default:return Te()}}function au(t,e){return(t.values||[]).find(n=>qr(n,e))!==void 0}function ya(t,e){if(t===e)return 0;const n=lo(t),r=lo(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Tt(s.integerValue||s.doubleValue),l=Tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return F_(t.timestampValue,e.timestampValue);case 4:return F_(su(t),su(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ao(s),l=ao(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ke(a[u],l[u]);if(h!==0)return h}return Ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ke(Tt(s.latitude),Tt(o.latitude));return a!==0?a:Ke(Tt(s.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return U_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,k=Ke(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:U_(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ec.mapValue&&o===Ec.mapValue)return 0;if(s===Ec.mapValue)return 1;if(o===Ec.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ke(l[f],h[f]);if(p!==0)return p;const m=ya(a[l[f]],u[h[f]]);if(m!==0)return m}return Ke(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Te()}}function F_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=ms(t),r=ms(e),i=Ke(n.seconds,r.seconds);return i!==0?i:Ke(n.nanos,r.nanos)}function U_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ya(n[i],r[i]);if(s)return s}return Ke(n.length,r.length)}function va(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ao(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=lm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${lm(n.fields[o])}`;return i+"}"}(t.mapValue):Te()}function z_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function um(t){return!!t&&"integerValue"in t}function ny(t){return!!t&&"arrayValue"in t}function B_(t){return!!t&&"nullValue"in t}function $_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xc(t){return!!t&&"mapValue"in t}function EL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Nl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Nl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){go(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new In(Nl(this.value))}}function hS(t){const e=[];return go(t.fields,(n,r)=>{const i=new Qt([n]);if(Xc(r)){const s=hS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Ne.min(),Ne.min(),Ne.min(),In.empty(),0)}static newFoundDocument(e,n,r,i){return new un(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new un(e,2,n,Ne.min(),Ne.min(),In.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ne.min(),Ne.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n){this.position=e,this.inclusive=n}}function H_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),n.key):r=ya(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function bL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{}class Dt extends fS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TL(e,n,r):n==="array-contains"?new NL(e,r):n==="in"?new AL(e,r):n==="not-in"?new RL(e,r):n==="array-contains-any"?new PL(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IL(e,r):new CL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ya(n,this.value)):n!==null&&lo(this.value)===lo(n)&&this.matchesComparison(ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends fS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tr(e,n)}matches(e){return pS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pS(t){return t.op==="and"}function mS(t){return SL(t)&&pS(t)}function SL(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function cm(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+va(t.value);if(mS(t))return t.filters.map(e=>cm(e)).join(",");{const e=t.filters.map(n=>cm(n)).join(",");return`${t.op}(${e})`}}function gS(t,e){return t instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&qr(r.value,i.value)}(t,e):t instanceof Tr?function(r,i){return i instanceof Tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gS(o,i.filters[a]),!0):!1}(t,e):void Te()}function yS(t){return t instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(t):t instanceof Tr?function(n){return n.op.toString()+" {"+n.getFilters().map(yS).join(" ,")+"}"}(t):"Filter"}class TL extends Dt{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class IL extends Dt{constructor(e,n){super(e,"in",n),this.keys=vS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CL extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=vS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class NL extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ny(n)&&au(n.arrayValue,this.value)}}class AL extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class RL extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!au(this.value.arrayValue,n)}}class PL extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ny(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function W_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jL(t,e,n,r,i,s,o)}function ry(t){const e=Ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>va(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>va(r)).join(",")),e.ue=n}return e.ue}function iy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q_(t.startAt,e.startAt)&&q_(t.endAt,e.endAt)}function dm(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DL(t,e,n,r,i,s,o,a){return new Ca(t,e,n,r,i,s,o,a)}function sy(t){return new Ca(t)}function K_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wS(t){return t.collectionGroup!==null}function Al(t){const e=Ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new lu(s,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new lu(Qt.keyField(),r))}return e.ce}function Br(t){const e=Ae(t);return e.le||(e.le=LL(e,Al(t))),e.le}function LL(t,e){if(t.limitType==="F")return W_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lu(i.field,s)});const n=t.endAt?new zd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zd(t.startAt.position,t.startAt.inclusive):null;return W_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hm(t,e){const n=t.filters.concat([e]);return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bd(t,e,n){return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return iy(Br(t),Br(e))&&t.limitType===e.limitType}function _S(t){return`${ry(Br(t))}|lt:${t.limitType}`}function Po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yS(i)).join(", ")}]`),xh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>va(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>va(i)).join(",")),`Target(${r})`}(Br(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Al(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=H_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Al(r),i)||r.endAt&&!function(o,a,l){const u=H_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Al(r),i))}(t,e)}function OL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xS(t){return(e,n)=>{let r=!1;for(const i of Al(t)){const s=ML(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ML(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ya(l,u):Te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return cS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new vt(ge.comparator);function ki(){return VL}const ES=new vt(ge.comparator);function gl(...t){let e=ES;for(const n of t)e=e.insert(n.key,n);return e}function kS(t){let e=ES;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ws(){return Rl()}function bS(){return Rl()}function Rl(){return new Na(t=>t.toString(),(t,e)=>t.isEqual(e))}const FL=new vt(ge.comparator),UL=new Xt(ge.comparator);function Ve(...t){let e=UL;for(const n of t)e=e.add(n);return e}const zL=new Xt(Ke);function BL(){return zL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function SS(t){return{integerValue:""+t}}function $L(t,e){return wL(e)?SS(e):oy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function HL(t,e,n){return t instanceof uu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ey(s)&&(s=ty(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cu?IS(t,e):t instanceof du?CS(t,e):function(i,s){const o=TS(i,s),a=G_(o)+G_(i.Pe);return um(o)&&um(i.Pe)?SS(a):oy(i.serializer,a)}(t,e)}function qL(t,e,n){return t instanceof cu?IS(t,e):t instanceof du?CS(t,e):n}function TS(t,e){return t instanceof $d?function(r){return um(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class uu extends bh{}class cu extends bh{constructor(e){super(),this.elements=e}}function IS(t,e){const n=NS(e);for(const r of t.elements)n.some(i=>qr(i,r))||n.push(r);return{arrayValue:{values:n}}}class du extends bh{constructor(e){super(),this.elements=e}}function CS(t,e){let n=NS(e);for(const r of t.elements)n=n.filter(i=>!qr(i,r));return{arrayValue:{values:n}}}class $d extends bh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function G_(t){return Tt(t.integerValue||t.doubleValue)}function NS(t){return ny(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n){this.field=e,this.transform=n}}function KL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cu&&i instanceof cu||r instanceof du&&i instanceof du?ga(r.elements,i.elements,qr):r instanceof $d&&i instanceof $d?qr(r.Pe,i.Pe):r instanceof uu&&i instanceof uu}(t.transform,e.transform)}class GL{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sh{}function AS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ay(t.key,sr.none()):new Cu(t.key,t.data,sr.none());{const n=t.data,r=In.empty();let i=new Xt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bs(t.key,r,new Hn(i.toArray()),sr.none())}}function QL(t,e,n){t instanceof Cu?function(i,s,o){const a=i.value.clone(),l=Y_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(i,s,o){if(!Jc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Y_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(RS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pl(t,e,n,r){return t instanceof Cu?function(s,o,a,l){if(!Jc(s.precondition,o))return a;const u=s.value.clone(),h=X_(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof bs?function(s,o,a,l){if(!Jc(s.precondition,o))return a;const u=X_(s.fieldTransforms,l,o),h=o.data;return h.setAll(RS(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Jc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function YL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=TS(r.transform,i||null);s!=null&&(n===null&&(n=In.empty()),n.set(r.field,s))}return n||null}function Q_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ga(r,i,(s,o)=>KL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends Sh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bs extends Sh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Y_(t,e,n){const r=new Map;Xe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qL(o,a,n[i]))}return r}function X_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,HL(s,o,e))}return r}class ay extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XL extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=AS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(n,r)=>Q_(n,r))&&ga(this.baseMutations,e.baseMutations,(n,r)=>Q_(n,r))}}class ly{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length);let i=function(){return FL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ly(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Be;function t2(t){switch(t){default:return Te();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function PS(t){if(t===void 0)return Ei("GRPC error has no .code"),Q.UNKNOWN;switch(t){case At.OK:return Q.OK;case At.CANCELLED:return Q.CANCELLED;case At.UNKNOWN:return Q.UNKNOWN;case At.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case At.INTERNAL:return Q.INTERNAL;case At.UNAVAILABLE:return Q.UNAVAILABLE;case At.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case At.NOT_FOUND:return Q.NOT_FOUND;case At.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case At.ABORTED:return Q.ABORTED;case At.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case At.DATA_LOSS:return Q.DATA_LOSS;default:return Te()}}(Be=At||(At={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new Ys([4294967295,4294967295],0);function J_(t){const e=n2().encode(t),n=new nS;return n.update(e),new Uint8Array(n.digest())}function Z_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ys([n,r],0),new Ys([i,s],0)]}class uy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(r<0)throw new yl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ys.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ys.fromNumber(r)));return i.compare(r2)===1&&(i=new Ys([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=J_(e),[r,i]=Z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new uy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=J_(e),[r,i]=Z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Th(Ne.min(),i,new vt(Ke),ki(),Ve())}}class Nu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nu(r,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class jS{constructor(e,n){this.targetId=e,this.me=n}}class DS{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ex{constructor(){this.fe=0,this.ge=nx(),this.pe=Zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),n=Ve(),r=Ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Te()}}),new Nu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class i2{constructor(e){this.Le=e,this.Be=new Map,this.ke=ki(),this.qe=tx(),this.Qe=new vt(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(dm(s))if(r===0){const o=new ge(s.path);this.Ue(n,o,un.newNoDocument(o,Ne.min()))}else Xe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ao(r).toUint8Array()}catch(l){if(l instanceof dS)return ma("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new uy(o,i,s)}catch(l){return ma(l instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&dm(a.target)){const l=new ge(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,un.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ve();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Th(e,n,this.Qe,this.ke,r);return this.ke=ki(),this.qe=tx(),this.Qe=new vt(Ke),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ex,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ex),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tx(){return new vt(ge.comparator)}function nx(){return new vt(ge.comparator)}const s2={asc:"ASCENDING",desc:"DESCENDING"},o2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a2={and:"AND",or:"OR"};class l2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fm(t,e){return t.useProto3Json||xh(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u2(t,e){return Hd(t,e.toTimestamp())}function $r(t){return Xe(!!t),Ne.fromTimestamp(function(n){const r=ms(n);return new Mt(r.seconds,r.nanos)}(t))}function cy(t,e){return pm(t,e).canonicalString()}function pm(t,e){const n=function(i){return new lt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OS(t){const e=lt.fromString(t);return Xe(zS(e)),e}function mm(t,e){return cy(t.databaseId,e.path)}function jf(t,e){const n=OS(e);if(n.get(1)!==t.databaseId.projectId)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(VS(n))}function MS(t,e){return cy(t.databaseId,e)}function c2(t){const e=OS(t);return e.length===4?lt.emptyPath():VS(e)}function gm(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VS(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rx(t,e,n){return{name:mm(t,e),fields:n.value.mapValue.fields}}function d2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Xe(h===void 0||typeof h=="string"),Zt.fromBase64String(h||"")):(Xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Zt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Q.UNKNOWN:PS(u.code);return new se(h,u.message||"")}(o);n=new DS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jf(t,r.document.name),s=$r(r.document.updateTime),o=r.document.createTime?$r(r.document.createTime):Ne.min(),a=new In({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Zc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jf(t,r.document),s=r.readTime?$r(r.readTime):Ne.min(),o=un.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jf(t,r.document),s=r.removedTargetIds||[];n=new Zc([],s,i,null)}else{if(!("filter"in e))return Te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new e2(i,s),a=r.targetId;n=new jS(a,o)}}return n}function h2(t,e){let n;if(e instanceof Cu)n={update:rx(t,e.key,e.value)};else if(e instanceof ay)n={delete:mm(t,e.key)};else if(e instanceof bs)n={update:rx(t,e.key,e.data),updateMask:x2(e.fieldMask)};else{if(!(e instanceof XL))return Te();n={verify:mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof uu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof du)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $d)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te()}(t,e.precondition)),n}function f2(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$r(i.updateTime):$r(s);return o.isEqual(Ne.min())&&(o=$r(s)),new GL(o,i.transformResults||[])}(n,e))):[]}function p2(t,e){return{documents:[MS(t,e.path)]}}function m2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MS(t,i);const s=function(u){if(u.length!==0)return US(Tr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:jo(p.field),direction:v2(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function g2(t){let e=c2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=FS(f);return p instanceof Tr&&mS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new lu(Do(y.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,xh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new zd(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,m=f.values||[];return new zd(m,p)}(n.endAt)),DL(e,i,o,s,a,"F",l,u)}function y2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Do(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Do(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Do(n.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Do(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(n){return Dt.create(Do(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tr.create(n.compositeFilter.filters.map(r=>FS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(n.compositeFilter.op))}(t):Te()}function v2(t){return s2[t]}function w2(t){return o2[t]}function _2(t){return a2[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Do(t){return Qt.fromServerFormat(t.fieldPath)}function US(t){return t instanceof Dt?function(n){if(n.op==="=="){if($_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(B_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(B_(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:w2(n.op),value:n.value}}}(t):t instanceof Tr?function(n){const r=n.getFilters().map(i=>US(i));return r.length===1?r[0]:{compositeFilter:{op:_2(n.op),filters:r}}}(t):Te()}function x2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r,i,s=Ne.min(),o=Ne.min(),a=Zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.ct=e}}function k2(t){const e=g2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.un=new S2}addToCollectionParentIndex(e,n){return this.un.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(ps.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class S2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xt(lt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wa(0)}static kn(){return new wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pl(r.mutation,i,Hn.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ve()){const i=Ws();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ki();const o=Rl(),a=function(){return Rl()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof bs)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Pl(h.mutation,u,h.mutation.getFieldMask(),Mt.now())):o.set(u.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new I2(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Rl();let i=new vt((o,a)=>o-a),s=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Hn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||Ve()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=bS();h.forEach(p=>{if(!s.has(p)){const m=AS(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):J.resolve(Ws());let a=-1,l=s;return o.next(u=>J.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ve())).next(h=>({batchId:a,changes:kS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let i=gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gl();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,l=>{const u=function(f,p){return new Ca(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,un.newInvalidDocument(h)))});let a=gl();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Pl(h.mutation,u,Hn.empty(),Mt.now()),kh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return J.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$r(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:k2(i.bundledQuery),readTime:$r(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.overlays=new vt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ws();return J.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=Ws(),s=n.length+1,o=new ge(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new vt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Ws(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ws(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return J.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZL(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ve(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.Tr=new Xt(Ut.Er),this.dr=new Xt(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new lt([])),r=new Ut(n,e),i=new Ut(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new lt([])),r=new Ut(n,e),i=new Ut(n,e+1);let s=Ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Ke(e.wr,n.wr)}static Ar(e,n){return Ke(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Ut.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),i=new Ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Ke);return n.forEach(i=>{const s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ge.isDocumentKey(s)||(s=s.child(""));const o=new Ut(new ge(s),0);let a=new Xt(Ke);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),J.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return J.forEach(n.mutations,i=>{const s=new Ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ut(n,0),i=this.br.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.Mr=e,this.docs=function(){return new vt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=ki();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():un.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ki();const o=n.path,a=new ge(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mL(pL(h),r)<=0||(i.has(h.key)||kh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Te()}Or(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D2(this)}getSize(e){return J.resolve(this.size)}}class D2 extends T2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.persistence=e,this.Nr=new Na(n=>ry(n),iy),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dy,this.targetCount=0,this.kr=wa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),J.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Kn(n),J.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zg(0),this.Kr=!1,this.Kr=!0,this.$r=new R2,this.referenceDelegate=e(this),this.Ur=new L2(this),this.indexManager=new b2,this.remoteDocumentCache=function(i){return new j2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new E2(n),this.Gr=new N2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new P2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new M2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class M2 extends yL{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Jr=new dy,this.Yr=null}static Zr(e){return new hy(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),J.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const i=ge.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return J.or([()=>J.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ve(),i=Ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return UR()?8:vL(hn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new V2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(rl()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(rl()<=Ue.DEBUG&&he("QueryEngine","Query:",Po(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rl()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(n))):J.resolve())}Yi(e,n){if(K_(n))return J.resolve(null);let r=Br(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Bd(n,null,"F"),r=Br(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ve(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Bd(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return K_(n)||i.isEqual(Ne.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?J.resolve(null):(rl()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Po(n)),this.rs(e,o,n,fL(i,-1)).next(a=>a))})}ts(e,n){let r=new Xt(xS(e));return n.forEach((i,s)=>{kh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return rl()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Po(n)),this.Ji.getDocumentsMatchingQuery(e,n,ps.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new vt(Ke),this._s=new Na(s=>ry(s),iy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function z2(t,e,n,r){return new U2(t,e,n,r)}async function BS(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ve();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function B2(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let m=J.resolve();return p.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(k=>{const R=u.docVersions.get(y);Xe(R!==null),k.version.compareTo(R)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function $S(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $2(t,e){const n=Ae(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Zt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(f,m),function(k,R,b){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=ki(),u=Ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(H2(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(Ne.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function H2(t,e,n){let r=Ve(),i=Ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ki();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function q2(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W2(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Zi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ym(t,e,n){const r=Ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Iu(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function ix(t,e,n){const r=Ae(t);let i=Ne.min(),s=Ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Ae(l),p=f._s.get(h);return p!==void 0?J.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)}(r,o,Br(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ne.min(),n?s:Ve())).next(a=>(K2(r,OL(e),a),{documents:a,Ts:s})))}function K2(t,e,n){let r=t.us.get(e)||Ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class sx{constructor(){this.activeTargetIds=BL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G2{constructor(){this.so=new sx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc=null;function Df(){return kc===null?kc=function(){return 268435456+Math.round(2147483648*Math.random())}():kc++,"0x"+kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class J2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Df(),l=this.xo(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(he("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ma("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Y2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Df();return new Promise((o,a)=>{const l=new rS;l.setWithCredentials(!0),l.listenOnce(iS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Yc.NO_ERROR:const h=l.getResponseJson();he(on,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Yc.TIMEOUT:he(on,`RPC '${e}' ${s} timed out`),a(new se(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const f=l.getStatus();if(he(on,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(R){const b=R.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(b)>=0?b:Q.UNKNOWN}(m.status);a(new se(y,m.message))}else a(new se(Q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(Q.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{he(on,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);he(on,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Df(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aS(),a=oS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");he(on,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,m=!1;const y=new X2({Io:R=>{m?he(on,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(he(on,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),he(on,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},To:()=>f.close()}),k=(R,b,S)=>{R.listen(b,C=>{try{S(C)}catch(O){setTimeout(()=>{throw O},0)}})};return k(f,ml.EventType.OPEN,()=>{m||(he(on,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),k(f,ml.EventType.CLOSE,()=>{m||(m=!0,he(on,`RPC '${e}' stream ${i} transport closed`),y.So())}),k(f,ml.EventType.ERROR,R=>{m||(m=!0,ma(on,`RPC '${e}' stream ${i} transport errored:`,R),y.So(new se(Q.UNAVAILABLE,"The operation could not be completed")))}),k(f,ml.EventType.MESSAGE,R=>{var b;if(!m){const S=R.data[0];Xe(!!S);const C=S,O=C.error||((b=C[0])===null||b===void 0?void 0:b.error);if(O){he(on,`RPC '${e}' stream ${i} received error:`,O);const V=O.status;let j=function(E){const v=At[E];if(v!==void 0)return PS(v)}(V),x=O.message;j===void 0&&(j=Q.INTERNAL,x="Unknown error status: "+V+" with message "+O.message),m=!0,y.So(new se(j,x)),f.close()}else he(on,`RPC '${e}' stream ${i} received:`,S),y.bo(S)}}),k(a,sS.STAT_EVENT,R=>{R.stat===am.PROXY?he(on,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===am.NOPROXY&&he(on,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return new l2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new HS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new se(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z2 extends qS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=d2(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?$r(o.readTime):Ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=dm(l)?{documents:p2(s,l)}:{query:m2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=LS(s,o.resumeToken);const u=fm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=Hd(s,o.snapshotVersion.toTimestamp());const u=fm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=y2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.a_(n)}}class eO extends qS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=f2(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>h2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,pm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(Q.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,pm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ei(n),this.D_=!1):he("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{yo(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Ae(l);u.L_.add(4),await Au(u),u.q_.set("Unknown"),u.L_.delete(4),await Ch(u)}(this))})}),this.q_=new nO(r,i)}}async function Ch(t){if(yo(t))for(const e of t.B_)await e(!0)}async function Au(t){for(const e of t.B_)await e(!1)}function WS(t,e){const n=Ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yy(n)?gy(n):Aa(n).r_()&&my(n,e))}function py(t,e){const n=Ae(t),r=Aa(n);n.N_.delete(e),r.r_()&&KS(n,e),n.N_.size===0&&(r.r_()?r.o_():yo(n)&&n.q_.set("Unknown"))}function my(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Aa(t).A_(e)}function KS(t,e){t.Q_.xe(e),Aa(t).R_(e)}function gy(t){t.Q_=new i2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Aa(t).start(),t.q_.v_()}function yy(t){return yo(t)&&!Aa(t).n_()&&t.N_.size>0}function yo(t){return Ae(t).L_.size===0}function GS(t){t.Q_=void 0}async function iO(t){t.q_.set("Online")}async function sO(t){t.N_.forEach((e,n)=>{my(t,e)})}async function oO(t,e){GS(t),yy(t)?(t.q_.M_(e),gy(t)):t.q_.set("Unknown")}async function aO(t,e,n){if(t.q_.set("Online"),e instanceof DS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qd(t,r)}else if(e instanceof Zc?t.Q_.Ke(e):e instanceof jS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ne.min()))try{const r=await $S(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Zt.EMPTY_BYTE_STRING,h.snapshotVersion)),KS(s,l);const f=new Zi(h.target,l,u,h.sequenceNumber);my(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await qd(t,r)}}async function qd(t,e,n){if(!Iu(e))throw e;t.L_.add(1),await Au(t),t.q_.set("Offline"),n||(n=()=>$S(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ch(t)})}function QS(t,e){return e().catch(n=>qd(t,n,e))}async function Nh(t){const e=Ae(t),n=gs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lO(e);)try{const i=await q2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,uO(e,i)}catch(i){await qd(e,i)}YS(e)&&XS(e)}function lO(t){return yo(t)&&t.O_.length<10}function uO(t,e){t.O_.push(e);const n=gs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function YS(t){return yo(t)&&!gs(t).n_()&&t.O_.length>0}function XS(t){gs(t).start()}async function cO(t){gs(t).p_()}async function dO(t){const e=gs(t);for(const n of t.O_)e.m_(n.mutations)}async function hO(t,e,n){const r=t.O_.shift(),i=ly.from(r,e,n);await QS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Nh(t)}async function fO(t,e){e&&gs(t).V_&&await async function(r,i){if(function(o){return t2(o)&&o!==Q.ABORTED}(i.code)){const s=r.O_.shift();gs(r).s_(),await QS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Nh(r)}}(t,e),YS(t)&&XS(t)}async function ax(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=yo(n);n.L_.add(3),await Au(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ch(n)}async function pO(t,e){const n=Ae(t);e?(n.L_.delete(2),await Ch(n)):e||(n.L_.add(2),await Au(n),n.q_.set("Unknown"))}function Aa(t){return t.K_||(t.K_=function(n,r,i){const s=Ae(n);return s.w_(),new Z2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:iO.bind(null,t),Ro:sO.bind(null,t),mo:oO.bind(null,t),d_:aO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yy(t)?gy(t):t.q_.set("Unknown")):(await t.K_.stop(),GS(t))})),t.K_}function gs(t){return t.U_||(t.U_=function(n,r,i){const s=Ae(n);return s.w_(),new eO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cO.bind(null,t),mo:fO.bind(null,t),f_:dO.bind(null,t),g_:hO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Nh(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new vy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(t,e){if(Ei("AsyncQueue",`${e}: ${t}`),Iu(t))return new se(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=gl(),this.sortedSet=new vt(this.comparator)}static emptySet(e){return new ra(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.W_=new vt(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _a{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _a(e,n,ra.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class gO{constructor(){this.queries=ux(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ae(n),s=i.queries;i.queries=ux(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new se(Q.ABORTED,"Firestore shutting down"))}}function ux(){return new Na(t=>_S(t),Eh)}async function JS(t,e){const n=Ae(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new mO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wy(o,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_y(n)}async function ZS(t,e){const n=Ae(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yO(t,e){const n=Ae(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&_y(n)}function vO(t,e,n){const r=Ae(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function _y(t){t.Y_.forEach(e=>{e.next()})}var vm,cx;(cx=vm||(vm={})).ea="default",cx.Cache="cache";class eT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.key=e}}class nT{constructor(e){this.key=e}}class wO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=xS(e),this.Ra=new ra(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new lx,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),m=kh(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let R=!1;p&&m?p.data.isEqual(m.data)?y!==k&&(r.track({type:3,doc:m}),R=!0):this.ga(p,m)||(r.track({type:2,doc:m}),R=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),R=!0):p&&!m&&(r.track({type:1,doc:p}),R=!0,(l||u)&&(a=!0)),R&&(m?(o=o.add(m),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(m,y){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return k(m)-k(y)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new _a(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new nT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new tT(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _O{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xO{constructor(e){this.key=e,this.va=!1}}class EO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Na(a=>_S(a),Eh),this.Ma=new Map,this.xa=new Set,this.Oa=new vt(ge.comparator),this.Na=new Map,this.La=new dy,this.Ba={},this.ka=new Map,this.qa=wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kO(t,e,n=!0){const r=lT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await rT(r,e,n,!0),i}async function bO(t,e){const n=lT(t);await rT(n,e,!0,!1)}async function rT(t,e,n,r){const i=await W2(t.localStore,Br(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await SO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&WS(t.remoteStore,i),a}async function SO(t,e,n,r,i){t.Ka=(f,p,m)=>async function(k,R,b,S){let C=R.view.ma(b);C.ns&&(C=await ix(k.localStore,R.query,!1).then(({documents:x})=>R.view.ma(x,C)));const O=S&&S.targetChanges.get(R.targetId),V=S&&S.targetMismatches.get(R.targetId)!=null,j=R.view.applyChanges(C,k.isPrimaryClient,O,V);return hx(k,R.targetId,j.wa),j.snapshot}(t,f,p,m);const s=await ix(t.localStore,e,!0),o=new wO(e,s.Ts),a=o.ma(s.documents),l=Nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);hx(t,n,u.wa);const h=new _O(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function TO(t,e,n){const r=Ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Eh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ym(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&py(r.remoteStore,i.targetId),wm(r,i.targetId)}).catch(Tu)):(wm(r,i.targetId),await ym(r.localStore,i.targetId,!0))}async function IO(t,e){const n=Ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),py(n.remoteStore,r.targetId))}async function CO(t,e,n){const r=LO(t);try{const i=await function(o,a){const l=Ae(o),u=Mt.now(),h=a.reduce((m,y)=>m.add(y.key),Ve());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=ki(),k=Ve();return l.cs.getEntries(m,h).next(R=>{y=R,y.forEach((b,S)=>{S.isValidDocument()||(k=k.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(R=>{f=R;const b=[];for(const S of a){const C=YL(S,f.get(S.key).overlayedDocument);C!=null&&b.push(new bs(S.key,C,hS(C.value.mapValue),sr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,b,a)}).next(R=>{p=R;const b=R.applyToLocalDocumentSet(f,k);return l.documentOverlayCache.saveOverlays(m,R.batchId,b)})}).then(()=>({batchId:p.batchId,changes:kS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new vt(Ke)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Ru(r,i.changes),await Nh(r.remoteStore)}catch(i){const s=wy(i,"Failed to persist write");n.reject(s)}}async function iT(t,e){const n=Ae(t);try{const r=await $2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Xe(o.va):i.removedDocuments.size>0&&(Xe(o.va),o.va=!1))}),await Ru(n,r,e)}catch(r){await Tu(r)}}function dx(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ae(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&_y(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NO(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new vt(ge.comparator);o=o.insert(s,un.newNoDocument(s,Ne.min()));const a=Ve().add(s),l=new Th(Ne.min(),new Map,new vt(Ke),o,a);await iT(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),xy(r)}else await ym(r.localStore,e,!1).then(()=>wm(r,e,n)).catch(Tu)}async function AO(t,e){const n=Ae(t),r=e.batch.batchId;try{const i=await B2(n.localStore,e);oT(n,r,null),sT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ru(n,i)}catch(i){await Tu(i)}}async function RO(t,e,n){const r=Ae(t);try{const i=await function(o,a){const l=Ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(Xe(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);oT(r,e,n),sT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ru(r,i)}catch(i){await Tu(i)}}function sT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function oT(t,e,n){const r=Ae(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function wm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||aT(t,r)})}function aT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(py(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xy(t))}function hx(t,e,n){for(const r of n)r instanceof tT?(t.La.addReference(r.key,e),PO(t,r)):r instanceof nT?(he("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||aT(t,r.key)):Te()}function PO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(he("SyncEngine","New document in limbo: "+n),t.xa.add(r),xy(t))}function xy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(lt.fromString(e)),r=t.qa.next();t.Na.set(r,new xO(n)),t.Oa=t.Oa.insert(n,r),WS(t.remoteStore,new Zi(Br(sy(n.path)),r,"TargetPurposeLimboResolution",Zg.oe))}}async function Ru(t,e,n){const r=Ae(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=fy.Wi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=Ae(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(u,p=>J.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>J.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Iu(f))throw f;he("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=h.os.get(p),y=m.snapshotVersion,k=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,k)}}}(r.localStore,s))}async function jO(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await BS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new se(Q.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ru(n,r.hs)}}function DO(t,e){const n=Ae(t),r=n.Na.get(e);if(r&&r.va)return Ve().add(r.key);{let i=Ve();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function lT(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NO.bind(null,e),e.Ca.d_=yO.bind(null,e.eventManager),e.Ca.$a=vO.bind(null,e.eventManager),e}function LO(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RO.bind(null,e),e}class Wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return z2(this.persistence,new F2,e.initialUser,this.serializer)}Ga(e){return new O2(hy.Zr,this.serializer)}Wa(e){return new G2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wd.provider={build:()=>new Wd};class _m{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jO.bind(null,this.syncEngine),await pO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gO}()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),r=function(s){return new J2(s)}(e.databaseInfo);return function(s,o,a,l){return new tO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new rO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dx(this.syncEngine,n,0),function(){return ox.D()?new ox:new Q2}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new EO(i,s,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ae(i);he("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Au(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_m.provider={build:()=>new _m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=uS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{he("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(he("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Of(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MO(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ax(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ax(e.remoteStore,i)),t._onlineComponents=e}async function MO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Of(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await Of(t,new Wd)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Of(t,new Wd);return t._offlineComponents}async function cT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await fx(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await fx(t,new _m))),t._onlineComponents}function VO(t){return cT(t).then(e=>e.syncEngine)}async function dT(t){const e=await cT(t),n=e.eventManager;return n.onListen=kO.bind(null,e.syncEngine),n.onUnlisten=TO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IO.bind(null,e.syncEngine),n}function FO(t,e,n={}){const r=new pi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new uT({next:p=>{h.Za(),o.enqueueAndForget(()=>ZS(s,f));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new se(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new se(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new eT(sy(a.path),h,{includeMetadataChanges:!0,_a:!0});return JS(s,f)}(await dT(t),t.asyncQueue,e,n,r)),r.promise}function UO(t,e,n={}){const r=new pi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new uT({next:p=>{h.Za(),o.enqueueAndForget(()=>ZS(s,f)),p.fromCache&&l.source==="server"?u.reject(new se(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new eT(a,h,{includeMetadataChanges:!0,_a:!0});return JS(s,f)}(await dT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e,n){if(!n)throw new se(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zO(t,e,n,r){if(e===!0&&r===!0)throw new se(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mx(t){if(!ge.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gx(t){if(ge.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ah(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function Ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(t);throw new se(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iL;switch(r.type){case"firstParty":return new lL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=px.get(n);r&&(he("ComponentProvider","Removing Datastore"),px.delete(n),r.terminate())}(this),Promise.resolve()}}function BO(t,e,n,r={}){var i;const s=(t=Ir(t,Rh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=an.MOCK_USER;else{a=wb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new se(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new an(u)}t._authCredentials=new sL(new lS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class cs extends Ss{constructor(e,n,r){super(e,n,sy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new ge(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function xe(t,e,...n){if(t=Ct(t),fT("collection","path",e),t instanceof Rh){const r=lt.fromString(e,...n);return gx(r),new cs(t,null,r)}{if(!(t instanceof _n||t instanceof cs))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return gx(r),new cs(t.firestore,null,r)}}function De(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=uS.newId()),fT("doc","path",e),t instanceof Rh){const r=lt.fromString(e,...n);return mx(r),new _n(t,null,new ge(r))}{if(!(t instanceof _n||t instanceof cs))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return mx(r),new _n(t.firestore,t instanceof cs?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new HS(this,"async_queue_retry"),this.Vu=()=>{const r=Lf();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Lf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Lf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new pi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Iu(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ei("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=vy.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class vo extends Rh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new vx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vx(e),this._firestoreClient=void 0,await e}}}function $O(t,e){const n=typeof t=="object"?t:Ug(),r=typeof t=="string"?t:"(default)",i=yh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gb("firestore");s&&BO(i,...s)}return i}function Ey(t){if(t._terminated)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HO(t),t._firestoreClient}function HO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new xL(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,hT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new OO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(Zt.fromBase64String(e))}catch(n){throw new se(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xa(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=/^__.*__$/;class WO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class pT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Sy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mT(this.Cu)&&qO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class KO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ih(e)}Qu(e,n,r,i=!1){return new Sy({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dh(t){const e=t._freezeSettings(),n=Ih(t._databaseId);return new KO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gT(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Iy("Data must be an object, but it was:",o,r);const a=yT(r,o);let l,u;if(s.merge)l=new Hn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=xm(e,f,n);if(!o.contains(p))throw new se(Q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);wT(h,p)||h.push(p)}l=new Hn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new WO(new In(a),l,u)}class Lh extends jh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}class Ty extends jh{_toFieldTransform(e){return new WL(e.path,new uu)}isEqual(e){return e instanceof Ty}}function GO(t,e,n,r){const i=t.Qu(1,e,n);Iy("Data must be an object, but it was:",i,r);const s=[],o=In.empty();go(r,(l,u)=>{const h=Cy(e,l,n);u=Ct(u);const f=i.Nu(h);if(u instanceof Lh)s.push(h);else{const p=Pu(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Hn(s);return new pT(o,a,i.fieldTransforms)}function QO(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[xm(e,r,n)],l=[i];if(s.length%2!=0)throw new se(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(xm(e,s[p])),l.push(s[p+1]);const u=[],h=In.empty();for(let p=a.length-1;p>=0;--p)if(!wT(u,a[p])){const m=a[p];let y=l[p];y=Ct(y);const k=o.Nu(m);if(y instanceof Lh)u.push(m);else{const R=Pu(y,k);R!=null&&(u.push(m),h.set(m,R))}}const f=new Hn(u);return new pT(h,f,o.fieldTransforms)}function YO(t,e,n,r=!1){return Pu(n,t.Qu(r?4:3,e))}function Pu(t,e){if(vT(t=Ct(t)))return Iy("Unsupported field value:",e,t),yT(t,e);if(t instanceof jh)return function(r,i){if(!mT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Pu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $L(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mt.fromDate(r);return{timestampValue:Hd(i.serializer,s)}}if(r instanceof Mt){const s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(i.serializer,s)}}if(r instanceof ky)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xa)return{bytesValue:LS(i.serializer,r._byteString)};if(r instanceof _n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof by)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return oy(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ah(r)}`)}(t,e)}function yT(t,e){const n={};return cS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(r,i)=>{const s=Pu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof ky||t instanceof xa||t instanceof _n||t instanceof jh||t instanceof by)}function Iy(t,e,n){if(!vT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ah(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xm(t,e,n){if((e=Ct(e))instanceof Ph)return e._internalPath;if(typeof e=="string")return Cy(t,e);throw Kd("Field path arguments must be of type string or ",t,!1,void 0,n)}const XO=new RegExp("[~\\*/\\[\\]]");function Cy(t,e,n){if(e.search(XO)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ph(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new se(Q.INVALID_ARGUMENT,a+t+l)}function wT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JO extends _T{data(){return super.data()}}function Oh(t,e){return typeof e=="string"?Cy(t,e):e instanceof Ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ny{}class Ay extends Ny{}function Gt(t,e,...n){let r=[];e instanceof Ny&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ry).length,a=s.filter(l=>l instanceof Mh).length;if(o>1||o>0&&a>0)throw new se(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mh extends Ay{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mh(e,n,r)}_apply(e){const n=this._parse(e);return xT(e._query,n),new Ss(e.firestore,e.converter,hm(e._query,n))}_parse(e){const n=Dh(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){_x(f,h);const m=[];for(const y of f)m.push(wx(l,s,y));p={arrayValue:{values:m}}}else p=wx(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||_x(f,h),p=YO(a,o,f,h==="in"||h==="not-in");return Dt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vr(t,e,n){const r=e,i=Oh("where",t);return Mh._create(i,r,n)}class Ry extends Ny{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ry(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)xT(o,l),o=hm(o,l)}(e._query,n),new Ss(e.firestore,e.converter,hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends Ay{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Py(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(s,o)}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ca(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function yr(t,e="asc"){const n=e,r=Oh("orderBy",t);return Py._create(r,n)}class jy extends Ay{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jy(e,n,r)}_apply(e){return new Ss(e.firestore,e.converter,Bd(e._query,this._limit,this._limitType))}}function eM(t){return jy._create("limit",t,"F")}function wx(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new se(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wS(e)&&n.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(lt.fromString(n));if(!ge.isDocumentKey(r))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return z_(t,new ge(r))}if(n instanceof _n)return z_(t,n._key);throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function _x(t,e){if(!Array.isArray(t)||t.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xT(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tM{convertValue(e,n="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return go(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Tt(o.doubleValue));return new by(s)}convertGeoPoint(e){return new ky(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ty(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const n=ms(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);Xe(zS(r));const i=new ou(r.get(1),r.get(3)),s=new ge(r.popFirst(5));return i.isEqual(n)||Ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kT extends _T{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ed extends kT{data(e={}){return super.data(e)}}class nM{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ed(this._firestore,this._userDataWriter,r.key,r,new vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ed(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ed(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:rM(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){t=Ir(t,_n);const e=Ir(t.firestore,vo);return FO(Ey(e),t._key).then(n=>iM(e,t,n))}class bT extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function Ee(t){t=Ir(t,Ss);const e=Ir(t.firestore,vo),n=Ey(e),r=new bT(e);return ZO(t._query),UO(n,t._query).then(i=>new nM(e,r,t,i))}function wo(t,e,n){t=Ir(t,_n);const r=Ir(t.firestore,vo),i=ET(t.converter,e,n);return Vh(r,[gT(Dh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sr.none())])}function uo(t,e,n,...r){t=Ir(t,_n);const i=Ir(t.firestore,vo),s=Dh(i);let o;return o=typeof(e=Ct(e))=="string"||e instanceof Ph?QO(s,"updateDoc",t._key,e,n,r):GO(s,"updateDoc",t._key,e),Vh(i,[o.toMutation(t._key,sr.exists(!0))])}function ST(t){return Vh(Ir(t.firestore,vo),[new ay(t._key,sr.none())])}function _o(t,e){const n=Ir(t.firestore,vo),r=De(t),i=ET(t.converter,e);return Vh(n,[gT(Dh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function Vh(t,e){return function(r,i){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>CO(await VO(r),i,s)),s.promise}(Ey(t),e)}function iM(t,e,n){const r=n.docs.get(e._key),i=new bT(t);return new kT(t,i,e._key,r,new vl(n.hasPendingWrites,n.fromCache),e.converter)}function ut(){return new Ty("serverTimestamp")}(function(e,n=!0){(function(i){Ia=i})(mo),io(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vo(new oL(r.getProvider("auth-internal")),new cL(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ur(O_,"4.7.3",e),Ur(O_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firebasestorage.googleapis.com",IT="storageBucket",sM=2*60*1e3,oM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt extends Qr{constructor(e,n,r=0){super(Mf(e),`Firebase Storage: ${n} (${Mf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function Mf(t){return"storage/"+t}function Dy(){const t="An unknown error occurred, please check the error payload for server response.";return new kt(Et.UNKNOWN,t)}function aM(t){return new kt(Et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lM(t){return new kt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new kt(Et.UNAUTHENTICATED,t)}function cM(){return new kt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dM(t){return new kt(Et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hM(){return new kt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fM(){return new kt(Et.CANCELED,"User canceled the upload/download.")}function pM(t){return new kt(Et.INVALID_URL,"Invalid URL '"+t+"'.")}function mM(t){return new kt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gM(){return new kt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IT+"' property when initializing the app?")}function yM(){return new kt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vM(){return new kt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wM(t){return new kt(Et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Em(t){return new kt(Et.INVALID_ARGUMENT,t)}function CT(){return new kt(Et.APP_DELETED,"The Firebase app was deleted.")}function _M(t){return new kt(Et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new kt(Et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function il(t){throw new kt(Et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw mM(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},k=n===TT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",b=new RegExp(`^https?://${k}/${i}/${R}`,"i"),C=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<C.length;O++){const V=C[O],j=V.regex.exec(e);if(j){const x=j[V.indices.bucket];let w=j[V.indices.path];w||(w=""),r=new qn(x,w),V.postModify(r);break}}if(r==null)throw pM(e);return r}}class xM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...R){u||(u=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,t(m,l())},R)}function p(){s&&clearTimeout(s)}function m(R,...b){if(u){p();return}if(R){p(),h.call(null,R,...b);return}if(l()||o){p(),h.call(null,R,...b);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,f(C)}let y=!1;function k(R){y||(y=!0,p(),!u&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,k(!0)},n),k}function kM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){return t!==void 0}function SM(t){return typeof t=="object"&&!Array.isArray(t)}function Ly(t){return typeof t=="string"||t instanceof String}function xx(t){return Oy()&&t instanceof Blob}function Oy(){return typeof Blob<"u"}function Ex(t,e,n,r){if(r<e)throw Em(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Em(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function NT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Xs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xs||(Xs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new bc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Xs.NO_ERROR,l=s.getStatus();if(!a||TM(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Xs.ABORT;r(!1,new bc(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new bc(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());bM(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Dy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?CT():fM();o(l)}else{const l=hM();o(l)}};this.canceled_?n(!1,new bc(!1,null,!0)):this.backoffId_=EM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function NM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function PM(t,e,n,r,i,s,o=!0){const a=NT(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return AM(u,e),CM(u,n),NM(u,s),RM(u,r),new IM(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DM(...t){const e=jM();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Oy())return new Blob(t);throw new kt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){if(typeof atob>"u")throw wM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vf{constructor(e,n){this.data=e,this.contentType=n||null}}function MM(t,e){switch(t){case Mr.RAW:return new Vf(AT(e));case Mr.BASE64:case Mr.BASE64URL:return new Vf(RT(t,e));case Mr.DATA_URL:return new Vf(FM(e),UM(e))}throw Dy()}function AT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function VM(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(Mr.DATA_URL,"Malformed data URL.")}return AT(e)}function RT(t,e){switch(t){case Mr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw jl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw jl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=OM(e)}catch(i){throw i.message.includes("polyfill")?i:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class PT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(Mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zM(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function FM(t){const e=new PT(t);return e.base64?RT(Mr.BASE64,e.rest):VM(e.rest)}function UM(t){return new PT(t).contentType}function zM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){let r=0,i="";xx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(xx(this.data_)){const r=this.data_,i=LM(r,e,n);return i===null?null:new Qi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qi(r,!0)}}static getBlob(...e){if(Oy()){const n=e.map(r=>r instanceof Qi?r.data_:r);return new Qi(DM.apply(null,n))}else{const n=e.map(o=>Ly(o)?MM(Mr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Qi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){let e;try{e=JSON.parse(t)}catch{return null}return SM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $M(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function DT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t,e){return e}class gn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||HM}}let Sc=null;function qM(t){return!Ly(t)||t.length<2?t:DT(t)}function LT(){if(Sc)return Sc;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(s,o){return qM(o)}const n=new gn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new gn("size");return i.xform=r,t.push(i),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),Sc=t,Sc}function WM(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new qn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function KM(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return WM(r,t),r}function OT(t,e,n){const r=jT(e);return r===null?null:KM(t,r,n)}function GM(t,e,n,r){const i=jT(e);if(i===null||!Ly(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),m=My(p,n,r),y=NT({alt:"media",token:u});return m+y})[0]}function QM(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class MT{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){if(!t)throw Dy()}function YM(t,e){function n(r,i){const s=OT(t,i,e);return VT(s!==null),s}return n}function XM(t,e){function n(r,i){const s=OT(t,i,e);return VT(s!==null),GM(s,i,t.host,t._protocol)}return n}function FT(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=cM():i=uM():n.getStatus()===402?i=lM(t.bucket):n.getStatus()===403?i=dM(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function JM(t){const e=FT(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=aM(t.path)),s.serverResponse=i.serverResponse,s}return n}function ZM(t,e,n){const r=e.fullServerUrl(),i=My(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new MT(i,s,XM(t,n),o);return a.errorHandler=JM(e),a}function eV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=eV(null,e)),r}function nV(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let O=0;O<2;O++)C=C+Math.random().toString().slice(2);return C}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=tV(e,r,i),h=QM(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Qi.getBlob(f,r,p);if(m===null)throw yM();const y={name:u.fullPath},k=My(s,t.host,t._protocol),R="POST",b=t.maxUploadRetryTime,S=new MT(k,R,YM(t,n),b);return S.urlParams=y,S.headers=o,S.body=m.uploadData(),S.errorHandler=FT(e),S}class rV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw il("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw il("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw il("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw il("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw il("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iV extends rV{initXhr(){this.xhr_.responseType="text"}}function UT(){return new iV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new co(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DT(this._location.path)}get storage(){return this._service}get parent(){const e=BM(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new co(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _M(e)}}function sV(t,e,n){t._throwIfRoot("uploadBytes");const r=nV(t.storage,t._location,LT(),new Qi(e,!0),n);return t.storage.makeRequestWithTokens(r,UT).then(i=>({metadata:i,ref:t}))}function oV(t){t._throwIfRoot("getDownloadURL");const e=ZM(t.storage,t._location,LT());return t.storage.makeRequestWithTokens(e,UT).then(n=>{if(n===null)throw vM();return n})}function aV(t,e){const n=$M(t._location.path,e),r=new qn(t._location.bucket,n);return new co(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(t){return/^[A-Za-z]+:\/\//.test(t)}function uV(t,e){return new co(t,e)}function zT(t,e){if(t instanceof Vy){const n=t;if(n._bucket==null)throw gM();const r=new co(n,n._bucket);return e!=null?zT(r,e):r}else return e!==void 0?aV(t,e):t}function cV(t,e){if(e&&lV(e)){if(t instanceof Vy)return uV(t,e);throw Em("To use ref(service, url), the first argument must be a Storage instance.")}else return zT(t,e)}function kx(t,e){const n=e==null?void 0:e[IT];return n==null?null:qn.makeFromBucketSpec(n,t)}function dV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:wb(i,t.app.options.projectId))}class Vy{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=TT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sM,this._maxUploadRetryTime=oM,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=kx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=kx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new co(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new xM(CT());{const o=PM(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const bx="@firebase/storage",Sx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="storage";function ju(t,e,n){return t=Ct(t),sV(t,e,n)}function Du(t){return t=Ct(t),oV(t)}function Wr(t,e){return t=Ct(t),cV(t,e)}function hV(t=Ug(),e){t=Ct(t);const r=yh(t,BT).getImmediate({identifier:e}),i=gb("storage");return i&&fV(r,...i),r}function fV(t,e,n,r={}){dV(t,e,n,r)}function pV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Vy(n,r,i,e,mo)}function mV(){io(new fs(BT,pV,"PUBLIC").setMultipleInstances(!0)),Ur(bx,Sx,""),Ur(bx,Sx,"esm2017")}mV();const gV={apiKey:"AIzaSyBiD4IeG0M9u0cUz32cXqOvdVnHBEXb-QM",authDomain:"terraveil-journal.firebaseapp.com",projectId:"terraveil-journal",storageBucket:"terraveil-journal.firebasestorage.app",messagingSenderId:"726661860825",appId:"1:726661860825:web:fe87d50de8fdbcfa0d5dc8"},Fy=Eb(gV),Er=eL(Fy),yV=new si,ne=$O(Fy),Kr=hV(Fy);function Lu(){const[t,e]=D.useState(null),[n,r]=D.useState(null);return D.useEffect(()=>Ii(Er,async i=>{var o;if(r(i),!i)return e(!1);const s=await xt(De(ne,"roles",i.uid));e(s.exists()&&((o=s.data())==null?void 0:o.admin)===!0)}),[]),{isAdmin:t,user:n}}function vV(){const{isAdmin:t}=Lu(),[e,n]=D.useState(!1),r=Es();D.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),D.useEffect(()=>{e&&n(!1)},[r.pathname]);const i=()=>{n(!e)};return d.jsx(bR,{children:d.jsxs("div",{className:"min-h-screen",children:[d.jsxs("div",{className:"navbar bg-base-200 border-b border-base-300 px-2 sm:px-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("button",{className:"btn btn-ghost btn-sm md:hidden",onClick:i,"aria-label":"Toggle navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),d.jsx(Je,{to:"/",className:"btn btn-ghost normal-case text-lg sm:text-xl hidden sm:inline-flex",children:"Terraveil Journal"})]}),d.jsx("div",{className:"flex-1"}),d.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[d.jsx("div",{className:"w-auto",children:d.jsx(SR,{})}),t&&d.jsx(Je,{to:"/admin",className:"btn btn-primary btn-sm whitespace-nowrap px-2 sm:px-3",children:"Admin"})]})]}),d.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-70 z-20 transition-opacity duration-300 md:hidden ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i}),d.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-terraveil-bg border-r border-base-300 z-30 transform transition-transform duration-300 ease-in-out md:hidden shadow-xl ${e?"translate-x-0":"-translate-x-full"}`,children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-base-300 bg-terraveil-card",children:[d.jsx("span",{className:"font-bold text-xl text-terraveil-line",children:"Terraveil Journal"}),d.jsx("button",{className:"btn btn-ghost btn-sm text-terraveil-text hover:text-terraveil-line",onClick:i,"aria-label":"Close navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"overflow-y-auto h-full pb-20",children:d.jsxs("nav",{className:"menu p-4",children:[d.jsx("li",{className:"menu-title pt-2 text-terraveil-line",children:"Campaigns"}),d.jsx("li",{children:d.jsx(kn,{to:"/calendar",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"Calendar"})}),d.jsx("li",{children:d.jsx(kn,{to:"/sessions",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"Sessions"})}),d.jsx("li",{children:d.jsx(kn,{to:"/threads",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"Threads"})}),d.jsx("li",{className:"menu-title pt-4 text-terraveil-line",children:"World"}),d.jsx("li",{children:d.jsx(kn,{to:"/locations",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"Locations"})}),d.jsx("li",{className:"menu-title pt-4 text-terraveil-line",children:"Characters & Creatures"}),d.jsx("li",{children:d.jsx(kn,{to:"/characters",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"Characters"})}),d.jsx("li",{children:d.jsx(kn,{to:"/npcs",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"NPCs"})}),d.jsx("li",{children:d.jsx(kn,{to:"/monsters",onClick:i,className:({isActive:s})=>s?"active font-medium text-terraveil-line":"text-terraveil-text hover:text-terraveil-link",children:"Monsters"})})]})})]}),d.jsxs("div",{className:"grid md:grid-cols-[240px,1fr]",children:[d.jsx("aside",{className:"hidden md:block border-r border-base-300 p-4",children:d.jsxs("nav",{className:"menu",children:[d.jsx("li",{className:"menu-title",children:"Campaigns"}),d.jsx("li",{children:d.jsx(kn,{to:"/calendar",children:"Calendar"})}),d.jsx("li",{children:d.jsx(kn,{to:"/sessions",children:"Sessions"})}),d.jsx("li",{children:d.jsx(kn,{to:"/threads",children:"Threads"})}),d.jsx("li",{className:"menu-title",children:"World"}),d.jsx("li",{children:d.jsx(kn,{to:"/locations",children:"Locations"})}),d.jsx("li",{className:"menu-title",children:"Characters & Creatures"}),d.jsx("li",{children:d.jsx(kn,{to:"/characters",children:"Characters"})}),d.jsx("li",{children:d.jsx(kn,{to:"/npcs",children:"NPCs"})}),d.jsx("li",{children:d.jsx(kn,{to:"/monsters",children:"Monsters"})})]})}),d.jsx("main",{className:"p-4",children:d.jsx(ZA,{})})]})]})})}function wV(){return d.jsxs("div",{className:"container mx-auto prose prose-invert",children:[d.jsx("h1",{children:"Welcome to the Terraveil Journal"}),d.jsx("p",{children:"This is the living record of our campaign. The mists have lifted. The dice are waiting."}),d.jsx("h2",{children:"The World of Terraveil"}),d.jsx("p",{children:"Twenty five years have passed since the Cataclysm split the world and the shrouding mists withdrew, unveiling a land long hidden: Terraveil. The disappearance of the mists has allowed entry into lands that were cut off from the rest of the world for over a century prior. In those years, bold settlers, soldiers, and seekers of fortune have pressed into its borders, raising towns upon ruins, charting forests once cloaked in secrecy, and daring the wilds where strange beasts and older magic's stir. Yet for all their efforts, most of Terraveil remains uncharted, and whispers speak of ancient powers, forgotten vaults, and kingdoms lost to both fire and fog. You are among those who would set foot where few dare tread  whether for glory, gold, knowledge, or reasons of your own. The roads into Terraveil are perilous, but the promise of discovery calls louder still. The mists may be gone, but mystery lingers, and fate waits for those bold enough to carve their story into the bones of this wild land."})]})}const _V={sessions:"Sessions",npcs:"NPCs",monsters:"Monsters",locations:"Locations",characters:"Characters"},sl=t=>_V[t]??t;function ol({collection:t}){const{isAdmin:e}=Lu(),n=e===!0,[r,i]=D.useState([]),[s,o]=D.useState(!0),[a,l]=D.useState([]),[u,h]=D.useState(""),f=t==="sessions",[p,m]=D.useState("newest"),y=D.useMemo(()=>p==="newest"?"desc":"asc",[p]);return D.useEffect(()=>{if(f)return;let k=!1;return(async()=>{try{const R=xe(ne,"sessions"),b=Gt(R),V=(await Ee(b)).docs.map(j=>{const x=j.data();return{id:j.id,title:x.title||j.id,published:x.published}}).filter(j=>j.published===!0).map(j=>({id:j.id,title:j.title}));k||l(V)}catch(R){console.error("Error loading sessions for filter:",R)}})(),()=>{k=!0}},[f]),D.useEffect(()=>{let k=!1;return(async()=>{o(!0);const R=xe(ne,t);try{let b;if(f)if(n)try{b=await Ee(Gt(R,yr("date",y)))}catch{b=await Ee(R)}else try{b=await Ee(Gt(R,vr("published","==",!0),yr("date",y)))}catch{b=await Ee(Gt(R,vr("published","==",!0)))}else{const C=t==="npcs"||t==="locations"||t==="monsters"||t==="characters"?"name":"title";if(n)try{b=await Ee(Gt(R,yr(C,"asc")))}catch{b=await Ee(R)}else try{b=await Ee(Gt(R,vr("published","==",!0),yr(C,"asc")))}catch{b=await Ee(Gt(R,vr("published","==",!0)))}}let S=b.docs.map(C=>({id:C.id,...C.data()}));f?S.sort((C,O)=>{const V=C.date||"",j=O.date||"";return y==="desc"?j.localeCompare(V):V.localeCompare(j)}):S.sort((C,O)=>{const V=(C.title||C.name||"").toLowerCase(),j=(O.title||O.name||"").toLowerCase();return V.localeCompare(j)}),n||(S=S.filter(C=>C.published===!0)),u&&!f&&(S=S.filter(C=>{var O;return((O=C.linkedSessions)==null?void 0:O.includes(u))||C.firstAppearance===u})),k||(i(S),o(!1))}catch(b){console.error("List fetch error:",b),k||(i([]),o(!1))}})(),()=>{k=!0}},[t,n,f,y,u]),d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold",children:sl(t)}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[!f&&a.length>0&&d.jsx("div",{className:"form-control",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("label",{className:"label-text text-sm whitespace-nowrap",children:"Filter by session:"}),d.jsxs("select",{className:"select select-bordered select-sm max-w-[180px] sm:max-w-[220px]",value:u,onChange:k=>h(k.target.value),children:[d.jsx("option",{value:"",children:"All Sessions"}),a.map(k=>d.jsx("option",{value:k.id,children:k.title},k.id))]}),u&&d.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>h(""),title:"Clear filter",children:""})]})}),f&&d.jsxs("div",{className:"join self-start",children:[d.jsx("button",{className:`btn btn-sm join-item ${p==="newest"?"btn-primary":""}`,onClick:()=>m("newest"),children:"Newest"}),d.jsx("button",{className:`btn btn-sm join-item ${p==="oldest"?"btn-primary":""}`,onClick:()=>m("oldest"),children:"Oldest"})]})]})]}),s?d.jsx("div",{children:"Loading"}):r.length===0?d.jsx("div",{children:u?d.jsxs("div",{children:["No ",sl(t).toLowerCase()," found for the selected session."]}):d.jsxs("div",{children:["No ",sl(t).toLowerCase()," found."]})}):d.jsxs(d.Fragment,{children:[u&&d.jsxs("div",{className:"mb-4 text-sm opacity-70",children:["Showing ",r.length," ",r.length===1?sl(t).toLowerCase().slice(0,-1):sl(t).toLowerCase()," from the selected session."]}),d.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(k=>{const R=k.title||k.name||k.id;return d.jsx(Je,{to:`/${t}/${k.slug||k.id}`,className:"card bg-base-200 hover:bg-base-300 transition-colors cursor-pointer",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h3",{className:"card-title",children:R}),(t==="npcs"||t==="monsters")&&k.deceased&&d.jsx("span",{className:"text-error font-semibold",children:"DECEASED"})]}),k.summary&&d.jsx("p",{className:"opacity-80",children:k.summary}),k.date&&d.jsx("p",{className:"text-sm opacity-60",children:new Date(k.date).toLocaleDateString()}),d.jsx("div",{className:"text-sm mt-2 text-primary",children:"Read full entry "})]})},k.id)})})]})]})}function xV(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const EV=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kV=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bV={};function Tx(t,e){return(bV.jsx?kV:EV).test(t)}const SV=/[ \t\n\f\r]/g;function TV(t){return typeof t=="object"?t.type==="text"?Ix(t.value):!1:Ix(t)}function Ix(t){return t.replace(SV,"")===""}class Ou{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Ou.prototype.normal={};Ou.prototype.property={};Ou.prototype.space=void 0;function $T(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Ou(n,r,e)}function km(t){return t.toLowerCase()}class jn{constructor(e,n){this.attribute=n,this.property=e}}jn.prototype.attribute="";jn.prototype.booleanish=!1;jn.prototype.boolean=!1;jn.prototype.commaOrSpaceSeparated=!1;jn.prototype.commaSeparated=!1;jn.prototype.defined=!1;jn.prototype.mustUseProperty=!1;jn.prototype.number=!1;jn.prototype.overloadedBoolean=!1;jn.prototype.property="";jn.prototype.spaceSeparated=!1;jn.prototype.space=void 0;let IV=0;const Pe=xo(),Rt=xo(),bm=xo(),te=xo(),nt=xo(),ia=xo(),Un=xo();function xo(){return 2**++IV}const Sm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pe,booleanish:Rt,commaOrSpaceSeparated:Un,commaSeparated:ia,number:te,overloadedBoolean:bm,spaceSeparated:nt},Symbol.toStringTag,{value:"Module"})),Ff=Object.keys(Sm);class Uy extends jn{constructor(e,n,r,i){let s=-1;if(super(e,n),Cx(this,"space",i),typeof r=="number")for(;++s<Ff.length;){const o=Ff[s];Cx(this,Ff[s],(r&Sm[o])===Sm[o])}}}Uy.prototype.defined=!0;function Cx(t,e,n){n&&(t[e]=n)}function Ra(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Uy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[km(r)]=r,n[km(s.attribute)]=r}return new Ou(e,n,t.space)}const HT=Ra({properties:{ariaActiveDescendant:null,ariaAtomic:Rt,ariaAutoComplete:null,ariaBusy:Rt,ariaChecked:Rt,ariaColCount:te,ariaColIndex:te,ariaColSpan:te,ariaControls:nt,ariaCurrent:null,ariaDescribedBy:nt,ariaDetails:null,ariaDisabled:Rt,ariaDropEffect:nt,ariaErrorMessage:null,ariaExpanded:Rt,ariaFlowTo:nt,ariaGrabbed:Rt,ariaHasPopup:null,ariaHidden:Rt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nt,ariaLevel:te,ariaLive:null,ariaModal:Rt,ariaMultiLine:Rt,ariaMultiSelectable:Rt,ariaOrientation:null,ariaOwns:nt,ariaPlaceholder:null,ariaPosInSet:te,ariaPressed:Rt,ariaReadOnly:Rt,ariaRelevant:null,ariaRequired:Rt,ariaRoleDescription:nt,ariaRowCount:te,ariaRowIndex:te,ariaRowSpan:te,ariaSelected:Rt,ariaSetSize:te,ariaSort:null,ariaValueMax:te,ariaValueMin:te,ariaValueNow:te,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function qT(t,e){return e in t?t[e]:e}function WT(t,e){return qT(t,e.toLowerCase())}const CV=Ra({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ia,acceptCharset:nt,accessKey:nt,action:null,allow:null,allowFullScreen:Pe,allowPaymentRequest:Pe,allowUserMedia:Pe,alt:null,as:null,async:Pe,autoCapitalize:null,autoComplete:nt,autoFocus:Pe,autoPlay:Pe,blocking:nt,capture:null,charSet:null,checked:Pe,cite:null,className:nt,cols:te,colSpan:null,content:null,contentEditable:Rt,controls:Pe,controlsList:nt,coords:te|ia,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pe,defer:Pe,dir:null,dirName:null,disabled:Pe,download:bm,draggable:Rt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pe,formTarget:null,headers:nt,height:te,hidden:bm,high:te,href:null,hrefLang:null,htmlFor:nt,httpEquiv:nt,id:null,imageSizes:null,imageSrcSet:null,inert:Pe,inputMode:null,integrity:null,is:null,isMap:Pe,itemId:null,itemProp:nt,itemRef:nt,itemScope:Pe,itemType:nt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pe,low:te,manifest:null,max:null,maxLength:te,media:null,method:null,min:null,minLength:te,multiple:Pe,muted:Pe,name:null,nonce:null,noModule:Pe,noValidate:Pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pe,optimum:te,pattern:null,ping:nt,placeholder:null,playsInline:Pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pe,referrerPolicy:null,rel:nt,required:Pe,reversed:Pe,rows:te,rowSpan:te,sandbox:nt,scope:null,scoped:Pe,seamless:Pe,selected:Pe,shadowRootClonable:Pe,shadowRootDelegatesFocus:Pe,shadowRootMode:null,shape:null,size:te,sizes:null,slot:null,span:te,spellCheck:Rt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:te,step:null,style:null,tabIndex:te,target:null,title:null,translate:null,type:null,typeMustMatch:Pe,useMap:null,value:Rt,width:te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:nt,axis:null,background:null,bgColor:null,border:te,borderColor:null,bottomMargin:te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pe,declare:Pe,event:null,face:null,frame:null,frameBorder:null,hSpace:te,leftMargin:te,link:null,longDesc:null,lowSrc:null,marginHeight:te,marginWidth:te,noResize:Pe,noHref:Pe,noShade:Pe,noWrap:Pe,object:null,profile:null,prompt:null,rev:null,rightMargin:te,rules:null,scheme:null,scrolling:Rt,standby:null,summary:null,text:null,topMargin:te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pe,disableRemotePlayback:Pe,prefix:null,property:null,results:te,security:null,unselectable:null},space:"html",transform:WT}),NV=Ra({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Un,accentHeight:te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:te,amplitude:te,arabicForm:null,ascent:te,attributeName:null,attributeType:null,azimuth:te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:te,by:null,calcMode:null,capHeight:te,className:nt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:te,diffuseConstant:te,direction:null,display:null,dur:null,divisor:te,dominantBaseline:null,download:Pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:te,enableBackground:null,end:null,event:null,exponent:te,externalResourcesRequired:null,fill:null,fillOpacity:te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ia,g2:ia,glyphName:ia,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:te,horizOriginX:te,horizOriginY:te,id:null,ideographic:te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:te,k:te,k1:te,k2:te,k3:te,k4:te,kernelMatrix:Un,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:te,overlineThickness:te,paintOrder:null,panose1:null,path:null,pathLength:te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:te,pointsAtY:te,pointsAtZ:te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Un,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Un,rev:Un,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Un,requiredFeatures:Un,requiredFonts:Un,requiredFormats:Un,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:te,specularExponent:te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:te,strikethroughThickness:te,string:null,stroke:null,strokeDashArray:Un,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:te,strokeOpacity:te,strokeWidth:null,style:null,surfaceScale:te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Un,tabIndex:te,tableValues:null,target:null,targetX:te,targetY:te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Un,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:te,underlineThickness:te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:te,values:null,vAlphabetic:te,vMathematical:te,vectorEffect:null,vHanging:te,vIdeographic:te,version:null,vertAdvY:te,vertOriginX:te,vertOriginY:te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:qT}),KT=Ra({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),GT=Ra({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:WT}),QT=Ra({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),AV={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},RV=/[A-Z]/g,Nx=/-[a-z]/g,PV=/^data[-\w.:]+$/i;function jV(t,e){const n=km(e);let r=e,i=jn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&PV.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Nx,LV);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Nx.test(s)){let o=s.replace(RV,DV);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Uy}return new i(r,e)}function DV(t){return"-"+t.toLowerCase()}function LV(t){return t.charAt(1).toUpperCase()}const OV=$T([HT,CV,KT,GT,QT],"html"),zy=$T([HT,NV,KT,GT,QT],"svg");function MV(t){return t.join(" ").trim()}var By={},Ax=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,VV=/\n/g,FV=/^\s*/,UV=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,zV=/^:\s*/,BV=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$V=/^[;\s]*/,HV=/^\s+|\s+$/g,qV=`
`,Rx="/",Px="*",Us="",WV="comment",KV="declaration",GV=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(y){var k=y.match(VV);k&&(n+=k.length);var R=y.lastIndexOf(qV);r=~R?y.length-R:r+y.length}function s(){var y={line:n,column:r};return function(k){return k.position=new o(y),u(),k}}function o(y){this.start=y,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(y){var k=new Error(e.source+":"+n+":"+r+": "+y);if(k.reason=y,k.filename=e.source,k.line=n,k.column=r,k.source=t,!e.silent)throw k}function l(y){var k=y.exec(t);if(k){var R=k[0];return i(R),t=t.slice(R.length),k}}function u(){l(FV)}function h(y){var k;for(y=y||[];k=f();)k!==!1&&y.push(k);return y}function f(){var y=s();if(!(Rx!=t.charAt(0)||Px!=t.charAt(1))){for(var k=2;Us!=t.charAt(k)&&(Px!=t.charAt(k)||Rx!=t.charAt(k+1));)++k;if(k+=2,Us===t.charAt(k-1))return a("End of comment missing");var R=t.slice(2,k-2);return r+=2,i(R),t=t.slice(k),r+=2,y({type:WV,comment:R})}}function p(){var y=s(),k=l(UV);if(k){if(f(),!l(zV))return a("property missing ':'");var R=l(BV),b=y({type:KV,property:jx(k[0].replace(Ax,Us)),value:R?jx(R[0].replace(Ax,Us)):Us});return l($V),b}}function m(){var y=[];h(y);for(var k;k=p();)k!==!1&&(y.push(k),h(y));return y}return u(),m()};function jx(t){return t?t.replace(HV,Us):Us}var QV=rd&&rd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(By,"__esModule",{value:!0});By.default=XV;var YV=QV(GV);function XV(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,YV.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Fh={};Object.defineProperty(Fh,"__esModule",{value:!0});Fh.camelCase=void 0;var JV=/^--[a-zA-Z0-9_-]+$/,ZV=/-([a-z])/g,eF=/^[^-]+$/,tF=/^-(webkit|moz|ms|o|khtml)-/,nF=/^-(ms)-/,rF=function(t){return!t||eF.test(t)||JV.test(t)},iF=function(t,e){return e.toUpperCase()},Dx=function(t,e){return"".concat(e,"-")},sF=function(t,e){return e===void 0&&(e={}),rF(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(nF,Dx):t=t.replace(tF,Dx),t.replace(ZV,iF))};Fh.camelCase=sF;var oF=rd&&rd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},aF=oF(By),lF=Fh;function Tm(t,e){var n={};return!t||typeof t!="string"||(0,aF.default)(t,function(r,i){r&&i&&(n[(0,lF.camelCase)(r,e)]=i)}),n}Tm.default=Tm;var uF=Tm;const cF=Jd(uF),YT=XT("end"),$y=XT("start");function XT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function dF(t){const e=$y(t),n=YT(t);if(e&&n)return{start:e,end:n}}function Dl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Lx(t.position):"start"in t||"end"in t?Lx(t):"line"in t||"column"in t?Im(t):""}function Im(t){return Ox(t&&t.line)+":"+Ox(t&&t.column)}function Lx(t){return Im(t&&t.start)+"-"+Im(t&&t.end)}function Ox(t){return t&&typeof t=="number"?t:1}class fn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Dl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}fn.prototype.file="";fn.prototype.name="";fn.prototype.reason="";fn.prototype.message="";fn.prototype.stack="";fn.prototype.column=void 0;fn.prototype.line=void 0;fn.prototype.ancestors=void 0;fn.prototype.cause=void 0;fn.prototype.fatal=void 0;fn.prototype.place=void 0;fn.prototype.ruleId=void 0;fn.prototype.source=void 0;const Hy={}.hasOwnProperty,hF=new Map,fF=/[A-Z]/g,pF=new Set(["table","tbody","thead","tfoot","tr"]),mF=new Set(["td","th"]),JT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function gF(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=bF(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=kF(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?zy:OV,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=ZT(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function ZT(t,e,n){if(e.type==="element")return yF(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return vF(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return _F(t,e,n);if(e.type==="mdxjsEsm")return wF(t,e);if(e.type==="root")return xF(t,e,n);if(e.type==="text")return EF(t,e)}function yF(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=zy,t.schema=i),t.ancestors.push(e);const s=tI(t,e.tagName,!1),o=SF(t,e);let a=Wy(t,e);return pF.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!TV(l):!0})),eI(t,o,s,e),qy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function vF(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}hu(t,e.position)}function wF(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);hu(t,e.position)}function _F(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=zy,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:tI(t,e.name,!0),o=TF(t,e),a=Wy(t,e);return eI(t,o,s,e),qy(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function xF(t,e,n){const r={};return qy(r,Wy(t,e)),t.create(e,t.Fragment,r,n)}function EF(t,e){return e.value}function eI(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function qy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function kF(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function bF(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=$y(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function SF(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Hy.call(e.properties,i)){const s=IF(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&mF.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function TF(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else hu(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else hu(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Wy(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:hF;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=ZT(t,s,o);a!==void 0&&n.push(a)}return n}function IF(t,e,n){const r=jV(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?xV(n):MV(n)),r.property==="style"){let i=typeof n=="object"?n:CF(t,String(n));return t.stylePropertyNameCase==="css"&&(i=NF(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?AV[r.property]||r.property:r.attribute,n]}}function CF(t,e){try{return cF(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new fn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=JT+"#cannot-parse-style-attribute",i}}function tI(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Tx(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Tx(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Hy.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);hu(t)}function hu(t,e){const n=new fn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=JT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function NF(t){const e={};let n;for(n in t)Hy.call(t,n)&&(e[AF(n)]=t[n]);return e}function AF(t){let e=t.replace(fF,RF);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function RF(t){return"-"+t.toLowerCase()}const Uf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},PF={};function Ky(t,e){const n=PF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return nI(t,r,i)}function nI(t,e,n){if(jF(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Mx(t.children,e,n)}return Array.isArray(t)?Mx(t,e,n):""}function Mx(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=nI(t[i],e,n);return r.join("")}function jF(t){return!!(t&&typeof t=="object")}const Vx=document.createElement("i");function Gy(t){const e="&"+t+";";Vx.innerHTML=e;const n=Vx.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Kn(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function nr(t,e){return t.length>0?(Kn(t,t.length,0,e),t):e}const Fx={}.hasOwnProperty;function rI(t){const e={};let n=-1;for(;++n<t.length;)DF(e,t[n]);return e}function DF(t,e){let n;for(n in e){const i=(Fx.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Fx.call(i,o)||(i[o]=[]);const a=s[o];LF(i[o],Array.isArray(a)?a:a?[a]:[])}}}function LF(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Kn(t,0,0,r)}function iI(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function kr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vn=Ts(/[A-Za-z]/),cn=Ts(/[\dA-Za-z]/),OF=Ts(/[#-'*+\--9=?A-Z^-~]/);function Gd(t){return t!==null&&(t<32||t===127)}const Cm=Ts(/\d/),MF=Ts(/[\dA-Fa-f]/),VF=Ts(/[!-/:-@[-`{-~]/);function ve(t){return t!==null&&t<-2}function et(t){return t!==null&&(t<0||t===32)}function Le(t){return t===-2||t===-1||t===32}const Uh=Ts(new RegExp("\\p{P}|\\p{S}","u")),ho=Ts(/\s/);function Ts(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Pa(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&cn(t.charCodeAt(n+1))&&cn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function $e(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Le(l)?(t.enter(n),a(l)):e(l)}function a(l){return Le(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const FF={tokenize:UF};function UF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),$e(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ve(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const zF={tokenize:BF},Ux={tokenize:$F};function BF(t){const e=this,n=[];let r=0,i,s,o;return a;function a(C){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,u)(C)}return u(C)}function l(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&S();const O=e.events.length;let V=O,j;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){j=e.events[V][1].end;break}b(r);let x=O;for(;x<e.events.length;)e.events[x][1].end={...j},x++;return Kn(e.events,V+1,0,e.events.slice(O)),e.events.length=x,u(C)}return a(C)}function u(C){if(r===n.length){if(!i)return p(C);if(i.currentConstruct&&i.currentConstruct.concrete)return y(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Ux,h,f)(C)}function h(C){return i&&S(),b(r),p(C)}function f(C){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,y(C)}function p(C){return e.containerState={},t.attempt(Ux,m,y)(C)}function m(C){return r++,n.push([e.currentConstruct,e.containerState]),p(C)}function y(C){if(C===null){i&&S(),b(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),k(C)}function k(C){if(C===null){R(t.exit("chunkFlow"),!0),b(0),t.consume(C);return}return ve(C)?(t.consume(C),R(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(C),k)}function R(C,O){const V=e.sliceStream(C);if(O&&V.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(V),e.parser.lazy[C.start.line]){let j=i.events.length;for(;j--;)if(i.events[j][1].start.offset<o&&(!i.events[j][1].end||i.events[j][1].end.offset>o))return;const x=e.events.length;let w=x,E,v;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type==="chunkFlow"){if(E){v=e.events[w][1].end;break}E=!0}for(b(r),j=x;j<e.events.length;)e.events[j][1].end={...v},j++;Kn(e.events,w+1,0,e.events.slice(x)),e.events.length=j}}function b(C){let O=n.length;for(;O-- >C;){const V=n[O];e.containerState=V[1],V[0].exit.call(e,t)}n.length=C}function S(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function $F(t,e,n){return $e(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ea(t){if(t===null||et(t)||ho(t))return 1;if(Uh(t))return 2}function zh(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Nm={name:"attention",resolveAll:HF,tokenize:qF};function HF(t,e){let n=-1,r,i,s,o,a,l,u,h;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},p={...t[n][1].start};zx(f,-l),zx(p,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=nr(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=nr(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=nr(u,zh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=nr(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(h=2,u=nr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):h=0,Kn(t,r-1,n-r+3,u),n=r+u.length-h-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function qF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ea(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),h=Ea(l),f=!h||h===2&&i||n.includes(l),p=!i||i===2&&h||n.includes(r);return u._open=!!(s===42?f:f&&(i||!p)),u._close=!!(s===42?p:p&&(h||!f)),e(l)}}function zx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const WF={name:"autolink",tokenize:KF};function KF(t,e,n){let r=0;return i;function i(m){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(m){return vn(m)?(t.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||cn(m)?(r=1,a(m)):u(m)}function a(m){return m===58?(t.consume(m),r=0,l):(m===43||m===45||m===46||cn(m))&&r++<32?(t.consume(m),a):(r=0,u(m))}function l(m){return m===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):m===null||m===32||m===60||Gd(m)?n(m):(t.consume(m),l)}function u(m){return m===64?(t.consume(m),h):OF(m)?(t.consume(m),u):n(m)}function h(m){return cn(m)?f(m):n(m)}function f(m){return m===46?(t.consume(m),r=0,h):m===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):p(m)}function p(m){if((m===45||cn(m))&&r++<63){const y=m===45?p:f;return t.consume(m),y}return n(m)}}const Mu={partial:!0,tokenize:GF};function GF(t,e,n){return r;function r(s){return Le(s)?$e(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ve(s)?e(s):n(s)}}const sI={continuation:{tokenize:YF},exit:XF,name:"blockQuote",tokenize:QF};function QF(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Le(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function YF(t,e,n){const r=this;return i;function i(o){return Le(o)?$e(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(sI,e,n)(o)}}function XF(t){t.exit("blockQuote")}const oI={name:"characterEscape",tokenize:JF};function JF(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return VF(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const aI={name:"characterReference",tokenize:ZF};function ZF(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=cn,h(f))}function u(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=MF,h):(t.enter("characterReferenceValue"),s=7,o=Cm,h(f))}function h(f){if(f===59&&i){const p=t.exit("characterReferenceValue");return o===cn&&!Gy(r.sliceSerialize(p))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),h):n(f)}}const Bx={partial:!0,tokenize:t4},$x={concrete:!0,name:"codeFenced",tokenize:e4};function e4(t,e,n){const r=this,i={partial:!0,tokenize:V};let s=0,o=0,a;return l;function l(j){return u(j)}function u(j){const x=r.events[r.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(j)}function h(j){return j===a?(o++,t.consume(j),h):o<3?n(j):(t.exit("codeFencedFenceSequence"),Le(j)?$e(t,f,"whitespace")(j):f(j))}function f(j){return j===null||ve(j)?(t.exit("codeFencedFence"),r.interrupt?e(j):t.check(Bx,k,O)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(j))}function p(j){return j===null||ve(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(j)):Le(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),$e(t,m,"whitespace")(j)):j===96&&j===a?n(j):(t.consume(j),p)}function m(j){return j===null||ve(j)?f(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(j))}function y(j){return j===null||ve(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(j)):j===96&&j===a?n(j):(t.consume(j),y)}function k(j){return t.attempt(i,O,R)(j)}function R(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),b}function b(j){return s>0&&Le(j)?$e(t,S,"linePrefix",s+1)(j):S(j)}function S(j){return j===null||ve(j)?t.check(Bx,k,O)(j):(t.enter("codeFlowValue"),C(j))}function C(j){return j===null||ve(j)?(t.exit("codeFlowValue"),S(j)):(t.consume(j),C)}function O(j){return t.exit("codeFenced"),e(j)}function V(j,x,w){let E=0;return v;function v(z){return j.enter("lineEnding"),j.consume(z),j.exit("lineEnding"),T}function T(z){return j.enter("codeFencedFence"),Le(z)?$e(j,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):I(z)}function I(z){return z===a?(j.enter("codeFencedFenceSequence"),N(z)):w(z)}function N(z){return z===a?(E++,j.consume(z),N):E>=o?(j.exit("codeFencedFenceSequence"),Le(z)?$e(j,G,"whitespace")(z):G(z)):w(z)}function G(z){return z===null||ve(z)?(j.exit("codeFencedFence"),x(z)):w(z)}}}function t4(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const zf={name:"codeIndented",tokenize:r4},n4={partial:!0,tokenize:i4};function r4(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),$e(t,s,"linePrefix",5)(u)}function s(u){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):ve(u)?t.attempt(n4,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||ve(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function i4(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ve(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):$e(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ve(o)?i(o):n(o)}}const s4={name:"codeText",previous:a4,resolve:o4,tokenize:l4};function o4(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function a4(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function l4(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(s=t.enter("codeTextSequence"),i=0,h(f)):ve(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||ve(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),u)}function h(f){return f===96?(t.consume(f),i++,h):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",u(f))}}class u4{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&al(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),al(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),al(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);al(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);al(this.left,n.reverse())}}}function al(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function lI(t){const e={};let n=-1,r,i,s,o,a,l,u;const h=new u4(t);for(;++n<h.length;){for(;n in e;)n=e[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,c4(h,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},a=h.slice(i,n),a.unshift(r),h.splice(i,n-i+1,a))}}return Kn(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function c4(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let h,f,p=-1,m=n,y=0,k=0;const R=[k];for(;m;){for(;t.get(++i)[1]!==m;);s.push(i),m._tokenizer||(h=r.sliceStream(m),m.next||h.push(null),f&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(k=p+1,R.push(k),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):R.pop(),p=R.length;p--;){const b=a.slice(R[p],R[p+1]),S=s.pop();l.push([S,S+b.length-1]),t.splice(S,2,b)}for(l.reverse(),p=-1;++p<l.length;)u[y+l[p][0]]=y+l[p][1],y+=l[p][1]-l[p][0]-1;return u}const d4={resolve:f4,tokenize:p4},h4={partial:!0,tokenize:m4};function f4(t){return lI(t),t}function p4(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):ve(a)?t.check(h4,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function m4(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),$e(t,s,"linePrefix")}function s(o){if(o===null||ve(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function uI(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let h=0;return f;function f(b){return b===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(b),t.exit(s),p):b===null||b===32||b===41||Gd(b)?n(b):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),k(b))}function p(b){return b===62?(t.enter(s),t.consume(b),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),m(b))}function m(b){return b===62?(t.exit("chunkString"),t.exit(a),p(b)):b===null||b===60||ve(b)?n(b):(t.consume(b),b===92?y:m)}function y(b){return b===60||b===62||b===92?(t.consume(b),m):m(b)}function k(b){return!h&&(b===null||b===41||et(b))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(b)):h<u&&b===40?(t.consume(b),h++,k):b===41?(t.consume(b),h--,k):b===null||b===32||b===40||Gd(b)?n(b):(t.consume(b),b===92?R:k)}function R(b){return b===40||b===41||b===92?(t.consume(b),k):k(b)}}function cI(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(m){return t.enter(r),t.enter(i),t.consume(m),t.exit(i),t.enter(s),h}function h(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(t.exit(s),t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):ve(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||ve(m)||a++>999?(t.exit("chunkString"),h(m)):(t.consume(m),l||(l=!Le(m)),m===92?p:f)}function p(m){return m===91||m===92||m===93?(t.consume(m),a++,f):f(m)}}function dI(t,e,n,r,i,s){let o;return a;function a(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),o=p===40?41:p,l):n(p)}function l(p){return p===o?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(s),u(p))}function u(p){return p===o?(t.exit(s),l(o)):p===null?n(p):ve(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),$e(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===o||p===null||ve(p)?(t.exit("chunkString"),u(p)):(t.consume(p),p===92?f:h)}function f(p){return p===o||p===92?(t.consume(p),h):h(p)}}function Ll(t,e){let n;return r;function r(i){return ve(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Le(i)?$e(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const g4={name:"definition",tokenize:v4},y4={partial:!0,tokenize:w4};function v4(t,e,n){const r=this;let i;return s;function s(m){return t.enter("definition"),o(m)}function o(m){return cI.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=kr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),l):n(m)}function l(m){return et(m)?Ll(t,u)(m):u(m)}function u(m){return uI(t,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function h(m){return t.attempt(y4,f,f)(m)}function f(m){return Le(m)?$e(t,p,"whitespace")(m):p(m)}function p(m){return m===null||ve(m)?(t.exit("definition"),r.parser.defined.push(i),e(m)):n(m)}}function w4(t,e,n){return r;function r(a){return et(a)?Ll(t,i)(a):n(a)}function i(a){return dI(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Le(a)?$e(t,o,"whitespace")(a):o(a)}function o(a){return a===null||ve(a)?e(a):n(a)}}const _4={name:"hardBreakEscape",tokenize:x4};function x4(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ve(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const E4={name:"headingAtx",resolve:k4,tokenize:b4};function k4(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Kn(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function b4(t,e,n){let r=0;return i;function i(h){return t.enter("atxHeading"),s(h)}function s(h){return t.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(t.consume(h),o):h===null||et(h)?(t.exit("atxHeadingSequence"),a(h)):n(h)}function a(h){return h===35?(t.enter("atxHeadingSequence"),l(h)):h===null||ve(h)?(t.exit("atxHeading"),e(h)):Le(h)?$e(t,a,"whitespace")(h):(t.enter("atxHeadingText"),u(h))}function l(h){return h===35?(t.consume(h),l):(t.exit("atxHeadingSequence"),a(h))}function u(h){return h===null||h===35||et(h)?(t.exit("atxHeadingText"),a(h)):(t.consume(h),u)}}const S4=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Hx=["pre","script","style","textarea"],T4={concrete:!0,name:"htmlFlow",resolveTo:N4,tokenize:A4},I4={partial:!0,tokenize:P4},C4={partial:!0,tokenize:R4};function N4(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function A4(t,e,n){const r=this;let i,s,o,a,l;return u;function u(P){return h(P)}function h(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),f}function f(P){return P===33?(t.consume(P),p):P===47?(t.consume(P),s=!0,k):P===63?(t.consume(P),i=3,r.interrupt?e:L):vn(P)?(t.consume(P),o=String.fromCharCode(P),R):n(P)}function p(P){return P===45?(t.consume(P),i=2,m):P===91?(t.consume(P),i=5,a=0,y):vn(P)?(t.consume(P),i=4,r.interrupt?e:L):n(P)}function m(P){return P===45?(t.consume(P),r.interrupt?e:L):n(P)}function y(P){const le="CDATA[";return P===le.charCodeAt(a++)?(t.consume(P),a===le.length?r.interrupt?e:I:y):n(P)}function k(P){return vn(P)?(t.consume(P),o=String.fromCharCode(P),R):n(P)}function R(P){if(P===null||P===47||P===62||et(P)){const le=P===47,Ie=o.toLowerCase();return!le&&!s&&Hx.includes(Ie)?(i=1,r.interrupt?e(P):I(P)):S4.includes(o.toLowerCase())?(i=6,le?(t.consume(P),b):r.interrupt?e(P):I(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?S(P):C(P))}return P===45||cn(P)?(t.consume(P),o+=String.fromCharCode(P),R):n(P)}function b(P){return P===62?(t.consume(P),r.interrupt?e:I):n(P)}function S(P){return Le(P)?(t.consume(P),S):v(P)}function C(P){return P===47?(t.consume(P),v):P===58||P===95||vn(P)?(t.consume(P),O):Le(P)?(t.consume(P),C):v(P)}function O(P){return P===45||P===46||P===58||P===95||cn(P)?(t.consume(P),O):V(P)}function V(P){return P===61?(t.consume(P),j):Le(P)?(t.consume(P),V):C(P)}function j(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,x):Le(P)?(t.consume(P),j):w(P)}function x(P){return P===l?(t.consume(P),l=null,E):P===null||ve(P)?n(P):(t.consume(P),x)}function w(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||et(P)?V(P):(t.consume(P),w)}function E(P){return P===47||P===62||Le(P)?C(P):n(P)}function v(P){return P===62?(t.consume(P),T):n(P)}function T(P){return P===null||ve(P)?I(P):Le(P)?(t.consume(P),T):n(P)}function I(P){return P===45&&i===2?(t.consume(P),K):P===60&&i===1?(t.consume(P),ce):P===62&&i===4?(t.consume(P),ye):P===63&&i===3?(t.consume(P),L):P===93&&i===5?(t.consume(P),Z):ve(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(I4,$,N)(P)):P===null||ve(P)?(t.exit("htmlFlowData"),N(P)):(t.consume(P),I)}function N(P){return t.check(C4,G,$)(P)}function G(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),z}function z(P){return P===null||ve(P)?N(P):(t.enter("htmlFlowData"),I(P))}function K(P){return P===45?(t.consume(P),L):I(P)}function ce(P){return P===47?(t.consume(P),o="",W):I(P)}function W(P){if(P===62){const le=o.toLowerCase();return Hx.includes(le)?(t.consume(P),ye):I(P)}return vn(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),W):I(P)}function Z(P){return P===93?(t.consume(P),L):I(P)}function L(P){return P===62?(t.consume(P),ye):P===45&&i===2?(t.consume(P),L):I(P)}function ye(P){return P===null||ve(P)?(t.exit("htmlFlowData"),$(P)):(t.consume(P),ye)}function $(P){return t.exit("htmlFlow"),e(P)}}function R4(t,e,n){const r=this;return i;function i(o){return ve(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function P4(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Mu,e,n)}}const j4={name:"htmlText",tokenize:D4};function D4(t,e,n){const r=this;let i,s,o;return a;function a(L){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(L),l}function l(L){return L===33?(t.consume(L),u):L===47?(t.consume(L),V):L===63?(t.consume(L),C):vn(L)?(t.consume(L),w):n(L)}function u(L){return L===45?(t.consume(L),h):L===91?(t.consume(L),s=0,y):vn(L)?(t.consume(L),S):n(L)}function h(L){return L===45?(t.consume(L),m):n(L)}function f(L){return L===null?n(L):L===45?(t.consume(L),p):ve(L)?(o=f,ce(L)):(t.consume(L),f)}function p(L){return L===45?(t.consume(L),m):f(L)}function m(L){return L===62?K(L):L===45?p(L):f(L)}function y(L){const ye="CDATA[";return L===ye.charCodeAt(s++)?(t.consume(L),s===ye.length?k:y):n(L)}function k(L){return L===null?n(L):L===93?(t.consume(L),R):ve(L)?(o=k,ce(L)):(t.consume(L),k)}function R(L){return L===93?(t.consume(L),b):k(L)}function b(L){return L===62?K(L):L===93?(t.consume(L),b):k(L)}function S(L){return L===null||L===62?K(L):ve(L)?(o=S,ce(L)):(t.consume(L),S)}function C(L){return L===null?n(L):L===63?(t.consume(L),O):ve(L)?(o=C,ce(L)):(t.consume(L),C)}function O(L){return L===62?K(L):C(L)}function V(L){return vn(L)?(t.consume(L),j):n(L)}function j(L){return L===45||cn(L)?(t.consume(L),j):x(L)}function x(L){return ve(L)?(o=x,ce(L)):Le(L)?(t.consume(L),x):K(L)}function w(L){return L===45||cn(L)?(t.consume(L),w):L===47||L===62||et(L)?E(L):n(L)}function E(L){return L===47?(t.consume(L),K):L===58||L===95||vn(L)?(t.consume(L),v):ve(L)?(o=E,ce(L)):Le(L)?(t.consume(L),E):K(L)}function v(L){return L===45||L===46||L===58||L===95||cn(L)?(t.consume(L),v):T(L)}function T(L){return L===61?(t.consume(L),I):ve(L)?(o=T,ce(L)):Le(L)?(t.consume(L),T):E(L)}function I(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),i=L,N):ve(L)?(o=I,ce(L)):Le(L)?(t.consume(L),I):(t.consume(L),G)}function N(L){return L===i?(t.consume(L),i=void 0,z):L===null?n(L):ve(L)?(o=N,ce(L)):(t.consume(L),N)}function G(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||et(L)?E(L):(t.consume(L),G)}function z(L){return L===47||L===62||et(L)?E(L):n(L)}function K(L){return L===62?(t.consume(L),t.exit("htmlTextData"),t.exit("htmlText"),e):n(L)}function ce(L){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),W}function W(L){return Le(L)?$e(t,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):Z(L)}function Z(L){return t.enter("htmlTextData"),o(L)}}const Qy={name:"labelEnd",resolveAll:V4,resolveTo:F4,tokenize:U4},L4={tokenize:z4},O4={tokenize:B4},M4={tokenize:$4};function V4(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Kn(t,0,t.length,n),t}function F4(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},h={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=nr(a,t.slice(s+1,s+r+3)),a=nr(a,[["enter",h,e]]),a=nr(a,zh(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=nr(a,[["exit",h,e],t[o-2],t[o-1],["exit",u,e]]),a=nr(a,t.slice(o+1)),a=nr(a,[["exit",l,e]]),Kn(t,s,t.length,a),t}function U4(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(p){return s?s._inactive?f(p):(o=r.parser.defined.includes(kr(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),l):n(p)}function l(p){return p===40?t.attempt(L4,h,o?h:f)(p):p===91?t.attempt(O4,h,o?u:f)(p):o?h(p):f(p)}function u(p){return t.attempt(M4,h,f)(p)}function h(p){return e(p)}function f(p){return s._balanced=!0,n(p)}}function z4(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return et(f)?Ll(t,s)(f):s(f)}function s(f){return f===41?h(f):uI(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return et(f)?Ll(t,l)(f):h(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?dI(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):h(f)}function u(f){return et(f)?Ll(t,h)(f):h(f)}function h(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function B4(t,e,n){const r=this;return i;function i(a){return cI.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(kr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function $4(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const H4={name:"labelStartImage",resolveAll:Qy.resolveAll,tokenize:q4};function q4(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const W4={name:"labelStartLink",resolveAll:Qy.resolveAll,tokenize:K4};function K4(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Bf={name:"lineEnding",tokenize:G4};function G4(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),$e(t,e,"linePrefix")}}const td={name:"thematicBreak",tokenize:Q4};function Q4(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||ve(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),Le(u)?$e(t,a,"whitespace")(u):a(u))}}const bn={continuation:{tokenize:Z4},exit:tU,name:"list",tokenize:J4},Y4={partial:!0,tokenize:nU},X4={partial:!0,tokenize:eU};function J4(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:Cm(m)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),m===42||m===45?t.check(td,n,u)(m):u(m);if(!r.interrupt||m===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(m)}return n(m)}function l(m){return Cm(m)&&++o<10?(t.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(t.exit("listItemValue"),u(m)):n(m)}function u(m){return t.enter("listItemMarker"),t.consume(m),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,t.check(Mu,r.interrupt?n:h,t.attempt(Y4,p,f))}function h(m){return r.containerState.initialBlankLine=!0,s++,p(m)}function f(m){return Le(m)?(t.enter("listItemPrefixWhitespace"),t.consume(m),t.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(m)}}function Z4(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Mu,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$e(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Le(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(X4,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,$e(t,t.attempt(bn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function eU(t,e,n){const r=this;return $e(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function tU(t){t.exit(this.containerState.type)}function nU(t,e,n){const r=this;return $e(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Le(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const qx={name:"setextUnderline",resolveTo:rU,tokenize:iU};function rU(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function iU(t,e,n){const r=this;let i;return s;function s(u){let h=r.events.length,f;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){f=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),Le(u)?$e(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||ve(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const sU={tokenize:oU};function oU(t){const e=this,n=t.attempt(Mu,r,t.attempt(this.parser.constructs.flowInitial,i,$e(t,t.attempt(this.parser.constructs.flow,i,t.attempt(d4,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const aU={resolveAll:fI()},lU=hI("string"),uU=hI("text");function hI(t){return{resolveAll:fI(t==="text"?cU:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(h){return u(h)?s(h):a(h)}function a(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),l}function l(h){return u(h)?(n.exit("data"),s(h)):(n.consume(h),l)}function u(h){if(h===null)return!0;const f=i[h];let p=-1;if(f)for(;++p<f.length;){const m=f[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function fI(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function cU(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const dU={42:bn,43:bn,45:bn,48:bn,49:bn,50:bn,51:bn,52:bn,53:bn,54:bn,55:bn,56:bn,57:bn,62:sI},hU={91:g4},fU={[-2]:zf,[-1]:zf,32:zf},pU={35:E4,42:td,45:[qx,td],60:T4,61:qx,95:td,96:$x,126:$x},mU={38:aI,92:oI},gU={[-5]:Bf,[-4]:Bf,[-3]:Bf,33:H4,38:aI,42:Nm,60:[WF,j4],91:W4,92:[_4,oI],93:Qy,95:Nm,96:s4},yU={null:[Nm,aU]},vU={null:[42,95]},wU={null:[]},_U=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:vU,contentInitial:hU,disable:wU,document:dU,flow:pU,flowInitial:fU,insideSpan:yU,string:mU,text:gU},Symbol.toStringTag,{value:"Module"}));function xU(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:x(V),check:x(j),consume:S,enter:C,exit:O,interrupt:x(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:k,events:[],now:y,parser:t,previous:null,sliceSerialize:p,sliceStream:m,write:f};let h=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function f(T){return o=nr(o,T),R(),o[o.length-1]!==null?[]:(w(e,0),u.events=zh(s,u.events,u),u.events)}function p(T,I){return kU(m(T),I)}function m(T){return EU(o,T)}function y(){const{_bufferIndex:T,_index:I,line:N,column:G,offset:z}=r;return{_bufferIndex:T,_index:I,line:N,column:G,offset:z}}function k(T){i[T.line]=T.column,v()}function R(){let T;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<I.length;)b(I.charCodeAt(r._bufferIndex));else b(I)}}function b(T){h=h(T)}function S(T){ve(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,v()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=T}function C(T,I){const N=I||{};return N.type=T,N.start=y(),u.events.push(["enter",N,u]),a.push(N),N}function O(T){const I=a.pop();return I.end=y(),u.events.push(["exit",I,u]),I}function V(T,I){w(T,I.from)}function j(T,I){I.restore()}function x(T,I){return N;function N(G,z,K){let ce,W,Z,L;return Array.isArray(G)?$(G):"tokenize"in G?$([G]):ye(G);function ye(Ce){return Me;function Me(it){const Dn=it!==null&&Ce[it],Ln=it!==null&&Ce.null,lr=[...Array.isArray(Dn)?Dn:Dn?[Dn]:[],...Array.isArray(Ln)?Ln:Ln?[Ln]:[]];return $(lr)(it)}}function $(Ce){return ce=Ce,W=0,Ce.length===0?K:P(Ce[W])}function P(Ce){return Me;function Me(it){return L=E(),Z=Ce,Ce.partial||(u.currentConstruct=Ce),Ce.name&&u.parser.constructs.disable.null.includes(Ce.name)?Ie():Ce.tokenize.call(I?Object.assign(Object.create(u),I):u,l,le,Ie)(it)}}function le(Ce){return T(Z,L),z}function Ie(Ce){return L.restore(),++W<ce.length?P(ce[W]):K}}}function w(T,I){T.resolveAll&&!s.includes(T)&&s.push(T),T.resolve&&Kn(u.events,I,u.events.length-I,T.resolve(u.events.slice(I),u)),T.resolveTo&&(u.events=T.resolveTo(u.events,u))}function E(){const T=y(),I=u.previous,N=u.currentConstruct,G=u.events.length,z=Array.from(a);return{from:G,restore:K};function K(){r=T,u.previous=I,u.currentConstruct=N,u.events.length=G,a=z,v()}}function v(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function EU(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function kU(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function bU(t){const r={constructs:rI([_U,...(t||{}).extensions||[]]),content:i(FF),defined:[],document:i(zF),flow:i(sU),lazy:{},string:i(lU),text:i(uU)};return r;function i(s){return o;function o(a){return xU(r,s,a)}}}function SU(t){for(;!lI(t););return t}const Wx=/[\0\t\n\r]/g;function TU(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,h,f,p,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Wx.lastIndex=f,u=Wx.exec(s),p=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(p),!u){e=s.slice(f);break}if(m===10&&f===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<p&&(l.push(s.slice(f,p)),t+=p-f),m){case 0:{l.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,l.push(-2);t++<h;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=p+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const IU=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function CU(t){return t.replace(IU,NU)}function NU(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return iI(n.slice(s?2:1),s?16:10)}return Gy(n)||t}const pI={}.hasOwnProperty;function AU(t,e,n){return typeof e!="string"&&(n=e,e=void 0),RU(n)(SU(bU(n).document().write(TU()(t,e,!0))))}function RU(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ri),autolinkProtocol:E,autolinkEmail:E,atxHeading:s(Ai),blockQuote:s(Ln),characterEscape:E,characterReference:E,codeFenced:s(lr),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(lr,o),codeText:s(bt,o),codeTextData:E,data:E,codeFlowValue:E,definition:s(Xn),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ni),hardBreakEscape:s(On),hardBreakTrailing:s(On),htmlFlow:s(Eo,o),htmlFlowData:E,htmlText:s(Eo,o),htmlTextData:E,image:s(Da),label:o,link:s(Ri),listItem:s(ko),listItemValue:p,listOrdered:s(Pi,f),listUnordered:s(Pi),paragraph:s(La),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ai),strong:s(Is),thematicBreak:s(Cr)},exit:{atxHeading:l(),atxHeadingSequence:V,autolink:l(),autolinkEmail:Dn,autolinkProtocol:it,blockQuote:l(),characterEscapeValue:v,characterReferenceMarkerHexadecimal:Ie,characterReferenceMarkerNumeric:Ie,characterReferenceValue:Ce,characterReference:Me,codeFenced:l(R),codeFencedFence:k,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:v,codeIndented:l(b),codeText:l(z),codeTextData:v,data:v,definition:l(),definitionDestinationString:O,definitionLabelString:S,definitionTitleString:C,emphasis:l(),hardBreakEscape:l(I),hardBreakTrailing:l(I),htmlFlow:l(N),htmlFlowData:v,htmlText:l(G),htmlTextData:v,image:l(ce),label:Z,labelText:W,lineEnding:T,link:l(K),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:le,resourceDestinationString:L,resourceTitleString:ye,resource:$,setextHeading:l(w),setextHeadingLineSequence:x,setextHeadingText:j,strong:l(),thematicBreak:l()}};mI(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(H){let X={type:"root",children:[]};const me={stack:[X],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:h,data:n},we=[];let He=-1;for(;++He<H.length;)if(H[He][1].type==="listOrdered"||H[He][1].type==="listUnordered")if(H[He][0]==="enter")we.push(He);else{const Vt=we.pop();He=i(H,Vt,He)}for(He=-1;++He<H.length;){const Vt=e[H[He][0]];pI.call(Vt,H[He][1].type)&&Vt[H[He][1].type].call(Object.assign({sliceSerialize:H[He][2].sliceSerialize},me),H[He][1])}if(me.tokenStack.length>0){const Vt=me.tokenStack[me.tokenStack.length-1];(Vt[1]||Kx).call(me,void 0,Vt[0])}for(X.position={start:Ui(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:Ui(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},He=-1;++He<e.transforms.length;)X=e.transforms[He](X)||X;return X}function i(H,X,me){let we=X-1,He=-1,Vt=!1,pn,St,ur,Jn;for(;++we<=me;){const Ft=H[we];switch(Ft[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ft[0]==="enter"?He++:He--,Jn=void 0;break}case"lineEndingBlank":{Ft[0]==="enter"&&(pn&&!Jn&&!He&&!ur&&(ur=we),Jn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Jn=void 0}if(!He&&Ft[0]==="enter"&&Ft[1].type==="listItemPrefix"||He===-1&&Ft[0]==="exit"&&(Ft[1].type==="listUnordered"||Ft[1].type==="listOrdered")){if(pn){let Nr=we;for(St=void 0;Nr--;){const en=H[Nr];if(en[1].type==="lineEnding"||en[1].type==="lineEndingBlank"){if(en[0]==="exit")continue;St&&(H[St][1].type="lineEndingBlank",Vt=!0),en[1].type="lineEnding",St=Nr}else if(!(en[1].type==="linePrefix"||en[1].type==="blockQuotePrefix"||en[1].type==="blockQuotePrefixWhitespace"||en[1].type==="blockQuoteMarker"||en[1].type==="listItemIndent"))break}ur&&(!St||ur<St)&&(pn._spread=!0),pn.end=Object.assign({},St?H[St][1].start:Ft[1].end),H.splice(St||we,0,["exit",pn,Ft[2]]),we++,me++}if(Ft[1].type==="listItemPrefix"){const Nr={type:"listItem",_spread:!1,start:Object.assign({},Ft[1].start),end:void 0};pn=Nr,H.splice(we,0,["enter",Nr,Ft[2]]),we++,me++,ur=void 0,Jn=!0}}}return H[X][1]._spread=Vt,me}function s(H,X){return me;function me(we){a.call(this,H(we),we),X&&X.call(this,we)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(H,X,me){this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([X,me||void 0]),H.position={start:Ui(X.start),end:void 0}}function l(H){return X;function X(me){H&&H.call(this,me),u.call(this,me)}}function u(H,X){const me=this.stack.pop(),we=this.tokenStack.pop();if(we)we[0].type!==H.type&&(X?X.call(this,H,we[0]):(we[1]||Kx).call(this,H,we[0]));else throw new Error("Cannot close `"+H.type+"` ("+Dl({start:H.start,end:H.end})+"): its not open");me.position.end=Ui(H.end)}function h(){return Ky(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p(H){if(this.data.expectingFirstListItemValue){const X=this.stack[this.stack.length-2];X.start=Number.parseInt(this.sliceSerialize(H),10),this.data.expectingFirstListItemValue=void 0}}function m(){const H=this.resume(),X=this.stack[this.stack.length-1];X.lang=H}function y(){const H=this.resume(),X=this.stack[this.stack.length-1];X.meta=H}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const H=this.resume(),X=this.stack[this.stack.length-1];X.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const H=this.resume(),X=this.stack[this.stack.length-1];X.value=H.replace(/(\r?\n|\r)$/g,"")}function S(H){const X=this.resume(),me=this.stack[this.stack.length-1];me.label=X,me.identifier=kr(this.sliceSerialize(H)).toLowerCase()}function C(){const H=this.resume(),X=this.stack[this.stack.length-1];X.title=H}function O(){const H=this.resume(),X=this.stack[this.stack.length-1];X.url=H}function V(H){const X=this.stack[this.stack.length-1];if(!X.depth){const me=this.sliceSerialize(H).length;X.depth=me}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function x(H){const X=this.stack[this.stack.length-1];X.depth=this.sliceSerialize(H).codePointAt(0)===61?1:2}function w(){this.data.setextHeadingSlurpLineEnding=void 0}function E(H){const me=this.stack[this.stack.length-1].children;let we=me[me.length-1];(!we||we.type!=="text")&&(we=Mn(),we.position={start:Ui(H.start),end:void 0},me.push(we)),this.stack.push(we)}function v(H){const X=this.stack.pop();X.value+=this.sliceSerialize(H),X.position.end=Ui(H.end)}function T(H){const X=this.stack[this.stack.length-1];if(this.data.atHardBreak){const me=X.children[X.children.length-1];me.position.end=Ui(H.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(X.type)&&(E.call(this,H),v.call(this,H))}function I(){this.data.atHardBreak=!0}function N(){const H=this.resume(),X=this.stack[this.stack.length-1];X.value=H}function G(){const H=this.resume(),X=this.stack[this.stack.length-1];X.value=H}function z(){const H=this.resume(),X=this.stack[this.stack.length-1];X.value=H}function K(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const X=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=X,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function ce(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const X=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=X,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function W(H){const X=this.sliceSerialize(H),me=this.stack[this.stack.length-2];me.label=CU(X),me.identifier=kr(X).toLowerCase()}function Z(){const H=this.stack[this.stack.length-1],X=this.resume(),me=this.stack[this.stack.length-1];if(this.data.inReference=!0,me.type==="link"){const we=H.children;me.children=we}else me.alt=X}function L(){const H=this.resume(),X=this.stack[this.stack.length-1];X.url=H}function ye(){const H=this.resume(),X=this.stack[this.stack.length-1];X.title=H}function $(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function le(H){const X=this.resume(),me=this.stack[this.stack.length-1];me.label=X,me.identifier=kr(this.sliceSerialize(H)).toLowerCase(),this.data.referenceType="full"}function Ie(H){this.data.characterReferenceType=H.type}function Ce(H){const X=this.sliceSerialize(H),me=this.data.characterReferenceType;let we;me?(we=iI(X,me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):we=Gy(X);const He=this.stack[this.stack.length-1];He.value+=we}function Me(H){const X=this.stack.pop();X.position.end=Ui(H.end)}function it(H){v.call(this,H);const X=this.stack[this.stack.length-1];X.url=this.sliceSerialize(H)}function Dn(H){v.call(this,H);const X=this.stack[this.stack.length-1];X.url="mailto:"+this.sliceSerialize(H)}function Ln(){return{type:"blockquote",children:[]}}function lr(){return{type:"code",lang:null,meta:null,value:""}}function bt(){return{type:"inlineCode",value:""}}function Xn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ni(){return{type:"emphasis",children:[]}}function Ai(){return{type:"heading",depth:0,children:[]}}function On(){return{type:"break"}}function Eo(){return{type:"html",value:""}}function Da(){return{type:"image",title:null,url:"",alt:null}}function Ri(){return{type:"link",title:null,url:"",children:[]}}function Pi(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function ko(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function La(){return{type:"paragraph",children:[]}}function Is(){return{type:"strong",children:[]}}function Mn(){return{type:"text",value:""}}function Cr(){return{type:"thematicBreak"}}}function Ui(t){return{line:t.line,column:t.column,offset:t.offset}}function mI(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?mI(t,r):PU(t,r)}}function PU(t,e){let n;for(n in e)if(pI.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Kx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Dl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Dl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Dl({start:e.start,end:e.end})+") is still open")}function jU(t){const e=this;e.parser=n;function n(r){return AU(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function DU(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function LU(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function OU(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function MU(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VU(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FU(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Pa(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function UU(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function zU(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function gI(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function BU(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return gI(t,e);const i={src:Pa(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function $U(t,e){const n={src:Pa(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function HU(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function qU(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return gI(t,e);const i={href:Pa(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function WU(t,e){const n={href:Pa(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function KU(t,e,n){const r=t.all(e),i=n?GU(n):yI(e),s={},o=[];if(typeof e.checked=="boolean"){const h=r[0];let f;h&&h.type==="element"&&h.tagName==="p"?f=h:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const h=r[a];(i||a!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?o.push(...h.children):o.push(h)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function GU(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=yI(n[r])}return e}function yI(t){const e=t.spread;return e??t.children.length>1}function QU(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function YU(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XU(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function JU(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ZU(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=$y(e.children[1]),l=YT(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function e3(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const f=e.children[l],p={},m=o?o[l]:void 0;m&&(p.align=m);let y={type:"element",tagName:s,properties:p,children:[]};f&&(y.children=t.all(f),t.patch(f,y),y=t.applyData(f,y)),u.push(y)}const h={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,h),t.applyData(e,h)}function t3(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Gx=9,Qx=32;function n3(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(Yx(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(Yx(e.slice(i),i>0,!1)),s.join("")}function Yx(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===Gx||s===Qx;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===Gx||s===Qx;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function r3(t,e){const n={type:"text",value:n3(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function i3(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const s3={blockquote:DU,break:LU,code:OU,delete:MU,emphasis:VU,footnoteReference:FU,heading:UU,html:zU,imageReference:BU,image:$U,inlineCode:HU,linkReference:qU,link:WU,listItem:KU,list:QU,paragraph:YU,root:XU,strong:JU,table:ZU,tableCell:t3,tableRow:e3,text:r3,thematicBreak:i3,toml:Tc,yaml:Tc,definition:Tc,footnoteDefinition:Tc};function Tc(){}const vI=-1,Bh=0,Ol=1,Qd=2,Yy=3,Xy=4,Jy=5,Zy=6,wI=7,_I=8,Xx=typeof self=="object"?self:globalThis,o3=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Bh:case vI:return n(o,i);case Ol:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Qd:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case Yy:return n(new Date(o),i);case Xy:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Jy:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case Zy:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case wI:{const{name:a,message:l}=o;return n(new Xx[a](l),i)}case _I:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new Xx[s](o),i)};return r},Jx=t=>o3(new Map,t)(0),Ao="",{toString:a3}={},{keys:l3}=Object,ll=t=>{const e=typeof t;if(e!=="object"||!t)return[Bh,e];const n=a3.call(t).slice(8,-1);switch(n){case"Array":return[Ol,Ao];case"Object":return[Qd,Ao];case"Date":return[Yy,Ao];case"RegExp":return[Xy,Ao];case"Map":return[Jy,Ao];case"Set":return[Zy,Ao];case"DataView":return[Ol,n]}return n.includes("Array")?[Ol,n]:n.includes("Error")?[wI,n]:[Qd,n]},Ic=([t,e])=>t===Bh&&(e==="function"||e==="symbol"),u3=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=ll(o);switch(a){case Bh:{let h=o;switch(l){case"bigint":a=_I,h=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);h=null;break;case"undefined":return i([vI],o)}return i([a,h],o)}case Ol:{if(l){let p=o;return l==="DataView"?p=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(o)),i([l,[...p]],o)}const h=[],f=i([a,h],o);for(const p of o)h.push(s(p));return f}case Qd:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const h=[],f=i([a,h],o);for(const p of l3(o))(t||!Ic(ll(o[p])))&&h.push([s(p),s(o[p])]);return f}case Yy:return i([a,o.toISOString()],o);case Xy:{const{source:h,flags:f}=o;return i([a,{source:h,flags:f}],o)}case Jy:{const h=[],f=i([a,h],o);for(const[p,m]of o)(t||!(Ic(ll(p))||Ic(ll(m))))&&h.push([s(p),s(m)]);return f}case Zy:{const h=[],f=i([a,h],o);for(const p of o)(t||!Ic(ll(p)))&&h.push(s(p));return f}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},Zx=(t,{json:e,lossy:n}={})=>{const r=[];return u3(!(e||n),!!e,new Map,r)(t),r},Yd=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Jx(Zx(t,e)):structuredClone(t):(t,e)=>Jx(Zx(t,e));function c3(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function d3(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function h3(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||c3,r=t.options.footnoteBackLabel||d3,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const h=t.all(u),f=String(u.identifier).toUpperCase(),p=Pa(f.toLowerCase());let m=0;const y=[],k=t.footnoteCounts.get(f);for(;k!==void 0&&++m<=k;){y.length>0&&y.push({type:"text",value:" "});let S=typeof n=="string"?n:n(l,m);typeof S=="string"&&(S={type:"text",value:S}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const R=h[h.length-1];if(R&&R.type==="element"&&R.tagName==="p"){const S=R.children[R.children.length-1];S&&S.type==="text"?S.value+=" ":R.children.push({type:"text",value:" "}),R.children.push(...y)}else h.push(...y);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:t.wrap(h,!0)};t.patch(u,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Yd(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const $h=function(t){if(t==null)return g3;if(typeof t=="function")return Hh(t);if(typeof t=="object")return Array.isArray(t)?f3(t):p3(t);if(typeof t=="string")return m3(t);throw new Error("Expected function, string, or object as test")};function f3(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=$h(t[n]);return Hh(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function p3(t){const e=t;return Hh(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function m3(t){return Hh(e);function e(n){return n&&n.type===t}}function Hh(t){return e;function e(n,r,i){return!!(y3(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function g3(){return!0}function y3(t){return t!==null&&typeof t=="object"&&"type"in t}const xI=[],v3=!0,Am=!1,w3="skip";function EI(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=$h(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,h){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=xI,y,k,R;if((!e||s(l,u,h[h.length-1]||void 0))&&(m=_3(n(l,h)),m[0]===Am))return m;if("children"in l&&l.children){const b=l;if(b.children&&m[0]!==w3)for(k=(r?b.children.length:-1)+o,R=h.concat(b);k>-1&&k<b.children.length;){const S=b.children[k];if(y=a(S,k,R)(),y[0]===Am)return y;k=typeof y[1]=="number"?y[1]:k+o}}return m}}}function _3(t){return Array.isArray(t)?t:typeof t=="number"?[v3,t]:t==null?xI:[t]}function ev(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),EI(t,s,a,i);function a(l,u){const h=u[u.length-1],f=h?h.children.indexOf(l):void 0;return o(l,f,h)}}const Rm={}.hasOwnProperty,x3={};function E3(t,e){const n=e||x3,r=new Map,i=new Map,s=new Map,o={...s3,...n.handlers},a={all:u,applyData:b3,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:k3,wrap:T3};return ev(t,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const f=h.type==="definition"?r:i,p=String(h.identifier).toUpperCase();f.has(p)||f.set(p,h)}}),a;function l(h,f){const p=h.type,m=a.handlers[p];if(Rm.call(a.handlers,p)&&m)return m(a,h,f);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in h){const{children:k,...R}=h,b=Yd(R);return b.children=a.all(h),b}return Yd(h)}return(a.options.unknownHandler||S3)(a,h,f)}function u(h){const f=[];if("children"in h){const p=h.children;let m=-1;for(;++m<p.length;){const y=a.one(p[m],h);if(y){if(m&&p[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=e0(y.value)),!Array.isArray(y)&&y.type==="element")){const k=y.children[0];k&&k.type==="text"&&(k.value=e0(k.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function k3(t,e){t.position&&(e.position=dF(t))}function b3(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Yd(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function S3(t,e){const n=e.data||{},r="value"in e&&!(Rm.call(n,"hProperties")||Rm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function T3(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function e0(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function t0(t,e){const n=E3(t,e),r=n.one(t,void 0),i=h3(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function I3(t,e){return t&&"run"in t?async function(n,r){const i=t0(n,{file:r,...e});await t.run(i,r)}:function(n,r){return t0(n,{file:r,...t||e})}}function n0(t){if(t)throw t}var nd=Object.prototype.hasOwnProperty,kI=Object.prototype.toString,r0=Object.defineProperty,i0=Object.getOwnPropertyDescriptor,s0=function(e){return typeof Array.isArray=="function"?Array.isArray(e):kI.call(e)==="[object Array]"},o0=function(e){if(!e||kI.call(e)!=="[object Object]")return!1;var n=nd.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&nd.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||nd.call(e,i)},a0=function(e,n){r0&&n.name==="__proto__"?r0(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},l0=function(e,n){if(n==="__proto__")if(nd.call(e,n)){if(i0)return i0(e,n).value}else return;return e[n]},C3=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,h=!1;for(typeof a=="boolean"&&(h=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=l0(a,n),i=l0(e,n),a!==i&&(h&&i&&(o0(i)||(s=s0(i)))?(s?(s=!1,o=r&&s0(r)?r:[]):o=r&&o0(r)?r:{},a0(a,{name:n,newValue:t(h,o,i)})):typeof i<"u"&&a0(a,{name:n,newValue:i}));return a};const $f=Jd(C3);function Pm(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function N3(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const h=t[++s];let f=-1;if(l){o(l);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,h?A3(h,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function A3(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const h=u;if(a&&n)throw h;return i(h)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Lr={basename:R3,dirname:P3,extname:j3,join:D3,sep:"/"};function R3(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Vu(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function P3(t){if(Vu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function j3(t){Vu(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function D3(...t){let e=-1,n;for(;++e<t.length;)Vu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":L3(n)}function L3(t){Vu(t);const e=t.codePointAt(0)===47;let n=O3(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function O3(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Vu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const M3={cwd:V3};function V3(){return"/"}function jm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function F3(t){if(typeof t=="string")t=new URL(t);else if(!jm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return U3(t)}function U3(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Hf=["history","path","basename","stem","extname","dirname"];class bI{constructor(e){let n;e?jm(e)?n={path:e}:typeof e=="string"||z3(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":M3.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Hf.length;){const s=Hf[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Hf.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Lr.basename(this.path):void 0}set basename(e){Wf(e,"basename"),qf(e,"basename"),this.path=Lr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Lr.dirname(this.path):void 0}set dirname(e){u0(this.basename,"dirname"),this.path=Lr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Lr.extname(this.path):void 0}set extname(e){if(qf(e,"extname"),u0(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){jm(e)&&(e=F3(e)),Wf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Lr.basename(this.path,this.extname):void 0}set stem(e){Wf(e,"stem"),qf(e,"stem"),this.path=Lr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new fn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function qf(t,e){if(t&&t.includes(Lr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Lr.sep+"`")}function Wf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function u0(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function z3(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const B3=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},$3={}.hasOwnProperty;class tv extends B3{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=N3()}copy(){const e=new tv;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data($f(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Qf("data",this.frozen),this.namespace[e]=n,this):$3.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Qf("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Cc(e),r=this.parser||this.Parser;return Kf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Kf("process",this.parser||this.Parser),Gf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Cc(e),l=r.parse(a);r.run(l,a,function(h,f,p){if(h||!f||!p)return u(h);const m=f,y=r.stringify(m,p);W3(y)?p.value=y:p.result=y,u(h,p)});function u(h,f){h||!f?o(h):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),Kf("processSync",this.parser||this.Parser),Gf("processSync",this.compiler||this.Compiler),this.process(e,i),d0("processSync","process",n),r;function i(s,o){n=!0,n0(s),r=o}}run(e,n,r){c0(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Cc(n);i.run(e,l,u);function u(h,f,p){const m=f||e;h?a(h):o?o(m):r(void 0,m,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),d0("runSync","run",r),i;function s(o,a){n0(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Cc(n),i=this.compiler||this.Compiler;return Gf("stringify",i),c0(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(Qf("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...f]=u;l(h,f)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=$f(!0,i.settings,u.settings))}function a(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const f=u[h];s(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,h){let f=-1,p=-1;for(;++f<r.length;)if(r[f][0]===u){p=f;break}if(p===-1)r.push([u,...h]);else if(h.length>0){let[m,...y]=h;const k=r[p][1];Pm(k)&&Pm(m)&&(m=$f(!0,k,m)),r[p]=[u,m,...y]}}}}const H3=new tv().freeze();function Kf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Gf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Qf(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function c0(t){if(!Pm(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function d0(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Cc(t){return q3(t)?t:new bI(t)}function q3(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function W3(t){return typeof t=="string"||K3(t)}function K3(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const G3="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",h0=[],f0={allowDangerousHtml:!0},Q3=/^(https?|ircs?|mailto|xmpp)$/i,Y3=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function p0(t){const e=X3(t),n=J3(t);return Z3(e.runSync(e.parse(n),n),t)}function X3(t){const e=t.rehypePlugins||h0,n=t.remarkPlugins||h0,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...f0}:f0;return H3().use(jU).use(n).use(I3,r).use(e)}function J3(t){const e=t.children||"",n=new bI;return typeof e=="string"&&(n.value=e),n}function Z3(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||ez;for(const h of Y3)Object.hasOwn(e,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+G3+h.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),ev(t,u),gF(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function u(h,f,p){if(h.type==="raw"&&p&&typeof f=="number")return o?p.children.splice(f,1):p.children[f]={type:"text",value:h.value},f;if(h.type==="element"){let m;for(m in Uf)if(Object.hasOwn(Uf,m)&&Object.hasOwn(h.properties,m)){const y=h.properties[m],k=Uf[m];(k===null||k.includes(h.tagName))&&(h.properties[m]=l(String(y||""),m,h))}}if(h.type==="element"){let m=n?!n.includes(h.tagName):s?s.includes(h.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(h,f,p)),m&&p&&typeof f=="number")return a&&h.children?p.children.splice(f,1,...h.children):p.children.splice(f,1),f}}}function ez(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Q3.test(t.slice(0,e))?t:""}function m0(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function tz(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function nz(t,e,n){const i=$h((n||{}).ignore||[]),s=rz(e);let o=-1;for(;++o<s.length;)EI(t,"text",a);function a(u,h){let f=-1,p;for(;++f<h.length;){const m=h[f],y=p?p.children:void 0;if(i(m,y?y.indexOf(m):void 0,p))return;p=m}if(p)return l(u,h)}function l(u,h){const f=h[h.length-1],p=s[o][0],m=s[o][1];let y=0;const R=f.children.indexOf(u);let b=!1,S=[];p.lastIndex=0;let C=p.exec(u.value);for(;C;){const O=C.index,V={index:C.index,input:C.input,stack:[...h,u]};let j=m(...C,V);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?p.lastIndex=O+1:(y!==O&&S.push({type:"text",value:u.value.slice(y,O)}),Array.isArray(j)?S.push(...j):j&&S.push(j),y=O+C[0].length,b=!0),!p.global)break;C=p.exec(u.value)}return b?(y<u.value.length&&S.push({type:"text",value:u.value.slice(y)}),f.children.splice(R,1,...S)):S=[u],R+S.length}}function rz(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([iz(i[0]),sz(i[1])])}return e}function iz(t){return typeof t=="string"?new RegExp(tz(t),"g"):t}function sz(t){return typeof t=="function"?t:function(){return t}}const Yf="phrasing",Xf=["autolink","link","image","label"];function oz(){return{transforms:[fz],enter:{literalAutolink:lz,literalAutolinkEmail:Jf,literalAutolinkHttp:Jf,literalAutolinkWww:Jf},exit:{literalAutolink:hz,literalAutolinkEmail:dz,literalAutolinkHttp:uz,literalAutolinkWww:cz}}}function az(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Yf,notInConstruct:Xf},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Yf,notInConstruct:Xf},{character:":",before:"[ps]",after:"\\/",inConstruct:Yf,notInConstruct:Xf}]}}function lz(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Jf(t){this.config.enter.autolinkProtocol.call(this,t)}function uz(t){this.config.exit.autolinkProtocol.call(this,t)}function cz(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function dz(t){this.config.exit.autolinkEmail.call(this,t)}function hz(t){this.exit(t)}function fz(t){nz(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,pz],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),mz]],{ignore:["link","linkReference"]})}function pz(t,e,n,r,i){let s="";if(!SI(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!gz(n)))return!1;const o=yz(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function mz(t,e,n,r){return!SI(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function gz(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function yz(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=m0(t,"(");let s=m0(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function SI(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ho(n)||Uh(n))&&(!e||n!==47)}TI.peek=Tz;function vz(){this.buffer()}function wz(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function _z(){this.buffer()}function xz(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Ez(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function kz(t){this.exit(t)}function bz(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Sz(t){this.exit(t)}function Tz(){return"["}function TI(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Iz(){return{enter:{gfmFootnoteCallString:vz,gfmFootnoteCall:wz,gfmFootnoteDefinitionLabelString:_z,gfmFootnoteDefinition:xz},exit:{gfmFootnoteCallString:Ez,gfmFootnoteCall:kz,gfmFootnoteDefinitionLabelString:bz,gfmFootnoteDefinition:Sz}}}function Cz(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:TI},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),h=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),h(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?II:Nz))),u(),l}}function Nz(t,e,n){return e===0?t:II(t,e,n)}function II(t,e,n){return(n?"":"    ")+t}const Az=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];CI.peek=Lz;function Rz(){return{canContainEols:["delete"],enter:{strikethrough:jz},exit:{strikethrough:Dz}}}function Pz(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Az}],handlers:{delete:CI}}}function jz(t){this.enter({type:"delete",children:[]},t)}function Dz(t){this.exit(t)}function CI(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Lz(){return"~"}function Oz(t){return t.length}function Mz(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Oz,s=[],o=[],a=[],l=[];let u=0,h=-1;for(;++h<t.length;){const k=[],R=[];let b=-1;for(t[h].length>u&&(u=t[h].length);++b<t[h].length;){const S=Vz(t[h][b]);if(n.alignDelimiters!==!1){const C=i(S);R[b]=C,(l[b]===void 0||C>l[b])&&(l[b]=C)}k.push(S)}o[h]=k,a[h]=R}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)s[f]=g0(r[f]);else{const k=g0(r);for(;++f<u;)s[f]=k}f=-1;const p=[],m=[];for(;++f<u;){const k=s[f];let R="",b="";k===99?(R=":",b=":"):k===108?R=":":k===114&&(b=":");let S=n.alignDelimiters===!1?1:Math.max(1,l[f]-R.length-b.length);const C=R+"-".repeat(S)+b;n.alignDelimiters!==!1&&(S=R.length+S+b.length,S>l[f]&&(l[f]=S),m[f]=S),p[f]=C}o.splice(1,0,p),a.splice(1,0,m),h=-1;const y=[];for(;++h<o.length;){const k=o[h],R=a[h];f=-1;const b=[];for(;++f<u;){const S=k[f]||"";let C="",O="";if(n.alignDelimiters!==!1){const V=l[f]-(R[f]||0),j=s[f];j===114?C=" ".repeat(V):j===99?V%2?(C=" ".repeat(V/2+.5),O=" ".repeat(V/2-.5)):(C=" ".repeat(V/2),O=C):O=" ".repeat(V)}n.delimiterStart!==!1&&!f&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&S==="")&&(n.delimiterStart!==!1||f)&&b.push(" "),n.alignDelimiters!==!1&&b.push(C),b.push(S),n.alignDelimiters!==!1&&b.push(O),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&b.push("|")}y.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return y.join(`
`)}function Vz(t){return t==null?"":String(t)}function g0(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Fz(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Uz);return i(),o}function Uz(t,e,n){return">"+(n?"":" ")+t}function zz(t,e){return y0(t,e.inConstruct,!0)&&!y0(t,e.notInConstruct,!1)}function y0(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function v0(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&zz(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Bz(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function $z(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Hz(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function qz(t,e,n,r){const i=Hz(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if($z(t,n)){const f=n.enter("codeIndented"),p=n.indentLines(s,Wz);return f(),p}const a=n.createTracker(r),l=i.repeat(Math.max(Bz(s,i)+1,3)),u=n.enter("codeFenced");let h=a.move(l);if(t.lang){const f=n.enter(`codeFencedLang${o}`);h+=a.move(n.safe(t.lang,{before:h,after:" ",encode:["`"],...a.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${o}`);h+=a.move(" "),h+=a.move(n.safe(t.meta,{before:h,after:`
`,encode:["`"],...a.current()})),f()}return h+=a.move(`
`),s&&(h+=a.move(s+`
`)),h+=a.move(l),u(),h}function Wz(t,e,n){return(n?"":"    ")+t}function nv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Kz(t,e,n,r){const i=nv(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function Gz(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function fu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Xd(t,e,n){const r=Ea(t),i=Ea(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}NI.peek=Qz;function NI(t,e,n,r){const i=Gz(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),h=Xd(r.before.charCodeAt(r.before.length-1),u,i);h.inside&&(l=fu(u)+l.slice(1));const f=l.charCodeAt(l.length-1),p=Xd(r.after.charCodeAt(0),f,i);p.inside&&(l=l.slice(0,-1)+fu(f));const m=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:h.outside},a+l+m}function Qz(t,e,n){return n.options.emphasis||"*"}function Yz(t,e){let n=!1;return ev(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Am}),!!((!t.depth||t.depth<3)&&Ky(t)&&(e.options.setext||n))}function Xz(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(Yz(t,n)){const h=n.enter("headingSetext"),f=n.enter("phrasing"),p=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return f(),h(),p+`
`+(i===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=fu(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}AI.peek=Jz;function AI(t){return t.value||""}function Jz(){return"<"}RI.peek=Zz;function RI(t,e,n,r){const i=nv(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function Zz(){return"!"}PI.peek=eB;function PI(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const u=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=h,s(),i==="full"||!u||u!==f?l+=a.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function eB(){return"!"}jI.peek=tB;function jI(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function tB(){return"`"}function DI(t,e){const n=Ky(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}LI.peek=nB;function LI(t,e,n,r){const i=nv(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(DI(t,n)){const h=n.stack;n.stack=[],a=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(t,{before:f,after:">",...o.current()})),f+=o.move(">"),a(),n.stack=h,f}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function nB(t,e,n){return DI(t,n)?"<":"["}OI.peek=rB;function OI(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=h,s(),i==="full"||!u||u!==f?l+=a.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function rB(){return"["}function rv(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function iB(t){const e=rv(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function sB(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function MI(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function oB(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?sB(n):rv(n);const a=t.ordered?o==="."?")":".":iB(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const h=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),MI(n)===o&&h){let f=-1;for(;++f<t.children.length;){const p=t.children[f];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function aB(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function lB(t,e,n,r){const i=aB(n);let s=n.bulletCurrent||rv(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),h);return l(),u;function h(f,p,m){return p?(m?"":" ".repeat(o))+f:(m?s:s+" ".repeat(o-s.length))+f}}function uB(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const cB=$h(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function dB(t,e,n,r){return(t.children.some(function(o){return cB(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function hB(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}VI.peek=fB;function VI(t,e,n,r){const i=hB(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),h=Xd(r.before.charCodeAt(r.before.length-1),u,i);h.inside&&(l=fu(u)+l.slice(1));const f=l.charCodeAt(l.length-1),p=Xd(r.after.charCodeAt(0),f,i);p.inside&&(l=l.slice(0,-1)+fu(f));const m=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:h.outside},a+l+m}function fB(t,e,n){return n.options.strong||"*"}function pB(t,e,n,r){return n.safe(t.value,r)}function mB(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function gB(t,e,n){const r=(MI(n)+(n.options.ruleSpaces?" ":"")).repeat(mB(n));return n.options.ruleSpaces?r.slice(0,-1):r}const FI={blockquote:Fz,break:v0,code:qz,definition:Kz,emphasis:NI,hardBreak:v0,heading:Xz,html:AI,image:RI,imageReference:PI,inlineCode:jI,link:LI,linkReference:OI,list:oB,listItem:lB,paragraph:uB,root:dB,strong:VI,text:pB,thematicBreak:gB};function yB(){return{enter:{table:vB,tableData:w0,tableHeader:w0,tableRow:_B},exit:{codeText:xB,table:wB,tableData:Zf,tableHeader:Zf,tableRow:Zf}}}function vB(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function wB(t){this.exit(t),this.data.inTable=void 0}function _B(t){this.enter({type:"tableRow",children:[]},t)}function Zf(t){this.exit(t)}function w0(t){this.enter({type:"tableCell",children:[]},t)}function xB(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,EB));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function EB(t,e){return e==="|"?e:t}function kB(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:o,tableCell:l,tableRow:a}};function o(m,y,k,R){return u(h(m,k,R),m.align)}function a(m,y,k,R){const b=f(m,k,R),S=u([b]);return S.slice(0,S.indexOf(`
`))}function l(m,y,k,R){const b=k.enter("tableCell"),S=k.enter("phrasing"),C=k.containerPhrasing(m,{...R,before:s,after:s});return S(),b(),C}function u(m,y){return Mz(m,{align:y,alignDelimiters:r,padding:n,stringLength:i})}function h(m,y,k){const R=m.children;let b=-1;const S=[],C=y.enter("table");for(;++b<R.length;)S[b]=f(R[b],y,k);return C(),S}function f(m,y,k){const R=m.children;let b=-1;const S=[],C=y.enter("tableRow");for(;++b<R.length;)S[b]=l(R[b],m,y,k);return C(),S}function p(m,y,k){let R=FI.inlineCode(m,y,k);return k.stack.includes("tableCell")&&(R=R.replace(/\|/g,"\\$&")),R}}function bB(){return{exit:{taskListCheckValueChecked:_0,taskListCheckValueUnchecked:_0,paragraph:TB}}}function SB(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:IB}}}function _0(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function TB(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function IB(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=FI.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(h){return h+o}}function CB(){return[oz(),Iz(),Rz(),yB(),bB()]}function NB(t){return{extensions:[az(),Cz(t),Pz(),kB(t),SB()]}}const AB={tokenize:OB,partial:!0},UI={tokenize:MB,partial:!0},zI={tokenize:VB,partial:!0},BI={tokenize:FB,partial:!0},RB={tokenize:UB,partial:!0},$I={name:"wwwAutolink",tokenize:DB,previous:qI},HI={name:"protocolAutolink",tokenize:LB,previous:WI},Ci={name:"emailAutolink",tokenize:jB,previous:KI},Yr={};function PB(){return{text:Yr}}let Ds=48;for(;Ds<123;)Yr[Ds]=Ci,Ds++,Ds===58?Ds=65:Ds===91&&(Ds=97);Yr[43]=Ci;Yr[45]=Ci;Yr[46]=Ci;Yr[95]=Ci;Yr[72]=[Ci,HI];Yr[104]=[Ci,HI];Yr[87]=[Ci,$I];Yr[119]=[Ci,$I];function jB(t,e,n){const r=this;let i,s;return o;function o(f){return!Dm(f)||!KI.call(r,r.previous)||iv(r.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(f))}function a(f){return Dm(f)?(t.consume(f),a):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(RB,h,u)(f):f===45||f===95||cn(f)?(s=!0,t.consume(f),l):h(f)}function u(f){return t.consume(f),i=!0,l}function h(f){return s&&i&&vn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function DB(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!qI.call(r,r.previous)||iv(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(AB,t.attempt(UI,t.attempt(zI,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function LB(t,e,n){const r=this;let i="",s=!1;return o;function o(f){return(f===72||f===104)&&WI.call(r,r.previous)&&!iv(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),t.consume(f),a):n(f)}function a(f){if(vn(f)&&i.length<5)return i+=String.fromCodePoint(f),t.consume(f),a;if(f===58){const p=i.toLowerCase();if(p==="http"||p==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),s?u:(s=!0,l)):n(f)}function u(f){return f===null||Gd(f)||et(f)||ho(f)||Uh(f)?n(f):t.attempt(UI,t.attempt(zI,h),n)(f)}function h(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function OB(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function MB(t,e,n){let r,i,s;return o;function o(u){return u===46||u===95?t.check(BI,l,a)(u):u===null||et(u)||ho(u)||u!==45&&Uh(u)?l(u):(s=!0,t.consume(u),o)}function a(u){return u===95?r=!0:(i=r,r=void 0),t.consume(u),o}function l(u){return i||r||!s?n(u):e(u)}}function VB(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(BI,e,s)(o):o===null||et(o)||ho(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function FB(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||et(a)||ho(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||et(a)||ho(a)?e(a):r(a)}function s(a){return vn(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):vn(a)?(t.consume(a),o):n(a)}}function UB(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return cn(s)?n(s):e(s)}}function qI(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||et(t)}function WI(t){return!vn(t)}function KI(t){return!(t===47||Dm(t))}function Dm(t){return t===43||t===45||t===46||t===95||cn(t)}function iv(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const zB={tokenize:QB,partial:!0};function BB(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:WB,continuation:{tokenize:KB},exit:GB}},text:{91:{name:"gfmFootnoteCall",tokenize:qB},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$B,resolveTo:HB}}}}function $B(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=kr(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function HB(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function qB(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(f){if(s>999||f===93&&!o||f===null||f===91||et(f))return n(f);if(f===93){t.exit("chunkString");const p=t.exit("gfmFootnoteCallString");return i.includes(kr(r.sliceSerialize(p)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return et(f)||(o=!0),s++,t.consume(f),f===92?h:u}function h(f){return f===91||f===92||f===93?(t.consume(f),s++,u):u(f)}}function WB(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(y){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(y){return y===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",h):n(y)}function h(y){if(o>999||y===93&&!a||y===null||y===91||et(y))return n(y);if(y===93){t.exit("chunkString");const k=t.exit("gfmFootnoteDefinitionLabelString");return s=kr(r.sliceSerialize(k)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),p}return et(y)||(a=!0),o++,t.consume(y),y===92?f:h}function f(y){return y===91||y===92||y===93?(t.consume(y),o++,h):h(y)}function p(y){return y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),i.includes(s)||i.push(s),$e(t,m,"gfmFootnoteDefinitionWhitespace")):n(y)}function m(y){return e(y)}}function KB(t,e,n){return t.check(Mu,e,t.attempt(zB,e,n))}function GB(t){t.exit("gfmFootnoteDefinition")}function QB(t,e,n){const r=this;return $e(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function YB(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},f={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},p=[["enter",h,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",f,a]],m=a.parser.constructs.insideSpan.null;m&&Kn(p,p.length,0,zh(m,o.slice(u+1,l),a)),Kn(p,p.length,0,[["exit",f,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",h,a]]),Kn(o,u-1,l-u+3,p),l=u+p.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,h=this.events;let f=0;return p;function p(y){return u===126&&h[h.length-1][1].type!=="characterEscape"?l(y):(o.enter("strikethroughSequenceTemporary"),m(y))}function m(y){const k=Ea(u);if(y===126)return f>1?l(y):(o.consume(y),f++,m);if(f<2&&!n)return l(y);const R=o.exit("strikethroughSequenceTemporary"),b=Ea(y);return R._open=!b||b===2&&!!k,R._close=!k||k===2&&!!b,a(y)}}}class XB{constructor(){this.map=[]}add(e,n,r){JB(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function JB(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function ZB(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function e9(){return{flow:{null:{name:"table",tokenize:t9,resolveAll:n9}}}}function t9(t,e,n){const r=this;let i=0,s=0,o;return a;function a(v){let T=r.events.length-1;for(;T>-1;){const G=r.events[T][1].type;if(G==="lineEnding"||G==="linePrefix")T--;else break}const I=T>-1?r.events[T][1].type:null,N=I==="tableHead"||I==="tableRow"?j:l;return N===j&&r.parser.lazy[r.now().line]?n(v):N(v)}function l(v){return t.enter("tableHead"),t.enter("tableRow"),u(v)}function u(v){return v===124||(o=!0,s+=1),h(v)}function h(v){return v===null?n(v):ve(v)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),m):n(v):Le(v)?$e(t,h,"whitespace")(v):(s+=1,o&&(o=!1,i+=1),v===124?(t.enter("tableCellDivider"),t.consume(v),t.exit("tableCellDivider"),o=!0,h):(t.enter("data"),f(v)))}function f(v){return v===null||v===124||et(v)?(t.exit("data"),h(v)):(t.consume(v),v===92?p:f)}function p(v){return v===92||v===124?(t.consume(v),f):f(v)}function m(v){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(v):(t.enter("tableDelimiterRow"),o=!1,Le(v)?$e(t,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):y(v))}function y(v){return v===45||v===58?R(v):v===124?(o=!0,t.enter("tableCellDivider"),t.consume(v),t.exit("tableCellDivider"),k):V(v)}function k(v){return Le(v)?$e(t,R,"whitespace")(v):R(v)}function R(v){return v===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(v),t.exit("tableDelimiterMarker"),b):v===45?(s+=1,b(v)):v===null||ve(v)?O(v):V(v)}function b(v){return v===45?(t.enter("tableDelimiterFiller"),S(v)):V(v)}function S(v){return v===45?(t.consume(v),S):v===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(v),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(v))}function C(v){return Le(v)?$e(t,O,"whitespace")(v):O(v)}function O(v){return v===124?y(v):v===null||ve(v)?!o||i!==s?V(v):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(v)):V(v)}function V(v){return n(v)}function j(v){return t.enter("tableRow"),x(v)}function x(v){return v===124?(t.enter("tableCellDivider"),t.consume(v),t.exit("tableCellDivider"),x):v===null||ve(v)?(t.exit("tableRow"),e(v)):Le(v)?$e(t,x,"whitespace")(v):(t.enter("data"),w(v))}function w(v){return v===null||v===124||et(v)?(t.exit("data"),x(v)):(t.consume(v),v===92?E:w)}function E(v){return v===92||v===124?(t.consume(v),w):w(v)}}function n9(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,h,f;const p=new XB;for(;++n<t.length;){const m=t[n],y=m[1];m[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(x0(p,e,l,u,h),h=void 0,l=0),u={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",u,e]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,h={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",h,e]])),i=y.type==="tableDelimiterRow"?2:h?3:1):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],f=Nc(p,e,s,i,void 0,f),s=[0,0,0,0]),o[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],f=Nc(p,e,s,i,void 0,f)),s=o,o=[s[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],f=Nc(p,e,s,i,n,f)):o[1]!==0&&(f=Nc(p,e,o,i,n,f)),i=0):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&x0(p,e,l,u,h),p.consume(e.events),n=-1;++n<e.events.length;){const m=e.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=ZB(e.events,n))}return t}function Nc(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Lo(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Lo(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Lo(e.events,n[2]),h=Lo(e.events,n[3]),f={type:a,start:Object.assign({},u),end:Object.assign({},h)};if(t.add(n[2],0,[["enter",f,e]]),r!==2){const p=e.events[n[2]],m=e.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,k=n[3]-n[2]-1;t.add(y,k,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return i!==void 0&&(s.end=Object.assign({},Lo(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function x0(t,e,n,r,i){const s=[],o=Lo(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Lo(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const r9={name:"tasklistCheck",tokenize:s9};function i9(){return{text:{91:r9}}}function s9(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return et(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return ve(l)?e(l):Le(l)?t.check({tokenize:o9},e,n)(l):n(l)}}function o9(t,e,n){return $e(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function a9(t){return rI([PB(),BB(),YB(t),e9(),i9()])}const l9={};function E0(t){const e=this,n=t||l9,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(a9(n)),s.push(CB()),o.push(NB(n))}let Ac=null,ep=0;const u9=5*60*1e3;async function c9(){const t=Date.now();if(Ac&&t-ep<u9)return Ac;try{const e=await Ee(xe(ne,"playerCharacters"));if(!e.empty){const o=e.docs.map(a=>a.data().name).filter(Boolean).sort((a,l)=>a.toLowerCase().localeCompare(l.toLowerCase()));return Ac=o,ep=t,o}const i=(await Ee(xe(ne,"characters"))).docs.filter(s=>s.data().isPlayerCharacter===!0).map(s=>s.data().name).filter(Boolean).sort((s,o)=>s.toLowerCase().localeCompare(o.toLowerCase()));return Ac=i,ep=t,i}catch(e){return console.error("Error fetching player character names:",e),[]}}async function d9(t){if(!t)return t;try{const e=await c9();if(!e.length)return t;const n=[...e].sort((i,s)=>s.length-i.length);let r=t;for(const i of n){const s=new RegExp(`\\b${h9(i)}\\b`,"g");r=r.replace(s,`**${i}**`)}return r}catch(e){return console.error("Error processing markdown with character names:",e),t}}function h9(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const k0={autoBoldCharacterNames:!0},b0="terraveil_settings";function GI(){const[t,e]=D.useState(k0),[n,r]=D.useState(!1);return D.useEffect(()=>{try{const s=localStorage.getItem(b0);s&&e({...k0,...JSON.parse(s)})}catch(s){console.error("Error loading settings:",s)}finally{r(!0)}},[]),{settings:t,loaded:n,updateSetting:(s,o)=>{e(a=>{const l={...a,[s]:o};return localStorage.setItem(b0,JSON.stringify(l)),l})}}}function Pn({children:t,autoBoldCharacters:e=!0}){const{settings:n}=GI(),[r,i]=D.useState(t),[s,o]=D.useState(!1),a=e&&n.autoBoldCharacterNames;return D.useEffect(()=>{async function l(){if(!t||!a){i(t);return}o(!0);try{const u=await d9(t);i(u)}catch(u){console.error("Error processing markdown content:",u),i(t)}finally{o(!1)}}l()},[t,a]),s?d.jsx(p0,{remarkPlugins:[E0],children:t}):d.jsx(p0,{remarkPlugins:[E0],children:r})}function f9(t){return Array.isArray(t)?t.map(e=>{if(typeof e=="string")return{text:e,done:!1};const n=e.text??e.title??"",r=!!(e.done??e.resolved);return n?{text:n,done:r}:null}).filter(Boolean):[]}function p9({data:t}){const e=t.tldrMarkdown??t.tldr??t.summary??"",n=t.contentMarkdown??t.detailsMarkdown??t.overviewMarkdown??t.content??"",r=t.quote??"",i=f9(t.openThreads);return d.jsxs("div",{className:"space-y-8",children:[r&&d.jsx("section",{children:d.jsx("p",{className:"italic text-lg",children:r})}),!!e&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"TL;DR"}),d.jsx(Pn,{children:e})]}),i.length>0&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Open Threads"}),d.jsx("ul",{className:"space-y-2",children:i.map((s,o)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("input",{type:"checkbox",className:"checkbox mt-1",checked:s.done,readOnly:!0}),d.jsx("span",{className:s.done?"opacity-70 line-through":"",children:s.text})]},o))})]}),!!n&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Session Notes"}),d.jsx(Pn,{children:n})]})]})}function m9({data:t}){const e=t.appearanceMarkdown??t.appearance??"",n=t.detailsMarkdown??t.notableDetails??"",r=t.firstAppearance;t.deceased;const i=t.quote??"";return d.jsxs("div",{className:"space-y-8",children:[i&&d.jsx("section",{children:d.jsx("p",{className:"italic text-lg",children:i})}),t.role&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Role"}),d.jsx("p",{children:t.role})]}),!!e&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Appearance"}),d.jsx(Pn,{children:e})]}),!!n&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notable Details"}),d.jsx(Pn,{children:n})]}),r&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"First Appearance"}),d.jsx(Je,{to:`/sessions/${r}`,className:"link",children:"View Session"})]})]})}function g9({data:t}){const e=t.summary??"",n=t.descriptionMarkdown??t.description??"",r=t.appearanceMarkdown??t.appearance??"",i=t.featuresMarkdown??t.notableFeatures??"",s=t.quote??"";return d.jsxs("div",{className:"space-y-8",children:[s&&d.jsx("section",{children:d.jsx("p",{className:"italic text-lg",children:s})}),!!e&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Summary"}),d.jsx("p",{children:e})]}),!!n&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Description"}),d.jsx(Pn,{children:n})]}),!!r&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Appearance"}),d.jsx(Pn,{children:r})]}),!!i&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notable Features"}),d.jsx(Pn,{children:i})]})]})}function y9({data:t}){const e=t.appearanceMarkdown??t.appearance??"",n=t.detailsMarkdown??t.notableDetails??"",r=t.encountersMarkdown??t.knownEncounters??"",i=t.firstAppearance;t.deceased;const s=t.quote??"";return d.jsxs("div",{className:"space-y-8",children:[s&&d.jsx("section",{children:d.jsx("p",{className:"italic text-lg",children:s})}),t.type&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Type"}),d.jsx("p",{children:t.type})]}),!!e&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Appearance"}),d.jsx(Pn,{children:e})]}),!!n&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notable Details"}),d.jsx(Pn,{children:n})]}),!!r&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Known Encounters"}),d.jsx(Pn,{children:r})]}),i&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"First Appearance"}),d.jsx(Je,{to:`/sessions/${i}`,className:"link",children:"View Session"})]})]})}function S0(t){if(!t||isNaN(parseInt(t)))return"0";const e=Math.floor((parseInt(t)-10)/2);return e>=0?`+${e}`:`${e}`}function v9({data:t}){const e=t.notesMarkdown??"",[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(""),[l,u]=D.useState(!1),[h,f]=D.useState(""),[p,m]=D.useState(""),[y,k]=D.useState([]),[R,b]=D.useState("");D.useEffect(()=>{if(t.id){const T=localStorage.getItem(`character_${t.id}_currentHP`),I=localStorage.getItem(`character_${t.id}_tempHP`);T?r(T):t.hp&&r(t.hp),I&&s(I);const N=localStorage.getItem(`character_${t.id}_inspiration`);u(N==="true");const G=localStorage.getItem(`character_${t.id}_gold`);G?f(G):t.gold&&f(t.gold);const z=localStorage.getItem(`character_${t.id}_statusEffects`);if(z)try{k(JSON.parse(z))}catch(K){console.error("Error parsing status effects",K),k([])}}},[t.id,t.hp]);const S=T=>{const I=T.target.value;r(I),t.id&&localStorage.setItem(`character_${t.id}_currentHP`,I)},C=T=>{const I=T.target.value;s(I),t.id&&localStorage.setItem(`character_${t.id}_tempHP`,I)},O=T=>{let I=i?parseInt(i):0,N=n?parseInt(n):0;if(T<0)I>0&&(Math.abs(T)<=I?(I+=T,T=0):(T+=I,I=0)),T<0&&(N=Math.max(0,N+T));else{const G=t.hp?parseInt(t.hp):0;N=Math.min(G,N+T)}r(N.toString()),s(I.toString()||""),t.id&&(localStorage.setItem(`character_${t.id}_currentHP`,N.toString()),localStorage.setItem(`character_${t.id}_tempHP`,I.toString()||""))},V=()=>{const T=!l;u(T),t.id&&localStorage.setItem(`character_${t.id}_inspiration`,T.toString())},j=T=>{const I=T.target.value;f(I),t.id&&localStorage.setItem(`character_${t.id}_gold`,I)},x=T=>{const N=((h?parseFloat(h):0)+T).toFixed(2);f(N),t.id&&localStorage.setItem(`character_${t.id}_gold`,N)},w=()=>{if(R.trim()!==""&&!y.includes(R.trim())){const T=[...y,R.trim()];k(T),b(""),t.id&&localStorage.setItem(`character_${t.id}_statusEffects`,JSON.stringify(T))}},E=T=>{const I=y.filter(N=>N!==T);k(I),t.id&&localStorage.setItem(`character_${t.id}_statusEffects`,JSON.stringify(I))},v=()=>{t.hp&&(r(t.hp),s(""),t.id&&(localStorage.setItem(`character_${t.id}_currentHP`,t.hp),localStorage.setItem(`character_${t.id}_tempHP`,"")))};return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"flex flex-wrap gap-x-4 sm:gap-x-6 gap-y-2 mb-4 sm:mb-6 p-2 sm:p-3 border-b border-base-300",children:[t.playerName&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"font-semibold mr-1",children:"Player:"})," ",t.playerName]}),t.characterClass&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"font-semibold mr-1",children:"Class:"})," ",t.characterClass]}),t.level&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"font-semibold mr-1",children:"Level:"})," ",t.level]}),t.race&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"font-semibold mr-1",children:"Race:"})," ",t.race]}),t.dndbeyondUrl&&d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"font-semibold mr-1",children:"D&D Beyond:"}),d.jsx("a",{href:t.dndbeyondUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 underline",children:"Character Sheet"})]})]}),d.jsxs("section",{className:"mb-6 pt-1 px-2 sm:px-4 pb-4 border border-base-300 rounded-lg bg-base-200",children:[d.jsx("div",{className:"border-b border-red-500 mb-3",children:d.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Character Tracking"})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 mb-3",children:[t.ac&&d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg text-center flex-1 min-w-[70px]",children:[d.jsx("div",{className:"text-sm font-semibold",children:"AC"}),d.jsx("div",{className:"text-xl",children:t.ac})]}),t.speed&&d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg text-center flex-1 min-w-[70px]",children:[d.jsx("div",{className:"text-sm font-semibold",children:"Speed"}),d.jsx("div",{className:"text-xl",children:t.speed})]}),t.proficiencyBonus&&d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg text-center flex-1 min-w-[70px]",children:[d.jsx("div",{className:"text-sm font-semibold",children:"Prof Bonus"}),d.jsx("div",{className:"text-xl",children:t.proficiencyBonus})]}),d.jsx("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg flex items-center justify-center flex-1 min-w-[100px]",children:d.jsxs("label",{className:"flex items-center gap-1 sm:gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:l,onChange:V,className:"checkbox checkbox-primary checkbox-sm sm:checkbox-md"}),d.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:"Inspiration"})]})})]}),t.hp&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg mb-3",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("span",{className:"font-semibold",children:"Hit Points"}),d.jsx("button",{onClick:v,className:"btn btn-xs btn-outline",title:"Reset to max HP",children:"Reset"})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("input",{type:"text",value:n,onChange:S,className:"input input-bordered input-sm w-16 text-center","aria-label":"Current HP"}),d.jsx("span",{className:"text-sm",children:"/"}),d.jsx("span",{children:t.hp})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[d.jsx("button",{onClick:()=>O(-1),className:"btn btn-xs sm:btn-sm btn-error",children:"-1"}),d.jsx("button",{onClick:()=>O(-5),className:"btn btn-xs sm:btn-sm btn-error",children:"-5"}),d.jsx("button",{onClick:()=>O(1),className:"btn btn-xs sm:btn-sm btn-success",children:"+1"}),d.jsx("button",{onClick:()=>O(5),className:"btn btn-xs sm:btn-sm btn-success",children:"+5"})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[d.jsx("input",{type:"number",value:o,onChange:T=>a(T.target.value),className:"input input-bordered input-sm w-16 text-center",placeholder:"#"}),d.jsxs("div",{className:"flex gap-2 flex-grow",children:[d.jsx("button",{onClick:()=>{o&&(O(-parseInt(o)),a(""))},className:"btn btn-xs sm:btn-sm btn-outline btn-error flex-1",disabled:!o,children:"Damage"}),d.jsx("button",{onClick:()=>{o&&(O(parseInt(o)),a(""))},className:"btn btn-xs sm:btn-sm btn-outline btn-success flex-1",disabled:!o,children:"Heal"})]})]})]}),d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg",children:[d.jsx("div",{className:"font-semibold mb-2",children:"Temporary HP"}),d.jsx("input",{type:"text",value:i,onChange:C,className:"input input-bordered input-sm w-16 text-center","aria-label":"Temporary HP",placeholder:"0"})]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg mb-3",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Gold"}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("input",{type:"text",value:h,onChange:j,className:"input input-bordered input-sm w-24 text-center",placeholder:"0"}),d.jsx("span",{children:"gp"})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[d.jsx("input",{type:"number",value:p,onChange:T=>m(T.target.value),className:"input input-bordered input-sm w-20 text-center",placeholder:"#"}),d.jsxs("div",{className:"flex gap-2 flex-grow",children:[d.jsx("button",{onClick:()=>{p&&(x(parseFloat(p)),m(""))},className:"btn btn-xs sm:btn-sm btn-outline btn-success flex-1",disabled:!p,children:"Add"}),d.jsx("button",{onClick:()=>{p&&(x(-parseFloat(p)),m(""))},className:"btn btn-xs sm:btn-sm btn-outline btn-error flex-1",disabled:!p,children:"Spend"})]})]})]}),d.jsxs("div",{className:"bg-base-300 p-2 sm:p-3 rounded-lg",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Status Effects"}),d.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-2",children:y.length>0?y.map((T,I)=>d.jsxs("div",{className:"badge badge-secondary gap-1",children:[T,d.jsx("button",{onClick:()=>E(T),className:"btn btn-ghost btn-xs",children:""})]},I)):d.jsx("span",{className:"text-sm italic",children:"No active effects"})}),d.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[d.jsx("input",{type:"text",value:R,onChange:T=>b(T.target.value),className:"input input-bordered input-sm w-full",placeholder:"Poisoned, Stunned, etc."}),d.jsx("button",{onClick:w,className:"btn btn-xs sm:btn-sm btn-outline",disabled:!R.trim(),children:"Add"})]})]})]})]})]}),t.abilityScores&&d.jsxs("section",{className:"mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Ability Scores"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-2 text-center",children:["str","dex","con","int","wis","cha"].map(T=>{var G;const I=(G=t.abilityScores)==null?void 0:G[T],N=S0(I);return d.jsxs("div",{className:"bg-base-200 p-2 rounded-lg",children:[d.jsx("div",{className:"uppercase font-bold text-sm",children:T}),d.jsx("div",{className:"text-md",children:I||"-"}),d.jsx("div",{className:"text-lg font-bold",children:N})]},T)})})]}),t.savingThrows&&d.jsxs("section",{className:"mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Saving Throws"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-2 text-center",children:["str","dex","con","int","wis","cha"].map(T=>{var ye,$;const I=(ye=t.savingThrows)==null?void 0:ye[T],N=I==null?void 0:I.proficient,G=(I==null?void 0:I.bonus)||"",z=($=t.abilityScores)==null?void 0:$[T],K=S0(z);let ce=K,W=0;if(N&&t.proficiencyBonus){const P=t.proficiencyBonus;if(P.startsWith("+")){const le=parseInt(P.substring(1));isNaN(le)||(W+=le)}}if(G){let P;G.startsWith("+")?P=parseInt(G.substring(1)):(G.startsWith("-"),P=parseInt(G)),isNaN(P)||(W+=P)}if(W!==0){const P=parseInt(K);if(!isNaN(P)){const le=P+W;ce=le>=0?`+${le}`:`${le}`}}const Z=[];K&&Z.push(`Base: ${K}`),N&&t.proficiencyBonus&&Z.push(`Prof: ${t.proficiencyBonus}`),G&&Z.push(`Bonus: ${G}`);const L=Z.join(" + ");return d.jsxs("div",{className:`bg-base-200 p-2 rounded-lg ${N?"border-2 border-primary":""}`,title:L,children:[d.jsx("div",{className:"uppercase font-bold text-sm",children:T}),d.jsx("div",{className:"text-lg font-bold",children:ce}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-1 text-xs",children:[N&&t.proficiencyBonus&&d.jsxs("span",{className:"badge badge-primary badge-sm",children:["Prof ",t.proficiencyBonus]}),G&&d.jsx("span",{className:"badge badge-secondary badge-sm",children:G.startsWith("+")?G:`+${G}`})]})]},T)})})]}),e&&e.trim()!==""&&d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notes"}),d.jsx(Pn,{children:e})]})]})}function w9({data:t}){const e=n=>{switch(n){case"open":return d.jsx("span",{className:"badge badge-lg badge-primary",children:"Open"});case"resolved":return d.jsx("span",{className:"badge badge-lg badge-success",children:"Resolved"});case"abandoned":return d.jsx("span",{className:"badge badge-lg badge-warning",children:"Abandoned"});default:return null}};return d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Status:"}),e(t.status)]}),t.description&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Description"}),d.jsx("p",{className:"whitespace-pre-wrap",children:t.description})]}),t.events&&t.events.length>0&&d.jsxs("div",{className:"mt-8",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Timeline"}),d.jsx("ul",{className:"timeline timeline-vertical",children:t.events.map((n,r)=>d.jsxs("li",{children:[d.jsx("div",{className:"timeline-start",children:new Date(n.date).toLocaleDateString()}),d.jsx("div",{className:"timeline-middle",children:d.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),d.jsx("div",{className:"timeline-end timeline-box bg-base-200",children:d.jsx("p",{children:n.content})}),r<t.events.length-1&&d.jsx("hr",{})]},n.id))})]})]})}function ul({collection:t}){const{slug:e}=Ti(),[n,r]=D.useState(null),{isAdmin:i}=Lu(),[s,o]=D.useState(null),[a,l]=D.useState({locations:[],npcs:[],monsters:[],sessions:[],characters:[],threads:[]}),[u,h]=D.useState(null);if(D.useEffect(()=>{!t||!e||(async()=>{try{const p=xe(ne,t),m=Gt(p,vr("slug","==",e)),y=await Ee(m);let k=null,R=null;if(y.empty){const w=await xt(De(ne,t,e));if(!w.exists()){h("Not found.");return}R=w.id;const E=w.data();k={id:w.id,...E}}else{const w=y.docs[0];R=w.id;const E=w.data();k={id:w.id,...E}}r(R),o(k);async function b(w,E){const v=E??[];if(!v.length)return[];const T=[];for(const I of v){try{const N=await xt(De(ne,w,I));if(N.exists()){const G=N.data();T.push({id:I,slug:G.slug||I,label:G.title||G.name||I});continue}}catch{}T.push({id:I,slug:I,label:I})}return T}const[S,C,O,V,j,x]=await Promise.all([b("locations",k.linkedLocations),b("npcs",k.linkedNpcs),b("monsters",k.linkedMonsters),b("sessions",k.linkedSessions),b("characters",k.linkedCharacters),b("threads",k.linkedThreads)]);l({locations:S,npcs:C,monsters:O,sessions:V,characters:j,threads:x})}catch(p){console.error(p),h((p==null?void 0:p.message)||"Failed to load.")}})()},[t,e]),u)return d.jsx("div",{className:"p-6",children:u});if(!s)return d.jsx("div",{className:"p-6",children:"Loading"});const f=s.title||s.name||s.id;return d.jsxs("div",{className:"container mx-auto px-4 py-6 prose prose-invert max-w-3xl",children:[d.jsxs("div",{className:"not-prose flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold",children:f}),d.jsxs("div",{className:"flex items-center gap-3",children:[(t==="npcs"||t==="monsters")&&s.deceased&&d.jsx("span",{className:"text-error text-xl font-semibold",children:"DECEASED"}),i&&d.jsx(Je,{to:`/admin/${t}/${n}/edit`,className:"btn btn-sm btn-outline",children:"Edit"})]})]}),s.date&&d.jsx("p",{className:"opacity-70",children:new Date(s.date).toLocaleDateString()}),s.imageUrl&&d.jsx("img",{src:s.imageUrl,alt:f,className:"rounded border border-base-300 my-4"}),t==="sessions"?d.jsx(p9,{data:s}):t==="npcs"?d.jsx(m9,{data:s}):t==="locations"?d.jsx(g9,{data:s}):t==="monsters"?d.jsx(y9,{data:s}):t==="characters"?d.jsx(v9,{data:s}):t==="threads"?d.jsx(w9,{data:s}):d.jsx(Pn,{children:s.contentMarkdown||s.detailsMarkdown||s.overviewMarkdown||""}),(a.locations.length||a.npcs.length||a.monsters.length||a.sessions.length||a.characters.length||a.threads.length)&&d.jsxs("div",{className:"not-prose mt-10 border-t border-base-300 pt-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Links"}),a.locations.length>0&&d.jsx(Ro,{title:"Locations",base:"/locations",items:a.locations}),a.npcs.length>0&&d.jsx(Ro,{title:"NPCs",base:"/npcs",items:a.npcs}),a.monsters.length>0&&d.jsx(Ro,{title:"Monsters",base:"/monsters",items:a.monsters}),a.sessions.length>0&&d.jsx(Ro,{title:"Related Sessions",base:"/sessions",items:a.sessions}),a.characters.length>0&&d.jsx(Ro,{title:"Characters",base:"/characters",items:a.characters}),a.threads.length>0&&d.jsx(Ro,{title:"Threads",base:"/threads",items:a.threads})]})]})}function Ro({title:t,base:e,items:n}){return d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-medium mb-2",children:t}),d.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.map(r=>d.jsx("li",{children:d.jsx(Je,{className:"link",to:`${e}/${r.slug||r.id}`,children:r.label})},r.id))})]})}function _9(){const[t,e]=D.useState(600);return D.useEffect(()=>{const r=()=>{const i=window.innerWidth;i<768?e(500):i<1024?e(550):e(600)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs("div",{className:"prose prose-invert max-w-none",children:[d.jsx("h1",{className:"text-2xl font-bold mb-2 text-terraveil-line",children:"Campaign Calendar"}),d.jsx("div",{className:"tv-divider w-full"}),d.jsx("p",{className:"mb-4 text-terraveil-mute",children:"View and keep track of upcoming game sessions and events."})]}),d.jsx("div",{className:"calendar-container w-full overflow-hidden rounded-lg border border-terraveil-line/30 shadow-lg bg-terraveil-card p-3",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-terraveil-line opacity-80"}),d.jsx("iframe",{src:"https://calendar.google.com/calendar/embed?src=97084ad1a7c1976fc22d25a18cfebc591f5ea24e12737b6cbbead55805ee5822%40group.calendar.google.com&ctz=Europe%2FLondon&bgcolor=%2312151b&color=%23c23c3c&showTitle=0&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0&showTz=0",style:{border:0},width:"100%",height:t,frameBorder:"0",scrolling:"no",title:"Terraveil Campaign Calendar",className:"bg-terraveil-bg"}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-terraveil-line opacity-80"})]})}),d.jsxs("div",{className:"mt-6 text-sm text-terraveil-mute border-l-2 border-terraveil-line/50 pl-4 py-2",children:[d.jsx("p",{children:"This calendar shows all scheduled game sessions and important campaign events."}),d.jsx("p",{className:"mt-2",children:"Click on any event for more details."})]})]})}function x9(t,e){const r=[t.name,t.title,t.description,t.role,t.summary,t.appearanceMarkdown,t.detailsMarkdown,t.contentMarkdown,t.overviewMarkdown].filter(o=>o!=null).join(" ").toLowerCase(),i=e.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(i)}function E9(){const[t]=cb(),e=t.get("q")||"",[n,r]=D.useState([]),[i,s]=D.useState(!0);return D.useEffect(()=>{async function o(){if(!e){r([]),s(!1);return}s(!0);const a=[],l=["sessions","npcs","monsters","locations"],u=e.trim();try{for(const h of l){const f=Gt(xe(ne,h),eM(100));(await Ee(f)).forEach(m=>{const y=m.data();x9(y,u)&&a.push({id:m.id,name:y.name||y.title||"Unnamed",description:y.description||y.summary||y.role||"",type:h,path:`/${h}/${m.id}`})})}r(a)}catch(h){console.error("Search error:",h),r(a)}finally{s(!1)}}o()},[e]),d.jsxs("div",{className:"container mx-auto p-4",children:[d.jsxs("h1",{className:"text-2xl font-bold mb-4",children:['Search Results for "',e,'"']}),i?d.jsx("div",{className:"flex justify-center",children:d.jsx("span",{className:"loading loading-spinner loading-lg"})}):n.length===0?d.jsxs("div",{className:"alert",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info shrink-0 w-6 h-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("span",{children:['No results found for "',e,'"']})]}):d.jsx("div",{className:"space-y-4",children:n.map(o=>d.jsx("div",{className:"card bg-base-200 shadow-sm",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h2",{className:"card-title",children:o.name}),o.description&&d.jsx("p",{className:"text-sm opacity-70",children:o.description.length>150?`${o.description.substring(0,150)}...`:o.description}),d.jsxs("div",{className:"card-actions justify-between items-center mt-2",children:[d.jsx("span",{className:"badge badge-outline capitalize",children:o.type}),d.jsx(Je,{to:o.path,className:"btn btn-primary btn-sm",children:"View"})]})]})},`${o.type}-${o.id}`))})]})}function k9(){var i,s;const[t,e]=D.useState(null),[n,r]=D.useState(!1);return D.useEffect(()=>Ii(Er,async o=>{var a;if(e(o),o){const l=await xt(De(ne,"roles",o.uid));r(l.exists()&&((a=l.data())==null?void 0:a.admin)===!0)}else r(!1)}),[]),t?d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"avatar placeholder",children:d.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-10",children:d.jsx("span",{children:n?"A":(s=(i=t.email)==null?void 0:i[0])==null?void 0:s.toUpperCase()})})}),d.jsx("div",{className:"grow",children:d.jsx("div",{className:"font-medium",children:n?"Admin":"Viewer"})}),d.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>$j(Er),children:"Sign out"})]}),n?d.jsx(d.Fragment,{children:d.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title capitalize",children:"Characters"}),d.jsx("p",{className:"text-sm mb-2",children:"Player Character Sheets for quick reference."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/characters/new",children:"New"}),d.jsx(Je,{className:"btn btn-sm",to:"/characters",children:"View"})]})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title capitalize",children:"Locations"}),d.jsx("p",{className:"text-sm mb-2",children:"Places visited or heard about in Terraveil."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/locations/new",children:"New"}),d.jsx(Je,{className:"btn btn-sm",to:"/locations",children:"View"})]})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title capitalize",children:"Monsters"}),d.jsx("p",{className:"text-sm mb-2",children:"Monsters encountered throughout the world."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/monsters/new",children:"New"}),d.jsx(Je,{className:"btn btn-sm",to:"/monsters",children:"View"})]})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title capitalize",children:"NPCs"}),d.jsx("p",{className:"text-sm mb-2",children:"Characters met throughout the world."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/npcs/new",children:"New"}),d.jsx(Je,{className:"btn btn-sm",to:"/npcs",children:"View"})]})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title",children:"Player Characters"}),d.jsx("p",{className:"text-sm mb-2",children:"Manage player character names that will be automatically bolded in session notes."}),d.jsx("div",{className:"flex gap-2",children:d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/player-characters",children:"Manage Player Characters"})})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title capitalize",children:"Sessions"}),d.jsx("p",{className:"text-sm mb-2",children:"Journal of each session played."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/sessions/new",children:"New"}),d.jsx(Je,{className:"btn btn-sm",to:"/sessions",children:"View"})]})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title capitalize",children:"Threads"}),d.jsx("p",{className:"text-sm mb-2",children:"Story threads and plot lines across sessions."}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/threads/new",children:"New"}),d.jsx(Je,{className:"btn btn-sm",to:"/threads",children:"View"})]})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title",children:"Session Notes"}),d.jsx("p",{className:"text-sm mb-2",children:"Take notes during sessions to turn into full session journal."}),d.jsx("div",{className:"flex gap-2",children:d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/session-notes",children:"Create Notes"})})]})}),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body",children:[d.jsx("h3",{className:"card-title",children:"Settings"}),d.jsx("p",{className:"text-sm mb-2",children:"Configure application settings and preferences."}),d.jsx("div",{className:"flex gap-2",children:d.jsx(Je,{className:"btn btn-primary btn-sm",to:"/admin/settings",children:"Settings"})})]})})]})}):d.jsx("div",{className:"alert alert-warning",children:"You're signed in but not an admin."})]}):d.jsx("div",{className:"p-6",children:d.jsx("button",{className:"btn btn-primary",onClick:()=>uD(Er,yV),children:"Sign in with Google"})})}function b9(){const{isAdmin:t}=Lu(),e=t===!0,[n,r]=D.useState([]),[i,s]=D.useState(!0),[o,a]=D.useState("all");D.useEffect(()=>{let u=!1;return(async()=>{s(!0);const h=xe(ne,"threads");try{let f;e?f=Gt(h,yr("updatedAt","desc")):f=Gt(h,vr("published","==",!0),yr("updatedAt","desc"));let m=(await Ee(f)).docs.map(y=>({id:y.id,...y.data()}));o!=="all"&&(m=m.filter(y=>y.status===o)),u||(r(m),s(!1))}catch(f){console.error("Thread list fetch error:",f),u||(r([]),s(!1))}})(),()=>{u=!0}},[e,o]);const l=u=>{switch(u){case"open":return d.jsx("span",{className:"badge badge-primary",children:"Open"});case"resolved":return d.jsx("span",{className:"badge badge-success",children:"Resolved"});case"abandoned":return d.jsx("span",{className:"badge badge-warning",children:"Abandoned"});default:return null}};return d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Threads"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx("div",{className:"form-control",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("label",{className:"label-text text-sm whitespace-nowrap",children:"Status:"}),d.jsxs("select",{className:"select select-bordered select-sm",value:o,onChange:u=>a(u.target.value),children:[d.jsx("option",{value:"all",children:"All Threads"}),d.jsx("option",{value:"open",children:"Open"}),d.jsx("option",{value:"resolved",children:"Resolved"}),d.jsx("option",{value:"abandoned",children:"Abandoned"})]})]})})})]}),i?d.jsx("div",{children:"Loading"}):n.length===0?d.jsx("div",{children:o!=="all"?d.jsxs("div",{children:["No ",o," threads found."]}):d.jsx("div",{children:"No threads found."})}):d.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(u=>d.jsx(Je,{to:`/threads/${u.slug||u.id}`,className:"card bg-base-200 hover:bg-base-300 transition-colors cursor-pointer",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h3",{className:"card-title",children:u.title}),l(u.status)]}),u.description&&d.jsx("p",{className:"opacity-80 line-clamp-2",children:u.description}),d.jsx("div",{className:"text-sm mt-2 text-primary",children:"View thread "})]})},u.id))})]})}function S9(){const{slug:t}=Ti(),[e,n]=D.useState(null),{isAdmin:r}=Lu(),[i,s]=D.useState(null),[o,a]=D.useState({locations:[],npcs:[],sessions:[],monsters:[]}),[l,u]=D.useState(null);if(D.useEffect(()=>{t&&(async()=>{try{const f=xe(ne,"threads"),p=Gt(f,vr("slug","==",t)),m=await Ee(p);let y=null,k=null;if(m.empty){const V=await xt(De(ne,"threads",t));if(!V.exists()){u("Thread not found.");return}k=V.id;const j=V.data();y={id:V.id,...j}}else{const V=m.docs[0];k=V.id;const j=V.data();y={id:V.id,...j}}n(k),s(y);async function R(V,j){const x=j??[];if(!x.length)return[];const w=[];for(const E of x){try{const v=await xt(De(ne,V,E));if(v.exists()){const T=v.data();w.push({id:E,slug:T.slug||E,label:T.title||T.name||E});continue}}catch{}w.push({id:E,slug:E,label:E})}return w}const[b,S,C,O]=await Promise.all([R("locations",y.linkedLocations),R("npcs",y.linkedNpcs),R("sessions",y.linkedSessions),R("monsters",y.linkedMonsters)]);a({locations:b,npcs:S,sessions:C,monsters:O})}catch(f){console.error(f),u((f==null?void 0:f.message)||"Failed to load thread.")}})()},[t]),l)return d.jsx("div",{className:"p-6",children:l});if(!i)return d.jsx("div",{className:"p-6",children:"Loading"});const h=f=>{switch(f){case"open":return d.jsx("span",{className:"badge badge-lg badge-primary",children:"Open"});case"resolved":return d.jsx("span",{className:"badge badge-lg badge-success",children:"Resolved"});case"abandoned":return d.jsx("span",{className:"badge badge-lg badge-warning",children:"Abandoned"});default:return null}};return d.jsxs("div",{className:"container mx-auto px-4 py-6 prose prose-invert max-w-3xl",children:[d.jsxs("div",{className:"not-prose flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold",children:i.title}),d.jsxs("div",{className:"flex items-center gap-3",children:[h(i.status),r&&d.jsx(Je,{to:`/admin/threads/${e}/edit`,className:"btn btn-sm btn-outline",children:"Edit"})]})]}),d.jsx("div",{className:"my-4",children:d.jsx(Pn,{children:i.description})}),i.events&&i.events.length>0&&d.jsxs("div",{className:"mt-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Timeline"}),d.jsx("div",{className:"w-full space-y-4",children:[...i.events].sort((f,p)=>new Date(f.date).getTime()-new Date(p.date).getTime()).map((f,p)=>{const m=f.sessionId?o.sessions.find(k=>k.id===f.sessionId):null,y=new Date(f.date).toLocaleDateString();return d.jsxs("div",{className:"relative",children:[p>0&&d.jsx("div",{className:"absolute left-4 -top-4 w-0.5 h-4 bg-primary"}),d.jsxs("div",{className:"card w-full bg-base-200 shadow-sm",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-base-300 border-2 border-primary flex items-center justify-center mr-2",children:d.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})}),d.jsxs("div",{className:"card-title text-lg py-2",children:[d.jsx("div",{className:"badge badge-primary badge-outline p-3 font-medium",children:y}),m&&d.jsx("div",{className:"badge badge-secondary p-3 ml-2",children:m.label})]})]}),d.jsxs("div",{className:"card-body pt-2",children:[d.jsx("div",{className:"prose prose-invert max-w-none",children:d.jsx(Pn,{autoBoldCharacters:!0,children:f.content})}),f.sessionId&&m&&d.jsx("div",{className:"card-actions justify-end mt-2",children:d.jsxs(Je,{to:`/sessions/${m.slug||f.sessionId}`,className:"btn btn-sm btn-outline btn-accent inline-flex items-center gap-1",children:[d.jsx("span",{children:"View in session"}),d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]}),p<i.events.length-1&&d.jsx("div",{className:"absolute left-4 bottom-0 w-0.5 h-4 bg-primary"})]},f.id)})})]}),(o.locations.length||o.npcs.length||o.sessions.length||o.monsters.length)&&d.jsxs("div",{className:"not-prose mt-10 border-t border-base-300 pt-6",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Related Content"}),o.sessions.length>0&&d.jsx(Rc,{title:"Sessions",base:"/sessions",items:o.sessions}),o.npcs.length>0&&d.jsx(Rc,{title:"NPCs",base:"/npcs",items:o.npcs}),o.locations.length>0&&d.jsx(Rc,{title:"Locations",base:"/locations",items:o.locations}),o.monsters.length>0&&d.jsx(Rc,{title:"Monsters",base:"/monsters",items:o.monsters})]})]})}function Rc({title:t,base:e,items:n}){return d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-medium mb-2",children:t}),d.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.map(r=>d.jsx("li",{children:d.jsx(Je,{className:"link",to:`${e}/${r.slug||r.id}`,children:r.label})},r.id))})]})}let Pc;const T9=new Uint8Array(16);function I9(){if(!Pc&&(Pc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pc(T9)}const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function C9(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}const N9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T0={randomUUID:N9};function ja(t,e,n){if(T0.randomUUID&&!t)return T0.randomUUID();t=t||{};const r=t.random||(t.rng||I9)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,C9(r)}function ke({title:t,children:e,defaultOpen:n=!1,storageKey:r}){const i=r||`collapsible:${t}`,[s,o]=D.useState(!1);return D.useEffect(()=>{try{const a=localStorage.getItem(i);a!==null?o(a==="1"):localStorage.setItem(i,"0")}catch{}},[i]),D.useEffect(()=>{try{localStorage.setItem(i,s?"1":"0")}catch{}},[i,s]),d.jsxs("div",{className:"collapse collapse-arrow bg-base-200 border border-base-300",children:[d.jsx("input",{type:"checkbox",checked:s,onChange:()=>o(!s)}),d.jsx("div",{className:"collapse-title text-lg font-semibold",children:t}),d.jsx("div",{className:"collapse-content pt-3",children:e})]})}function A9({col:t,title:e,slug:n,date:r,summary:i,quote:s,onChange:o}){return d.jsxs("div",{className:"grid gap-3",children:[d.jsx("input",{className:"input input-bordered",placeholder:"Title or Name",value:e,onChange:a=>o({title:a.target.value})}),d.jsx("input",{className:"input input-bordered",placeholder:"Slug (optional)",value:n,onChange:a=>o({slug:a.target.value})}),t==="sessions"&&d.jsx("input",{type:"date",className:"input input-bordered",value:r||new Date().toISOString().slice(0,10),onChange:a=>o({date:a.target.value})}),d.jsx("input",{className:"input input-bordered",placeholder:"Summary (optional)",value:i||"",onChange:a=>o({summary:a.target.value})}),d.jsx("input",{className:"input input-bordered",placeholder:"Quote (displayed in italics below title)",value:s||"",onChange:a=>o({quote:a.target.value})})]})}function Lm({onInsert:t}){const[e,n]=D.useState([]),[r,i]=D.useState(!0),[s,o]=D.useState(!1),[a,l]=D.useState("");D.useEffect(()=>{u()},[]);async function u(){i(!0);try{const p=await Ee(xe(ne,"playerCharacters"));if(p.empty)n([]);else{const y=p.docs.map(k=>({id:k.id,...k.data()})).sort((k,R)=>k.name.toLowerCase().localeCompare(R.name.toLowerCase()));n(y)}}catch(p){console.error("Error loading player characters:",p)}finally{i(!1)}}const h=p=>{t&&t(p.name)},f=a?e.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.playerName&&p.playerName.toLowerCase().includes(a.toLowerCase())):e;return d.jsxs("div",{className:"player-character-reference border border-base-300 rounded-lg shadow-sm",children:[d.jsxs("div",{className:"bg-base-200 p-2 rounded-t-lg flex justify-between items-center cursor-pointer",onClick:()=>o(!s),children:[d.jsxs("h3",{className:"text-sm font-bold flex items-center gap-1",children:[d.jsx("span",{children:s?"":""}),d.jsx("span",{children:"Quick Reference: Player Characters"}),d.jsx("span",{className:"badge badge-sm",children:e.length})]}),d.jsx("div",{className:"flex items-center gap-1",children:d.jsx("button",{className:"btn btn-xs btn-ghost tooltip tooltip-left","data-tip":"Refresh list",onClick:p=>{p.stopPropagation(),u()},children:""})})]}),s&&d.jsxs("div",{className:"bg-base-100 rounded-b-lg p-2 max-h-60 overflow-y-auto",children:[d.jsx("div",{className:"mb-2",children:d.jsx("input",{type:"text",className:"input input-bordered input-sm w-full",placeholder:"Search characters...",value:a,onChange:p=>l(p.target.value),onClick:p=>p.stopPropagation()})}),r?d.jsx("div",{className:"text-center py-2 text-sm",children:"Loading..."}):e.length===0?d.jsx("div",{className:"text-center py-2 text-sm italic",children:"No player characters found"}):f.length===0?d.jsx("div",{className:"text-center py-2 text-sm italic",children:"No matches found"}):d.jsx("div",{className:"grid gap-1",children:f.map(p=>d.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-base-200 rounded cursor-pointer transition-colors",onClick:()=>h(p),title:`Click to insert "${p.name}" at cursor position`,children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium",children:p.name}),p.playerName&&d.jsxs("span",{className:"text-xs opacity-70",children:["Player: ",p.playerName]})]}),d.jsx("div",{className:"tooltip tooltip-left","data-tip":"Click to insert",children:d.jsx("button",{className:"btn btn-xs btn-ghost",children:"Insert"})})]},p.id))}),d.jsx("div",{className:"text-xs text-center mt-2 opacity-70",children:"Click on a character name to insert it at cursor position"})]})]})}function br({value:t,onChange:e,placeholder:n="Markdown content"}){const r=D.useRef(null),i=s=>{if(!r.current)return;const o=r.current,a=o.selectionStart,l=o.selectionEnd,u=t.substring(0,a)+s+t.substring(l);e(u),setTimeout(()=>{o.focus(),o.selectionStart=a+s.length,o.selectionEnd=a+s.length},0)};return d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("textarea",{ref:r,className:"textarea textarea-bordered h-64 w-full",placeholder:n,value:t,onChange:s=>e(s.target.value)}),d.jsx(Lm,{onInsert:i})]})}function Fu({published:t,onChange:e}){return d.jsxs("label",{className:"label cursor-pointer w-fit gap-3",children:[d.jsx("span",{className:"label-text",children:"Published"}),d.jsx("input",{type:"checkbox",className:"toggle",checked:t,onChange:n=>e(n.target.checked)})]})}function Uu({onFile:t,currentUrl:e}){const[n,r]=D.useState(e??null);return D.useEffect(()=>{r(e??null)},[e]),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:i=>{var o;const s=((o=i.target.files)==null?void 0:o[0])||null;t(s),s&&r(URL.createObjectURL(s))}}),n&&d.jsx("img",{src:n,alt:"preview",className:"h-16 rounded border border-base-300"})]})}function dt({title:t,options:e,selected:n,onChange:r,loading:i,createHref:s,onRefresh:o}){const[a,l]=D.useState(""),u=D.useMemo(()=>{const p=a.trim().toLowerCase();return(p?e.filter(y=>y.label.toLowerCase().includes(p)||y.id.toLowerCase().includes(p)):[...e]).sort((y,k)=>{if(y.label.startsWith("Session-")&&k.label.startsWith("Session-")){const R=parseInt(y.label.replace("Session-",""),10)||0,b=parseInt(k.label.replace("Session-",""),10)||0;return R-b}return y.label.localeCompare(k.label)})},[a,e]);function h(p){n.includes(p)?r(n.filter(m=>m!==p)):r([...n,p])}function f(){r([])}return d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"card-title",children:t}),s&&d.jsx("a",{className:"btn btn-xs btn-outline",href:s,target:"_blank",rel:"noreferrer",title:"Add new in a new tab",children:"+ New"}),o&&d.jsx("button",{className:"btn btn-xs",type:"button",onClick:o,title:"Refresh list",children:"Refresh"}),d.jsx("button",{className:"btn btn-xs btn-ghost",onClick:f,type:"button",children:"Clear"})]}),n.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(p=>{var m;return{id:p,label:((m=e.find(y=>y.id===p))==null?void 0:m.label)||p}}).sort((p,m)=>{if(p.label.startsWith("Session-")&&m.label.startsWith("Session-")){const y=parseInt(p.label.replace("Session-",""),10)||0,k=parseInt(m.label.replace("Session-",""),10)||0;return y-k}return p.label.localeCompare(m.label)}).map(({id:p,label:m})=>d.jsxs("span",{className:"badge badge-neutral gap-1",children:[m,d.jsx("button",{type:"button",className:"btn btn-ghost btn-xs",onClick:()=>h(p),"aria-label":`Remove ${m}`,children:""})]},p))}),d.jsx("input",{className:"input input-bordered",placeholder:`Search ${t.toLowerCase()}`,value:a,onChange:p=>l(p.target.value)}),d.jsx("div",{className:"max-h-64 overflow-auto rounded border border-base-300",children:i?d.jsx("div",{className:"p-4 opacity-70",children:"Loading"}):u.length===0?d.jsx("div",{className:"p-4 opacity-70",children:"No results."}):d.jsx("ul",{children:u.map(p=>{const m=n.includes(p.id);return d.jsxs("li",{className:"flex items-center gap-3 px-3 py-2 hover:bg-base-300",children:[d.jsx("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:m,onChange:()=>h(p.id)}),d.jsx("div",{className:"truncate",children:d.jsx("div",{className:"font-medium",children:p.label})})]},p.id)})})})]})})}function R9({loading:t,locations:e,npcs:n,monsters:r,sessions:i,value:s,onChange:o,onRefresh:a}){return d.jsxs("div",{className:"grid gap-4",children:[d.jsx(ke,{title:"Linked Locations",storageKey:"rel-locations",defaultOpen:!0,children:d.jsx(dt,{title:"",options:e,selected:s.linkedLocations,onChange:l=>o({linkedLocations:l}),loading:t,createHref:"/admin/locations/new",onRefresh:a})}),d.jsx(ke,{title:"Linked NPCs",storageKey:"rel-npcs",defaultOpen:!0,children:d.jsx(dt,{title:"",options:n,selected:s.linkedNpcs,onChange:l=>o({linkedNpcs:l}),loading:t,createHref:"/admin/npcs/new",onRefresh:a})}),d.jsx(ke,{title:"Linked Monsters",storageKey:"rel-monsters",children:d.jsx(dt,{title:"",options:r,selected:s.linkedMonsters,onChange:l=>o({linkedMonsters:l}),loading:t,createHref:"/admin/monsters/new",onRefresh:a})}),d.jsx(ke,{title:"Related Sessions",storageKey:"rel-sessions",children:d.jsx(dt,{title:"",options:i,selected:s.linkedSessions,onChange:l=>o({linkedSessions:l}),loading:t,createHref:"/admin/sessions/new",onRefresh:a})})]})}function P9({value:t,onChange:e,placeholder:n="Write a longer summary of the session..."}){return d.jsxs("div",{className:"grid gap-2",children:[d.jsx("label",{className:"text-sm opacity-80",children:"TL;DR (longer summary)"}),d.jsx("textarea",{className:"textarea textarea-bordered h-40 w-full",placeholder:n,value:t,onChange:r=>e(r.target.value)})]})}function j9({value:t,onChange:e}){const[n,r]=D.useState(!0),[i,s]=D.useState([]);async function o(){r(!0);try{const a=xe(ne,"threads"),u=(await Ee(a)).docs.map(h=>{const f=h.data();return{id:h.id,label:`${f.title} (${f.status.charAt(0).toUpperCase()+f.status.slice(1)})`}});u.sort((h,f)=>{const p=h.label.includes("(Open)")?0:h.label.includes("(Resolved)")?1:2,m=f.label.includes("(Open)")?0:f.label.includes("(Resolved)")?1:2;return p===m?h.label.localeCompare(f.label):p-m}),s(u)}catch(a){console.error("Error loading threads:",a)}finally{r(!1)}}return D.useEffect(()=>{o()},[]),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body gap-3",children:[d.jsx("h3",{className:"card-title",children:"Thread Connections"}),d.jsx(dt,{title:"Threads",options:i,selected:t,onChange:e,loading:n,createHref:"/admin/threads/new",onRefresh:o}),d.jsx("div",{className:"text-sm opacity-70 mt-2",children:"Connect this session to existing threads or create new ones."})]})})}function I0({mode:t}){const{id:e}=Ti(),[n]=cb(),r=n.get("noteId"),i="sessions",s=Gr(),[o,a]=D.useState(null);D.useEffect(()=>Ii(Er,async v=>{var I;if(!v)return a(!1);const T=await xt(De(ne,"roles",v.uid));a(T.exists()&&((I=T.data())==null?void 0:I.admin)===!0)}),[]);const l=ks(),[u,h]=D.useState({title:"",slug:"",date:"",summary:"",quote:"",tldr:"",contentMarkdown:"",published:!0,imageUrl:null,linkedLocations:[],linkedNpcs:[],linkedMonsters:[],linkedSessions:[],linkedThreads:[]}),[f,p]=D.useState(null),[m,y]=D.useState([]),[k,R]=D.useState([]),[b,S]=D.useState([]),[C,O]=D.useState([]),[V,j]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t==="edit"&&e){const v=await xt(De(ne,i,e));if(v.exists()){const T=v.data();h(I=>({...I,...T,title:T.title||T.name||"",slug:T.slug||"",date:T.date||"",summary:T.summary||"",quote:T.quote||"",tldr:T.tldr||"",contentMarkdown:T.contentMarkdown||T.detailsMarkdown||T.overviewMarkdown||"",imageUrl:T.imageUrl||null,linkedLocations:T.linkedLocations??[],linkedNpcs:T.linkedNpcs??[],linkedMonsters:T.linkedMonsters??[],linkedSessions:T.linkedSessions??[],linkedThreads:T.linkedThreads??[]}))}}else{const v=new Date().toISOString().slice(0,10);if(h(T=>({...T,date:T.date||v})),r)try{const T=await xt(De(ne,"sessionNotes",r));if(T.exists()){const I=T.data();let N="";if(I.sessionId)try{const z=await xt(De(ne,"sessions",I.sessionId));z.exists()&&(N=z.data().title||"")}catch(z){console.error("Error loading session:",z)}const G=I.isDraft?`Session Log from Draft: ${I.title||"Untitled"}`:`Session Log: ${N||"Untitled"}`;h(z=>({...z,title:G,contentMarkdown:I.content||"",linkedLocations:I.linkedLocations||[],linkedNpcs:I.linkedNpcs||[],linkedMonsters:I.linkedMonsters||[],linkedSessions:I.sessionId?[...I.linkedSessions||[],I.sessionId].filter((K,ce,W)=>W.indexOf(K)===ce):I.linkedSessions||[]})),l.success("Loaded content from session notes")}}catch(T){console.error("Error loading note:",T),l.error("Failed to load session note")}}})()},[t,e,r]);async function x(){j(!0);const v=z=>z.map(K=>{const ce=K.data();return{id:K.id,label:ce.title||ce.name||K.id}}),[T,I,N,G]=await Promise.all([Ee(xe(ne,"locations")),Ee(xe(ne,"npcs")),Ee(xe(ne,"monsters")),Ee(xe(ne,"sessions"))]);y(v(T.docs)),R(v(I.docs)),S(v(N.docs)),O(v(G.docs)),j(!1)}D.useEffect(()=>{x()},[]);function w(v){return v.toLowerCase().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-")}async function E(){var G;const v=(u.slug||u.title||"").trim();if(!((G=u.title)!=null&&G.trim())&&!v){l.error("Please enter a Title.");return}const T=v?w(v):"";let I=u.date;if(I)try{const z=new Date(I);I=isNaN(+z)?new Date().toISOString().slice(0,10):z.toISOString().slice(0,10)}catch{I=new Date().toISOString().slice(0,10)}else I=new Date().toISOString().slice(0,10);const N={...u,slug:T,date:I,published:!!u.published,updatedAt:ut(),createdAt:u.createdAt||ut(),contentMarkdown:u.contentMarkdown||u.detailsMarkdown||u.overviewMarkdown||""};Object.keys(N).forEach(z=>N[z]===void 0&&delete N[z]);try{let z=e||null;if(t==="edit"&&z)await wo(De(ne,i,z),N,{merge:!0});else if(z=(await _o(xe(ne,i),N)).id,r)try{const W=De(ne,"sessionNotes",r);(await xt(W)).exists()&&(await uo(W,{sessionId:z,isDraft:!1,updatedAt:ut()}),console.log(`Updated note ${r} to link to session ${z}`))}catch(W){console.error("Error updating note with session link:",W)}let K=N.imageUrl??null;if(f&&z){const ce=`uploads/${i}/${z}-${ja()}`;await ju(Wr(Kr,ce),f),K=await Du(Wr(Kr,ce)),await uo(De(ne,i,z),{imageUrl:K,updatedAt:ut()})}l.success("Session saved"),s(`/admin/${i}/${z}/edit`,{replace:!0})}catch(z){console.error(z),l.error((z==null?void 0:z.message)||"Failed to save session.")}}return o===null?d.jsx("div",{children:"Loading"}):o?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsxs("h1",{className:"text-2xl mb-4 capitalize",children:[t," ",i]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(ke,{title:"Basics",storageKey:"sec-basics",defaultOpen:!0,children:d.jsx(A9,{col:i,title:u.title||"",slug:u.slug||"",date:u.date||"",summary:u.summary||"",quote:u.quote||"",onChange:v=>h(T=>({...T,...v}))})}),d.jsx(ke,{title:"TL;DR",storageKey:"sec-tldr",defaultOpen:!0,children:d.jsx(P9,{value:u.tldr||"",onChange:v=>h(T=>({...T,tldr:v}))})}),d.jsx(ke,{title:"Content",storageKey:"sec-content",defaultOpen:!0,children:d.jsx(br,{value:u.contentMarkdown||u.detailsMarkdown||u.overviewMarkdown||"",onChange:v=>h(T=>({...T,contentMarkdown:v}))})}),d.jsx(ke,{title:"Image",storageKey:"sec-image",children:d.jsx(Uu,{onFile:p,currentUrl:u.imageUrl})}),d.jsx(ke,{title:"Publish",storageKey:"sec-publish",children:d.jsx(Fu,{published:!!u.published,onChange:v=>h(T=>({...T,published:v}))})}),d.jsx(ke,{title:"Threads",storageKey:"sec-threads",defaultOpen:!0,children:d.jsx(j9,{value:u.linkedThreads||[],onChange:v=>h(T=>({...T,linkedThreads:v}))})}),d.jsx(ke,{title:"Relations",storageKey:"sec-relations",defaultOpen:!0,children:d.jsx(R9,{loading:V,locations:m,npcs:k,monsters:b,sessions:C,value:{linkedLocations:u.linkedLocations||[],linkedNpcs:u.linkedNpcs||[],linkedMonsters:u.linkedMonsters||[],linkedSessions:u.linkedSessions||[]},onChange:v=>h(T=>({...T,...v})),onRefresh:x})}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{className:"btn btn-primary",onClick:E,children:"Save"})})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to edit this content."})]})}function C0(){const{id:t}=Ti(),e=Gr(),n=ks(),[r,i]=D.useState(null);D.useEffect(()=>Ii(Er,async $=>{var le;if(!$)return i(!1);const P=await xt(De(ne,"roles",$.uid));i(P.exists()&&((le=P.data())==null?void 0:le.admin)===!0)}),[]);const[s,o]=D.useState([]),[a,l]=D.useState([]),[u,h]=D.useState(null),[f,p]=D.useState(!1),[m,y]=D.useState([]),[k,R]=D.useState(t||null),[b,S]=D.useState(!0),[C,O]=D.useState(!0),[V,j]=D.useState([]),[x,w]=D.useState([]),[E,v]=D.useState([]),[T,I]=D.useState([]),[N,G]=D.useState(!1),z=async()=>{G(!0);const $=P=>P.map(le=>{const Ie=le.data();return{id:le.id,label:Ie.title||Ie.name||le.id}});try{const[P,le,Ie,Ce]=await Promise.all([Ee(xe(ne,"locations")),Ee(xe(ne,"npcs")),Ee(xe(ne,"monsters")),Ee(xe(ne,"sessions"))]);j($(P.docs)),w($(le.docs)),v($(Ie.docs)),I($(Ce.docs))}catch(P){console.error("Error loading relationship options:",P),n.error("Failed to load relationship options")}finally{G(!1)}};D.useEffect(()=>{z()},[]),D.useEffect(()=>{let $=!0;return(async()=>{try{const le=xe(ne,"sessions"),Ie=Gt(le,yr("date","desc")),Me=(await Ee(Ie)).docs.map(it=>{const Dn=it.data();return{id:it.id,title:Dn.title||it.id,date:Dn.date||""}});$&&y(Me)}catch(le){console.error("Error loading sessions:",le),$&&n.error("Failed to load sessions")}})(),()=>{$=!1}},[]),D.useEffect(()=>{let $=!0;return(async()=>{$&&O(!0);try{const le=xe(ne,"sessionNotes"),Ie=Gt(le,vr("isDraft","==",!0),yr("createdAt","desc")),Me=(await Ee(Ie)).docs.map(it=>({id:it.id,...it.data()}));$&&l(Me)}catch(le){console.error("Error loading draft notes:",le),$&&n.error("Failed to load draft notes")}finally{$&&O(!1)}})(),()=>{$=!1}},[]),D.useEffect(()=>{let $=!0;return(async()=>{if(!k){$&&(o([]),S(!1));return}$&&S(!0);try{const le=xe(ne,"sessionNotes"),Ie=Gt(le,vr("sessionId","==",k),yr("createdAt","desc")),Me=(await Ee(Ie)).docs.map(it=>({id:it.id,...it.data()}));$&&(console.log(`Found ${Me.length} notes for session ${k}`),o(Me))}catch(le){console.error("Error loading notes:",le),$&&n.error("Failed to load notes")}finally{$&&S(!1)}})(),()=>{$=!1}},[k]);const K=()=>{try{localStorage.setItem("note-rel-locations","0"),localStorage.setItem("note-rel-npcs","0"),localStorage.setItem("note-rel-monsters","0"),localStorage.setItem("note-rel-sessions","0")}catch{}let $;if(k){const P=m.find(Ie=>Ie.id===k),le=P?P.title:"Unknown Session";$={sessionId:k,title:`Notes for ${le}`,content:"",createdAt:ut(),updatedAt:ut(),linkedLocations:[],linkedNpcs:[],linkedMonsters:[],linkedSessions:[]}}else $={title:`Draft Notes - ${new Date().toLocaleDateString()}`,content:"",isDraft:!0,createdAt:ut(),updatedAt:ut(),linkedLocations:[],linkedNpcs:[],linkedMonsters:[],linkedSessions:[]};h($),p(!0)},ce=$=>{try{localStorage.setItem("note-rel-locations","0"),localStorage.setItem("note-rel-npcs","0"),localStorage.setItem("note-rel-monsters","0"),localStorage.setItem("note-rel-sessions","0")}catch{}h($),p(!0)},W=async()=>{if(u)try{const $={...u,updatedAt:ut()};u.id?(await uo(De(ne,"sessionNotes",u.id),$),n.success("Note updated successfully")):(await _o(xe(ne,"sessionNotes"),$),n.success("Note created successfully")),p(!1),h(null);const P=xe(ne,"sessionNotes");if($.isDraft){const le=Gt(P,vr("isDraft","==",!0),yr("createdAt","desc")),Ce=(await Ee(le)).docs.map(Me=>({id:Me.id,...Me.data()}));l(Ce)}else if(k){const le=Gt(P,vr("sessionId","==",k),yr("createdAt","desc")),Ce=(await Ee(le)).docs.map(Me=>({id:Me.id,...Me.data()}));o(Ce)}}catch($){console.error("Error saving note:",$),n.error("Failed to save note")}},Z=()=>{p(!1),h(null)},L=async $=>{if($.id&&window.confirm(`Are you sure you want to delete the note "${$.title}"?`))try{await ST(De(ne,"sessionNotes",$.id)),n.success("Note deleted successfully"),$.isDraft?l(P=>P.filter(le=>le.id!==$.id)):$.sessionId===k&&o(P=>P.filter(le=>le.id!==$.id))}catch(P){console.error("Error deleting note:",P),n.error("Failed to delete note")}},ye=$=>{e(`/admin/sessions/new?noteId=${$.id}`)};return r===null?d.jsx("div",{children:"Loading"}):r?d.jsxs("div",{className:"container mx-auto max-w-4xl p-4",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Session Notes"}),d.jsxs("div",{className:"form-control mb-6",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Select Session (Optional)"})}),d.jsxs("select",{className:"select select-bordered w-full max-w-xs",value:k||"",onChange:$=>R($.target.value||null),children:[d.jsx("option",{value:"",children:"No session selected (create draft notes)"}),m.map($=>d.jsxs("option",{value:$.id,children:[$.date," - ",$.title]},$.id))]})]}),d.jsx("div",{className:"mb-6",children:d.jsxs("button",{className:"btn btn-primary",onClick:K,children:["Create New Note ",k?"for Session":"(Draft)"]})}),f?d.jsxs("div",{className:"card bg-base-200 p-4",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:u!=null&&u.id?"Edit Note":"New Note"}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Title"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:(u==null?void 0:u.title)||"",onChange:$=>h(P=>P?{...P,title:$.target.value}:null)})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Content"})}),d.jsx(br,{value:(u==null?void 0:u.content)||"",onChange:$=>h(P=>P?{...P,content:$}:null)})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-lg font-bold mb-2",children:"Relationships"}),d.jsx("p",{className:"text-sm mb-4",children:"Add relationships to automatically link them when creating a session log."}),d.jsxs("div",{className:"grid gap-4",children:[d.jsx(ke,{title:"Locations",storageKey:"note-rel-locations",defaultOpen:!1,children:d.jsx(dt,{title:"",options:V,selected:(u==null?void 0:u.linkedLocations)||[],onChange:$=>h(P=>P?{...P,linkedLocations:$}:null),loading:N,onRefresh:z})}),d.jsx(ke,{title:"NPCs",storageKey:"note-rel-npcs",defaultOpen:!1,children:d.jsx(dt,{title:"",options:x,selected:(u==null?void 0:u.linkedNpcs)||[],onChange:$=>h(P=>P?{...P,linkedNpcs:$}:null),loading:N,onRefresh:z})}),d.jsx(ke,{title:"Monsters",storageKey:"note-rel-monsters",defaultOpen:!1,children:d.jsx(dt,{title:"",options:E,selected:(u==null?void 0:u.linkedMonsters)||[],onChange:$=>h(P=>P?{...P,linkedMonsters:$}:null),loading:N,onRefresh:z})}),d.jsx(ke,{title:"Related Sessions",storageKey:"note-rel-sessions",defaultOpen:!1,children:d.jsx(dt,{title:"",options:T,selected:(u==null?void 0:u.linkedSessions)||[],onChange:$=>h(P=>P?{...P,linkedSessions:$}:null),loading:N,onRefresh:z})})]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx("button",{className:"btn",onClick:Z,children:"Cancel"}),d.jsx("button",{className:"btn btn-primary",onClick:W,children:"Save"})]})]}):d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Draft Notes"}),C?d.jsx("div",{children:"Loading draft notes..."}):a.length===0?d.jsx("div",{className:"alert mb-8",children:"No draft notes found. Create one to get started."}):d.jsx("div",{className:"grid gap-4 mb-8",children:a.map($=>{let P="";return $.createdAt&&typeof $.createdAt.toDate=="function"&&(P=$.createdAt.toDate().toLocaleDateString()),d.jsx("div",{className:"card bg-base-200 border-l-4 border-yellow-500",children:d.jsxs("div",{className:"card-body p-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"card-title text-lg",children:$.title}),P&&d.jsxs("p",{className:"text-xs opacity-70",children:["Created: ",P]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("button",{className:"btn btn-square btn-ghost btn-xs",onClick:()=>ce($),title:"Edit note",children:""}),d.jsx("button",{className:"btn btn-square btn-ghost btn-xs",onClick:()=>L($),title:"Delete note",children:""})]})]}),$.content&&d.jsxs("p",{className:"text-sm mt-2 opacity-80 line-clamp-2",children:[$.content.substring(0,60),$.content.length>60?"...":""]}),d.jsx("div",{className:"card-actions justify-end mt-2",children:d.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>ye($),children:"Create Session Log"})})]})},$.id)})}),k&&d.jsxs(d.Fragment,{children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Session Notes"}),b?d.jsx("div",{children:"Loading session notes..."}):s.length===0?d.jsx("div",{className:"alert",children:"No notes found for this session. Create one to get started."}):d.jsx("div",{className:"grid gap-4",children:s.map($=>{let P="";return $.createdAt&&typeof $.createdAt.toDate=="function"&&(P=$.createdAt.toDate().toLocaleDateString()),d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body p-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"card-title text-lg",children:$.title}),P&&d.jsxs("p",{className:"text-xs opacity-70",children:["Created: ",P]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("button",{className:"btn btn-square btn-ghost btn-xs",onClick:()=>ce($),title:"Edit note",children:""}),d.jsx("button",{className:"btn btn-square btn-ghost btn-xs",onClick:()=>L($),title:"Delete note",children:""})]})]}),$.content&&d.jsxs("p",{className:"text-sm mt-2 opacity-80 line-clamp-2",children:[$.content.substring(0,60),$.content.length>60?"...":""]}),d.jsx("div",{className:"card-actions justify-end mt-2",children:d.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>ye($),children:"Create Session Log"})})]})},$.id)})})]})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to view session notes."})]})}function D9({col:t,name:e,slug:n,role:r,quote:i,onChange:s}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Name"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:e,onChange:o=>s({name:o.target.value}),placeholder:"NPC name"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Slug (optional)"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:n,onChange:o=>s({slug:o.target.value}),placeholder:"URL-friendly identifier (auto-generated if blank)"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Role"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:r,onChange:o=>s({role:o.target.value}),placeholder:"NPC's role in the story"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Quote"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:i,onChange:o=>s({quote:o.target.value}),placeholder:"Character quote (displayed in italics below name)"})]})]})}function L9({loading:t,locations:e,npcs:n,monsters:r,sessions:i,firstAppearance:s,value:o,onChange:a,onRefresh:l}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"First Appearance"})}),d.jsxs("select",{className:"select select-bordered w-full",value:s||"",onChange:u=>a({firstAppearance:u.target.value||null}),children:[d.jsx("option",{value:"",children:"Select a session..."}),[...i].sort((u,h)=>{if(u.label.startsWith("Session-")&&h.label.startsWith("Session-")){const f=parseInt(u.label.replace("Session-",""),10)||0,p=parseInt(h.label.replace("Session-",""),10)||0;return f-p}return u.label.localeCompare(h.label)}).map(u=>d.jsx("option",{value:u.id,children:u.label},u.id))]})]}),d.jsx(dt,{title:"Locations",options:e,selected:o.linkedLocations,onChange:u=>a({linkedLocations:u}),loading:t,createHref:"/admin/locations/new",onRefresh:l}),d.jsx(dt,{title:"Related NPCs",options:n,selected:o.linkedNpcs,onChange:u=>a({linkedNpcs:u}),loading:t,createHref:"/admin/npcs/new",onRefresh:l}),d.jsx(dt,{title:"Monsters",options:r,selected:o.linkedMonsters,onChange:u=>a({linkedMonsters:u}),loading:t,createHref:"/admin/monsters/new",onRefresh:l}),d.jsx(dt,{title:"Sessions",options:i,selected:o.linkedSessions,onChange:u=>a({linkedSessions:u}),loading:t,createHref:"/admin/sessions/new",onRefresh:l})]})}function O9({deceased:t,onChange:e}){return d.jsxs("div",{className:"form-control",children:[d.jsxs("label",{className:"label cursor-pointer justify-start gap-4",children:[d.jsx("span",{className:"label-text",children:"Mark as deceased"}),d.jsx("input",{type:"checkbox",className:"toggle toggle-error",checked:t,onChange:n=>e(n.target.checked)})]}),t&&d.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"This NPC will be marked as deceased in the system."})]})}function N0({mode:t}){const{id:e}=Ti(),n="npcs",r=Gr(),[i,s]=D.useState(null);D.useEffect(()=>Ii(Er,async w=>{var v;if(!w)return s(!1);const E=await xt(De(ne,"roles",w.uid));s(E.exists()&&((v=E.data())==null?void 0:v.admin)===!0)}),[]);const o=ks(),[a,l]=D.useState({name:"",slug:"",role:"",quote:"",appearance:"",notableDetails:"",firstAppearance:null,appearanceMarkdown:"",detailsMarkdown:"",published:!0,deceased:!1,imageUrl:null,linkedLocations:[],linkedNpcs:[],linkedMonsters:[],linkedSessions:[]}),[u,h]=D.useState(null),[f,p]=D.useState([]),[m,y]=D.useState([]),[k,R]=D.useState([]),[b,S]=D.useState([]),[C,O]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t==="edit"&&e){const w=await xt(De(ne,n,e));if(w.exists()){const E=w.data();l(v=>({...v,...E,name:E.name||"",slug:E.slug||"",role:E.role||"",quote:E.quote||"",appearance:E.appearance||"",notableDetails:E.notableDetails||"",firstAppearance:E.firstAppearance||null,appearanceMarkdown:E.appearanceMarkdown||"",detailsMarkdown:E.detailsMarkdown||"",deceased:E.deceased??!1,imageUrl:E.imageUrl||null,linkedLocations:E.linkedLocations??[],linkedNpcs:E.linkedNpcs??[],linkedMonsters:E.linkedMonsters??[],linkedSessions:E.linkedSessions??[]}))}}})()},[t,e]);async function V(){O(!0);const w=N=>N.map(G=>{const z=G.data();return{id:G.id,label:z.title||z.name||G.id}}),[E,v,T,I]=await Promise.all([Ee(xe(ne,"locations")),Ee(xe(ne,"npcs")),Ee(xe(ne,"monsters")),Ee(xe(ne,"sessions"))]);p(w(E.docs)),y(w(v.docs)),R(w(T.docs)),S(w(I.docs)),O(!1)}D.useEffect(()=>{V()},[]);function j(w){return w.toLowerCase().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-")}async function x(){var T;const w=(a.slug||a.name||"").trim();if(!((T=a.name)!=null&&T.trim())&&!w){o.error("Please enter a Name.");return}const E=w?j(w):"",v={...a,slug:E,published:!!a.published,updatedAt:ut(),createdAt:a.createdAt||ut(),appearanceMarkdown:a.appearanceMarkdown||"",detailsMarkdown:a.detailsMarkdown||""};Object.keys(v).forEach(I=>v[I]===void 0&&delete v[I]);try{let I=e||null;t==="edit"&&I?await wo(De(ne,n,I),v,{merge:!0}):I=(await _o(xe(ne,n),v)).id;let N=v.imageUrl??null;if(u&&I){const G=`uploads/${n}/${I}-${ja()}`;await ju(Wr(Kr,G),u),N=await Du(Wr(Kr,G)),await uo(De(ne,n,I),{imageUrl:N,updatedAt:ut()})}o.success("NPC saved"),r(`/admin/${n}/${I}/edit`,{replace:!0})}catch(I){console.error(I),o.error((I==null?void 0:I.message)||"Failed to save NPC.")}}return i===null?d.jsx("div",{children:"Loading"}):i?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsxs("h1",{className:"text-2xl mb-4 capitalize",children:[t," ",n]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(ke,{title:"Basics",storageKey:"sec-basics",defaultOpen:!0,children:d.jsx(D9,{col:n,name:a.name||"",slug:a.slug||"",role:a.role||"",quote:a.quote||"",onChange:w=>l(E=>({...E,...w}))})}),d.jsx(ke,{title:"Appearance",storageKey:"sec-appearance",defaultOpen:!0,children:d.jsx(br,{value:a.appearanceMarkdown||"",onChange:w=>l(E=>({...E,appearanceMarkdown:w}))})}),d.jsx(ke,{title:"Notable Details",storageKey:"sec-details",defaultOpen:!0,children:d.jsx(br,{value:a.detailsMarkdown||"",onChange:w=>l(E=>({...E,detailsMarkdown:w}))})}),d.jsx(ke,{title:"Image",storageKey:"sec-image",children:d.jsx(Uu,{onFile:h,currentUrl:a.imageUrl})}),d.jsx(ke,{title:"Status",storageKey:"sec-status",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Fu,{published:!!a.published,onChange:w=>l(E=>({...E,published:w}))}),d.jsx(O9,{deceased:!!a.deceased,onChange:w=>l(E=>({...E,deceased:w}))})]})}),d.jsx(ke,{title:"Relations",storageKey:"sec-relations",defaultOpen:!0,children:d.jsx(L9,{loading:C,locations:f,npcs:m,monsters:k,sessions:b,firstAppearance:a.firstAppearance,value:{linkedLocations:a.linkedLocations||[],linkedNpcs:a.linkedNpcs||[],linkedMonsters:a.linkedMonsters||[],linkedSessions:a.linkedSessions||[]},onChange:w=>l(E=>({...E,...w})),onRefresh:V})}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{className:"btn btn-primary",onClick:x,children:"Save"})})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to edit this content."})]})}function M9({col:t,name:e,slug:n,summary:r,quote:i,onChange:s}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Name"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:e,onChange:o=>s({name:o.target.value}),placeholder:"Location name"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Slug (optional)"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:n,onChange:o=>s({slug:o.target.value}),placeholder:"URL-friendly identifier (auto-generated if blank)"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Summary"})}),d.jsx("textarea",{className:"textarea textarea-bordered",value:r,onChange:o=>s({summary:o.target.value}),placeholder:"Brief summary of the location",rows:3})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Quote"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:i,onChange:o=>s({quote:o.target.value}),placeholder:"Location quote (displayed in italics below name)"})]})]})}function V9({loading:t,locations:e,npcs:n,monsters:r,sessions:i,value:s,onChange:o,onRefresh:a}){return d.jsxs("div",{className:"space-y-4",children:[d.jsx(dt,{title:"Related Locations",options:e,selected:s.linkedLocations,onChange:l=>o({linkedLocations:l}),loading:t,createHref:"/admin/locations/new",onRefresh:a}),d.jsx(dt,{title:"NPCs",options:n,selected:s.linkedNpcs,onChange:l=>o({linkedNpcs:l}),loading:t,createHref:"/admin/npcs/new",onRefresh:a}),d.jsx(dt,{title:"Monsters",options:r,selected:s.linkedMonsters,onChange:l=>o({linkedMonsters:l}),loading:t,createHref:"/admin/monsters/new",onRefresh:a}),d.jsx(dt,{title:"Sessions",options:i,selected:s.linkedSessions,onChange:l=>o({linkedSessions:l}),loading:t,createHref:"/admin/sessions/new",onRefresh:a})]})}function A0({mode:t}){const{id:e}=Ti(),n="locations",r=Gr(),[i,s]=D.useState(null);D.useEffect(()=>Ii(Er,async w=>{var v;if(!w)return s(!1);const E=await xt(De(ne,"roles",w.uid));s(E.exists()&&((v=E.data())==null?void 0:v.admin)===!0)}),[]);const o=ks(),[a,l]=D.useState({name:"",slug:"",summary:"",quote:"",description:"",appearance:"",notableFeatures:"",descriptionMarkdown:"",appearanceMarkdown:"",featuresMarkdown:"",published:!0,imageUrl:null,linkedLocations:[],linkedNpcs:[],linkedMonsters:[],linkedSessions:[]}),[u,h]=D.useState(null),[f,p]=D.useState([]),[m,y]=D.useState([]),[k,R]=D.useState([]),[b,S]=D.useState([]),[C,O]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t==="edit"&&e){const w=await xt(De(ne,n,e));if(w.exists()){const E=w.data();l(v=>({...v,...E,name:E.name||"",slug:E.slug||"",summary:E.summary||"",quote:E.quote||"",description:E.description||"",appearance:E.appearance||"",notableFeatures:E.notableFeatures||"",descriptionMarkdown:E.descriptionMarkdown||"",appearanceMarkdown:E.appearanceMarkdown||"",featuresMarkdown:E.featuresMarkdown||"",imageUrl:E.imageUrl||null,linkedLocations:E.linkedLocations??[],linkedNpcs:E.linkedNpcs??[],linkedMonsters:E.linkedMonsters??[],linkedSessions:E.linkedSessions??[]}))}}})()},[t,e]);async function V(){O(!0);const w=N=>N.map(G=>{const z=G.data();return{id:G.id,label:z.title||z.name||G.id}}),[E,v,T,I]=await Promise.all([Ee(xe(ne,"locations")),Ee(xe(ne,"npcs")),Ee(xe(ne,"monsters")),Ee(xe(ne,"sessions"))]);p(w(E.docs)),y(w(v.docs)),R(w(T.docs)),S(w(I.docs)),O(!1)}D.useEffect(()=>{V()},[]);function j(w){return w.toLowerCase().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-")}async function x(){var T;const w=(a.slug||a.name||"").trim();if(!((T=a.name)!=null&&T.trim())&&!w){o.error("Please enter a Name.");return}const E=w?j(w):"",v={...a,slug:E,published:!!a.published,updatedAt:ut(),createdAt:a.createdAt||ut(),descriptionMarkdown:a.descriptionMarkdown||"",appearanceMarkdown:a.appearanceMarkdown||"",featuresMarkdown:a.featuresMarkdown||""};Object.keys(v).forEach(I=>v[I]===void 0&&delete v[I]);try{let I=e||null;t==="edit"&&I?await wo(De(ne,n,I),v,{merge:!0}):I=(await _o(xe(ne,n),v)).id;let N=v.imageUrl??null;if(u&&I){const G=`uploads/${n}/${I}-${ja()}`;await ju(Wr(Kr,G),u),N=await Du(Wr(Kr,G)),await uo(De(ne,n,I),{imageUrl:N,updatedAt:ut()})}o.success("Location saved"),r(`/admin/${n}/${I}/edit`,{replace:!0})}catch(I){console.error(I),o.error((I==null?void 0:I.message)||"Failed to save location.")}}return i===null?d.jsx("div",{children:"Loading"}):i?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsxs("h1",{className:"text-2xl mb-4 capitalize",children:[t," ",n]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(ke,{title:"Basics",storageKey:"sec-basics",children:d.jsx(M9,{col:n,name:a.name||"",slug:a.slug||"",summary:a.summary||"",quote:a.quote||"",onChange:w=>l(E=>({...E,...w}))})}),d.jsx(ke,{title:"Description",storageKey:"sec-description",children:d.jsx(br,{value:a.descriptionMarkdown||"",onChange:w=>l(E=>({...E,descriptionMarkdown:w}))})}),d.jsx(ke,{title:"Appearance",storageKey:"sec-appearance",children:d.jsx(br,{value:a.appearanceMarkdown||"",onChange:w=>l(E=>({...E,appearanceMarkdown:w}))})}),d.jsx(ke,{title:"Notable Features",storageKey:"sec-features",children:d.jsx(br,{value:a.featuresMarkdown||"",onChange:w=>l(E=>({...E,featuresMarkdown:w}))})}),d.jsx(ke,{title:"Image",storageKey:"sec-image",children:d.jsx(Uu,{onFile:h,currentUrl:a.imageUrl})}),d.jsx(ke,{title:"Publish",storageKey:"sec-publish",children:d.jsx(Fu,{published:!!a.published,onChange:w=>l(E=>({...E,published:w}))})}),d.jsx(ke,{title:"Relations",storageKey:"sec-relations",children:d.jsx(V9,{loading:C,locations:f,npcs:m,monsters:k,sessions:b,value:{linkedLocations:a.linkedLocations||[],linkedNpcs:a.linkedNpcs||[],linkedMonsters:a.linkedMonsters||[],linkedSessions:a.linkedSessions||[]},onChange:w=>l(E=>({...E,...w})),onRefresh:V})}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{className:"btn btn-primary",onClick:x,children:"Save"})})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to edit this content."})]})}function F9({col:t,name:e,slug:n,type:r,quote:i,onChange:s}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Name"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:e,onChange:o=>s({name:o.target.value}),placeholder:"Monster name"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Slug (optional)"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:n,onChange:o=>s({slug:o.target.value}),placeholder:"URL-friendly identifier (auto-generated if blank)"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Type"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:r,onChange:o=>s({type:o.target.value}),placeholder:"Monster type (e.g., Undead, Beast, Aberration)"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Quote"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:i,onChange:o=>s({quote:o.target.value}),placeholder:"Monster quote (displayed in italics below name)"})]})]})}function U9({loading:t,locations:e,npcs:n,monsters:r,sessions:i,firstAppearance:s,value:o,onChange:a,onRefresh:l}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"First Appearance"})}),d.jsxs("select",{className:"select select-bordered w-full",value:s||"",onChange:u=>a({firstAppearance:u.target.value||null}),children:[d.jsx("option",{value:"",children:"Select a session..."}),[...i].sort((u,h)=>{if(u.label.startsWith("Session-")&&h.label.startsWith("Session-")){const f=parseInt(u.label.replace("Session-",""),10)||0,p=parseInt(h.label.replace("Session-",""),10)||0;return f-p}return u.label.localeCompare(h.label)}).map(u=>d.jsx("option",{value:u.id,children:u.label},u.id))]})]}),d.jsx(dt,{title:"Locations",options:e,selected:o.linkedLocations,onChange:u=>a({linkedLocations:u}),loading:t,createHref:"/admin/locations/new",onRefresh:l}),d.jsx(dt,{title:"NPCs",options:n,selected:o.linkedNpcs,onChange:u=>a({linkedNpcs:u}),loading:t,createHref:"/admin/npcs/new",onRefresh:l}),d.jsx(dt,{title:"Related Monsters",options:r,selected:o.linkedMonsters,onChange:u=>a({linkedMonsters:u}),loading:t,createHref:"/admin/monsters/new",onRefresh:l}),d.jsx(dt,{title:"Sessions",options:i,selected:o.linkedSessions,onChange:u=>a({linkedSessions:u}),loading:t,createHref:"/admin/sessions/new",onRefresh:l})]})}function z9({deceased:t,onChange:e}){return d.jsxs("div",{className:"form-control",children:[d.jsxs("label",{className:"label cursor-pointer justify-start gap-4",children:[d.jsx("span",{className:"label-text",children:"Mark as deceased"}),d.jsx("input",{type:"checkbox",className:"toggle toggle-error",checked:t,onChange:n=>e(n.target.checked)})]}),t&&d.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"This monster will be marked as deceased in the system."})]})}function R0({mode:t}){const{id:e}=Ti(),n="monsters",r=Gr(),[i,s]=D.useState(null);D.useEffect(()=>Ii(Er,async w=>{var v;if(!w)return s(!1);const E=await xt(De(ne,"roles",w.uid));s(E.exists()&&((v=E.data())==null?void 0:v.admin)===!0)}),[]);const o=ks(),[a,l]=D.useState({name:"",slug:"",type:"",quote:"",appearance:"",notableDetails:"",knownEncounters:"",firstAppearance:null,appearanceMarkdown:"",detailsMarkdown:"",encountersMarkdown:"",published:!0,deceased:!1,imageUrl:null,linkedLocations:[],linkedNpcs:[],linkedMonsters:[],linkedSessions:[]}),[u,h]=D.useState(null),[f,p]=D.useState([]),[m,y]=D.useState([]),[k,R]=D.useState([]),[b,S]=D.useState([]),[C,O]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t==="edit"&&e){const w=await xt(De(ne,n,e));if(w.exists()){const E=w.data();l(v=>({...v,...E,name:E.name||"",slug:E.slug||"",type:E.type||"",quote:E.quote||"",appearance:E.appearance||"",notableDetails:E.notableDetails||"",knownEncounters:E.knownEncounters||"",firstAppearance:E.firstAppearance||null,appearanceMarkdown:E.appearanceMarkdown||"",detailsMarkdown:E.detailsMarkdown||"",encountersMarkdown:E.encountersMarkdown||"",deceased:E.deceased??!1,imageUrl:E.imageUrl||null,linkedLocations:E.linkedLocations??[],linkedNpcs:E.linkedNpcs??[],linkedMonsters:E.linkedMonsters??[],linkedSessions:E.linkedSessions??[]}))}}})()},[t,e]);async function V(){O(!0);const w=N=>N.map(G=>{const z=G.data();return{id:G.id,label:z.title||z.name||G.id}}),[E,v,T,I]=await Promise.all([Ee(xe(ne,"locations")),Ee(xe(ne,"npcs")),Ee(xe(ne,"monsters")),Ee(xe(ne,"sessions"))]);p(w(E.docs)),y(w(v.docs)),R(w(T.docs)),S(w(I.docs)),O(!1)}D.useEffect(()=>{V()},[]);function j(w){return w.toLowerCase().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-")}async function x(){var T;const w=(a.slug||a.name||"").trim();if(!((T=a.name)!=null&&T.trim())&&!w){o.error("Please enter a Name.");return}const E=w?j(w):"",v={...a,slug:E,published:!!a.published,updatedAt:ut(),createdAt:a.createdAt||ut(),appearanceMarkdown:a.appearanceMarkdown||"",detailsMarkdown:a.detailsMarkdown||"",encountersMarkdown:a.encountersMarkdown||""};Object.keys(v).forEach(I=>v[I]===void 0&&delete v[I]);try{let I=e||null;t==="edit"&&I?await wo(De(ne,n,I),v,{merge:!0}):I=(await _o(xe(ne,n),v)).id;let N=v.imageUrl??null;if(u&&I){const G=`uploads/${n}/${I}-${ja()}`;await ju(Wr(Kr,G),u),N=await Du(Wr(Kr,G)),await uo(De(ne,n,I),{imageUrl:N,updatedAt:ut()})}o.success("Monster saved"),r(`/admin/${n}/${I}/edit`,{replace:!0})}catch(I){console.error(I),o.error((I==null?void 0:I.message)||"Failed to save monster.")}}return i===null?d.jsx("div",{children:"Loading"}):i?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsxs("h1",{className:"text-2xl mb-4 capitalize",children:[t," ",n]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(ke,{title:"Basics",storageKey:"sec-basics",defaultOpen:!0,children:d.jsx(F9,{col:n,name:a.name||"",slug:a.slug||"",type:a.type||"",quote:a.quote||"",onChange:w=>l(E=>({...E,...w}))})}),d.jsx(ke,{title:"Appearance",storageKey:"sec-appearance",defaultOpen:!0,children:d.jsx(br,{value:a.appearanceMarkdown||"",onChange:w=>l(E=>({...E,appearanceMarkdown:w}))})}),d.jsx(ke,{title:"Notable Details",storageKey:"sec-details",defaultOpen:!0,children:d.jsx(br,{value:a.detailsMarkdown||"",onChange:w=>l(E=>({...E,detailsMarkdown:w}))})}),d.jsx(ke,{title:"Known Encounters",storageKey:"sec-encounters",defaultOpen:!0,children:d.jsx(br,{value:a.encountersMarkdown||"",onChange:w=>l(E=>({...E,encountersMarkdown:w}))})}),d.jsx(ke,{title:"Image",storageKey:"sec-image",children:d.jsx(Uu,{onFile:h,currentUrl:a.imageUrl})}),d.jsx(ke,{title:"Status",storageKey:"sec-status",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Fu,{published:!!a.published,onChange:w=>l(E=>({...E,published:w}))}),d.jsx(z9,{deceased:!!a.deceased,onChange:w=>l(E=>({...E,deceased:w}))})]})}),d.jsx(ke,{title:"Relations",storageKey:"sec-relations",defaultOpen:!0,children:d.jsx(U9,{loading:C,locations:f,npcs:m,monsters:k,sessions:b,firstAppearance:a.firstAppearance,value:{linkedLocations:a.linkedLocations||[],linkedNpcs:a.linkedNpcs||[],linkedMonsters:a.linkedMonsters||[],linkedSessions:a.linkedSessions||[]},onChange:w=>l(E=>({...E,...w})),onRefresh:V})}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{className:"btn btn-primary",onClick:x,children:"Save"})})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to edit this content."})]})}function B9({col:t,name:e,slug:n,playerName:r,characterClass:i,level:s,race:o,dndbeyondUrl:a,onChange:l}){function u(h){const{name:f,value:p}=h.target;l({[f]:p})}return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Character Name"})}),d.jsx("input",{type:"text",name:"name",value:e,onChange:u,className:"input input-bordered w-full",placeholder:"Character name"})]}),d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Slug (for URLs)"})}),d.jsx("input",{type:"text",name:"slug",value:n,onChange:u,className:"input input-bordered w-full",placeholder:"character-name"}),d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text-alt",children:"Leave blank to auto-generate from name"})})]}),d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Player Name"})}),d.jsx("input",{type:"text",name:"playerName",value:r,onChange:u,className:"input input-bordered w-full",placeholder:"Player name"})]}),d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"D&D Beyond URL"})}),d.jsx("input",{type:"text",name:"dndbeyondUrl",value:a,onChange:u,className:"input input-bordered w-full",placeholder:"https://www.dndbeyond.com/characters/123456789"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Class"})}),d.jsx("input",{type:"text",name:"characterClass",value:i,onChange:u,className:"input input-bordered w-full",placeholder:"Fighter, Wizard, etc."})]}),d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Level"})}),d.jsx("input",{type:"text",name:"level",value:s,onChange:u,className:"input input-bordered w-full",placeholder:"1"})]}),d.jsxs("div",{className:"form-control w-full",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Race"})}),d.jsx("input",{type:"text",name:"race",value:o,onChange:u,className:"input input-bordered w-full",placeholder:"Human, Elf, etc."})]})]})]})}function P0({mode:t}){var C,O,V,j,x,w,E,v,T,I,N,G;const{id:e}=Ti(),n="characters",r=Gr(),[i,s]=D.useState(null);D.useEffect(()=>Ii(Er,async z=>{var ce;if(!z)return s(!1);const K=await xt(De(ne,"roles",z.uid));s(K.exists()&&((ce=K.data())==null?void 0:ce.admin)===!0)}),[]);const o=ks(),[a,l]=D.useState({name:"",slug:"",playerName:"",characterClass:"",level:"",race:"",dndbeyondUrl:"",abilityScores:{str:"",dex:"",con:"",int:"",wis:"",cha:""},proficiencyBonus:"",savingThrows:{str:{proficient:!1,bonus:""},dex:{proficient:!1,bonus:""},con:{proficient:!1,bonus:""},int:{proficient:!1,bonus:""},wis:{proficient:!1,bonus:""},cha:{proficient:!1,bonus:""}},ac:"",hp:"",speed:"",gold:"",notesMarkdown:"",published:!0,imageUrl:null,linkedSessions:[],linkedCharacters:[]}),[u,h]=D.useState(null),[f,p]=D.useState([]),[m,y]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t==="edit"&&e){const z=await xt(De(ne,n,e));if(z.exists()){const K=z.data();l(ce=>({...ce,...K,name:K.name||"",slug:K.slug||"",playerName:K.playerName||"",characterClass:K.characterClass||"",level:K.level||"",race:K.race||"",dndbeyondUrl:K.dndbeyondUrl||"",abilityScores:K.abilityScores||{str:"",dex:"",con:"",int:"",wis:"",cha:""},proficiencyBonus:K.proficiencyBonus||"",savingThrows:K.savingThrows?{str:K.savingThrows.str||{proficient:!1,bonus:""},dex:K.savingThrows.dex||{proficient:!1,bonus:""},con:K.savingThrows.con||{proficient:!1,bonus:""},int:K.savingThrows.int||{proficient:!1,bonus:""},wis:K.savingThrows.wis||{proficient:!1,bonus:""},cha:K.savingThrows.cha||{proficient:!1,bonus:""}}:{str:{proficient:!1,bonus:""},dex:{proficient:!1,bonus:""},con:{proficient:!1,bonus:""},int:{proficient:!1,bonus:""},wis:{proficient:!1,bonus:""},cha:{proficient:!1,bonus:""}},ac:K.ac||"",hp:K.hp||"",speed:K.speed||"",gold:K.gold||"",notesMarkdown:K.notesMarkdown||"",imageUrl:K.imageUrl||null,linkedSessions:K.linkedSessions??[],linkedCharacters:K.linkedCharacters??[]}))}}})()},[t,e]);async function k(){y(!0);const z=ce=>ce.map(W=>{const Z=W.data();return{id:W.id,label:Z.title||Z.name||W.id}}),[K]=await Promise.all([Ee(xe(ne,"sessions"))]);p(z(K.docs)),y(!1)}D.useEffect(()=>{k()},[]);function R(z){return z.toLowerCase().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-")}function b(z){if(isNaN(z))return"0";const K=Math.floor((z-10)/2);return K>=0?`+${K}`:`${K}`}async function S(){var W;const z=(a.slug||a.name||"").trim();if(!((W=a.name)!=null&&W.trim())&&!z){o.error("Please enter a Character Name.");return}const K=z?R(z):"",ce={...a,slug:K,published:!!a.published,updatedAt:ut(),createdAt:a.createdAt||ut(),notesMarkdown:a.notesMarkdown||""};Object.keys(ce).forEach(Z=>ce[Z]===void 0&&delete ce[Z]);try{let Z=e||null;t==="edit"&&Z?await wo(De(ne,n,Z),ce,{merge:!0}):Z=(await _o(xe(ne,n),ce)).id;let L=ce.imageUrl??null;if(u&&Z){const ye=`uploads/${n}/${Z}-${ja()}`;await ju(Wr(Kr,ye),u),L=await Du(Wr(Kr,ye)),await uo(De(ne,n,Z),{imageUrl:L,updatedAt:ut()})}o.success("Character saved"),r(`/admin/${n}/${Z}/edit`,{replace:!0})}catch(Z){console.error(Z),o.error((Z==null?void 0:Z.message)||"Failed to save Character.")}}return i===null?d.jsx("div",{children:"Loading"}):i?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsxs("h1",{className:"text-2xl mb-4 capitalize",children:[t," ",n]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(ke,{title:"Basic Info",storageKey:"sec-basics",defaultOpen:!0,children:d.jsx(B9,{col:n,name:a.name||"",slug:a.slug||"",playerName:a.playerName||"",characterClass:a.characterClass||"",level:a.level||"",race:a.race||"",dndbeyondUrl:a.dndbeyondUrl||"",onChange:z=>l(K=>({...K,...z}))})}),d.jsx(ke,{title:"Stats",storageKey:"sec-stats",defaultOpen:!0,children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"text-sm mb-1",children:"Ability scores with modifiers below"}),d.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"STR"})}),d.jsx("input",{type:"text",value:((C=a.abilityScores)==null?void 0:C.str)||"",onChange:z=>l(K=>({...K,abilityScores:{...K.abilityScores,str:z.target.value}})),className:"input input-bordered w-full",placeholder:"10"}),d.jsx("div",{className:"text-center mt-1 text-sm font-bold",children:(O=a.abilityScores)!=null&&O.str?b(parseInt(a.abilityScores.str)):"0"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"DEX"})}),d.jsx("input",{type:"text",value:((V=a.abilityScores)==null?void 0:V.dex)||"",onChange:z=>l(K=>({...K,abilityScores:{...K.abilityScores,dex:z.target.value}})),className:"input input-bordered w-full",placeholder:"10"}),d.jsx("div",{className:"text-center mt-1 text-sm font-bold",children:(j=a.abilityScores)!=null&&j.dex?b(parseInt(a.abilityScores.dex)):"0"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"CON"})}),d.jsx("input",{type:"text",value:((x=a.abilityScores)==null?void 0:x.con)||"",onChange:z=>l(K=>({...K,abilityScores:{...K.abilityScores,con:z.target.value}})),className:"input input-bordered w-full",placeholder:"10"}),d.jsx("div",{className:"text-center mt-1 text-sm font-bold",children:(w=a.abilityScores)!=null&&w.con?b(parseInt(a.abilityScores.con)):"0"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"INT"})}),d.jsx("input",{type:"text",value:((E=a.abilityScores)==null?void 0:E.int)||"",onChange:z=>l(K=>({...K,abilityScores:{...K.abilityScores,int:z.target.value}})),className:"input input-bordered w-full",placeholder:"10"}),d.jsx("div",{className:"text-center mt-1 text-sm font-bold",children:(v=a.abilityScores)!=null&&v.int?b(parseInt(a.abilityScores.int)):"0"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"WIS"})}),d.jsx("input",{type:"text",value:((T=a.abilityScores)==null?void 0:T.wis)||"",onChange:z=>l(K=>({...K,abilityScores:{...K.abilityScores,wis:z.target.value}})),className:"input input-bordered w-full",placeholder:"10"}),d.jsx("div",{className:"text-center mt-1 text-sm font-bold",children:(I=a.abilityScores)!=null&&I.wis?b(parseInt(a.abilityScores.wis)):"0"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"CHA"})}),d.jsx("input",{type:"text",value:((N=a.abilityScores)==null?void 0:N.cha)||"",onChange:z=>l(K=>({...K,abilityScores:{...K.abilityScores,cha:z.target.value}})),className:"input input-bordered w-full",placeholder:"10"}),d.jsx("div",{className:"text-center mt-1 text-sm font-bold",children:(G=a.abilityScores)!=null&&G.cha?b(parseInt(a.abilityScores.cha)):"0"})]})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text font-semibold",children:"Proficiency Bonus"})}),d.jsx("input",{type:"text",value:a.proficiencyBonus||"",onChange:z=>l(K=>({...K,proficiencyBonus:z.target.value})),className:"input input-bordered w-full max-w-xs",placeholder:"+"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text font-semibold",children:"Saving Throws"})}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:["str","dex","con","int","wis","cha"].map(z=>{var ce;const K=((ce=a.savingThrows)==null?void 0:ce[z])||{proficient:!1,bonus:""};return d.jsxs("div",{className:"form-control border rounded-lg p-3",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"label-text uppercase font-semibold",children:z}),d.jsxs("label",{className:"label cursor-pointer justify-end gap-2 m-0 p-0",children:[d.jsx("span",{className:"label-text text-xs",children:"Proficient"}),d.jsx("input",{type:"checkbox",checked:K.proficient,onChange:W=>l(Z=>({...Z,savingThrows:{...Z.savingThrows,[z]:{...Z.savingThrows[z],proficient:W.target.checked}}})),className:"checkbox checkbox-primary checkbox-sm"})]})]}),d.jsxs("div",{className:"form-control",children:[d.jsxs("label",{className:"label p-0",children:[d.jsx("span",{className:"label-text text-xs",children:"Background Bonus"}),d.jsx("span",{className:"label-text-alt text-xs text-info",children:"e.g., Criminal"})]}),d.jsx("input",{type:"text",value:K.bonus||"",onChange:W=>l(Z=>({...Z,savingThrows:{...Z.savingThrows,[z]:{...Z.savingThrows[z],bonus:W.target.value}}})),className:"input input-bordered input-sm w-full",placeholder:"+"})]})]},z)})})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"AC"})}),d.jsx("input",{type:"text",value:a.ac||"",onChange:z=>l(K=>({...K,ac:z.target.value})),className:"input input-bordered w-full",placeholder:"10"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"HP"})}),d.jsx("input",{type:"text",value:a.hp||"",onChange:z=>l(K=>({...K,hp:z.target.value})),className:"input input-bordered w-full",placeholder:"8"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Speed"})}),d.jsx("input",{type:"text",value:a.speed||"",onChange:z=>l(K=>({...K,speed:z.target.value})),className:"input input-bordered w-full",placeholder:"30 ft"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Gold"})}),d.jsx("input",{type:"text",value:a.gold||"",onChange:z=>l(K=>({...K,gold:z.target.value})),className:"input input-bordered w-full",placeholder:"0"})]})]})]})}),d.jsx(ke,{title:"Notes",storageKey:"sec-notes",defaultOpen:!0,children:d.jsx(br,{value:a.notesMarkdown||"",onChange:z=>l(K=>({...K,notesMarkdown:z}))})}),d.jsx(ke,{title:"Image",storageKey:"sec-image",children:d.jsx(Uu,{onFile:h,currentUrl:a.imageUrl})}),d.jsx(ke,{title:"Publish",storageKey:"sec-publish",children:d.jsx(Fu,{published:!!a.published,onChange:z=>l(K=>({...K,published:z}))})}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{className:"btn btn-primary",onClick:S,children:"Save"})})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to edit this content."})]})}function $9({title:t,slug:e,description:n,status:r,onChange:i}){return d.jsx("div",{className:"card bg-base-200",children:d.jsx("div",{className:"card-body",children:d.jsxs("div",{className:"grid gap-4",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Title"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:t,onChange:s=>i({title:s.target.value}),placeholder:"Thread title"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Slug (URL path)"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:e,onChange:s=>i({slug:s.target.value}),placeholder:"thread-url-path"}),d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text-alt",children:"Optional. Will be generated from title if left blank."})})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Description"})}),d.jsx("textarea",{className:"textarea textarea-bordered h-24",value:n,onChange:s=>i({description:s.target.value}),placeholder:"Brief description of this thread"})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Status"})}),d.jsxs("select",{className:"select select-bordered w-full",value:r,onChange:s=>i({status:s.target.value}),children:[d.jsx("option",{value:"open",children:"Open"}),d.jsx("option",{value:"resolved",children:"Resolved"}),d.jsx("option",{value:"abandoned",children:"Abandoned"})]})]})]})})})}function H9({events:t,sessions:e,onChange:n}){var f;const[r,i]=D.useState({date:new Date().toISOString().slice(0,10),content:"",sessionId:""}),s=D.useRef(null);function o(){var m;if(!((m=r.content)!=null&&m.trim()))return;const p={id:ja(),date:r.date||new Date().toISOString().slice(0,10),content:r.content.trim(),sessionId:r.sessionId||void 0};n([...t,p]),i({date:r.date,content:"",sessionId:""})}function a(p,m){const y=t.map(k=>k.id===p?{...k,...m}:k);n(y)}function l(p){const m=t.filter(y=>y.id!==p);n(m)}function u(p){if(s.current){const m=s.current,y=m.selectionStart,k=m.selectionEnd,R=r.content||"",b=R.substring(0,y)+p+R.substring(k);i({...r,content:b}),setTimeout(()=>{m.focus(),m.setSelectionRange(y+p.length,y+p.length)},0)}}const h=[...t].sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime());return d.jsx("div",{className:"card bg-base-200",children:d.jsxs("div",{className:"card-body gap-4",children:[d.jsx("h3",{className:"card-title",children:"Timeline Events"}),d.jsxs("div",{className:"grid gap-3",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Date"})}),d.jsx("input",{type:"date",className:"input input-bordered w-full",value:r.date||"",onChange:p=>i({...r,date:p.target.value})})]}),d.jsxs("div",{className:"form-control md:col-span-2",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Related Session (Optional)"})}),d.jsxs("select",{className:"select select-bordered w-full",value:r.sessionId||"",onChange:p=>i({...r,sessionId:p.target.value||void 0}),children:[d.jsx("option",{value:"",children:"None"}),[...e].sort((p,m)=>{const y=parseInt(p.label.replace(/[^0-9]/g,""))||0,k=parseInt(m.label.replace(/[^0-9]/g,""))||0;return y-k}).map(p=>d.jsx("option",{value:p.id,children:p.label},p.id))]})]})]}),d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Event Description"})}),d.jsx("textarea",{ref:s,className:"textarea textarea-bordered h-20",placeholder:"Describe what happened in this thread event",value:r.content||"",onChange:p=>i({...r,content:p.target.value})}),d.jsx(Lm,{onInsert:u})]}),d.jsx("button",{type:"button",className:"btn btn-primary w-full",onClick:o,disabled:!((f=r.content)!=null&&f.trim()),children:"Add Event"})]}),h.length===0?d.jsx("div",{className:"opacity-60 mt-4",children:"No events yet. Add your first one above."}):d.jsxs("div",{className:"mt-4",children:[d.jsxs("h4",{className:"font-medium mb-2",children:["Timeline (",h.length," events)"]}),d.jsx("ul",{className:"space-y-4",children:h.map(p=>d.jsx("li",{className:"card bg-base-300",children:d.jsxs("div",{className:"card-body p-4",children:[d.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("input",{type:"date",className:"input input-bordered input-sm",value:p.date,onChange:m=>a(p.id,{date:m.target.value})}),d.jsxs("select",{className:"select select-bordered select-sm",value:p.sessionId||"",onChange:m=>a(p.id,{sessionId:m.target.value||void 0}),children:[d.jsx("option",{value:"",children:"No session"}),[...e].sort((m,y)=>{const k=parseInt(m.label.replace(/[^0-9]/g,""))||0,R=parseInt(y.label.replace(/[^0-9]/g,""))||0;return k-R}).map(m=>d.jsx("option",{value:m.id,children:m.label},m.id))]})]}),d.jsx("button",{type:"button",className:"btn btn-error btn-outline btn-sm",onClick:()=>l(p.id),children:"Remove"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("textarea",{className:"textarea textarea-bordered mt-2 w-full",value:p.content,onChange:m=>a(p.id,{content:m.target.value})}),d.jsx("div",{className:"mt-1",children:d.jsx(Lm,{onInsert:m=>{const y=p.content+m;a(p.id,{content:y})}})})]})]})},p.id))})]})]})})}function j0({mode:t}){const{id:e}=Ti(),n="threads",r=Gr(),[i,s]=D.useState(null);D.useEffect(()=>Ii(Er,async j=>{var w;if(!j)return s(!1);const x=await xt(De(ne,"roles",j.uid));s(x.exists()&&((w=x.data())==null?void 0:w.admin)===!0)}),[]);const o=ks(),[a,l]=D.useState({title:"",slug:"",description:"",status:"open",published:!0,events:[],linkedLocations:[],linkedNpcs:[],linkedSessions:[],linkedMonsters:[]}),[u,h]=D.useState([]),[f,p]=D.useState([]),[m,y]=D.useState([]),[k,R]=D.useState([]),[b,S]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t==="edit"&&e){const j=await xt(De(ne,n,e));if(j.exists()){const x=j.data();l({title:x.title||"",slug:x.slug||"",description:x.description||"",status:x.status||"open",published:x.published??!0,events:x.events||[],linkedLocations:x.linkedLocations||[],linkedNpcs:x.linkedNpcs||[],linkedSessions:x.linkedSessions||[],linkedMonsters:x.linkedMonsters||[]})}}})()},[t,e]);async function C(){S(!0);const j=T=>T.map(I=>{const N=I.data();return{id:I.id,label:N.title||N.name||I.id}}),[x,w,E,v]=await Promise.all([Ee(xe(ne,"locations")),Ee(xe(ne,"npcs")),Ee(xe(ne,"sessions")),Ee(xe(ne,"monsters"))]);h(j(x.docs)),p(j(w.docs)),y(j(E.docs)),R(j(v.docs)),S(!1)}D.useEffect(()=>{C()},[]);function O(j){return j.toLowerCase().replace(/[^a-z0-9\- ]/g,"").replace(/\s+/g,"-")}async function V(){var E;const j=(a.slug||a.title||"").trim();if(!((E=a.title)!=null&&E.trim())&&!j){o.error("Please enter a Title.");return}const x=j?O(j):"",w={title:a.title,slug:x,description:a.description,status:a.status,published:a.published,events:a.events,linkedLocations:a.linkedLocations,linkedNpcs:a.linkedNpcs,linkedSessions:a.linkedSessions,linkedMonsters:a.linkedMonsters,updatedAt:ut()};t==="create"&&(w.createdAt=ut());try{let v=e||null;t==="edit"&&v?await wo(De(ne,n,v),w,{merge:!0}):v=(await _o(xe(ne,n),w)).id,o.success("Thread saved"),r(`/admin/${n}/${v}/edit`,{replace:!0})}catch(v){console.error(v),o.error((v==null?void 0:v.message)||"Failed to save thread.")}}return i===null?d.jsx("div",{children:"Loading"}):i?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsxs("h1",{className:"text-2xl mb-4 capitalize",children:[t," Thread"]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx(ke,{title:"Basics",storageKey:"thread-basics",children:d.jsx($9,{title:a.title,slug:a.slug,description:a.description,status:a.status,onChange:j=>l(x=>({...x,...j}))})}),d.jsx(ke,{title:"Timeline Events",storageKey:"thread-events",children:d.jsx(H9,{events:a.events,sessions:m,onChange:j=>l(x=>({...x,events:j}))})}),d.jsx(ke,{title:"Relations",storageKey:"thread-relations",children:d.jsxs("div",{className:"grid gap-4",children:[d.jsx(ke,{title:"Linked Sessions",storageKey:"thread-rel-sessions",children:d.jsx(dt,{title:"",options:m,selected:a.linkedSessions,onChange:j=>l(x=>({...x,linkedSessions:j})),loading:b,createHref:"/admin/sessions/new",onRefresh:C})}),d.jsx(ke,{title:"Linked NPCs",storageKey:"thread-rel-npcs",children:d.jsx(dt,{title:"",options:f,selected:a.linkedNpcs,onChange:j=>l(x=>({...x,linkedNpcs:j})),loading:b,createHref:"/admin/npcs/new",onRefresh:C})}),d.jsx(ke,{title:"Linked Locations",storageKey:"thread-rel-locations",children:d.jsx(dt,{title:"",options:u,selected:a.linkedLocations,onChange:j=>l(x=>({...x,linkedLocations:j})),loading:b,createHref:"/admin/locations/new",onRefresh:C})}),d.jsx(ke,{title:"Linked Monsters",storageKey:"thread-rel-monsters",children:d.jsx(dt,{title:"",options:k,selected:a.linkedMonsters,onChange:j=>l(x=>({...x,linkedMonsters:j})),loading:b,createHref:"/admin/monsters/new",onRefresh:C})})]})}),d.jsx(ke,{title:"Publish",storageKey:"thread-publish",children:d.jsx("div",{className:"card bg-base-200",children:d.jsx("div",{className:"card-body",children:d.jsx("div",{className:"form-control",children:d.jsxs("label",{className:"cursor-pointer label justify-start gap-4",children:[d.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:a.published,onChange:j=>l(x=>({...x,published:j.target.checked}))}),d.jsx("span",{className:"label-text",children:a.published?"Published":"Draft (not visible to players)"})]})})})})}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{className:"btn btn-primary",onClick:V,children:"Save"})})]})]}):d.jsxs("div",{className:"alert alert-error mt-6",children:[d.jsx("h3",{className:"font-bold",children:"Access Denied"}),d.jsx("p",{children:"You do not have permission to edit this content."})]})}function q9(){const[t,e]=D.useState([]),[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(!0),l=ks();D.useEffect(()=>{u()},[]);async function u(){a(!0);try{const p=await Ee(xe(ne,"playerCharacters"));if(p.empty)e([]);else{const y=p.docs.map(k=>({id:k.id,...k.data()})).sort((k,R)=>k.name.toLowerCase().localeCompare(R.name.toLowerCase()));e(y)}}catch(p){console.error("Error loading player characters:",p),l.error("Failed to load player characters")}finally{a(!1)}}async function h(){if(!n.trim()){l.error("Character name is required");return}try{const p=De(xe(ne,"playerCharacters"));await wo(p,{name:n.trim(),playerName:i.trim()||null,createdAt:ut(),updatedAt:ut()}),l.success("Player character added"),r(""),s(""),u()}catch(p){console.error("Error adding player character:",p),l.error("Failed to add player character")}}async function f(p){if(confirm("Are you sure you want to delete this player character?"))try{await ST(De(ne,"playerCharacters",p)),l.success("Player character deleted"),u()}catch(m){console.error("Error deleting player character:",m),l.error("Failed to delete player character")}}return d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsx("h1",{className:"text-2xl mb-4",children:"Player Character Manager"}),d.jsx("p",{className:"mb-4",children:"Add player character names below. These names will be automatically bolded in session notes and other content."}),d.jsxs("div",{className:"bg-base-200 p-4 rounded-lg mb-6",children:[d.jsx("h2",{className:"text-xl mb-3",children:"Add New Player Character"}),d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Character Name"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:n,onChange:p=>r(p.target.value),placeholder:"Character name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Player Name (optional)"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:i,onChange:p=>s(p.target.value),placeholder:"Player name"})]}),d.jsx("button",{className:"btn btn-primary",onClick:h,disabled:!n.trim(),children:"Add Character"})]})]}),d.jsxs("div",{className:"bg-base-200 p-4 rounded-lg",children:[d.jsx("h2",{className:"text-xl mb-3",children:"Player Characters"}),o?d.jsx("div",{className:"text-center py-4",children:"Loading..."}):t.length===0?d.jsx("div",{className:"text-center py-4 italic",children:"No player characters added yet"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Character Name"}),d.jsx("th",{children:"Player Name"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:t.map(p=>d.jsxs("tr",{children:[d.jsx("td",{children:p.name}),d.jsx("td",{children:p.playerName||"-"}),d.jsx("td",{children:d.jsx("button",{className:"btn btn-sm btn-error",onClick:()=>f(p.id),children:"Delete"})})]},p.id))})]})})]})]})}function W9(){const{settings:t,updateSetting:e,loaded:n}=GI();return n?d.jsxs("div",{className:"container mx-auto max-w-3xl",children:[d.jsx("h1",{className:"text-2xl mb-4",children:"Settings"}),d.jsxs("div",{className:"bg-base-200 p-4 rounded-lg mb-6",children:[d.jsx("h2",{className:"text-xl mb-3",children:"Display Settings"}),d.jsxs("div",{className:"form-control",children:[d.jsxs("label",{className:"label cursor-pointer",children:[d.jsx("span",{className:"label-text",children:"Automatically bold player character names in content"}),d.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:t.autoBoldCharacterNames,onChange:r=>e("autoBoldCharacterNames",r.target.checked)})]}),d.jsx("p",{className:"text-sm opacity-70 mt-1",children:"When enabled, player character names will be automatically bolded in session notes and other content. You can manage player character names in the Player Characters section."})]})]})]}):d.jsx("div",{children:"Loading settings..."})}const K9=lR([{element:d.jsx(vV,{}),children:[{path:"/",element:d.jsx(wV,{})},{path:"/calendar",element:d.jsx(_9,{})},{path:"/sessions",element:d.jsx(ol,{collection:"sessions"})},{path:"/sessions/:slug",element:d.jsx(ul,{collection:"sessions"})},{path:"/npcs",element:d.jsx(ol,{collection:"npcs"})},{path:"/npcs/:slug",element:d.jsx(ul,{collection:"npcs"})},{path:"/monsters",element:d.jsx(ol,{collection:"monsters"})},{path:"/monsters/:slug",element:d.jsx(ul,{collection:"monsters"})},{path:"/locations",element:d.jsx(ol,{collection:"locations"})},{path:"/locations/:slug",element:d.jsx(ul,{collection:"locations"})},{path:"/characters",element:d.jsx(ol,{collection:"characters"})},{path:"/characters/:slug",element:d.jsx(ul,{collection:"characters"})},{path:"/threads",element:d.jsx(b9,{})},{path:"/threads/:slug",element:d.jsx(S9,{})},{path:"/search",element:d.jsx(E9,{})},{path:"/admin",element:d.jsx(k9,{})},{path:"/admin/sessions/new",element:d.jsx(I0,{mode:"create"})},{path:"/admin/sessions/:id/edit",element:d.jsx(I0,{mode:"edit"})},{path:"/admin/session-notes",element:d.jsx(C0,{})},{path:"/admin/session-notes/:id",element:d.jsx(C0,{})},{path:"/admin/monsters/new",element:d.jsx(R0,{mode:"create"})},{path:"/admin/monsters/:id/edit",element:d.jsx(R0,{mode:"edit"})},{path:"/admin/npcs/new",element:d.jsx(N0,{mode:"create"})},{path:"/admin/npcs/:id/edit",element:d.jsx(N0,{mode:"edit"})},{path:"/admin/locations/new",element:d.jsx(A0,{mode:"create"})},{path:"/admin/locations/:id/edit",element:d.jsx(A0,{mode:"edit"})},{path:"/admin/characters/new",element:d.jsx(P0,{mode:"create"})},{path:"/admin/characters/:id/edit",element:d.jsx(P0,{mode:"edit"})},{path:"/admin/threads/new",element:d.jsx(j0,{mode:"create"})},{path:"/admin/threads/:id/edit",element:d.jsx(j0,{mode:"edit"})},{path:"/admin/player-characters",element:d.jsx(q9,{})},{path:"/admin/settings",element:d.jsx(W9,{})}]}]);tp.createRoot(document.getElementById("root")).render(d.jsx(q0.StrictMode,{children:d.jsx(gR,{router:K9})}));
